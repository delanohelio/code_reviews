{"pr_number": 12884, "pr_title": "feat: Introduce 3.x and 4.x style of openshift manifests.", "pr_author": "iocanel", "pr_createdAt": "2020-10-22T15:00:28Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/12884", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIzNjc3Nw==", "url": "https://github.com/quarkusio/quarkus/pull/12884#discussion_r510236777", "body": "Can we have a corresponding v4 test?", "bodyText": "Can we have a corresponding v4 test?", "bodyHTML": "<p dir=\"auto\">Can we have a corresponding v4 test?</p>", "author": "geoand", "createdAt": "2020-10-22T15:04:20Z", "path": "integration-tests/kubernetes/quarkus-standard-way/src/test/java/io/quarkus/it/kubernetes/OpenshiftV3Test.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package io.quarkus.it.kubernetes;\n+\n+import static org.assertj.core.api.Assertions.assertThat;\n+import static org.assertj.core.api.Assertions.entry;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.util.Collection;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.assertj.core.api.AbstractObjectAssert;\n+import org.jboss.shrinkwrap.api.ShrinkWrap;\n+import org.jboss.shrinkwrap.api.spec.JavaArchive;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.RegisterExtension;\n+\n+import io.fabric8.kubernetes.api.model.HasMetadata;\n+import io.fabric8.kubernetes.api.model.Service;\n+import io.quarkus.test.ProdBuildResults;\n+import io.quarkus.test.ProdModeTestResults;\n+import io.quarkus.test.QuarkusProdModeTest;\n+\n+public class OpenshiftV3Test {", "originalCommit": "60afd069f24216b88e44e141a87d9b7db612eb40", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI0NjQxMw==", "url": "https://github.com/quarkusio/quarkus/pull/12884#discussion_r510246413", "bodyText": "V4 is the default, it has not special configuration", "author": "iocanel", "createdAt": "2020-10-22T15:17:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIzNjc3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI0Nzc5OA==", "url": "https://github.com/quarkusio/quarkus/pull/12884#discussion_r510247798", "bodyText": "Yeah I know. But do we have a test that asserts the same thing as this test but checks for the v4 conditions?", "author": "geoand", "createdAt": "2020-10-22T15:19:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIzNjc3Nw=="}], "type": "inlineReview"}, {"oid": "8662de0c79d1c33491f895b352aa220cca94282f", "url": "https://github.com/quarkusio/quarkus/commit/8662de0c79d1c33491f895b352aa220cca94282f", "message": "feat: Introdcue 3.x and 4.x style of openshift manifests.", "committedDate": "2020-10-22T15:46:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDg1MDI4NQ==", "url": "https://github.com/quarkusio/quarkus/pull/12884#discussion_r510850285", "body": "```suggestion\r\n     * The OpenShift flavor / version to use.\r\n     * Older versions of OpenShift have minor differences in the labels and fields they support.\r\n     * This option allows users to have their manifests automatically aligned to the OpenShift 'flavor' they use.\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * The openshift flavor / version to use.\n          \n          \n            \n                 * Older versions of Openshift have minor diferrences in the labels and fields they support.\n          \n          \n            \n                 * This option allows users to have their manifests automatically aligned to they openshift 'flavor' they use.\n          \n          \n            \n                 * The OpenShift flavor / version to use.\n          \n          \n            \n                 * Older versions of OpenShift have minor differences in the labels and fields they support.\n          \n          \n            \n                 * This option allows users to have their manifests automatically aligned to the OpenShift 'flavor' they use.", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">The</span> <span class=\"x x-first x-last\">openshift</span> flavor <span class=\"pl-k\">/</span> version to use.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Older</span> versions of <span class=\"pl-smi x x-first x-last\">Openshift</span> have minor <span class=\"x x-first x-last\">diferrences</span> in the labels and fields they support.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">This</span> option allows users to have their manifests automatically aligned to <span class=\"x x-first x-last\">they openshift</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>flavor<span class=\"pl-pds\">'</span></span> they use.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">The</span> <span class=\"pl-smi x x-first x-last\">OpenShift</span> flavor <span class=\"pl-k\">/</span> version to use.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Older</span> versions of <span class=\"pl-smi x x-first x-last\">OpenShift</span> have minor <span class=\"x x-first x-last\">differences</span> in the labels and fields they support.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">This</span> option allows users to have their manifests automatically aligned to <span class=\"x x-first\">the </span><span class=\"pl-smi x x-last\">OpenShift</span> <span class=\"pl-s\"><span class=\"pl-pds\">'</span>flavor<span class=\"pl-pds\">'</span></span> they use.</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "gsmet", "createdAt": "2020-10-23T12:31:42Z", "path": "extensions/kubernetes/vanilla/deployment/src/main/java/io/quarkus/kubernetes/deployment/OpenshiftConfig.java", "diffHunk": "@@ -14,6 +14,19 @@\n @ConfigRoot\n public class OpenshiftConfig implements PlatformConfiguration {\n \n+    public static enum OpenshiftFlavor {\n+        v3,\n+        v4;\n+    }\n+\n+    /**\n+     * The openshift flavor / version to use.\n+     * Older versions of Openshift have minor diferrences in the labels and fields they support.\n+     * This option allows users to have their manifests automatically aligned to they openshift 'flavor' they use.", "originalCommit": "8662de0c79d1c33491f895b352aa220cca94282f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "300fd2e671d3b9affec75d8f96e595f747b99032", "url": "https://github.com/quarkusio/quarkus/commit/300fd2e671d3b9affec75d8f96e595f747b99032", "message": "feat: Introdcue 3.x and 4.x style of openshift manifests.", "committedDate": "2020-10-26T10:28:47Z", "type": "forcePushed"}, {"oid": "300fd2e671d3b9affec75d8f96e595f747b99032", "url": "https://github.com/quarkusio/quarkus/commit/300fd2e671d3b9affec75d8f96e595f747b99032", "message": "feat: Introdcue 3.x and 4.x style of openshift manifests.", "committedDate": "2020-10-26T10:28:47Z", "type": "commit"}]}