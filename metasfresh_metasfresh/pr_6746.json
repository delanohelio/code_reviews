{"pr_number": 6746, "pr_title": "show helpful error message on missing price", "pr_author": "metas-ts", "pr_createdAt": "2020-05-27T15:51:22Z", "pr_url": "https://github.com/metasfresh/metasfresh/pull/6746", "timeline": [{"oid": "735b9cd89826b786a6fa9c3a161c440948d0b7b9", "url": "https://github.com/metasfresh/metasfresh/commit/735b9cd89826b786a6fa9c3a161c440948d0b7b9", "message": "show helpful error message on missing price\n\n* InvoiceLineBL: improve logging; fix the issue by telling the pricing engine to throw an exception on missing price\n  * before this, there was some secondary error which did not guide anyone to the real problem\n* IPricingBL: minor javadoc fix\n* AttachmentEntryService: only minor javadoc-addition", "committedDate": "2020-05-27T15:50:59Z", "type": "commit"}, {"oid": "f6509858a91c2da13d13a52141f1cadd9d23ad13", "url": "https://github.com/metasfresh/metasfresh/commit/f6509858a91c2da13d13a52141f1cadd9d23ad13", "message": "minor: get rid of deprecated Env.ZERO", "committedDate": "2020-05-29T10:41:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQyMjAyMw==", "url": "https://github.com/metasfresh/metasfresh/pull/6746#discussion_r432422023", "body": "```suggestion\r\n\t\t\tlogger.debug(\"invoice line has Price_UOM_ID=null and C_UOM_ID={}; return result ={}\", uomId.getRepoId(), result);\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tlogger.debug(\"invoice line has both Price_UOM_ID=null and C_UOM_ID={}; return result ={}\", uomId.getRepoId(), result);\n          \n          \n            \n            \t\t\tlogger.debug(\"invoice line has Price_UOM_ID=null and C_UOM_ID={}; return result ={}\", uomId.getRepoId(), result);", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t\tlogger<span class=\"pl-k\">.</span>debug(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>invoice line has <span class=\"x x-first x-last\">both </span>Price_UOM_ID=null and C_UOM_ID={}; return result ={}<span class=\"pl-pds\">\"</span></span>, uomId<span class=\"pl-k\">.</span>getRepoId(), result);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\tlogger<span class=\"pl-k\">.</span>debug(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>invoice line has Price_UOM_ID=null and C_UOM_ID={}; return result ={}<span class=\"pl-pds\">\"</span></span>, uomId<span class=\"pl-k\">.</span>getRepoId(), result);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "metas-ts", "createdAt": "2020-05-29T11:27:19Z", "path": "de.metas.business/src/main/java/de/metas/invoice/impl/InvoiceLineBL.java", "diffHunk": "@@ -267,65 +279,90 @@ private TaxCategoryId getTaxCategoryFromOrder(\n \t@Override\n \tpublic void setQtyInvoicedInPriceUOM(final I_C_InvoiceLine invoiceLine)\n \t{\n-\t\tfinal BigDecimal qtyInvoicedInPriceUOM = calculateQtyInvoicedInPriceUOM(invoiceLine);\n-\t\tinvoiceLine.setQtyInvoicedInPriceUOM(qtyInvoicedInPriceUOM);\n+\t\ttry (final MDCCloseable ignored = TableRecordMDC.putTableRecordReference(invoiceLine))\n+\t\t{\n+\t\t\tfinal Quantity qtyInvoicedInPriceUOM = calculateQtyInvoicedInPriceUOM(invoiceLine);\n+\t\t\tinvoiceLine.setQtyInvoicedInPriceUOM(qtyInvoicedInPriceUOM.toBigDecimal());\n+\t\t}\n \t}\n \n-\tprivate BigDecimal calculateQtyInvoicedInPriceUOM(@NonNull final I_C_InvoiceLine ilRecord)\n+\tprivate Quantity calculateQtyInvoicedInPriceUOM(@NonNull final I_C_InvoiceLine ilRecord)\n \t{\n \t\tfinal BigDecimal qtyEntered = ilRecord.getQtyEntered();\n \t\tCheck.assumeNotNull(qtyEntered, \"qtyEntered not null; ilRecord={}\", ilRecord);\n \n \t\tfinal UomId priceUomId = UomId.ofRepoIdOrNull(ilRecord.getPrice_UOM_ID());\n-\t\tif (priceUomId == null)\n-\t\t{\n-\t\t\treturn qtyEntered;\n-\t\t}\n-\n+\t\tfinal UomId uomId = UomId.ofRepoIdOrNull(ilRecord.getC_UOM_ID());\n \t\tfinal ProductId productId = ProductId.ofRepoIdOrNull(ilRecord.getM_Product_ID());\n \n-\t\tfinal IUOMConversionBL uomConversionBL = Services.get(IUOMConversionBL.class);\n-\t\tfinal BigDecimal qtyInPriceUOM = uomConversionBL.convertQty(\n-\t\t\t\tUOMConversionContext.of(productId),\n-\t\t\t\tqtyEntered,\n-\t\t\t\tUomId.ofRepoId(ilRecord.getC_UOM_ID()),\n-\t\t\t\tpriceUomId);\n+\t\tif (priceUomId != null && uomId != null)\n+\t\t{\n+\t\t\tfinal IUOMConversionBL uomConversionBL = Services.get(IUOMConversionBL.class);\n \n-\t\treturn qtyInPriceUOM;\n+\t\t\tfinal Quantity qtyToConvert = Quantitys.create(qtyEntered, uomId);\n+\t\t\tfinal Quantity result = uomConversionBL.convertQuantityTo(qtyToConvert, UOMConversionContext.of(productId), priceUomId);\n+\t\t\tlogger.debug(\"invoice line has both Price_UOM_ID={} and C_UOM_ID={}; return result={}\", priceUomId.getRepoId(), uomId.getRepoId(), result);\n+\t\t\treturn result;\n+\t\t}\n+\t\telse if (uomId != null)\n+\t\t{\n+\t\t\tfinal Quantity result = Quantitys.create(qtyEntered, uomId);\n+\t\t\tlogger.debug(\"invoice line has both Price_UOM_ID=null and C_UOM_ID={}; return result ={}\", uomId.getRepoId(), result);", "originalCommit": "f6509858a91c2da13d13a52141f1cadd9d23ad13", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQyMjE3OA==", "url": "https://github.com/metasfresh/metasfresh/pull/6746#discussion_r432422178", "body": "```suggestion\r\n\t\t\tlogger.debug(\"invoice line has Price_UOM_ID=null, C_UOM_ID=null and M_Product_ID={}; return result={}\", productId.getRepoId(), result);\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tlogger.debug(\"invoice line has Price_UOM_ID=null and C_UOM_ID=null and M_Product_ID={}; return result={}\", productId.getRepoId(), result);\n          \n          \n            \n            \t\t\tlogger.debug(\"invoice line has Price_UOM_ID=null, C_UOM_ID=null and M_Product_ID={}; return result={}\", productId.getRepoId(), result);", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t\tlogger<span class=\"pl-k\">.</span>debug(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>invoice line has Price_UOM_ID=null<span class=\"x x-first x-last\"> and</span> C_UOM_ID=null and M_Product_ID={}; return result={}<span class=\"pl-pds\">\"</span></span>, productId<span class=\"pl-k\">.</span>getRepoId(), result);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\tlogger<span class=\"pl-k\">.</span>debug(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>invoice line has Price_UOM_ID=null<span class=\"x x-first x-last\">,</span> C_UOM_ID=null and M_Product_ID={}; return result={}<span class=\"pl-pds\">\"</span></span>, productId<span class=\"pl-k\">.</span>getRepoId(), result);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "metas-ts", "createdAt": "2020-05-29T11:27:44Z", "path": "de.metas.business/src/main/java/de/metas/invoice/impl/InvoiceLineBL.java", "diffHunk": "@@ -267,65 +279,90 @@ private TaxCategoryId getTaxCategoryFromOrder(\n \t@Override\n \tpublic void setQtyInvoicedInPriceUOM(final I_C_InvoiceLine invoiceLine)\n \t{\n-\t\tfinal BigDecimal qtyInvoicedInPriceUOM = calculateQtyInvoicedInPriceUOM(invoiceLine);\n-\t\tinvoiceLine.setQtyInvoicedInPriceUOM(qtyInvoicedInPriceUOM);\n+\t\ttry (final MDCCloseable ignored = TableRecordMDC.putTableRecordReference(invoiceLine))\n+\t\t{\n+\t\t\tfinal Quantity qtyInvoicedInPriceUOM = calculateQtyInvoicedInPriceUOM(invoiceLine);\n+\t\t\tinvoiceLine.setQtyInvoicedInPriceUOM(qtyInvoicedInPriceUOM.toBigDecimal());\n+\t\t}\n \t}\n \n-\tprivate BigDecimal calculateQtyInvoicedInPriceUOM(@NonNull final I_C_InvoiceLine ilRecord)\n+\tprivate Quantity calculateQtyInvoicedInPriceUOM(@NonNull final I_C_InvoiceLine ilRecord)\n \t{\n \t\tfinal BigDecimal qtyEntered = ilRecord.getQtyEntered();\n \t\tCheck.assumeNotNull(qtyEntered, \"qtyEntered not null; ilRecord={}\", ilRecord);\n \n \t\tfinal UomId priceUomId = UomId.ofRepoIdOrNull(ilRecord.getPrice_UOM_ID());\n-\t\tif (priceUomId == null)\n-\t\t{\n-\t\t\treturn qtyEntered;\n-\t\t}\n-\n+\t\tfinal UomId uomId = UomId.ofRepoIdOrNull(ilRecord.getC_UOM_ID());\n \t\tfinal ProductId productId = ProductId.ofRepoIdOrNull(ilRecord.getM_Product_ID());\n \n-\t\tfinal IUOMConversionBL uomConversionBL = Services.get(IUOMConversionBL.class);\n-\t\tfinal BigDecimal qtyInPriceUOM = uomConversionBL.convertQty(\n-\t\t\t\tUOMConversionContext.of(productId),\n-\t\t\t\tqtyEntered,\n-\t\t\t\tUomId.ofRepoId(ilRecord.getC_UOM_ID()),\n-\t\t\t\tpriceUomId);\n+\t\tif (priceUomId != null && uomId != null)\n+\t\t{\n+\t\t\tfinal IUOMConversionBL uomConversionBL = Services.get(IUOMConversionBL.class);\n \n-\t\treturn qtyInPriceUOM;\n+\t\t\tfinal Quantity qtyToConvert = Quantitys.create(qtyEntered, uomId);\n+\t\t\tfinal Quantity result = uomConversionBL.convertQuantityTo(qtyToConvert, UOMConversionContext.of(productId), priceUomId);\n+\t\t\tlogger.debug(\"invoice line has both Price_UOM_ID={} and C_UOM_ID={}; return result={}\", priceUomId.getRepoId(), uomId.getRepoId(), result);\n+\t\t\treturn result;\n+\t\t}\n+\t\telse if (uomId != null)\n+\t\t{\n+\t\t\tfinal Quantity result = Quantitys.create(qtyEntered, uomId);\n+\t\t\tlogger.debug(\"invoice line has both Price_UOM_ID=null and C_UOM_ID={}; return result ={}\", uomId.getRepoId(), result);\n+\t\t\treturn result;\n+\t\t}\n+\t\telse if (productId != null)\n+\t\t{\n+\t\t\tfinal UomId stockUomId = Services.get(IProductBL.class).getStockUOMId(productId);\n+\t\t\tfinal Quantity result = Quantitys.create(ilRecord.getQtyInvoiced(), stockUomId);\n+\t\t\tlogger.debug(\"invoice line has Price_UOM_ID=null and C_UOM_ID=null and M_Product_ID={}; return result={}\", productId.getRepoId(), result);", "originalCommit": "f6509858a91c2da13d13a52141f1cadd9d23ad13", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjQyMjU1Ng==", "url": "https://github.com/metasfresh/metasfresh/pull/6746#discussion_r432422556", "body": "```suggestion\r\n\t\tthrow new AdempiereException(\"given param 'invoiceLine' needs to have at least M_Product_ID>0 or C_UOM_ID>0\")\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tthrow new AdempiereException(\"given param 'invoiceLine' needs to have at least M_Product_ID>0\")\n          \n          \n            \n            \t\tthrow new AdempiereException(\"given param 'invoiceLine' needs to have at least M_Product_ID>0 or C_UOM_ID>0\")", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-k\">throw</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">AdempiereException</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>given param 'invoiceLine' needs to have at least M_Product_ID&gt;0<span class=\"pl-pds\">\"</span></span>)</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-k\">throw</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">AdempiereException</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>given param 'invoiceLine' needs to have at least M_Product_ID&gt;0<span class=\"x x-first x-last\"> or C_UOM_ID&gt;0</span><span class=\"pl-pds\">\"</span></span>)</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "metas-ts", "createdAt": "2020-05-29T11:28:32Z", "path": "de.metas.business/src/main/java/de/metas/invoice/impl/InvoiceLineBL.java", "diffHunk": "@@ -267,65 +279,90 @@ private TaxCategoryId getTaxCategoryFromOrder(\n \t@Override\n \tpublic void setQtyInvoicedInPriceUOM(final I_C_InvoiceLine invoiceLine)\n \t{\n-\t\tfinal BigDecimal qtyInvoicedInPriceUOM = calculateQtyInvoicedInPriceUOM(invoiceLine);\n-\t\tinvoiceLine.setQtyInvoicedInPriceUOM(qtyInvoicedInPriceUOM);\n+\t\ttry (final MDCCloseable ignored = TableRecordMDC.putTableRecordReference(invoiceLine))\n+\t\t{\n+\t\t\tfinal Quantity qtyInvoicedInPriceUOM = calculateQtyInvoicedInPriceUOM(invoiceLine);\n+\t\t\tinvoiceLine.setQtyInvoicedInPriceUOM(qtyInvoicedInPriceUOM.toBigDecimal());\n+\t\t}\n \t}\n \n-\tprivate BigDecimal calculateQtyInvoicedInPriceUOM(@NonNull final I_C_InvoiceLine ilRecord)\n+\tprivate Quantity calculateQtyInvoicedInPriceUOM(@NonNull final I_C_InvoiceLine ilRecord)\n \t{\n \t\tfinal BigDecimal qtyEntered = ilRecord.getQtyEntered();\n \t\tCheck.assumeNotNull(qtyEntered, \"qtyEntered not null; ilRecord={}\", ilRecord);\n \n \t\tfinal UomId priceUomId = UomId.ofRepoIdOrNull(ilRecord.getPrice_UOM_ID());\n-\t\tif (priceUomId == null)\n-\t\t{\n-\t\t\treturn qtyEntered;\n-\t\t}\n-\n+\t\tfinal UomId uomId = UomId.ofRepoIdOrNull(ilRecord.getC_UOM_ID());\n \t\tfinal ProductId productId = ProductId.ofRepoIdOrNull(ilRecord.getM_Product_ID());\n \n-\t\tfinal IUOMConversionBL uomConversionBL = Services.get(IUOMConversionBL.class);\n-\t\tfinal BigDecimal qtyInPriceUOM = uomConversionBL.convertQty(\n-\t\t\t\tUOMConversionContext.of(productId),\n-\t\t\t\tqtyEntered,\n-\t\t\t\tUomId.ofRepoId(ilRecord.getC_UOM_ID()),\n-\t\t\t\tpriceUomId);\n+\t\tif (priceUomId != null && uomId != null)\n+\t\t{\n+\t\t\tfinal IUOMConversionBL uomConversionBL = Services.get(IUOMConversionBL.class);\n \n-\t\treturn qtyInPriceUOM;\n+\t\t\tfinal Quantity qtyToConvert = Quantitys.create(qtyEntered, uomId);\n+\t\t\tfinal Quantity result = uomConversionBL.convertQuantityTo(qtyToConvert, UOMConversionContext.of(productId), priceUomId);\n+\t\t\tlogger.debug(\"invoice line has both Price_UOM_ID={} and C_UOM_ID={}; return result={}\", priceUomId.getRepoId(), uomId.getRepoId(), result);\n+\t\t\treturn result;\n+\t\t}\n+\t\telse if (uomId != null)\n+\t\t{\n+\t\t\tfinal Quantity result = Quantitys.create(qtyEntered, uomId);\n+\t\t\tlogger.debug(\"invoice line has both Price_UOM_ID=null and C_UOM_ID={}; return result ={}\", uomId.getRepoId(), result);\n+\t\t\treturn result;\n+\t\t}\n+\t\telse if (productId != null)\n+\t\t{\n+\t\t\tfinal UomId stockUomId = Services.get(IProductBL.class).getStockUOMId(productId);\n+\t\t\tfinal Quantity result = Quantitys.create(ilRecord.getQtyInvoiced(), stockUomId);\n+\t\t\tlogger.debug(\"invoice line has Price_UOM_ID=null and C_UOM_ID=null and M_Product_ID={}; return result={}\", productId.getRepoId(), result);\n+\t\t\treturn result;\n+\t\t}\n+\n+\t\t// this private method shouldn't have called\n+\t\tthrow new AdempiereException(\"given param 'invoiceLine' needs to have at least M_Product_ID>0\")", "originalCommit": "f6509858a91c2da13d13a52141f1cadd9d23ad13", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "27be2ed2cf15e2890d8a114bb6a134f6e470c664", "url": "https://github.com/metasfresh/metasfresh/commit/27be2ed2cf15e2890d8a114bb6a134f6e470c664", "message": "Apply suggestions from code review\r\n\r\nPR #6746", "committedDate": "2020-05-29T11:30:17Z", "type": "commit"}]}