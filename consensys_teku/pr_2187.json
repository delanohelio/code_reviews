{"pr_number": 2187, "pr_title": "added command line flag for data-storage archive-frequency", "pr_author": "rolfyone", "pr_createdAt": "2020-06-22T01:50:20Z", "pr_url": "https://github.com/ConsenSys/teku/pull/2187", "timeline": [{"oid": "d26a25ff6ce589a8c0e993b1d838a6e55562b8cf", "url": "https://github.com/ConsenSys/teku/commit/d26a25ff6ce589a8c0e993b1d838a6e55562b8cf", "message": "added command line flags for data-storage changes\n\n - a hidden flag that will accept the version of db to create, this is --Xdata-storage-create-db-version <VER> (default: 3)\n\n - a flag that will become visible in help once the feature is done, --data-storage-archive-frequency=<FREQUENCY> (default: 2048)\n\n Addresses #2180\n\nSigned-off-by: Paul Harris <paul.harris@consensys.net>", "committedDate": "2020-06-22T01:49:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI5NDI2MQ==", "url": "https://github.com/ConsenSys/teku/pull/2187#discussion_r443294261", "body": "We're storing archived states, not slots.\r\n```suggestion\r\n          \"Sets the frequency, in slots, at which to store archived states to disk.\",\r\n```", "bodyText": "We're storing archived states, not slots.\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      \"Sets the frequency at which to store archived slots to disk. (slot modulo frequency == 0)\",\n          \n          \n            \n                      \"Sets the frequency, in slots, at which to store archived states to disk.\",", "bodyHTML": "<p dir=\"auto\">We're storing archived states, not slots.</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">          <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Sets the frequency<span class=\"x x-first x-last\"> </span>at which to store archived <span class=\"x x-first x-last\">slots</span> to disk.<span class=\"x x-first x-last\"> (slot modulo frequency == 0)</span><span class=\"pl-pds\">\"</span></span>,</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">          <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Sets the frequency<span class=\"x x-first x-last\">, in slots, </span>at which to store archived <span class=\"x x-first x-last\">states</span> to disk.<span class=\"pl-pds\">\"</span></span>,</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "ajsutton", "createdAt": "2020-06-22T02:51:52Z", "path": "teku/src/main/java/tech/pegasys/teku/cli/options/DataOptions.java", "diffHunk": "@@ -34,6 +34,25 @@\n       arity = \"1\")\n   private StateStorageMode dataStorageMode = StateStorageMode.PRUNE;\n \n+  @Option(\n+      names = {\"--data-storage-archive-frequency\"},\n+      hidden = true,\n+      paramLabel = \"<FREQUENCY>\",\n+      description =\n+          \"Sets the frequency at which to store archived slots to disk. (slot modulo frequency == 0)\",", "originalCommit": "d26a25ff6ce589a8c0e993b1d838a6e55562b8cf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "abe08a4151663826209653ec97c938e8061e6f9e", "url": "https://github.com/ConsenSys/teku/commit/abe08a4151663826209653ec97c938e8061e6f9e", "message": "Update teku/src/main/java/tech/pegasys/teku/cli/options/DataOptions.java\n\nCo-authored-by: Adrian Sutton <adrian@symphonious.net>", "committedDate": "2020-06-22T03:17:50Z", "type": "commit"}, {"oid": "4706b0f2f641448b149d94ebe21477aab9c1af6a", "url": "https://github.com/ConsenSys/teku/commit/4706b0f2f641448b149d94ebe21477aab9c1af6a", "message": "Merge remote-tracking branch 'upstream/master' into 2180", "committedDate": "2020-06-22T03:18:37Z", "type": "commit"}, {"oid": "d6511b3c212f5ca97631ec3b654558f71af9b60b", "url": "https://github.com/ConsenSys/teku/commit/d6511b3c212f5ca97631ec3b654558f71af9b60b", "message": "Merge branch '2180' of https://github.com/rolfyone/artemis into 2180", "committedDate": "2020-06-22T03:19:04Z", "type": "commit"}, {"oid": "9c89fe14fb11a042f0858344cfe389e1e5d6c1ac", "url": "https://github.com/ConsenSys/teku/commit/9c89fe14fb11a042f0858344cfe389e1e5d6c1ac", "message": "spotless", "committedDate": "2020-06-22T03:25:35Z", "type": "commit"}]}