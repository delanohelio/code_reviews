{"pr_number": 8712, "pr_title": "Issue #8618: Text Blocks syntax check update for UnnecessaryParentheses", "pr_author": "nmancus1", "pr_createdAt": "2020-08-18T19:29:10Z", "pr_url": "https://github.com/checkstyle/checkstyle/pull/8712", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQzMjM3OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8712#discussion_r472432379", "body": "@pbludov @esilkensen I'm not sure whether we want to use the new utility introduced at https://github.com/checkstyle/checkstyle/pull/8705 to modify the string here, but I would still need to replace the newline control characters with the text \"\\n\" to keep the error message to one line (like in our AST).  Let me know if we should do this or not, I can make the changes. ", "bodyText": "@pbludov @esilkensen I'm not sure whether we want to use the new utility introduced at #8705 to modify the string here, but I would still need to replace the newline control characters with the text \"\\n\" to keep the error message to one line (like in our AST).  Let me know if we should do this or not, I can make the changes.", "bodyHTML": "<p dir=\"auto\"><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/pbludov/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/pbludov\">@pbludov</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/esilkensen/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/esilkensen\">@esilkensen</a> I'm not sure whether we want to use the new utility introduced at <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"680475407\" data-permission-text=\"Title is private\" data-url=\"https://github.com/checkstyle/checkstyle/issues/8705\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/checkstyle/checkstyle/pull/8705/hovercard\" href=\"https://github.com/checkstyle/checkstyle/pull/8705\">#8705</a> to modify the string here, but I would still need to replace the newline control characters with the text \"\\n\" to keep the error message to one line (like in our AST).  Let me know if we should do this or not, I can make the changes.</p>", "author": "nmancus1", "createdAt": "2020-08-18T19:33:06Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/UnnecessaryParenthesesCheck.java", "diffHunk": "@@ -332,6 +349,13 @@ else if (surrounded && isInTokenList(type, LITERALS)) {\n                     log(ast, MSG_STRING,\n                         chopString(ast.getText()));\n                 }\n+                else if (type == TokenTypes.TEXT_BLOCK_LITERAL_BEGIN) {\n+                    // Strip newline control characters to keep message as single line.\n+                    final String logString = NEWLINE.matcher(\n+                        ast.getFirstChild().getText()).replaceAll(\"\\\\\\\\n\");\n+                    // Add quotes so that log message is consistent with STRING_LITERAL\n+                    log(ast, MSG_STRING, QUOTE + logString + QUOTE);", "originalCommit": "eb9772b099c27b1912dd0b566900806eec9ca632", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjc2OTA1NA==", "url": "https://github.com/checkstyle/checkstyle/pull/8712#discussion_r472769054", "bodyText": "In addition, the text should be truncated. Please note the chopString method in this check.", "author": "pbludov", "createdAt": "2020-08-19T06:45:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQzMjM3OQ=="}], "type": "inlineReview"}, {"oid": "cbdc1e0204fc606074537c7fa6881c518ecffab9", "url": "https://github.com/checkstyle/checkstyle/commit/cbdc1e0204fc606074537c7fa6881c518ecffab9", "message": "Issue #8618: Text Blocks syntax check update for UnnecessaryParentheses", "committedDate": "2020-08-19T13:30:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzgxMzM3OQ==", "url": "https://github.com/checkstyle/checkstyle/pull/8712#discussion_r473813379", "body": "Should this use `\\R`?", "bodyText": "Should this use \\R?", "bodyHTML": "<p dir=\"auto\">Should this use <code>\\R</code>?</p>", "author": "esilkensen", "createdAt": "2020-08-20T09:31:22Z", "path": "src/main/java/com/puppycrawl/tools/checkstyle/checks/coding/UnnecessaryParenthesesCheck.java", "diffHunk": "@@ -205,6 +209,16 @@\n      */\n     public static final String MSG_LAMBDA = \"unnecessary.paren.lambda\";\n \n+    /**\n+     * Compiled pattern used to match newline control characters, for replacement.\n+     */\n+    private static final Pattern NEWLINE = Pattern.compile(\"\\n\");", "originalCommit": "cbdc1e0204fc606074537c7fa6881c518ecffab9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkxNjg2Mw==", "url": "https://github.com/checkstyle/checkstyle/pull/8712#discussion_r473916863", "bodyText": "Yes, that seems like it always a good idea. I will do this from now on.", "author": "nmancus1", "createdAt": "2020-08-20T12:01:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzgxMzM3OQ=="}], "type": "inlineReview"}, {"oid": "2bd0c56a4f4bef60d9cb8f3270e88f83ceca90e0", "url": "https://github.com/checkstyle/checkstyle/commit/2bd0c56a4f4bef60d9cb8f3270e88f83ceca90e0", "message": "Issue #8618: Text Blocks syntax check update for UnnecessaryParentheses", "committedDate": "2020-08-20T12:00:49Z", "type": "commit"}, {"oid": "2bd0c56a4f4bef60d9cb8f3270e88f83ceca90e0", "url": "https://github.com/checkstyle/checkstyle/commit/2bd0c56a4f4bef60d9cb8f3270e88f83ceca90e0", "message": "Issue #8618: Text Blocks syntax check update for UnnecessaryParentheses", "committedDate": "2020-08-20T12:00:49Z", "type": "forcePushed"}]}