{"pr_number": 3037, "pr_title": "[NCL-5701] - Port tests to RestResponseFormattingTest", "pr_author": "vibe13", "pr_createdAt": "2020-05-12T16:45:56Z", "pr_url": "https://github.com/project-ncl/pnc/pull/3037", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMyODUzNw==", "url": "https://github.com/project-ncl/pnc/pull/3037#discussion_r424328537", "body": "Please extract the common API path to constant. It will change in the future.", "bodyText": "Please extract the common API path to constant. It will change in the future.", "bodyHTML": "<p dir=\"auto\">Please extract the common API path to constant. It will change in the future.</p>", "author": "janinko", "createdAt": "2020-05-13T10:15:53Z", "path": "integration-test/src/test/java/org/jboss/pnc/integration_new/RestResponseFormattingTest.java", "diffHunk": "@@ -78,24 +58,23 @@ public void shouldReturnErrorInJsonFormat() {\n                 .statusCode(Response.Status.INTERNAL_SERVER_ERROR.getStatusCode())\n                 .body(\"errorMessage\", IsEqual.equalTo(\"Test exception.\"))\n                 .when()\n-                .get(\"/pnc-rest/rest/test/throw\")\n+                .get(\"/pnc-rest-new/rest-new/debug/throw\")", "originalCommit": "6d839d15c1c980fdebe188a11d8b866b0469fcd8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzMzMxOA==", "url": "https://github.com/project-ncl/pnc/pull/3037#discussion_r424333318", "body": "you build a response here but then do nothing with it. \r\nFrom JAX-RS specification\r\n> 3.3.3 Return Type\r\n> `void` Results in an empty entity body with a 204 status code.\r\n\r\nSo Having just empty method will do the works.", "bodyText": "you build a response here but then do nothing with it.\nFrom JAX-RS specification\n\n3.3.3 Return Type\nvoid Results in an empty entity body with a 204 status code.\n\nSo Having just empty method will do the works.", "bodyHTML": "<p dir=\"auto\">you build a response here but then do nothing with it.<br>\nFrom JAX-RS specification</p>\n<blockquote>\n<p dir=\"auto\">3.3.3 Return Type<br>\n<code>void</code> Results in an empty entity body with a 204 status code.</p>\n</blockquote>\n<p dir=\"auto\">So Having just empty method will do the works.</p>", "author": "janinko", "createdAt": "2020-05-13T10:24:49Z", "path": "rest-new/src/main/java/org/jboss/pnc/rest/endpoints/internal/DebugEndpointImpl.java", "diffHunk": "@@ -75,4 +78,23 @@ public static Build newBuild() {\n                 .temporaryBuild(true)\n                 .build();\n     }\n+\n+    @Override\n+    public void throwEx() throws Exception {\n+        RuntimeException nested = new RuntimeException(\"Root exception.\");\n+        throw new Exception(\"Test exception.\", nested);\n+    }\n+\n+    @Override\n+    public void nocontent() throws Exception {\n+        Response.status(Response.Status.NO_CONTENT).build();", "originalCommit": "6d839d15c1c980fdebe188a11d8b866b0469fcd8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ1MDA4Nw==", "url": "https://github.com/project-ncl/pnc/pull/3037#discussion_r424450087", "bodyText": "thanks!", "author": "vibe13", "createdAt": "2020-05-13T13:46:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzMzMxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDMzNDQ5OQ==", "url": "https://github.com/project-ncl/pnc/pull/3037#discussion_r424334499", "body": "How can this work? You build a repsoinse but then don't use it anywhere.", "bodyText": "How can this work? You build a repsoinse but then don't use it anywhere.", "bodyHTML": "<p dir=\"auto\">How can this work? You build a repsoinse but then don't use it anywhere.</p>", "author": "janinko", "createdAt": "2020-05-13T10:26:58Z", "path": "rest-new/src/main/java/org/jboss/pnc/rest/endpoints/internal/DebugEndpointImpl.java", "diffHunk": "@@ -75,4 +78,23 @@ public static Build newBuild() {\n                 .temporaryBuild(true)\n                 .build();\n     }\n+\n+    @Override\n+    public void throwEx() throws Exception {\n+        RuntimeException nested = new RuntimeException(\"Root exception.\");\n+        throw new Exception(\"Test exception.\", nested);\n+    }\n+\n+    @Override\n+    public void nocontent() throws Exception {\n+        Response.status(Response.Status.NO_CONTENT).build();\n+    }\n+\n+    @Override\n+    public void redirect() throws Exception {\n+        Response.status(Response.Status.UNAUTHORIZED)\n+                .header(HttpHeaders.WWW_AUTHENTICATE, \"Basic realm=\\\"ApplicationRealm\\\"\")\n+                .build();", "originalCommit": "6d839d15c1c980fdebe188a11d8b866b0469fcd8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4ceaaad42b53fe92b2987378c6911c20ebf64c8c", "url": "https://github.com/project-ncl/pnc/commit/4ceaaad42b53fe92b2987378c6911c20ebf64c8c", "message": "[NCL-5701] - Port tests to RestResponseFormattingTest", "committedDate": "2020-05-13T10:46:21Z", "type": "commit"}, {"oid": "f9790936eee4239d6ecfad9b865ce2d83c02c39a", "url": "https://github.com/project-ncl/pnc/commit/f9790936eee4239d6ecfad9b865ce2d83c02c39a", "message": "Fixes after review", "committedDate": "2020-05-13T14:17:57Z", "type": "commit"}, {"oid": "f9790936eee4239d6ecfad9b865ce2d83c02c39a", "url": "https://github.com/project-ncl/pnc/commit/f9790936eee4239d6ecfad9b865ce2d83c02c39a", "message": "Fixes after review", "committedDate": "2020-05-13T14:17:57Z", "type": "forcePushed"}]}