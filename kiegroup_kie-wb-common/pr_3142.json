{"pr_number": 3142, "pr_title": "DROOLS-5011 : Multiselect dropdown for enumerated values", "pr_author": "Rikkola", "pr_createdAt": "2020-02-05T20:57:41Z", "pr_url": "https://github.com/kiegroup/kie-wb-common/pull/3142", "merge_commit": "fecfe10feaea45741e17ff4341b7dcac34578bb8", "timeline": [{"oid": "1aed501e20290c7e1701b93648241c138fdb2e06", "url": "https://github.com/kiegroup/kie-wb-common/commit/1aed501e20290c7e1701b93648241c138fdb2e06", "message": "[AF-2422] Fixed path issues on Windows OS.", "committedDate": "2020-02-06T20:24:06Z", "type": "forcePushed"}, {"oid": "dbfc39baf7d19fde73169116ea00a98876a321ee", "url": "https://github.com/kiegroup/kie-wb-common/commit/dbfc39baf7d19fde73169116ea00a98876a321ee", "message": "DROOLS-5011 : Multiselect dropdown for enumerated values", "committedDate": "2020-02-07T08:16:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjMwODYyMQ==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3142#discussion_r376308621", "body": "Do I want to be reallllllllly picky here?\r\n\r\nIf we have an enumeration like: `[1=\"one\", 2=\"two, deux\", 3=\"three\"]` this will break.\r\n\r\nDon't you have a utility class somewhere to handle the correct splits?", "bodyText": "Do I want to be reallllllllly picky here?\nIf we have an enumeration like: [1=\"one\", 2=\"two, deux\", 3=\"three\"] this will break.\nDon't you have a utility class somewhere to handle the correct splits?", "bodyHTML": "<p dir=\"auto\">Do I want to be reallllllllly picky here?</p>\n<p dir=\"auto\">If we have an enumeration like: <code>[1=\"one\", 2=\"two, deux\", 3=\"three\"]</code> this will break.</p>\n<p dir=\"auto\">Don't you have a utility class somewhere to handle the correct splits?</p>", "author": "manstis", "createdAt": "2020-02-07T10:04:06Z", "path": "kie-wb-common-widgets/kie-wb-decorated-grid-widget/src/main/java/org/kie/workbench/common/widgets/decoratedgrid/client/widget/cells/AbstractProxyPopupDropDownListBox.java", "diffHunk": "@@ -80,11 +81,22 @@ public void render(final Cell.Context context,\n                        final SafeHtmlRenderer<String> renderer) {\n         //Render value\n         if (value != null) {\n-            String label = getLabel(convertToString(value));\n+            final String label = makeLabel(convertToString(value));\n+\n             sb.append(renderer.render(label));\n         }\n     }\n \n+    private String makeLabel(final String convert) {\n+        if (listBox.isMultipleSelect()) {", "originalCommit": "dbfc39baf7d19fde73169116ea00a98876a321ee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM0OTQ5Nw==", "url": "https://github.com/kiegroup/kie-wb-common/pull/3142#discussion_r376349497", "bodyText": "Sure we can use it here. That bug report will come if we don't :)", "author": "Rikkola", "createdAt": "2020-02-07T11:42:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjMwODYyMQ=="}], "type": "inlineReview", "revised_code": {"commit": "a8a96191acd22378cc36554ed4673cd40f402a96", "changed_code": [{"header": "diff --git a/kie-wb-common-widgets/kie-wb-decorated-grid-widget/src/main/java/org/kie/workbench/common/widgets/decoratedgrid/client/widget/cells/AbstractProxyPopupDropDownListBox.java b/kie-wb-common-widgets/kie-wb-decorated-grid-widget/src/main/java/org/kie/workbench/common/widgets/decoratedgrid/client/widget/cells/AbstractProxyPopupDropDownListBox.java\nindex 925fa63e8b..4768173a62 100644\n--- a/kie-wb-common-widgets/kie-wb-decorated-grid-widget/src/main/java/org/kie/workbench/common/widgets/decoratedgrid/client/widget/cells/AbstractProxyPopupDropDownListBox.java\n+++ b/kie-wb-common-widgets/kie-wb-decorated-grid-widget/src/main/java/org/kie/workbench/common/widgets/decoratedgrid/client/widget/cells/AbstractProxyPopupDropDownListBox.java\n", "chunk": "@@ -89,7 +90,10 @@ public abstract class AbstractProxyPopupDropDownListBox<C> implements ProxyPopup\n \n     private String makeLabel(final String convert) {\n         if (listBox.isMultipleSelect()) {\n-            return Arrays.stream(convert.split(\",\"))\n+            String[] array = ListSplitter.splitPreserveQuotes(\"\\\"\",\n+                                                              true,\n+                                                              convert);\n+            return Arrays.stream(array)\n                     .map(s -> getLabel(s))\n                     .collect(Collectors.joining(\",\"));\n         } else {\n", "next_change": null}]}, "revised_code_in_main": {"commit": "fecfe10feaea45741e17ff4341b7dcac34578bb8", "changed_code": [{"header": "diff --git a/kie-wb-common-widgets/kie-wb-decorated-grid-widget/src/main/java/org/kie/workbench/common/widgets/decoratedgrid/client/widget/cells/AbstractProxyPopupDropDownListBox.java b/kie-wb-common-widgets/kie-wb-decorated-grid-widget/src/main/java/org/kie/workbench/common/widgets/decoratedgrid/client/widget/cells/AbstractProxyPopupDropDownListBox.java\nindex 925fa63e8b..4768173a62 100644\n--- a/kie-wb-common-widgets/kie-wb-decorated-grid-widget/src/main/java/org/kie/workbench/common/widgets/decoratedgrid/client/widget/cells/AbstractProxyPopupDropDownListBox.java\n+++ b/kie-wb-common-widgets/kie-wb-decorated-grid-widget/src/main/java/org/kie/workbench/common/widgets/decoratedgrid/client/widget/cells/AbstractProxyPopupDropDownListBox.java\n", "chunk": "@@ -89,7 +90,10 @@ public abstract class AbstractProxyPopupDropDownListBox<C> implements ProxyPopup\n \n     private String makeLabel(final String convert) {\n         if (listBox.isMultipleSelect()) {\n-            return Arrays.stream(convert.split(\",\"))\n+            String[] array = ListSplitter.splitPreserveQuotes(\"\\\"\",\n+                                                              true,\n+                                                              convert);\n+            return Arrays.stream(array)\n                     .map(s -> getLabel(s))\n                     .collect(Collectors.joining(\",\"));\n         } else {\n", "next_change": null}]}, "commits_in_main": [{"oid": "fecfe10feaea45741e17ff4341b7dcac34578bb8", "message": "Merge commit", "committedDate": null}]}, {"oid": "a8a96191acd22378cc36554ed4673cd40f402a96", "url": "https://github.com/kiegroup/kie-wb-common/commit/a8a96191acd22378cc36554ed4673cd40f402a96", "message": "DROOLS-5011 : Multiselect dropdown for enumerated values", "committedDate": "2020-02-07T16:57:33Z", "type": "commit"}, {"oid": "a8a96191acd22378cc36554ed4673cd40f402a96", "url": "https://github.com/kiegroup/kie-wb-common/commit/a8a96191acd22378cc36554ed4673cd40f402a96", "message": "DROOLS-5011 : Multiselect dropdown for enumerated values", "committedDate": "2020-02-07T16:57:33Z", "type": "forcePushed"}]}