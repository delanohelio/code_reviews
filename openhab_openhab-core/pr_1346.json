{"pr_number": 1346, "pr_title": "ChannelDTO bugfixes", "pr_author": "silamon", "pr_createdAt": "2020-01-29T20:23:33Z", "pr_url": "https://github.com/openhab/openhab-core/pull/1346", "timeline": [{"oid": "9563645763b44997e960935435b19f736fce5873", "url": "https://github.com/openhab/openhab-core/commit/9563645763b44997e960935435b19f736fce5873", "message": "Fix bug in ChannelDTOMapper\n\nSigned-off-by: Simon Lamon <simonlamon93@hotmail.com>\n(cherry picked from commit 9463958c8c39b70aa8b9aaaab7550748fa38ddef)", "committedDate": "2020-01-29T19:04:21Z", "type": "commit"}, {"oid": "7b64c3e0c45fb830645fc9987b5be817396485f2", "url": "https://github.com/openhab/openhab-core/commit/7b64c3e0c45fb830645fc9987b5be817396485f2", "message": "Added unit tests for ChannelDTO and ThingDTO / BridgeDTO\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>\n(cherry picked from commit 017a2fcb66b4c109e800a6191da727e336a31663)", "committedDate": "2020-01-29T19:07:51Z", "type": "commit"}, {"oid": "5745dde9602e2f8dfdd15ea90395b80930779d36", "url": "https://github.com/openhab/openhab-core/commit/5745dde9602e2f8dfdd15ea90395b80930779d36", "message": "Add AutoUpdatePolicy to ChannelDTO\n\nSigned-off-by: Simon Lamon <simonlamon93@hotmail.com>", "committedDate": "2020-01-29T19:22:08Z", "type": "commit"}, {"oid": "58b28a2a12f368aab6fce19d0eec4058aee80c35", "url": "https://github.com/openhab/openhab-core/commit/58b28a2a12f368aab6fce19d0eec4058aee80c35", "message": "Make AutoUpdatePolicy a String in ChannelDTO\n\nSigned-off-by: Simon Lamon <simonlamon93@hotmail.com>", "committedDate": "2020-01-29T20:16:34Z", "type": "commit"}, {"oid": "765526e2353395dc8d39b881f6556499d28ee35b", "url": "https://github.com/openhab/openhab-core/commit/765526e2353395dc8d39b881f6556499d28ee35b", "message": "Fill in a default AutoUpdatePolicy\n\nSigned-off-by: Simon Lamon <simonlamon93@hotmail.com>", "committedDate": "2020-01-29T20:37:18Z", "type": "commit"}, {"oid": "4723a2d28110c709484b4d0856cf3b74d4647fb4", "url": "https://github.com/openhab/openhab-core/commit/4723a2d28110c709484b4d0856cf3b74d4647fb4", "message": "Use null for AutoUpdatePolicy instead of default value\n\nSigned-off-by: Simon Lamon <simonlamon93@hotmail.com>", "committedDate": "2020-01-31T18:25:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY1OTcyOQ==", "url": "https://github.com/openhab/openhab-core/pull/1346#discussion_r373659729", "body": "I would prefer to use `String.format()` instead of concatenation for exception messages.\r\n\r\n```suggestion\r\n        throw new IllegalArgumentException(String.format(\"Unknown auto update policy: '%s', input));\r\n```", "bodyText": "I would prefer to use String.format() instead of concatenation for exception messages.\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    throw new IllegalArgumentException(\"Unknown auto update policy: '\" + input + \"'\");\n          \n          \n            \n                    throw new IllegalArgumentException(String.format(\"Unknown auto update policy: '%s', input));", "bodyHTML": "<p dir=\"auto\">I would prefer to use <code>String.format()</code> instead of concatenation for exception messages.</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-k\">throw</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">IllegalArgumentException</span>(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Unknown auto update policy: '<span class=\"pl-pds x x-first\">\"</span></span><span class=\"x\"> </span><span class=\"pl-k x\">+</span><span class=\"x x-last\"> </span>input<span class=\"x x-first\"> </span><span class=\"pl-k x\">+</span><span class=\"x\"> </span><span class=\"pl-s\"><span class=\"pl-pds x\">\"</span><span class=\"x\">'</span><span class=\"pl-pds x x-last\">\"</span></span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-k\">throw</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">IllegalArgumentException</span>(<span class=\"pl-smi x x-first\">String</span><span class=\"pl-k x\">.</span><span class=\"x x-last\">format(</span><span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Unknown auto update policy: '<span class=\"x x-first x-last\">%s', </span>input<span class=\"x x-first x-last\">)</span>);</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "cweitkamp", "createdAt": "2020-01-31T19:58:19Z", "path": "bundles/org.openhab.core.thing/src/main/java/org/openhab/core/thing/type/AutoUpdatePolicy.java", "diffHunk": "@@ -36,5 +36,26 @@\n      * An automatic state update should be sent by the framework because no updates will be sent by the binding.\n      * This usually is the case when devices don't expose their current state to the handler.\n      */\n-    RECOMMEND,\n+    RECOMMEND;\n+\n+    /**\n+     * Parses the input string into a {@link AutoUpdatePolicy}.\n+     *\n+     * @param input the input string\n+     * @return the parsed AutoUpdatePolicy.\n+     * @throws IllegalArgumentException if the input couldn't be parsed.\n+     */\n+    public static AutoUpdatePolicy parse(String input) {\n+        if (input == null) {\n+            return DEFAULT;\n+        }\n+\n+        for (AutoUpdatePolicy value : values()) {\n+            if (value.name().equalsIgnoreCase(input)) {\n+                return value;\n+            }\n+        }\n+\n+        throw new IllegalArgumentException(\"Unknown auto update policy: '\" + input + \"'\");", "originalCommit": "4723a2d28110c709484b4d0856cf3b74d4647fb4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzY2MDM1OA==", "url": "https://github.com/openhab/openhab-core/pull/1346#discussion_r373660358", "body": "Please remove the full stop at the end of JavaDoc params or return values\r\n\r\n```suggestion\r\n     * @return the parsed AutoUpdatePolicy\r\n```", "bodyText": "Please remove the full stop at the end of JavaDoc params or return values\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @return the parsed AutoUpdatePolicy.\n          \n          \n            \n                 * @return the parsed AutoUpdatePolicy", "bodyHTML": "<p dir=\"auto\">Please remove the full stop at the end of JavaDoc params or return values</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">     <span class=\"pl-k\">*</span> <span class=\"pl-k\">@return</span> the parsed <span class=\"pl-smi\">AutoUpdatePolicy</span><span class=\"x x-first x-last\">.</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-k\">@return</span> the parsed <span class=\"pl-smi\">AutoUpdatePolicy</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "cweitkamp", "createdAt": "2020-01-31T19:59:46Z", "path": "bundles/org.openhab.core.thing/src/main/java/org/openhab/core/thing/type/AutoUpdatePolicy.java", "diffHunk": "@@ -36,5 +36,26 @@\n      * An automatic state update should be sent by the framework because no updates will be sent by the binding.\n      * This usually is the case when devices don't expose their current state to the handler.\n      */\n-    RECOMMEND,\n+    RECOMMEND;\n+\n+    /**\n+     * Parses the input string into a {@link AutoUpdatePolicy}.\n+     *\n+     * @param input the input string\n+     * @return the parsed AutoUpdatePolicy.", "originalCommit": "4723a2d28110c709484b4d0856cf3b74d4647fb4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4935fe8f6a189fa5152f897f69c126f03b4e6a09", "url": "https://github.com/openhab/openhab-core/commit/4935fe8f6a189fa5152f897f69c126f03b4e6a09", "message": "PR feedback\n\nSigned-off-by: Simon Lamon <simonlamon93@hotmail.com>", "committedDate": "2020-01-31T21:09:54Z", "type": "commit"}]}