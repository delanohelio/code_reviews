{"pr_number": 16322, "pr_title": "[Service Bus] Remove the use of environment variable in Service Bus", "pr_author": "YijunXieMS", "pr_createdAt": "2020-10-14T22:42:52Z", "pr_url": "https://github.com/Azure/azure-sdk-for-java/pull/16322", "timeline": [{"oid": "0ce8d23a79a855553c79b88ed5ff20d0a9ebbf1a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0ce8d23a79a855553c79b88ed5ff20d0a9ebbf1a", "message": "Remove usage of environment variable AZURE_SERVICE_BUS_CONNECTION_STRING", "committedDate": "2020-10-14T22:30:42Z", "type": "commit"}, {"oid": "0ea336245733067b7bb68b202928e3a796b9ae2a", "url": "https://github.com/Azure/azure-sdk-for-java/commit/0ea336245733067b7bb68b202928e3a796b9ae2a", "message": "Initialize configuration", "committedDate": "2020-10-15T00:15:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc3ODI4NQ==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16322#discussion_r505778285", "body": "The problem with removing this line is that if someone does:\r\n\r\n```java\r\nvar client = new ServiceBusClientBuilder().configuration(null)\r\n    .buildClient();\r\n```\r\n\r\nIt won't use the default credential because you only assign it on object creation.", "bodyText": "The problem with removing this line is that if someone does:\nvar client = new ServiceBusClientBuilder().configuration(null)\n    .buildClient();\nIt won't use the default credential because you only assign it on object creation.", "bodyHTML": "<p dir=\"auto\">The problem with removing this line is that if someone does:</p>\n<div class=\"highlight highlight-source-java position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"var client = new ServiceBusClientBuilder().configuration(null)\n    .buildClient();\n\"><pre><span class=\"pl-k\">var</span> client <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">ServiceBusClientBuilder</span>()<span class=\"pl-k\">.</span>configuration(<span class=\"pl-c1\">null</span>)\n    .buildClient();</pre></div>\n<p dir=\"auto\">It won't use the default credential because you only assign it on object creation.</p>", "author": "conniey", "createdAt": "2020-10-15T19:10:45Z", "path": "sdk/servicebus/azure-messaging-servicebus/src/main/java/com/azure/messaging/servicebus/ServiceBusClientBuilder.java", "diffHunk": "@@ -332,19 +331,11 @@ private ServiceBusConnectionProcessor getOrCreateConnectionProcessor(MessageSeri\n     }\n \n     private ConnectionOptions getConnectionOptions() {\n-        configuration = configuration == null ? Configuration.getGlobalConfiguration().clone() : configuration;", "originalCommit": "0ea336245733067b7bb68b202928e3a796b9ae2a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTg5OTIzMA==", "url": "https://github.com/Azure/azure-sdk-for-java/pull/16322#discussion_r505899230", "bodyText": "Added the line back", "author": "YijunXieMS", "createdAt": "2020-10-15T22:26:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc3ODI4NQ=="}], "type": "inlineReview"}, {"oid": "6331c1b8379bca03568cb449b24d0ebeec5fc761", "url": "https://github.com/Azure/azure-sdk-for-java/commit/6331c1b8379bca03568cb449b24d0ebeec5fc761", "message": "Add back configuration initialization in getConnectionOptions", "committedDate": "2020-10-15T22:02:59Z", "type": "commit"}]}