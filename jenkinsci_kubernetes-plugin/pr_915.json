{"pr_number": 915, "pr_title": "[JENKINS-57841] Change defaults for command and args", "pr_author": "kerogers-cloudbees", "pr_createdAt": "2020-12-09T21:22:14Z", "pr_url": "https://github.com/jenkinsci/kubernetes-plugin/pull/915", "timeline": [{"oid": "ce73ef57ceb5f0b11694962f875d661d4eec9302", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/ce73ef57ceb5f0b11694962f875d661d4eec9302", "message": "[JENKINS-57841] Change defaults for command and args for Container Template. Document Windows defaults in the help.", "committedDate": "2020-12-09T21:19:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY1ODY4NA==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/915#discussion_r539658684", "body": "Uh, why?", "bodyText": "Uh, why?", "bodyHTML": "<p dir=\"auto\">Uh, why?</p>", "author": "jglick", "createdAt": "2020-12-09T21:24:26Z", "path": "src/main/java/org/csanchez/jenkins/plugins/kubernetes/ContainerTemplate.java", "diffHunk": "@@ -133,17 +135,19 @@ public void setCommand(String command) {\n         this.command = command;\n     }\n \n+    @CheckForNull", "originalCommit": "ce73ef57ceb5f0b11694962f875d661d4eec9302", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY2MzczOA==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/915#discussion_r539663738", "bodyText": "Habit I guess. I guess with the other change it's not necessary.", "author": "kerogers-cloudbees", "createdAt": "2020-12-09T21:32:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY1ODY4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY2Njk1NQ==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/915#discussion_r539666955", "bodyText": "In fact it is wrong: if you are going to mark it at all, it should be @Nonnull (or @NonNull depending on the package imported).", "author": "jglick", "createdAt": "2020-12-09T21:37:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY1ODY4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY1ODc0Ng==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/915#discussion_r539658746", "body": "ditto", "bodyText": "ditto", "bodyHTML": "<p dir=\"auto\">ditto</p>", "author": "jglick", "createdAt": "2020-12-09T21:24:34Z", "path": "src/main/java/org/csanchez/jenkins/plugins/kubernetes/ContainerTemplate.java", "diffHunk": "@@ -133,17 +135,19 @@ public void setCommand(String command) {\n         this.command = command;\n     }\n \n+    @CheckForNull\n     public String getCommand() {\n-        return command;\n+        return this.command == null ? DescriptorImpl.defaultCommand : this.command;\n     }\n \n     @DataBoundSetter\n     public void setArgs(String args) {\n         this.args = args;\n     }\n \n+    @CheckForNull", "originalCommit": "ce73ef57ceb5f0b11694962f875d661d4eec9302", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY3MzAyMA==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/915#discussion_r539673020", "bodyText": "done", "author": "kerogers-cloudbees", "createdAt": "2020-12-09T21:48:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY1ODc0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY2NjY3OA==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/915#discussion_r539666678", "body": "```suggestion\r\n        public final static String DEFAULT_COMMAND = \"sleep\";\r\n        public final static String DEFAULT_ARGS = \"9999999\";\r\n```\r\nCustomary to use all caps for `static final` vars (constants). Not sure if Jelly has different rules..", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    public final static String defaultCommand = \"sleep\";\n          \n          \n            \n                    public final static String defaultArgs = \"9999999\";\n          \n          \n            \n                    public final static String DEFAULT_COMMAND = \"sleep\";\n          \n          \n            \n                    public final static String DEFAULT_ARGS = \"9999999\";\n          \n      \n    \n    \n  \n\nCustomary to use all caps for static final vars (constants). Not sure if Jelly has different rules..", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-k\">public</span> <span class=\"pl-k\">final</span> <span class=\"pl-k\">static</span> <span class=\"pl-smi\">String</span> <span class=\"x x-first x-last\">defaultCommand</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sleep<span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-k\">public</span> <span class=\"pl-k\">final</span> <span class=\"pl-k\">static</span> <span class=\"pl-smi\">String</span> <span class=\"x x-first x-last\">defaultArgs</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>9999999<span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-k\">public</span> <span class=\"pl-k\">final</span> <span class=\"pl-k\">static</span> <span class=\"pl-smi\">String</span> <span class=\"pl-c1 x x-first x-last\">DEFAULT_COMMAND</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>sleep<span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-k\">public</span> <span class=\"pl-k\">final</span> <span class=\"pl-k\">static</span> <span class=\"pl-smi\">String</span> <span class=\"pl-c1 x x-first x-last\">DEFAULT_ARGS</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>9999999<span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n\n<p dir=\"auto\">Customary to use all caps for <code>static final</code> vars (constants). Not sure if Jelly has different rules..</p>", "author": "schottsfired", "createdAt": "2020-12-09T21:37:30Z", "path": "src/main/java/org/csanchez/jenkins/plugins/kubernetes/ContainerTemplate.java", "diffHunk": "@@ -350,6 +354,8 @@ public FormValidation doCheckImage(@QueryParameter String value) {\n         public String getWorkingDir() {\n             return DEFAULT_WORKING_DIR;\n         }\n+        public final static String defaultCommand = \"sleep\";\n+        public final static String defaultArgs = \"9999999\";", "originalCommit": "ce73ef57ceb5f0b11694962f875d661d4eec9302", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY2ODk3OA==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/915#discussion_r539668978", "bodyText": "I'll test it to see if jelly is doing some sort of transformation, and change it if not.", "author": "kerogers-cloudbees", "createdAt": "2020-12-09T21:41:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY2NjY3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY3Mjc5Nw==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/915#discussion_r539672797", "bodyText": "done.", "author": "kerogers-cloudbees", "createdAt": "2020-12-09T21:47:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY2NjY3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY3NDc1OQ==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/915#discussion_r539674759", "bodyText": "Jelly does not have different rules.", "author": "jglick", "createdAt": "2020-12-09T21:51:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY2NjY3OA=="}], "type": "inlineReview"}, {"oid": "179775fe7396953bca238217333f9fcebf0e0a1d", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/179775fe7396953bca238217333f9fcebf0e0a1d", "message": "[JENKINS-57841] changes from review. more to come.", "committedDate": "2020-12-09T21:40:13Z", "type": "commit"}, {"oid": "6add077c9527694d8493d3bc596c2d0f299b49f4", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/6add077c9527694d8493d3bc596c2d0f299b49f4", "message": "[JENKINS-57841] Use the normal java style conventions for final static strings.", "committedDate": "2020-12-09T21:46:57Z", "type": "commit"}, {"oid": "d363c50fcf92a9f097a9a2e13f7bce0202b06bfc", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/d363c50fcf92a9f097a9a2e13f7bce0202b06bfc", "message": "[JENKINS-57841] Reverting the defaults out of the java class. Changing the defaults in the jelly file. Also updating the examples to reflect the changes.", "committedDate": "2020-12-10T16:18:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDMzODg3MQ==", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/915#discussion_r540338871", "body": "just\r\n\r\n```bash\r\ngit checkout master -- src/main/java/org/csanchez/jenkins/plugins/kubernetes/ContainerTemplate.java\r\n```\r\n\r\nto revert irrelevant changes", "bodyText": "just\ngit checkout master -- src/main/java/org/csanchez/jenkins/plugins/kubernetes/ContainerTemplate.java\nto revert irrelevant changes", "bodyHTML": "<p dir=\"auto\">just</p>\n<div class=\"highlight highlight-source-shell position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"git checkout master -- src/main/java/org/csanchez/jenkins/plugins/kubernetes/ContainerTemplate.java\n\"><pre>git checkout master -- src/main/java/org/csanchez/jenkins/plugins/kubernetes/ContainerTemplate.java</pre></div>\n<p dir=\"auto\">to revert irrelevant changes</p>", "author": "jglick", "createdAt": "2020-12-10T17:01:15Z", "path": "src/main/java/org/csanchez/jenkins/plugins/kubernetes/ContainerTemplate.java", "diffHunk": "@@ -1,31 +1,29 @@\n package org.csanchez.jenkins.plugins.kubernetes;\n \n-import java.io.Serializable;\n-import java.util.ArrayList;\n-import java.util.Collections;\n-import java.util.List;\n-import java.util.Map;\n-import java.util.TreeMap;\n-\n-import org.apache.commons.lang.StringUtils;\n-import org.csanchez.jenkins.plugins.kubernetes.model.TemplateEnvVar;\n-import org.jenkinsci.Symbol;\n-import org.kohsuke.accmod.Restricted;\n-import org.kohsuke.accmod.restrictions.DoNotUse;\n-import org.kohsuke.stapler.DataBoundConstructor;\n-import org.kohsuke.stapler.DataBoundSetter;\n-\n import com.google.common.base.Preconditions;\n-\n import hudson.Extension;\n import hudson.Util;\n import hudson.model.AbstractDescribableImpl;\n import hudson.model.Descriptor;\n import hudson.model.DescriptorVisibilityFilter;\n import hudson.util.FormValidation;\n import jenkins.model.Jenkins;\n+import org.apache.commons.lang.StringUtils;\n+import org.csanchez.jenkins.plugins.kubernetes.model.TemplateEnvVar;\n+import org.jenkinsci.Symbol;\n+import org.kohsuke.accmod.Restricted;\n+import org.kohsuke.accmod.restrictions.DoNotUse;\n+import org.kohsuke.stapler.DataBoundConstructor;\n+import org.kohsuke.stapler.DataBoundSetter;\n import org.kohsuke.stapler.QueryParameter;\n \n+import java.io.Serializable;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.TreeMap;", "originalCommit": "d363c50fcf92a9f097a9a2e13f7bce0202b06bfc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4468f33f96bb96e7fd11932b52ca390461d6632c", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/4468f33f96bb96e7fd11932b52ca390461d6632c", "message": "[JENKINS-57841] reverting irrelevant changes to ContainerTemplate.java", "committedDate": "2020-12-10T18:27:04Z", "type": "commit"}, {"oid": "8065f2828cb5fcc38bac0d31cf99cb0fa398b06b", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/8065f2828cb5fcc38bac0d31cf99cb0fa398b06b", "message": "[JENKINS-57841] Make yaml more consistent. remove unnecessary properties.", "committedDate": "2020-12-10T18:31:39Z", "type": "commit"}, {"oid": "a9d98ce96c7c39ec9b3325c13fe460146433c35a", "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/a9d98ce96c7c39ec9b3325c13fe460146433c35a", "message": "Fixup args inline help", "committedDate": "2020-12-23T09:20:10Z", "type": "commit"}]}