{"pr_number": 714, "pr_title": "dns: add ability to set dns failure refresh rate", "pr_author": "junr03", "pr_createdAt": "2020-02-29T18:32:07Z", "pr_url": "https://github.com/envoyproxy/envoy-mobile/pull/714", "timeline": [{"oid": "92080e6b7d313a0dfdb3e14b5356d84dc6c343ac", "url": "https://github.com/envoyproxy/envoy-mobile/commit/92080e6b7d313a0dfdb3e14b5356d84dc6c343ac", "message": "wip\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-02-29T10:54:13Z", "type": "commit"}, {"oid": "b53ec329890842a45936405d250ac9a411c80d1f", "url": "https://github.com/envoyproxy/envoy-mobile/commit/b53ec329890842a45936405d250ac9a411c80d1f", "message": "tests passing\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-02-29T12:29:56Z", "type": "commit"}, {"oid": "54413b0ba7b33af3186d82cb48fe9514538472e9", "url": "https://github.com/envoyproxy/envoy-mobile/commit/54413b0ba7b33af3186d82cb48fe9514538472e9", "message": "fmt\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-02-29T18:35:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA0NzAyMQ==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/714#discussion_r386047021", "body": "I considered putting all of the dns settings into a struct (same on iOS), but ultimately decided to keep this flat for this change.\r\n\r\nI think if this lists keeps growing we need to first think about how we are going to manage config as it gets more unruly. But for now keeping it flat seemed the least intrusive change.", "bodyText": "I considered putting all of the dns settings into a struct (same on iOS), but ultimately decided to keep this flat for this change.\nI think if this lists keeps growing we need to first think about how we are going to manage config as it gets more unruly. But for now keeping it flat seemed the least intrusive change.", "bodyHTML": "<p dir=\"auto\">I considered putting all of the dns settings into a struct (same on iOS), but ultimately decided to keep this flat for this change.</p>\n<p dir=\"auto\">I think if this lists keeps growing we need to first think about how we are going to manage config as it gets more unruly. But for now keeping it flat seemed the least intrusive change.</p>", "author": "junr03", "createdAt": "2020-02-29T18:40:33Z", "path": "library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java", "diffHunk": "@@ -5,22 +5,29 @@\n   public final String statsDomain;\n   public final Integer connectTimeoutSeconds;\n   public final Integer dnsRefreshSeconds;", "originalCommit": "54413b0ba7b33af3186d82cb48fe9514538472e9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU0MTEyMQ==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/714#discussion_r386541121", "bodyText": "sounds good", "author": "rebello95", "createdAt": "2020-03-02T17:35:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA0NzAyMQ=="}], "type": "inlineReview", "revised_code": null}, {"oid": "95fd2c78ace3c598716cb0319da968ace999a2ae", "url": "https://github.com/envoyproxy/envoy-mobile/commit/95fd2c78ace3c598716cb0319da968ace999a2ae", "message": "java test\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-02-29T18:42:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU0MTE3Ng==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/714#discussion_r386541176", "body": "```suggestion\r\n   * @param statsDomain                  the domain to flush stats to.\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * @param statsDomain                  The domain to flush stats to.\n          \n          \n            \n               * @param statsDomain                  the domain to flush stats to.", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">   <span class=\"pl-k\">*</span> <span class=\"pl-k\">@param</span> statsDomain                  <span class=\"pl-smi x x-first x-last\">The</span> domain to flush stats to.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">   <span class=\"pl-k\">*</span> <span class=\"pl-k\">@param</span> statsDomain                  <span class=\"x x-first x-last\">the</span> domain to flush stats to.</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "rebello95", "createdAt": "2020-03-02T17:35:12Z", "path": "library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java", "diffHunk": "@@ -5,22 +5,29 @@\n   public final String statsDomain;\n   public final Integer connectTimeoutSeconds;\n   public final Integer dnsRefreshSeconds;\n+  public final Integer dnsFailureRefreshSecondsBase;\n+  public final Integer dnsFailureRefreshSecondsMax;\n   public final Integer statsFlushSeconds;\n \n   /**\n    * Create an EnvoyConfiguration with a user provided configuration values.\n    *\n-   * @param statsDomain           The domain to flush stats to.\n-   * @param connectTimeoutSeconds timeout for new network connections to hosts in\n-   *                              the cluster.\n-   * @param dnsRefreshSeconds     rate in seconds to refresh DNS.\n-   * @param statsFlushSeconds     interval at which to flush Envoy stats.\n+   * @param statsDomain                  The domain to flush stats to.", "originalCommit": "95fd2c78ace3c598716cb0319da968ace999a2ae", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1f4f09bcb120bb44adc8ad69b840761413d5630e", "changed_code": [{"header": "diff --git a/library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java b/library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java\nindex 75c8279b..665477dd 100644\n--- a/library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java\n+++ b/library/java/src/io/envoyproxy/envoymobile/engine/EnvoyConfiguration.java\n", "chunk": "@@ -12,7 +12,7 @@ public class EnvoyConfiguration {\n   /**\n    * Create an EnvoyConfiguration with a user provided configuration values.\n    *\n-   * @param statsDomain                  The domain to flush stats to.\n+   * @param statsDomain                  the domain to flush stats to.\n    * @param connectTimeoutSeconds        timeout for new network connections to hosts in\n    *                                     the cluster.\n    * @param dnsRefreshSeconds            rate in seconds to refresh DNS.\n", "next_change": null}]}}, {"oid": "1f4f09bcb120bb44adc8ad69b840761413d5630e", "url": "https://github.com/envoyproxy/envoy-mobile/commit/1f4f09bcb120bb44adc8ad69b840761413d5630e", "message": "fixups\n\nSigned-off-by: Michael Rebello <me@michaelrebello.com>", "committedDate": "2020-03-02T17:38:23Z", "type": "commit"}]}