{"pr_number": 64091, "pr_title": "Resolve minbound maxbound NullPointerException", "pr_author": "alishahusain", "pr_createdAt": "2020-10-23T04:51:53Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/64091", "timeline": [{"oid": "970c3f9dfec7e3efee3e7415aaa68f01aef8fd5b", "url": "https://github.com/elastic/elasticsearch/commit/970c3f9dfec7e3efee3e7415aaa68f01aef8fd5b", "message": "changed minBound maxBound return type to Double", "committedDate": "2020-10-22T05:40:32Z", "type": "commit"}, {"oid": "5b7dc2806759a0b828aafdad07919b38fd9609f2", "url": "https://github.com/elastic/elasticsearch/commit/5b7dc2806759a0b828aafdad07919b38fd9609f2", "message": "resolved nullPointerException", "committedDate": "2020-10-23T02:27:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEwMjMzOA==", "url": "https://github.com/elastic/elasticsearch/pull/64091#discussion_r512102338", "body": "I think this should be other way around: `POSITIVE_INFINITY` for min and `NEGATIVE_INFiNITY` for max. Otherwise specifying null extended bounds would mean we want bounds to extend bounds to the entire range. This should be also consistent with the behaviour which was before this issues was introduced in #60556. \r\n\r\nPlease also note that extendedBounds themselves can be null, so I would suggest using [`DoubleBounds#getEffectiveMin`](https://github.com/elastic/elasticsearch/blob/bfc62a419e7cd1f7f8bc0a3026a2f6ecc361fd45/server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DoubleBounds.java#L140) instead.  ", "bodyText": "I think this should be other way around: POSITIVE_INFINITY for min and NEGATIVE_INFiNITY for max. Otherwise specifying null extended bounds would mean we want bounds to extend bounds to the entire range. This should be also consistent with the behaviour which was before this issues was introduced in #60556.\nPlease also note that extendedBounds themselves can be null, so I would suggest using DoubleBounds#getEffectiveMin instead.", "bodyHTML": "<p dir=\"auto\">I think this should be other way around: <code>POSITIVE_INFINITY</code> for min and <code>NEGATIVE_INFiNITY</code> for max. Otherwise specifying null extended bounds would mean we want bounds to extend bounds to the entire range. This should be also consistent with the behaviour which was before this issues was introduced in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"670263945\" data-permission-text=\"Title is private\" data-url=\"https://github.com/elastic/elasticsearch/issues/60556\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/elastic/elasticsearch/pull/60556/hovercard\" href=\"https://github.com/elastic/elasticsearch/pull/60556\">#60556</a>.</p>\n<p dir=\"auto\">Please also note that extendedBounds themselves can be null, so I would suggest using <a href=\"https://github.com/elastic/elasticsearch/blob/bfc62a419e7cd1f7f8bc0a3026a2f6ecc361fd45/server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DoubleBounds.java#L140\"><code>DoubleBounds#getEffectiveMin</code></a> instead.</p>", "author": "imotov", "createdAt": "2020-10-26T16:36:59Z", "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/HistogramAggregationBuilder.java", "diffHunk": "@@ -194,11 +194,17 @@ public HistogramAggregationBuilder offset(double offset) {\n \n     /** Get the current minimum bound that is set on this builder. */\n     public double minBound() {\n+        if (extendedBounds.getMin() == null) {\n+            return Double.NEGATIVE_INFINITY;", "originalCommit": "5b7dc2806759a0b828aafdad07919b38fd9609f2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2e52ee962e8f7c4b04ea8ae29aa4938dcae20b64", "url": "https://github.com/elastic/elasticsearch/commit/2e52ee962e8f7c4b04ea8ae29aa4938dcae20b64", "message": "modified minbound maxbound", "committedDate": "2020-10-28T21:47:43Z", "type": "commit"}, {"oid": "9268d7bc90d3da6e05dde83b1cbb49f7550d9571", "url": "https://github.com/elastic/elasticsearch/commit/9268d7bc90d3da6e05dde83b1cbb49f7550d9571", "message": "Merge branch 'master' into resolve-minbound-maxbound-exception", "committedDate": "2020-10-28T23:21:53Z", "type": "commit"}]}