{"pr_number": 53456, "pr_title": "Use boolean methods for allowed realm types in license state", "pr_author": "rjernst", "pr_createdAt": "2020-03-12T08:38:30Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/53456", "timeline": [{"oid": "8a2c0053e60595e2f930e3686e15f0d165788932", "url": "https://github.com/elastic/elasticsearch/commit/8a2c0053e60595e2f930e3686e15f0d165788932", "message": "Use boolean methods for allowed realm types in license state\n\nIn xpack the license state contains methods to determine whether a\nparticular feature is allowed to be used. The one exception is\nallowsRealmTypes() which returns an enum of the types of realms allowed.\nThis change converts the enum values to boolean methods. There are 2\nnotable changes: NONE is removed as we always fall back to basic license\nbehavior, and NATIVE is not needed because it would always return true\nsince we should always have a basic license.", "committedDate": "2020-03-12T08:35:57Z", "type": "commit"}, {"oid": "2851d18d999ef387d05bf3a6160b512d83f29886", "url": "https://github.com/elastic/elasticsearch/commit/2851d18d999ef387d05bf3a6160b512d83f29886", "message": "Merge branch 'master' into refactor_license4", "committedDate": "2020-03-12T08:56:27Z", "type": "commit"}, {"oid": "d6bf13f5365fa710403e15611a8150418c64528e", "url": "https://github.com/elastic/elasticsearch/commit/d6bf13f5365fa710403e15611a8150418c64528e", "message": "fix reversed logic", "committedDate": "2020-03-12T18:46:58Z", "type": "commit"}, {"oid": "357035f94b7483545a2a3e0fd4e4fccd380b770c", "url": "https://github.com/elastic/elasticsearch/commit/357035f94b7483545a2a3e0fd4e4fccd380b770c", "message": "Merge branch 'master' into refactor_license4", "committedDate": "2020-03-12T19:08:39Z", "type": "commit"}, {"oid": "9e38f8c85ca7be63edd74b4d66210bbe1bf93ec2", "url": "https://github.com/elastic/elasticsearch/commit/9e38f8c85ca7be63edd74b4d66210bbe1bf93ec2", "message": "revert saml check", "committedDate": "2020-03-12T22:51:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQwNzM0Nw==", "url": "https://github.com/elastic/elasticsearch/pull/53456#discussion_r392407347", "body": "While this may never happen in practice, we need to have a consistent view of the license state for correctness here.\r\n\r\n```suggestion\r\n        final XPackLicenseState licenseStateSnapshot = copyCurrentLicenseState();\r\n        if (licenseStateSnapshot.isAuthAllowed() == false) {\r\n            return Collections.emptyList();\r\n        }\r\n```", "bodyText": "While this may never happen in practice, we need to have a consistent view of the license state for correctness here.\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (licenseState.isAuthAllowed() == false) {\n          \n          \n            \n                        return Collections.emptyList();\n          \n          \n            \n                    }\n          \n          \n            \n                    final XPackLicenseState licenseStateSnapshot = copyCurrentLicenseState();\n          \n          \n            \n                    if (licenseStateSnapshot.isAuthAllowed() == false) {\n          \n          \n            \n                        return Collections.emptyList();\n          \n          \n            \n                    }", "bodyHTML": "<p dir=\"auto\">While this may never happen in practice, we need to have a consistent view of the license state for correctness here.</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"141\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-k\">if</span> (licenseState<span class=\"pl-k\">.</span>isAuthAllowed() <span class=\"pl-k\">==</span> <span class=\"pl-c1\">false</span>) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"142\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-k\">return</span> <span class=\"pl-smi\">Collections</span><span class=\"pl-k\">.</span>emptyList();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"143\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"141\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-k\">final</span> <span class=\"pl-smi\">XPackLicenseState</span> licenseStateSnapshot <span class=\"pl-k\">=</span> copyCurrentLicenseState();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"142\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-k\">if</span> (licenseStateSnapshot<span class=\"pl-k\">.</span>isAuthAllowed() <span class=\"pl-k\">==</span> <span class=\"pl-c1\">false</span>) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"143\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            <span class=\"pl-k\">return</span> <span class=\"pl-smi\">Collections</span><span class=\"pl-k\">.</span>emptyList();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"144\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        }</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "jaymode", "createdAt": "2020-03-13T18:42:04Z", "path": "x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/Realms.java", "diffHunk": "@@ -153,17 +137,13 @@ public Realms(Settings settings, Environment env, Map<String, Realm.Factory> fac\n         if (licenseState.isAuthAllowed() == false) {\n             return Collections.emptyList();\n         }", "originalCommit": "9e38f8c85ca7be63edd74b4d66210bbe1bf93ec2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQwNzY4OQ==", "url": "https://github.com/elastic/elasticsearch/pull/53456#discussion_r392407689", "body": "Continuation of the previous comment.\r\n\r\n```suggestion\r\n        if (licenseStateSnapshot.areAllRealmsAllowed()) {\r\n            return realms;\r\n        } else if (licenseStateSnapshot.areStandardRealmsAllowed()) {\r\n            return standardRealmsOnly;\r\n        } else {\r\n            // native realms are basic licensed, and always allowed, even for an expired license\r\n            return nativeRealmsOnly;\r\n```", "bodyText": "Continuation of the previous comment.\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (licenseState.areAllRealmsAllowed()) {\n          \n          \n            \n                        return realms;\n          \n          \n            \n                    } else if (licenseState.areStandardRealmsAllowed()) {\n          \n          \n            \n                        return standardRealmsOnly;\n          \n          \n            \n                    } else {\n          \n          \n            \n                        // native realms are basic licensed, and always allowed, even for an expired license\n          \n          \n            \n                        return nativeRealmsOnly;\n          \n          \n            \n                    if (licenseStateSnapshot.areAllRealmsAllowed()) {\n          \n          \n            \n                        return realms;\n          \n          \n            \n                    } else if (licenseStateSnapshot.areStandardRealmsAllowed()) {\n          \n          \n            \n                        return standardRealmsOnly;\n          \n          \n            \n                    } else {\n          \n          \n            \n                        // native realms are basic licensed, and always allowed, even for an expired license\n          \n          \n            \n                        return nativeRealmsOnly;", "bodyHTML": "<p dir=\"auto\">Continuation of the previous comment.</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"148\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-k\">if</span> (<span class=\"x x-first x-last\">licenseState</span><span class=\"pl-k\">.</span>areAllRealmsAllowed()) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"149\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-k\">return</span> realms;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"150\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (<span class=\"x x-first x-last\">licenseState</span><span class=\"pl-k\">.</span>areStandardRealmsAllowed()) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"151\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-k\">return</span> standardRealmsOnly;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"152\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        } <span class=\"pl-k\">else</span> {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"153\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-c\"><span class=\"pl-c\">//</span> native realms are basic licensed, and always allowed, even for an expired license</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"154\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-k\">return</span> nativeRealmsOnly;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"148\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-k\">if</span> (<span class=\"x x-first x-last\">licenseStateSnapshot</span><span class=\"pl-k\">.</span>areAllRealmsAllowed()) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"149\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            <span class=\"pl-k\">return</span> realms;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"150\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (<span class=\"x x-first x-last\">licenseStateSnapshot</span><span class=\"pl-k\">.</span>areStandardRealmsAllowed()) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"151\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            <span class=\"pl-k\">return</span> standardRealmsOnly;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"152\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        } <span class=\"pl-k\">else</span> {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"153\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            <span class=\"pl-c\"><span class=\"pl-c\">//</span> native realms are basic licensed, and always allowed, even for an expired license</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"154\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            <span class=\"pl-k\">return</span> nativeRealmsOnly;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "jaymode", "createdAt": "2020-03-13T18:42:51Z", "path": "x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/Realms.java", "diffHunk": "@@ -153,17 +137,13 @@ public Realms(Settings settings, Environment env, Map<String, Realm.Factory> fac\n         if (licenseState.isAuthAllowed() == false) {\n             return Collections.emptyList();\n         }\n-\n-        AllowedRealmType allowedRealmType = licenseState.allowedRealmType();\n-        switch (allowedRealmType) {\n-            case ALL:\n-                return Collections.unmodifiableList(realms);\n-            case DEFAULT:\n-                return Collections.unmodifiableList(standardRealmsOnly);\n-            case NATIVE:\n-                return Collections.unmodifiableList(nativeRealmsOnly);\n-            default:\n-                throw new IllegalStateException(\"authentication should not be enabled\");\n+        if (licenseState.areAllRealmsAllowed()) {\n+            return realms;\n+        } else if (licenseState.areStandardRealmsAllowed()) {\n+            return standardRealmsOnly;\n+        } else {\n+            // native realms are basic licensed, and always allowed, even for an expired license\n+            return nativeRealmsOnly;", "originalCommit": "9e38f8c85ca7be63edd74b4d66210bbe1bf93ec2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQwODM3Mw==", "url": "https://github.com/elastic/elasticsearch/pull/53456#discussion_r392408373", "body": "For correctness, this method should also get a snapshot of the license state and possibly even pass it into an internal version of `asList()` that accepts the snapshot.", "bodyText": "For correctness, this method should also get a snapshot of the license state and possibly even pass it into an internal version of asList() that accepts the snapshot.", "bodyHTML": "<p dir=\"auto\">For correctness, this method should also get a snapshot of the license state and possibly even pass it into an internal version of <code>asList()</code> that accepts the snapshot.</p>", "author": "jaymode", "createdAt": "2020-03-13T18:44:20Z", "path": "x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/Realms.java", "diffHunk": "@@ -128,9 +113,8 @@ public Realms(Settings settings, Environment env, Map<String, Realm.Factory> fac\n             return Collections.unmodifiableList(realms);\n         }\n \n-        AllowedRealmType allowedRealmType = licenseState.allowedRealmType();\n         // If all realms are allowed, then nothing is unlicensed\n-        if (allowedRealmType == AllowedRealmType.ALL) {\n+        if (licenseState.areAllRealmsAllowed()) {", "originalCommit": "9e38f8c85ca7be63edd74b4d66210bbe1bf93ec2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQwODkyNQ==", "url": "https://github.com/elastic/elasticsearch/pull/53456#discussion_r392408925", "body": "We'll also want to have a snapshot of the license state here since it can change.", "bodyText": "We'll also want to have a snapshot of the license state here since it can change.", "bodyHTML": "<p dir=\"auto\">We'll also want to have a snapshot of the license state here since it can change.</p>", "author": "jaymode", "createdAt": "2020-03-13T18:45:29Z", "path": "x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/Realms.java", "diffHunk": "@@ -250,26 +230,24 @@ public void usageStats(ActionListener<Map<String, Object>> listener) {\n         final List<Realm> realmList = asList().stream()\n             .filter(r -> ReservedRealm.TYPE.equals(r.type()) == false)\n             .collect(Collectors.toList());\n+        final Set<String> realmTypes = realmList.stream().map(Realm::type).collect(Collectors.toSet());\n         final CountDown countDown = new CountDown(realmList.size());\n         final Runnable doCountDown = () -> {\n             if ((realmList.isEmpty() || countDown.countDown()) && failed.get() == false) {\n-                final AllowedRealmType allowedRealmType = licenseState.allowedRealmType();\n                 // iterate over the factories so we can add enabled & available info\n                 for (String type : factories.keySet()) {\n                     assert ReservedRealm.TYPE.equals(type) == false;\n                     realmMap.compute(type, (key, value) -> {\n                         if (value == null) {\n                             return MapBuilder.<String, Object>newMapBuilder()\n                                 .put(\"enabled\", false)\n-                                .put(\"available\", isRealmTypeAvailable(allowedRealmType, type))\n+                                .put(\"available\", isRealmTypeAvailable(licenseState, type))", "originalCommit": "9e38f8c85ca7be63edd74b4d66210bbe1bf93ec2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQxMDcxMA==", "url": "https://github.com/elastic/elasticsearch/pull/53456#discussion_r392410710", "body": "I do not believe OIDC should be allowed in standard realms based on the `InternalRealms` class. It might be best to have these use Realms.isRealmTypeAvailable to try to keep the logic consolidated?", "bodyText": "I do not believe OIDC should be allowed in standard realms based on the InternalRealms class. It might be best to have these use Realms.isRealmTypeAvailable to try to keep the logic consolidated?", "bodyHTML": "<p dir=\"auto\">I do not believe OIDC should be allowed in standard realms based on the <code>InternalRealms</code> class. It might be best to have these use Realms.isRealmTypeAvailable to try to keep the logic consolidated?</p>", "author": "jaymode", "createdAt": "2020-03-13T18:49:16Z", "path": "x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/rest/action/oidc/OpenIdConnectBaseRestHandler.java", "diffHunk": "@@ -33,7 +32,7 @@ protected Exception checkFeatureAvailable(RestRequest request) {\n         Exception failedFeature = super.checkFeatureAvailable(request);\n         if (failedFeature != null) {\n             return failedFeature;\n-        } else if (Realms.isRealmTypeAvailable(licenseState.allowedRealmType(), OIDC_REALM_TYPE)) {\n+        } else if (licenseState.areStandardRealmsAllowed()) {", "originalCommit": "9e38f8c85ca7be63edd74b4d66210bbe1bf93ec2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ4MTc2Nw==", "url": "https://github.com/elastic/elasticsearch/pull/53456#discussion_r392481767", "bodyText": "This was an accidental change, I will revert.", "author": "rjernst", "createdAt": "2020-03-13T21:15:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQxMDcxMA=="}], "type": "inlineReview"}, {"oid": "b43f86ff1c933db37169edab528f4f72c316f608", "url": "https://github.com/elastic/elasticsearch/commit/b43f86ff1c933db37169edab528f4f72c316f608", "message": "Merge branch 'master' into refactor_license4", "committedDate": "2020-03-17T16:34:52Z", "type": "commit"}, {"oid": "cfecb70fe42d2fc1846c8aa63e03e896687429c5", "url": "https://github.com/elastic/elasticsearch/commit/cfecb70fe42d2fc1846c8aa63e03e896687429c5", "message": "address feedback", "committedDate": "2020-03-17T17:13:34Z", "type": "commit"}, {"oid": "38083faace4d0128f8b118e2df37d5795d6a510e", "url": "https://github.com/elastic/elasticsearch/commit/38083faace4d0128f8b118e2df37d5795d6a510e", "message": "test fixes", "committedDate": "2020-03-18T03:00:45Z", "type": "commit"}, {"oid": "c1c815bf206c6ae75da2bed76b19c56b22c4ad5c", "url": "https://github.com/elastic/elasticsearch/commit/c1c815bf206c6ae75da2bed76b19c56b22c4ad5c", "message": "Merge branch 'master' into refactor_license4", "committedDate": "2020-03-18T19:49:26Z", "type": "commit"}]}