{"pr_number": 478, "pr_title": "JENKINS-62190: Add UI test for Freestyle Configuration", "pr_author": "lik9653", "pr_createdAt": "2020-05-16T10:10:21Z", "pr_url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/478", "timeline": [{"oid": "e94b3d2f8c28e42fd056c867e2d468649c76b56e", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/e94b3d2f8c28e42fd056c867e2d468649c76b56e", "message": "Initial SnippetGeneratorUiTest", "committedDate": "2020-05-16T10:03:44Z", "type": "commit"}, {"oid": "813a73ae934b6f2e3d278e5b7f6fded15c375db9", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/813a73ae934b6f2e3d278e5b7f6fded15c375db9", "message": "first step for recorder configuration ui test\n\nadded some getter and setter to page object", "committedDate": "2020-05-16T12:22:19Z", "type": "commit"}, {"oid": "f3b0bef13e6cb6e96cf81cbe74826eff597597ca", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/f3b0bef13e6cb6e96cf81cbe74826eff597597ca", "message": "create ui test for recorderConfiguration\n\nadd all necessary setters and getters for issuesrecorder", "committedDate": "2020-05-17T14:29:16Z", "type": "commit"}, {"oid": "287f389f1ac3c1be44d2a26d6907490d5ef2a34f", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/287f389f1ac3c1be44d2a26d6907490d5ef2a34f", "message": "Transforming the SnippetGeneratorITest to a UI test", "committedDate": "2020-05-21T11:23:30Z", "type": "commit"}, {"oid": "0f88ba51dd039c8817cab4d534a0875090279a0b", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/0f88ba51dd039c8817cab4d534a0875090279a0b", "message": "Merge branch 'uiTestsFreestyleConfig' of github.com:kosiuk/warnings-ng-plugin into uiTestsFreestyleConfig", "committedDate": "2020-05-21T11:26:41Z", "type": "commit"}, {"oid": "dd78667f7fb97711f7cb79167dfd1120227a2c5c", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/dd78667f7fb97711f7cb79167dfd1120227a2c5c", "message": "Merge branch 'autogradingApiITest' of github.com:kosiuk/warnings-ng-plugin into uiTestsFreestyleConfig", "committedDate": "2020-05-22T07:22:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ1MDk3Mg==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/478#discussion_r431450972", "body": "Custom assertions machen den Test besser lesbar:\r\n```suggestion\r\n       assertThat(issuesRecorder).hasSourceCodeEncoding(ENCODING);\r\n```", "bodyText": "Custom assertions machen den Test besser lesbar:\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    assertThat(issuesRecorder.getSourceCodeEncoding()).isEqualTo(ENCODING);\n          \n          \n            \n                   assertThat(issuesRecorder).hasSourceCodeEncoding(ENCODING);", "bodyHTML": "<p dir=\"auto\">Custom assertions machen den Test besser lesbar:</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">       <span class=\"x x-first x-last\"> </span>assertThat(issuesRecorder<span class=\"pl-k x x-first\">.</span><span class=\"x\">getSourceCodeEncoding())</span><span class=\"pl-k x\">.</span><span class=\"x x-last\">isEqualTo</span>(<span class=\"pl-c1\">ENCODING</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">       assertThat(issuesRecorder<span class=\"x x-first\">)</span><span class=\"pl-k x\">.</span><span class=\"x x-last\">hasSourceCodeEncoding</span>(<span class=\"pl-c1\">ENCODING</span>);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "uhafner", "createdAt": "2020-05-27T21:24:15Z", "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/FreeStyleConfigurationUITest.java", "diffHunk": "@@ -0,0 +1,92 @@\n+package io.jenkins.plugins.analysis.warnings;\n+\n+import org.junit.Test;\n+import org.jenkinsci.test.acceptance.junit.AbstractJUnitTest;\n+import org.jenkinsci.test.acceptance.junit.WithPlugins;\n+import org.jenkinsci.test.acceptance.po.FreeStyleJob;\n+import io.jenkins.plugins.analysis.warnings.IssuesRecorder.TrendChartType;\n+import static io.jenkins.plugins.analysis.warnings.Assertions.*;\n+\n+/**\n+ * Acceptance tests for the Warnings Next Generation Plugin.\n+\n+ */\n+@WithPlugins(\"warnings-ng\")\n+@SuppressWarnings({\"checkstyle:ClassFanOutComplexity\", \"PMD.SystemPrintln\", \"PMD.ExcessiveImports\"})\n+public class FreeStyleConfigurationUITest extends AbstractJUnitTest {\n+\n+    private static final String PATTERN = \"**/*.txt\";\n+    private static final String ENCODING = \"UTF-8\";\n+    private static final String REFERENCE = \"reference\";\n+    private static final String SOURCE_DIRECTORY = \"relative\";\n+    private static final String SERVERITY = \"NORMAL\";\n+\n+    /**\n+     * Verifies that job configuration screen correctly modifies the properties of an {@link IssuesRecorder} instance.\n+     */\n+    @Test\n+    public void shouldSetPropertiesInJobConfiguration() {\n+        FreeStyleJob job = jenkins.getJobs().create(FreeStyleJob.class);\n+\n+\n+        IssuesRecorder issuesRecorder = job.addPublisher(IssuesRecorder.class, recorder -> {\n+            recorder.setTool(\"Eclipse ECJ\");\n+        });\n+\n+        issuesRecorder.setSourceCodeEncoding(ENCODING);\n+        issuesRecorder.setSourceDirectory(SOURCE_DIRECTORY);\n+        issuesRecorder.setAggregatingResults(true);\n+        issuesRecorder.setTrendChartType(TrendChartType.TOOLS_ONLY);\n+        issuesRecorder.setBlameDisabled(true);\n+        issuesRecorder.setForensicsDisabled(true);\n+        issuesRecorder.setEnabledForFailure(true);\n+        issuesRecorder.setIgnoreQualityGate(true);\n+        issuesRecorder.setIgnoreFailedBuilds(true);\n+        issuesRecorder.setFailOnError(true);\n+        issuesRecorder.setReferenceJobField(REFERENCE);\n+        issuesRecorder.setHealthReport(1, 9, SERVERITY);\n+        issuesRecorder.setReportFilePattern(PATTERN);\n+\n+\n+        job.save();\n+        job.configure();\n+        issuesRecorder.openAdvancedOptions();\n+        assertThat(issuesRecorder.getSourceCodeEncoding()).isEqualTo(ENCODING);", "originalCommit": "0f88ba51dd039c8817cab4d534a0875090279a0b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ1NDA0Mw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/478#discussion_r431454043", "body": "```suggestion\r\n * Acceptance tests for the Freestyle configuration of the Warnings Next Generation Plugin.\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Acceptance tests for the Warnings Next Generation Plugin.\n          \n          \n            \n             * Acceptance tests for the Freestyle configuration of the Warnings Next Generation Plugin.", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"15\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Acceptance</span> tests <span class=\"pl-k\">for</span> the <span class=\"pl-smi\">Warnings</span> <span class=\"pl-smi\">Next</span> <span class=\"pl-smi\">Generation</span> <span class=\"pl-smi\">Plugin</span>.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"15\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Acceptance</span> tests <span class=\"pl-k\">for</span> the <span class=\"pl-smi x x-first\">Freestyle</span><span class=\"x x-last\"> configuration of the </span><span class=\"pl-smi\">Warnings</span> <span class=\"pl-smi\">Next</span> <span class=\"pl-smi\">Generation</span> <span class=\"pl-smi\">Plugin</span>.</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "uhafner", "createdAt": "2020-05-27T21:30:37Z", "path": "ui-tests/src/test/java/io/jenkins/plugins/analysis/warnings/FreeStyleConfigurationUITest.java", "diffHunk": "@@ -0,0 +1,92 @@\n+package io.jenkins.plugins.analysis.warnings;\n+\n+import org.junit.Test;\n+import org.jenkinsci.test.acceptance.junit.AbstractJUnitTest;\n+import org.jenkinsci.test.acceptance.junit.WithPlugins;\n+import org.jenkinsci.test.acceptance.po.FreeStyleJob;\n+import io.jenkins.plugins.analysis.warnings.IssuesRecorder.TrendChartType;\n+import static io.jenkins.plugins.analysis.warnings.Assertions.*;\n+\n+/**\n+ * Acceptance tests for the Warnings Next Generation Plugin.\n+", "originalCommit": "0f88ba51dd039c8817cab4d534a0875090279a0b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ1NzI0OA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/478#discussion_r431457248", "body": "Das wurde umbenannt und kann entfallen.", "bodyText": "Das wurde umbenannt und kann entfallen.", "bodyHTML": "<p dir=\"auto\">Das wurde umbenannt und kann entfallen.</p>", "author": "uhafner", "createdAt": "2020-05-27T21:37:52Z", "path": "ui-tests/src/main/java/io/jenkins/plugins/analysis/warnings/IssuesRecorder.java", "diffHunk": "@@ -150,6 +162,88 @@ public StaticAnalysisTool addTool(final String toolName, final String pattern) {\n         return addTool(toolName, tool -> tool.setPattern(pattern));\n     }\n \n+    /**\n+     * Returns the value of the Source code encoding field\n+     *\n+     * @return the source code encoding\n+     */\n+    public String getSourceCodeEncoding(){return sourceCodeEncoding.get();}\n+\n+    /**\n+     * Returns if the run always / enabled for failure checkbox is checked\n+     *\n+     * @return the enabled for failure checkbox value\n+     */\n+    public boolean getEnabledForFailure(){return enabledForFailureCheckBox.resolve().isSelected();}\n+\n+    /**\n+     * Returns  if the aggregate results checkbox is checked\n+     *\n+     * @return the aggregate results checkbox value\n+     */\n+    public boolean getAggregatingResults(){return aggregatingResultsCheckBox.resolve().isSelected();}\n+\n+    /**\n+     * Returns if the ignore quality gate checkbox is checked\n+     *\n+     * @return the ignore quality gate checkbox value\n+     */\n+    public boolean getIgnoreQualityGate(){return ignoreQualityGate.resolve().isSelected();}\n+\n+    /**\n+     * Returns if\n+     *  TODO What checkbox is this?", "originalCommit": "0f88ba51dd039c8817cab4d534a0875090279a0b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ1NzgxMw==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/478#discussion_r431457813", "body": "Ich glaube, diese JavaDocs k\u00f6nnen entfallen. (Oder einen Punkt am Ende setzen, sonst meckert CheckStyle)", "bodyText": "Ich glaube, diese JavaDocs k\u00f6nnen entfallen. (Oder einen Punkt am Ende setzen, sonst meckert CheckStyle)", "bodyHTML": "<p dir=\"auto\">Ich glaube, diese JavaDocs k\u00f6nnen entfallen. (Oder einen Punkt am Ende setzen, sonst meckert CheckStyle)</p>", "author": "uhafner", "createdAt": "2020-05-27T21:39:05Z", "path": "ui-tests/src/main/java/io/jenkins/plugins/analysis/warnings/IssuesRecorder.java", "diffHunk": "@@ -150,6 +162,88 @@ public StaticAnalysisTool addTool(final String toolName, final String pattern) {\n         return addTool(toolName, tool -> tool.setPattern(pattern));\n     }\n \n+    /**\n+     * Returns the value of the Source code encoding field", "originalCommit": "0f88ba51dd039c8817cab4d534a0875090279a0b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ1ODIxMA==", "url": "https://github.com/jenkinsci/warnings-ng-plugin/pull/478#discussion_r431458210", "body": "Hier w\u00e4re es erlaubt, die Kommentare vom `IssueRecorder` zu kopieren.", "bodyText": "Hier w\u00e4re es erlaubt, die Kommentare vom IssueRecorder zu kopieren.", "bodyHTML": "<p dir=\"auto\">Hier w\u00e4re es erlaubt, die Kommentare vom <code>IssueRecorder</code> zu kopieren.</p>", "author": "uhafner", "createdAt": "2020-05-27T21:39:58Z", "path": "ui-tests/src/main/java/io/jenkins/plugins/analysis/warnings/IssuesRecorder.java", "diffHunk": "@@ -210,10 +304,54 @@ public void setReferenceJobField(final String referenceJob) {\n         referenceJobField.set(referenceJob);\n     }\n \n+    /**", "originalCommit": "0f88ba51dd039c8817cab4d534a0875090279a0b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b19683878d1905305a21f3b744374b5bff9f39f5", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/b19683878d1905305a21f3b744374b5bff9f39f5", "message": "change assertions and remove unnecesary docu", "committedDate": "2020-05-28T07:28:07Z", "type": "commit"}, {"oid": "d7277dcf851ba298a00b8cfaf900ad33867ddd8f", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/d7277dcf851ba298a00b8cfaf900ad33867ddd8f", "message": "Remove the dependency to analysis-model", "committedDate": "2020-05-28T07:40:22Z", "type": "commit"}, {"oid": "3ae281a0539be517ba4123c1de5b06267517f2bf", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/3ae281a0539be517ba4123c1de5b06267517f2bf", "message": "Merge branch 'uiTestsFreestyleConfig' of github.com:kosiuk/warnings-ng-plugin into uiTestsFreestyleConfig", "committedDate": "2020-05-28T07:45:02Z", "type": "commit"}, {"oid": "6a1a86a8b18a1c801d77447f533cd2692d0c8380", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/6a1a86a8b18a1c801d77447f533cd2692d0c8380", "message": "Merge branch 'master' into uiTestsFreestyleConfig", "committedDate": "2020-05-28T07:49:39Z", "type": "commit"}, {"oid": "c4b9076da0a12ff10f3ad9949bde0e84bd259f8a", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/c4b9076da0a12ff10f3ad9949bde0e84bd259f8a", "message": "Update pom.xml", "committedDate": "2020-05-28T07:53:46Z", "type": "commit"}, {"oid": "d12d23c1e7bd243ed57bd121d882ece284896777", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/d12d23c1e7bd243ed57bd121d882ece284896777", "message": "Update pom.xml", "committedDate": "2020-05-28T07:54:20Z", "type": "commit"}, {"oid": "e9e4009232a4373b3f8d778e8178501d77b7c706", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/e9e4009232a4373b3f8d778e8178501d77b7c706", "message": "Update Documentation.md", "committedDate": "2020-05-28T07:58:53Z", "type": "commit"}, {"oid": "a310c5d125b6553043bb891e2f207174ef4ada8c", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/a310c5d125b6553043bb891e2f207174ef4ada8c", "message": "Fix Javadoc in SnippetGenerator", "committedDate": "2020-05-28T08:21:21Z", "type": "commit"}, {"oid": "342ce40f48352e67e42bd1b10990df99a22f59c5", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/342ce40f48352e67e42bd1b10990df99a22f59c5", "message": "Add qualityGate and filter check", "committedDate": "2020-05-28T08:57:18Z", "type": "commit"}, {"oid": "05a9719d3eaf7d9fc84b17b849cbf58d7d43e3f6", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/05a9719d3eaf7d9fc84b17b849cbf58d7d43e3f6", "message": "add more controls and javadoc", "committedDate": "2020-05-28T10:46:04Z", "type": "commit"}, {"oid": "a89f8018ed3629deb30f4818d364a19f57479fbe", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/a89f8018ed3629deb30f4818d364a19f57479fbe", "message": "Merge branch 'uiTestsFreestyleConfig' of github.com:kosiuk/warnings-ng-plugin into uiTestsFreestyleConfig", "committedDate": "2020-05-28T10:47:57Z", "type": "commit"}, {"oid": "84b0f37ca1530b9cabcb35f4cc74fde5c31b0a4a", "url": "https://github.com/jenkinsci/warnings-ng-plugin/commit/84b0f37ca1530b9cabcb35f4cc74fde5c31b0a4a", "message": "Merge branch 'master' into uiTestsFreestyleConfig", "committedDate": "2020-06-01T11:21:18Z", "type": "commit"}]}