{"pr_number": 1832, "pr_title": "Escape single line comments", "pr_createdAt": "2020-03-26T03:08:48Z", "pr_url": "https://github.com/graphql-java/graphql-java/pull/1832", "merge_commit": "9eae9c1bf506700cd0a54bf37364e28e2519a2f4", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM1ODU1Mw==", "url": "https://github.com/graphql-java/graphql-java/pull/1832#discussion_r398358553", "body": "I am sure we have a JSON string encoder somewhere in the code base\r\n\r\nNot sure off hand but I recall we do.", "bodyText": "I am sure we have a JSON string encoder somewhere in the code base\nNot sure off hand but I recall we do.", "bodyHTML": "<p dir=\"auto\">I am sure we have a JSON string encoder somewhere in the code base</p>\n<p dir=\"auto\">Not sure off hand but I recall we do.</p>", "author": "bbakerman", "createdAt": "2020-03-26T07:17:32Z", "path": "src/main/java/graphql/schema/idl/SchemaPrinter.java", "diffHunk": "@@ -874,7 +875,9 @@ private void printMultiLineDescription(PrintWriter out, String prefix, List<Stri\n     }\n \n     private void printSingleLineDescription(PrintWriter out, String prefix, String s) {\n-        out.printf(\"%s\\\"%s\\\"\\n\", prefix, s);\n+        // See: https://github.com/graphql/graphql-spec/issues/148\n+        String comment = StringEscapeUtils.escapeJson(s);", "originalCommit": "d413b613082ffe8ec7706b557a5cde0afa693faa", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f83718fd3d4ea433eb61f01830230fbbe41983a6", "changed_code": [{"header": "diff --git a/src/main/java/graphql/schema/idl/SchemaPrinter.java b/src/main/java/graphql/schema/idl/SchemaPrinter.java\nindex 91eb4735..56ec6901 100644\n--- a/src/main/java/graphql/schema/idl/SchemaPrinter.java\n+++ b/src/main/java/graphql/schema/idl/SchemaPrinter.java\n", "chunk": "@@ -876,8 +876,8 @@ public class SchemaPrinter {\n \n     private void printSingleLineDescription(PrintWriter out, String prefix, String s) {\n         // See: https://github.com/graphql/graphql-spec/issues/148\n-        String comment = StringEscapeUtils.escapeJson(s);\n-        out.printf(\"%s\\\"%s\\\"\\n\", prefix, comment);\n+        String desc = escapeJsonString(s);\n+        out.printf(\"%s\\\"%s\\\"\\n\", prefix, desc);\n     }\n \n     private boolean hasDescription(Object descriptionHolder) {\n", "next_change": null}]}, "revised_code_in_main": null, "commits_in_main": [{"oid": "9eae9c1bf506700cd0a54bf37364e28e2519a2f4", "message": "Merge commit", "committedDate": null}, {"oid": "0b49de6f2f8da7385a58af451a244d1098d2c574", "committedDate": "2020-05-20 17:18:45 +1000", "message": "Fix SchemaPrinter to exclude braces while printing types with no fields. (#1907)"}, {"oid": "5f4dc52b5675cb5575c0a759f6159ca58a632e4b", "committedDate": "2020-05-21 15:32:55 +1000", "message": "Add new schema printer option includeDirectiveDefinitions (#1756)"}, {"oid": "b785a5b0266e4bb1ff191be541c62d90d76de519", "committedDate": "2020-05-22 11:38:48 +1000", "message": "test programmatically GraphQLInterfaceType and test SchemaPrinter"}, {"oid": "760188984685d7572893027e2e9b92af9c267f22", "committedDate": "2020-05-24 16:34:30 +1000", "message": "Merge branch 'master' into 1764_allow-interfaces-to-implement-other-interfaces"}, {"oid": "a9f7932266b3cc8395123994f0b9675ad2ab642e", "committedDate": "2020-06-07 11:05:11 +1000", "message": "Added the ability to provide a predicate on schema printing per schema element (#1938)"}, {"oid": "7a8e9038df64ddba27a8aa4040ecdeb60fe387e5", "committedDate": "2020-10-06 18:47:34 +1100", "message": "Avoids ArrayIndexOutOfBoundsException for description of only newline (#2053) (#2069)"}, {"oid": "ff3f6918330b9c78321b2fe6fce615ce2b155eac", "committedDate": "2020-11-16 10:56:40 +1100", "message": "Repeatable directives support (#2015)"}, {"oid": "3578506b4d99fa8fc622e5d90decdfadeb6f3c82", "committedDate": "2020-12-18 21:48:46 +0800", "message": "remove redundant parenthesis for directive on FIELD_DEFINITION"}, {"oid": "419acbb49a4af2b3d100327e069f314df4dda87e", "committedDate": "2021-02-27 16:22:40 +1100", "message": "Add logic to print directives on schemas. (#2218)"}, {"oid": "122efe8748023ae5829412e24283fc1c4329d8d8", "committedDate": "2021-03-19 11:13:03 +1100", "message": "This provides @deprecated on input fields and arguments (#2186)"}, {"oid": "7eb36aa8d235c3391cefb0a99fd9c90dbd13462e", "committedDate": "2021-05-13 03:43:46 +1000", "message": "wip of introducing two new coercing functions"}, {"oid": "03f956c6a3132b9d7e712530cb16da5c916fbc1b", "committedDate": "2021-05-13 03:43:46 +1000", "message": "wip"}, {"oid": "df5edafd50dcd24ed66921245266d1c41a358ff1", "committedDate": "2021-05-13 03:43:46 +1000", "message": "wip"}, {"oid": "aa9f162f67670302cdd2981a83e45f71dbb873cf", "committedDate": "2021-05-13 03:43:47 +1000", "message": "rename value/defaultValue methods"}, {"oid": "7b684e7f3a2cdd683434e5489b90ae3bef797083", "committedDate": "2021-05-21 18:36:04 +1000", "message": "refactor to use InputValueWithState instead of just Enum + Object"}, {"oid": "2f680086670e15f62de068789c45c1341669d9b2", "committedDate": "2021-07-13 15:16:16 +1000", "message": "allow printing of just directives (#2448)"}, {"oid": "2e5179b26afe07e57b342add0922d5375c81e39b", "committedDate": "2021-07-17 07:17:24 +1000", "message": "Escape triple quotes in multiline descriptions correctly"}, {"oid": "58a6519aeb519b654d439a8d35e536b9adc1e3d1", "committedDate": "2021-07-17 07:20:21 +1000", "message": "Merge branch 'master' into escape-multiline-triple-quotes"}, {"oid": "725512cec21090ac2f77ec80721c1a5d78eaf4b3", "committedDate": "2021-09-24 20:03:36 +1000", "message": "This puts in the ability to sort a schema during printing"}, {"oid": "e0eb64c17fd7a15258844a936cdbdd3a99317344", "committedDate": "2021-10-08 16:17:55 +1100", "message": "Sort schema directives in `SchemaPrinter`. (#2575)"}, {"oid": "98c4d22bffc1974339b3e427a381d84a51398a89", "committedDate": "2021-11-08 11:16:33 +1100", "message": "Merge branch 'master' into compatator_is_used_for_in_order_schema_printing"}, {"oid": "03c61693770328edf14353de75350be650702167", "committedDate": "2021-11-09 10:35:18 +1100", "message": "Support for tracking the parse order (#2539)"}, {"oid": "3533d143e15084a8bbb90eda28f2f10e5bfa22c1", "committedDate": "2021-11-09 12:08:32 +1100", "message": "fix build (#2607)"}, {"oid": "cbf0eb18f28162e58114c74f7047a07a2916313c", "committedDate": "2021-12-02 17:28:19 +1100", "message": "fix typos in javadoc (#2619)"}, {"oid": "7258ece03ba995d61bfb60e19177dd744cf3a416", "committedDate": "2022-02-01 16:43:01 +1100", "message": "Fix wrong newline on Windows in `SchemaPrinter` (`\\r\\n -> \\n`) (#2705)"}, {"oid": "a2d81a84ed027590106a8938819e0a1872ec4ad8", "committedDate": "2022-02-24 22:00:20 +1100", "message": "READY- Applied Directives (#2562)"}, {"oid": "1db980e0ecfe13e59aebd3ff799fd8046385f241", "committedDate": "2022-06-14 12:53:50 +1000", "message": "Print schema comments (#2856)"}, {"oid": "59679e0f44df3373ca6bcb583e0f95db132cc5fa", "committedDate": "2022-07-21 13:17:02 +1000", "message": "Improve SchemaPrinter (#2881)"}, {"oid": "086aa1b9dc660ab6663abc748219eb1811b981fb", "committedDate": "2022-08-15 20:28:39 +1000", "message": "Fix printing directives when they contain something like a formatting specifier (#2919) (#2920)"}, {"oid": "e7409ac5263d451417f5651ad5b1dd891440ca29", "committedDate": "2022-08-22 16:44:02 +1000", "message": "Adding Locale to Coercing and hence ValueResolver (#2912)"}, {"oid": "e00df01176f1287dbc4c5939ed389db4fce95d8a", "committedDate": "2023-01-30 12:04:36 +1100", "message": "Add missing this keyword for readability (#3067)"}]}, {"oid": "f83718fd3d4ea433eb61f01830230fbbe41983a6", "url": "https://github.com/graphql-java/graphql-java/commit/f83718fd3d4ea433eb61f01830230fbbe41983a6", "message": "Escape single line comments", "committedDate": "2020-03-26T21:37:38Z", "type": "commit"}, {"oid": "f83718fd3d4ea433eb61f01830230fbbe41983a6", "url": "https://github.com/graphql-java/graphql-java/commit/f83718fd3d4ea433eb61f01830230fbbe41983a6", "message": "Escape single line comments", "committedDate": "2020-03-26T21:37:38Z", "type": "forcePushed"}]}