{"pr_number": 5724, "pr_title": "Enable/disable query quotas per broker", "pr_author": "jackjlli", "pr_createdAt": "2020-07-21T18:26:28Z", "pr_url": "https://github.com/apache/pinot/pull/5724", "timeline": [{"oid": "83b6777014f408c551b32b5e283f1c0f4374b400", "url": "https://github.com/apache/pinot/commit/83b6777014f408c551b32b5e283f1c0f4374b400", "message": "Enable/disable query quotas per broker", "committedDate": "2020-07-21T18:15:56Z", "type": "commit"}, {"oid": "d79eeb79ab75ff741bef40f1baa71c32e64f1480", "url": "https://github.com/apache/pinot/commit/d79eeb79ab75ff741bef40f1baa71c32e64f1480", "message": "Refactor to use instance config instead of Helix message", "committedDate": "2020-07-21T22:13:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzMTg1Mg==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r458431852", "body": "```suggestion\r\n    LOGGER.info(\"Set query rate limiting to: {} for all tables in this broker.\", _enabled ? \"ENABLED\" : \"DISABLED\",\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                LOGGER.info(\"Set query quota state to: {} for {} tables in the current broker.\", _enabled ? \"ENABLE\" : \"DISABLE\",\n          \n          \n            \n                LOGGER.info(\"Set query rate limiting to: {} for all tables in this broker.\", _enabled ? \"ENABLED\" : \"DISABLED\",", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-c1\">LOGGER</span><span class=\"pl-k\">.</span>info(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Set query <span class=\"x x-first x-last\">quota state</span> to: {} for <span class=\"x x-first x-last\">{}</span> tables in <span class=\"x x-first x-last\">the current </span>broker.<span class=\"pl-pds\">\"</span></span>, _enabled <span class=\"pl-k\">?</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">ENABLE</span><span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">:</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">DISABLE</span><span class=\"pl-pds\">\"</span></span>,</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-c1\">LOGGER</span><span class=\"pl-k\">.</span>info(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Set query <span class=\"x x-first x-last\">rate limiting</span> to: {} for <span class=\"x x-first x-last\">all</span> tables in <span class=\"x x-first x-last\">this </span>broker.<span class=\"pl-pds\">\"</span></span>, _enabled <span class=\"pl-k\">?</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">ENABLED</span><span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">:</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">DISABLED</span><span class=\"pl-pds\">\"</span></span>,</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "mcvsubbu", "createdAt": "2020-07-21T22:44:47Z", "path": "pinot-broker/src/main/java/org/apache/pinot/broker/queryquota/HelixExternalViewBasedQueryQuotaManager.java", "diffHunk": "@@ -359,6 +372,27 @@ public void processQueryQuotaChange(ExternalView currentBrokerResource) {\n             numRebuilt, _rateLimiterMap.size());\n   }\n \n+  /**\n+   * Process query quota state change when instance config gets changed\n+   */\n+  public void processQueryQuotaInstanceConfigChange() {\n+    getQueryQuotaEnabledFlagFromInstanceConfig();\n+  }\n+\n+  private void getQueryQuotaEnabledFlagFromInstanceConfig() {\n+    Map<String, String> instanceConfigsMap =\n+        HelixHelper.getInstanceConfigsMapFor(_instanceId, _helixManager.getClusterName(),\n+            _helixManager.getClusterManagmentTool());\n+    String queryQuotaEnabled = instanceConfigsMap.getOrDefault(CommonConstants.Helix.QUERY_QUOTA_STATE_ENABLED, \"true\");\n+    _enabled = Boolean.parseBoolean(queryQuotaEnabled);\n+    LOGGER.info(\"Set query quota state to: {} for {} tables in the current broker.\", _enabled ? \"ENABLE\" : \"DISABLE\",", "originalCommit": "d79eeb79ab75ff741bef40f1baa71c32e64f1480", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzMjQzNg==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r458432436", "body": "```suggestion\r\n    public static final String QUERY_RATE_LIMIT_DISABLED = \"queryRateLimitDisabled\";\r\n```\r\nSince this is not the normal state, IMO it is better to highlight if this is disabled rather than enabled.", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static final String QUERY_QUOTA_STATE_ENABLED = \"queryQuotaStateEnabled\";\n          \n          \n            \n                public static final String QUERY_RATE_LIMIT_DISABLED = \"queryRateLimitDisabled\";\n          \n      \n    \n    \n  \n\nSince this is not the normal state, IMO it is better to highlight if this is disabled rather than enabled.", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">final</span> <span class=\"pl-smi\">String</span> <span class=\"pl-c1 x x-first x-last\">QUERY_QUOTA_STATE_ENABLED</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">queryQuotaStateEnabled</span><span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">final</span> <span class=\"pl-smi\">String</span> <span class=\"pl-c1 x x-first x-last\">QUERY_RATE_LIMIT_DISABLED</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">queryRateLimitDisabled</span><span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n\n<p dir=\"auto\">Since this is not the normal state, IMO it is better to highlight if this is disabled rather than enabled.</p>", "author": "mcvsubbu", "createdAt": "2020-07-21T22:46:20Z", "path": "pinot-common/src/main/java/org/apache/pinot/common/utils/CommonConstants.java", "diffHunk": "@@ -30,6 +30,7 @@\n   public static class Helix {\n     public static final String IS_SHUTDOWN_IN_PROGRESS = \"shutdownInProgress\";\n     public static final String QUERIES_DISABLED = \"queriesDisabled\";\n+    public static final String QUERY_QUOTA_STATE_ENABLED = \"queryQuotaStateEnabled\";", "originalCommit": "d79eeb79ab75ff741bef40f1baa71c32e64f1480", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzMjk4Nw==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r458432987", "body": "```suggestion\r\n    String queryQuotaEnabled = instanceConfigsMap.getOrDefault(CommonConstants.Helix.QUERY_QUOTA_STATE_ENABLED, \"false\");\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                String queryQuotaEnabled = instanceConfigsMap.getOrDefault(CommonConstants.Helix.QUERY_QUOTA_STATE_ENABLED, \"true\");\n          \n          \n            \n                String queryQuotaEnabled = instanceConfigsMap.getOrDefault(CommonConstants.Helix.QUERY_QUOTA_STATE_ENABLED, \"false\");", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-smi\">String</span> queryQuotaEnabled <span class=\"pl-k\">=</span> instanceConfigsMap<span class=\"pl-k\">.</span>getOrDefault(<span class=\"pl-smi\">CommonConstants</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">Helix</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>QUERY_QUOTA_STATE_ENABLED</span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">true</span><span class=\"pl-pds\">\"</span></span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-smi\">String</span> queryQuotaEnabled <span class=\"pl-k\">=</span> instanceConfigsMap<span class=\"pl-k\">.</span>getOrDefault(<span class=\"pl-smi\">CommonConstants</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">Helix</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>QUERY_QUOTA_STATE_ENABLED</span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">false</span><span class=\"pl-pds\">\"</span></span>);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "mcvsubbu", "createdAt": "2020-07-21T22:47:52Z", "path": "pinot-broker/src/main/java/org/apache/pinot/broker/queryquota/HelixExternalViewBasedQueryQuotaManager.java", "diffHunk": "@@ -359,6 +372,27 @@ public void processQueryQuotaChange(ExternalView currentBrokerResource) {\n             numRebuilt, _rateLimiterMap.size());\n   }\n \n+  /**\n+   * Process query quota state change when instance config gets changed\n+   */\n+  public void processQueryQuotaInstanceConfigChange() {\n+    getQueryQuotaEnabledFlagFromInstanceConfig();\n+  }\n+\n+  private void getQueryQuotaEnabledFlagFromInstanceConfig() {\n+    Map<String, String> instanceConfigsMap =\n+        HelixHelper.getInstanceConfigsMapFor(_instanceId, _helixManager.getClusterName(),\n+            _helixManager.getClusterManagmentTool());\n+    String queryQuotaEnabled = instanceConfigsMap.getOrDefault(CommonConstants.Helix.QUERY_QUOTA_STATE_ENABLED, \"true\");", "originalCommit": "d79eeb79ab75ff741bef40f1baa71c32e64f1480", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzMzMyOA==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r458433328", "body": "```suggestion\r\n        );\r\n```\r\nEven if new tables are added, query rate limiting check will not be done. Maybe you can add in the same message that there are currently N tables on this broker, but the log should clearly indicate that it is disabled for all tables", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    _rateLimiterMap.size());\n          \n          \n            \n                    );\n          \n      \n    \n    \n  \n\nEven if new tables are added, query rate limiting check will not be done. Maybe you can add in the same message that there are currently N tables on this broker, but the log should clearly indicate that it is disabled for all tables", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"x x-first\">_rateLimiterMap</span><span class=\"pl-k x\">.</span><span class=\"x x-last\">size()</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        );</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n\n<p dir=\"auto\">Even if new tables are added, query rate limiting check will not be done. Maybe you can add in the same message that there are currently N tables on this broker, but the log should clearly indicate that it is disabled for all tables</p>", "author": "mcvsubbu", "createdAt": "2020-07-21T22:48:52Z", "path": "pinot-broker/src/main/java/org/apache/pinot/broker/queryquota/HelixExternalViewBasedQueryQuotaManager.java", "diffHunk": "@@ -359,6 +372,27 @@ public void processQueryQuotaChange(ExternalView currentBrokerResource) {\n             numRebuilt, _rateLimiterMap.size());\n   }\n \n+  /**\n+   * Process query quota state change when instance config gets changed\n+   */\n+  public void processQueryQuotaInstanceConfigChange() {\n+    getQueryQuotaEnabledFlagFromInstanceConfig();\n+  }\n+\n+  private void getQueryQuotaEnabledFlagFromInstanceConfig() {\n+    Map<String, String> instanceConfigsMap =\n+        HelixHelper.getInstanceConfigsMapFor(_instanceId, _helixManager.getClusterName(),\n+            _helixManager.getClusterManagmentTool());\n+    String queryQuotaEnabled = instanceConfigsMap.getOrDefault(CommonConstants.Helix.QUERY_QUOTA_STATE_ENABLED, \"true\");\n+    _enabled = Boolean.parseBoolean(queryQuotaEnabled);\n+    LOGGER.info(\"Set query quota state to: {} for {} tables in the current broker.\", _enabled ? \"ENABLE\" : \"DISABLE\",\n+        _rateLimiterMap.size());", "originalCommit": "d79eeb79ab75ff741bef40f1baa71c32e64f1480", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ0MTM2NQ==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r458441365", "bodyText": "I'd insist keeping the size of the map. That'll give us a good insight on how many tables are affected by this state change.\nAnd sure, I can add the state message in the message.", "author": "jackjlli", "createdAt": "2020-07-21T23:12:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzMzMyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzMzk4MA==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r458433980", "body": "```suggestion\r\n  @ApiOperation(value = \"Enable/disable the query rate limiting for a broker instance\", notes = \"Enable/disable the query rate limiting for a broker instance\")\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              @ApiOperation(value = \"Enable/disable the qps quotas of an broker instance\", notes = \"Enable/disable the qps quotas of an broker instance\")\n          \n          \n            \n              @ApiOperation(value = \"Enable/disable the query rate limiting for a broker instance\", notes = \"Enable/disable the query rate limiting for a broker instance\")", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">  <span class=\"pl-k\">@ApiOperation</span>(<span class=\"pl-c1\">value</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Enable/disable the <span class=\"x x-first x-last\">qps quotas of an </span>broker instance<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">notes</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Enable/disable the <span class=\"x x-first x-last\">qps quotas of an</span> broker instance<span class=\"pl-pds\">\"</span></span>)</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">  <span class=\"pl-k\">@ApiOperation</span>(<span class=\"pl-c1\">value</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Enable/disable the <span class=\"x x-first x-last\">query rate limiting for a </span>broker instance<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-c1\">notes</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Enable/disable the <span class=\"x x-first x-last\">query rate limiting for a</span> broker instance<span class=\"pl-pds\">\"</span></span>)</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "mcvsubbu", "createdAt": "2020-07-21T22:50:43Z", "path": "pinot-controller/src/main/java/org/apache/pinot/controller/api/resources/PinotBrokerRestletResource.java", "diffHunk": "@@ -129,6 +133,40 @@\n     }\n   }\n \n+\n+  @POST\n+  @Path(\"/brokers/instances/{instanceName}/qps\")\n+  @Produces(MediaType.APPLICATION_JSON)\n+  @Consumes(MediaType.TEXT_PLAIN)\n+  @ApiOperation(value = \"Enable/disable the qps quotas of an broker instance\", notes = \"Enable/disable the qps quotas of an broker instance\")", "originalCommit": "d79eeb79ab75ff741bef40f1baa71c32e64f1480", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzNDIzMA==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r458434230", "body": "What does `409` mean in this case?", "bodyText": "What does 409 mean in this case?", "bodyHTML": "<p dir=\"auto\">What does <code>409</code> mean in this case?</p>", "author": "mcvsubbu", "createdAt": "2020-07-21T22:51:30Z", "path": "pinot-controller/src/main/java/org/apache/pinot/controller/api/resources/PinotBrokerRestletResource.java", "diffHunk": "@@ -129,6 +133,40 @@\n     }\n   }\n \n+\n+  @POST\n+  @Path(\"/brokers/instances/{instanceName}/qps\")\n+  @Produces(MediaType.APPLICATION_JSON)\n+  @Consumes(MediaType.TEXT_PLAIN)\n+  @ApiOperation(value = \"Enable/disable the qps quotas of an broker instance\", notes = \"Enable/disable the qps quotas of an broker instance\")\n+  @ApiResponses(value = {@ApiResponse(code = 200, message = \"Success\"), @ApiResponse(code = 400, message = \"Bad Request\"), @ApiResponse(code = 404, message = \"Instance not found\"), @ApiResponse(code = 409, message = \"Instance cannot be dropped\"), @ApiResponse(code = 500, message = \"Internal error\")})", "originalCommit": "d79eeb79ab75ff741bef40f1baa71c32e64f1480", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ0MTc5Mg==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r458441792", "bodyText": "Good catch! \ud83d\udc4d Removed.", "author": "jackjlli", "createdAt": "2020-07-21T23:14:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzNDIzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzNDYzMQ==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r458434631", "body": "Can you move this line down after the parameter checking? thanks", "bodyText": "Can you move this line down after the parameter checking? thanks", "bodyHTML": "<p dir=\"auto\">Can you move this line down after the parameter checking? thanks</p>", "author": "mcvsubbu", "createdAt": "2020-07-21T22:52:42Z", "path": "pinot-controller/src/main/java/org/apache/pinot/controller/api/resources/PinotBrokerRestletResource.java", "diffHunk": "@@ -129,6 +133,40 @@\n     }\n   }\n \n+\n+  @POST\n+  @Path(\"/brokers/instances/{instanceName}/qps\")\n+  @Produces(MediaType.APPLICATION_JSON)\n+  @Consumes(MediaType.TEXT_PLAIN)\n+  @ApiOperation(value = \"Enable/disable the qps quotas of an broker instance\", notes = \"Enable/disable the qps quotas of an broker instance\")\n+  @ApiResponses(value = {@ApiResponse(code = 200, message = \"Success\"), @ApiResponse(code = 400, message = \"Bad Request\"), @ApiResponse(code = 404, message = \"Instance not found\"), @ApiResponse(code = 409, message = \"Instance cannot be dropped\"), @ApiResponse(code = 500, message = \"Internal error\")})\n+  public SuccessResponse toggleBrokerQpsState(\n+      @ApiParam(value = \"Broker instance name\", required = true, example = \"Broker_my.broker.com_30000\") @PathParam(\"instanceName\") String brokerInstanceName,\n+      @ApiParam(value = \"ENABLE|DISABLE\", allowableValues = \"ENABLE, DISABLE\", required = true)  @QueryParam(\"state\") String state) {\n+    List<String> liveInstances = _pinotHelixResourceManager.getOnlineInstanceList();", "originalCommit": "d79eeb79ab75ff741bef40f1baa71c32e64f1480", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ1MjM0NA==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r458452344", "bodyText": "Done.", "author": "jackjlli", "createdAt": "2020-07-21T23:47:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzNDYzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzNTM0MA==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r458435340", "body": "```suggestion\r\n    String msg = String.format(\"Set query rate limiting to: %s for all tables in broker: %s\", state, brokerInstanceName);\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                String msg = String.format(\"Toggled query quota state to: %s for broker: %s\", state, brokerInstanceName);\n          \n          \n            \n                String msg = String.format(\"Set query rate limiting to: %s for all tables in broker: %s\", state, brokerInstanceName);", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-smi\">String</span> msg <span class=\"pl-k\">=</span> <span class=\"pl-smi\">String</span><span class=\"pl-k\">.</span>format(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">Toggled</span> query <span class=\"x x-first x-last\">quota state</span> to: %s for broker: %s<span class=\"pl-pds\">\"</span></span>, state, brokerInstanceName);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-smi\">String</span> msg <span class=\"pl-k\">=</span> <span class=\"pl-smi\">String</span><span class=\"pl-k\">.</span>format(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">Set</span> query <span class=\"x x-first x-last\">rate limiting</span> to: %s for<span class=\"x x-first x-last\"> all tables in</span> broker: %s<span class=\"pl-pds\">\"</span></span>, state, brokerInstanceName);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "mcvsubbu", "createdAt": "2020-07-21T22:54:51Z", "path": "pinot-controller/src/main/java/org/apache/pinot/controller/api/resources/PinotBrokerRestletResource.java", "diffHunk": "@@ -129,6 +133,40 @@\n     }\n   }\n \n+\n+  @POST\n+  @Path(\"/brokers/instances/{instanceName}/qps\")\n+  @Produces(MediaType.APPLICATION_JSON)\n+  @Consumes(MediaType.TEXT_PLAIN)\n+  @ApiOperation(value = \"Enable/disable the qps quotas of an broker instance\", notes = \"Enable/disable the qps quotas of an broker instance\")\n+  @ApiResponses(value = {@ApiResponse(code = 200, message = \"Success\"), @ApiResponse(code = 400, message = \"Bad Request\"), @ApiResponse(code = 404, message = \"Instance not found\"), @ApiResponse(code = 409, message = \"Instance cannot be dropped\"), @ApiResponse(code = 500, message = \"Internal error\")})\n+  public SuccessResponse toggleBrokerQpsState(\n+      @ApiParam(value = \"Broker instance name\", required = true, example = \"Broker_my.broker.com_30000\") @PathParam(\"instanceName\") String brokerInstanceName,\n+      @ApiParam(value = \"ENABLE|DISABLE\", allowableValues = \"ENABLE, DISABLE\", required = true)  @QueryParam(\"state\") String state) {\n+    List<String> liveInstances = _pinotHelixResourceManager.getOnlineInstanceList();\n+    if (brokerInstanceName == null || !brokerInstanceName.startsWith(\"Broker_\")) {\n+      LOGGER.info(\"{} isn't a valid broker instance name\", brokerInstanceName);\n+      throw new ControllerApplicationException(LOGGER,\n+          String.format(\"'%s' is not a valid broker instance name.\", brokerInstanceName), Response.Status.BAD_REQUEST);\n+    }\n+    if (!liveInstances.contains(brokerInstanceName)) {\n+      LOGGER.info(\"Broker instance: {} not found from live instances\", brokerInstanceName);\n+      throw new ControllerApplicationException(LOGGER, String.format(\"Instance '%s' not found.\", brokerInstanceName),\n+          Response.Status.NOT_FOUND);\n+    }\n+    validateQueryQuotaStateChange(state);\n+    _pinotHelixResourceManager.toggleQueryQuotaStateForBroker(brokerInstanceName, state);\n+    String msg = String.format(\"Toggled query quota state to: %s for broker: %s\", state, brokerInstanceName);", "originalCommit": "d79eeb79ab75ff741bef40f1baa71c32e64f1480", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQzNTgwNA==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r458435804", "body": "```suggestion\r\n  public SuccessResponse toggleQueryRateLimiting(\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public SuccessResponse toggleBrokerQpsState(\n          \n          \n            \n              public SuccessResponse toggleQueryRateLimiting(", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">  <span class=\"pl-k\">public</span> <span class=\"pl-smi\">SuccessResponse</span> <span class=\"x x-first x-last\">toggleBrokerQpsState</span>(</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">  <span class=\"pl-k\">public</span> <span class=\"pl-smi\">SuccessResponse</span> <span class=\"x x-first x-last\">toggleQueryRateLimiting</span>(</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "mcvsubbu", "createdAt": "2020-07-21T22:56:10Z", "path": "pinot-controller/src/main/java/org/apache/pinot/controller/api/resources/PinotBrokerRestletResource.java", "diffHunk": "@@ -129,6 +133,40 @@\n     }\n   }\n \n+\n+  @POST\n+  @Path(\"/brokers/instances/{instanceName}/qps\")\n+  @Produces(MediaType.APPLICATION_JSON)\n+  @Consumes(MediaType.TEXT_PLAIN)\n+  @ApiOperation(value = \"Enable/disable the qps quotas of an broker instance\", notes = \"Enable/disable the qps quotas of an broker instance\")\n+  @ApiResponses(value = {@ApiResponse(code = 200, message = \"Success\"), @ApiResponse(code = 400, message = \"Bad Request\"), @ApiResponse(code = 404, message = \"Instance not found\"), @ApiResponse(code = 409, message = \"Instance cannot be dropped\"), @ApiResponse(code = 500, message = \"Internal error\")})\n+  public SuccessResponse toggleBrokerQpsState(", "originalCommit": "d79eeb79ab75ff741bef40f1baa71c32e64f1480", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a6d5b1c41cd020f1c50509b2c1ada38e70595e9e", "url": "https://github.com/apache/pinot/commit/a6d5b1c41cd020f1c50509b2c1ada38e70595e9e", "message": "Address PR comments", "committedDate": "2020-07-22T04:24:39Z", "type": "forcePushed"}, {"oid": "f49108cbe4e25f6f3d9d178846844177946382b7", "url": "https://github.com/apache/pinot/commit/f49108cbe4e25f6f3d9d178846844177946382b7", "message": "Address PR comments", "committedDate": "2020-07-22T18:14:02Z", "type": "commit"}, {"oid": "f49108cbe4e25f6f3d9d178846844177946382b7", "url": "https://github.com/apache/pinot/commit/f49108cbe4e25f6f3d9d178846844177946382b7", "message": "Address PR comments", "committedDate": "2020-07-22T18:14:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA4ODA3OA==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r459088078", "body": "suggest renaming these two methods as per new change in config names", "bodyText": "suggest renaming these two methods as per new change in config names", "bodyHTML": "<p dir=\"auto\">suggest renaming these two methods as per new change in config names</p>", "author": "mcvsubbu", "createdAt": "2020-07-22T21:15:58Z", "path": "pinot-broker/src/main/java/org/apache/pinot/broker/queryquota/HelixExternalViewBasedQueryQuotaManager.java", "diffHunk": "@@ -352,13 +369,42 @@ public void processQueryQuotaChange(ExternalView currentBrokerResource) {\n         numRebuilt++;\n       }\n     }\n+    if (isQueryRateLimitDisabled()) {\n+      LOGGER.info(\"Query rate limiting is currently disabled for this broker. So it won't take effect immediately.\");\n+    }\n     _lastKnownBrokerResourceVersion.set(currentVersionNumber);\n     long endTime = System.currentTimeMillis();\n     LOGGER\n         .info(\"Processed query quota change in {}ms, {} out of {} query quota configs rebuilt.\", (endTime - startTime),\n             numRebuilt, _rateLimiterMap.size());\n   }\n \n+  /**\n+   * Process query quota state change when instance config gets changed\n+   */\n+  public void processQueryQuotaInstanceConfigChange() {", "originalCommit": "f49108cbe4e25f6f3d9d178846844177946382b7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA4OTI1MQ==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r459089251", "body": "nit: Create an error string, and then use it in log as well as exeption.\r\nSame in other places as well, will not repeat.", "bodyText": "nit: Create an error string, and then use it in log as well as exeption.\nSame in other places as well, will not repeat.", "bodyHTML": "<p dir=\"auto\">nit: Create an error string, and then use it in log as well as exeption.<br>\nSame in other places as well, will not repeat.</p>", "author": "mcvsubbu", "createdAt": "2020-07-22T21:18:14Z", "path": "pinot-controller/src/main/java/org/apache/pinot/controller/api/resources/PinotBrokerRestletResource.java", "diffHunk": "@@ -129,6 +133,40 @@\n     }\n   }\n \n+\n+  @POST\n+  @Path(\"/brokers/instances/{instanceName}/qps\")\n+  @Produces(MediaType.APPLICATION_JSON)\n+  @Consumes(MediaType.TEXT_PLAIN)\n+  @ApiOperation(value = \"Enable/disable the query rate limiting for a broker instance\", notes = \"Enable/disable the query rate limiting for a broker instance\")\n+  @ApiResponses(value = {@ApiResponse(code = 200, message = \"Success\"), @ApiResponse(code = 400, message = \"Bad Request\"), @ApiResponse(code = 404, message = \"Instance not found\"), @ApiResponse(code = 500, message = \"Internal error\")})\n+  public SuccessResponse toggleQueryRateLimiting(\n+      @ApiParam(value = \"Broker instance name\", required = true, example = \"Broker_my.broker.com_30000\") @PathParam(\"instanceName\") String brokerInstanceName,\n+      @ApiParam(value = \"ENABLE|DISABLE\", allowableValues = \"ENABLE, DISABLE\", required = true)  @QueryParam(\"state\") String state) {\n+    if (brokerInstanceName == null || !brokerInstanceName.startsWith(\"Broker_\")) {\n+      LOGGER.info(\"{} isn't a valid broker instance name\", brokerInstanceName);\n+      throw new ControllerApplicationException(LOGGER,\n+          String.format(\"'%s' is not a valid broker instance name.\", brokerInstanceName), Response.Status.BAD_REQUEST);", "originalCommit": "f49108cbe4e25f6f3d9d178846844177946382b7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA5NDM0Ng==", "url": "https://github.com/apache/pinot/pull/5724#discussion_r459094346", "bodyText": "Removed the duplicate logging.", "author": "jackjlli", "createdAt": "2020-07-22T21:28:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA4OTI1MQ=="}], "type": "inlineReview"}, {"oid": "c8882eb1c0bcaa1d737469c460be38eb475b7146", "url": "https://github.com/apache/pinot/commit/c8882eb1c0bcaa1d737469c460be38eb475b7146", "message": "Address PR comments", "committedDate": "2020-07-22T21:27:34Z", "type": "commit"}]}