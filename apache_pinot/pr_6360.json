{"pr_number": 6360, "pr_title": "compatibility test: create/delete table operations", "pr_author": "jtao15", "pr_createdAt": "2020-12-16T00:50:58Z", "pr_url": "https://github.com/apache/pinot/pull/6360", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDAyNTQ0Nw==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r544025447", "body": "You can use `ControllerRequestURLBuilder.baseUrl(CONTROLLER_URL).forSchemaCreate()`\r\n\r\nSame for table creation/deletion, the constructor should all inside `ControllerRequestURLBuilder` (If not, please add it there).", "bodyText": "You can use ControllerRequestURLBuilder.baseUrl(CONTROLLER_URL).forSchemaCreate()\nSame for table creation/deletion, the constructor should all inside ControllerRequestURLBuilder (If not, please add it there).", "bodyHTML": "<p dir=\"auto\">You can use <code>ControllerRequestURLBuilder.baseUrl(CONTROLLER_URL).forSchemaCreate()</code></p>\n<p dir=\"auto\">Same for table creation/deletion, the constructor should all inside <code>ControllerRequestURLBuilder</code> (If not, please add it there).</p>", "author": "xiangfu0", "createdAt": "2020-12-16T06:31:36Z", "path": "pinot-integration-tests/src/test/java/org/apache/pinot/compat/tests/TableOp.java", "diffHunk": "@@ -92,4 +102,34 @@ boolean runOp() {\n     }\n     return true;\n   }\n+\n+  private boolean createSchema() {\n+    try {\n+      RequestProcessor.sendPostRequestWithFile(CONTROLLER_URL + \"/schemas\", new File(_schemaFileName));", "originalCommit": "6359fb577d1cac1c38c840cae958039661304ef3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDAyODc5NA==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r544028794", "body": "I somehow feel we should wrapper something in pinot-client for management APIs. So both users and devs can reuse the code. \r\n\r\n@mayankshriv @mcvsubbu @Jackie-Jiang ", "bodyText": "I somehow feel we should wrapper something in pinot-client for management APIs. So both users and devs can reuse the code.\n@mayankshriv @mcvsubbu @Jackie-Jiang", "bodyHTML": "<p dir=\"auto\">I somehow feel we should wrapper something in pinot-client for management APIs. So both users and devs can reuse the code.</p>\n<p dir=\"auto\"><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/mayankshriv/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mayankshriv\">@mayankshriv</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/mcvsubbu/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/mcvsubbu\">@mcvsubbu</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/Jackie-Jiang/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Jackie-Jiang\">@Jackie-Jiang</a></p>", "author": "xiangfu0", "createdAt": "2020-12-16T06:35:18Z", "path": "pinot-integration-tests/src/test/java/org/apache/pinot/compat/tests/RequestProcessor.java", "diffHunk": "@@ -0,0 +1,88 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.compat.tests;\n+\n+import java.io.File;\n+import java.net.URI;\n+import org.apache.http.HttpEntity;\n+import org.apache.http.HttpVersion;\n+import org.apache.http.StatusLine;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpDelete;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.client.methods.HttpPost;\n+import org.apache.http.client.methods.HttpUriRequest;\n+import org.apache.http.client.methods.RequestBuilder;\n+import org.apache.http.entity.ContentType;\n+import org.apache.http.entity.mime.HttpMultipartMode;\n+import org.apache.http.entity.mime.MultipartEntityBuilder;\n+import org.apache.http.entity.mime.content.ContentBody;\n+import org.apache.http.entity.mime.content.FileBody;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.apache.http.util.EntityUtils;\n+import org.apache.pinot.spi.utils.JsonUtils;\n+\n+\n+public class RequestProcessor {", "originalCommit": "6359fb577d1cac1c38c840cae958039661304ef3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ3NTgzMg==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r544475832", "bodyText": "If we do expose management APIs, then instead of using the same jar, I feel like adding another jar is better. The management API may have more dependencies on other internal things that we may not want pinot-client to depend on.\nBut then most admins will not be coding in java, and may be just fine with a well-defined REST API. So, a management API may not add much value.", "author": "mcvsubbu", "createdAt": "2020-12-16T17:14:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDAyODc5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk5MjQ5Ng==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r545992496", "bodyText": "In general, I tend to confirm with DRY principle. There can be modularization as well as packaging to expose the right library to the right audience. Whether it is worth it in this particular case (especially if it increases the scope of the changes drastically), I am unsure. My $0.02.", "author": "mayankshriv", "createdAt": "2020-12-18T17:51:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDAyODc5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAwNjA5OQ==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r546006099", "bodyText": "I don't think (or, at least, I hope not) @fx19880617 is proposing to do it as a part of the testing scope. I think it was a general question. We should take that elsewhere, since it definitely does not fit into this scope (of compat tests)", "author": "mcvsubbu", "createdAt": "2020-12-18T18:17:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDAyODc5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAxMDYzMg==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r546010632", "bodyText": "Yep, and that's why my response started with \"In general\" :-)", "author": "mayankshriv", "createdAt": "2020-12-18T18:24:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDAyODc5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzc5NjY4NQ==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r543796685", "body": "pull this from the table config file", "bodyText": "pull this from the table config file", "bodyHTML": "<p dir=\"auto\">pull this from the table config file</p>", "author": "mcvsubbu", "createdAt": "2020-12-16T00:54:28Z", "path": "pinot-integration-tests/src/test/java/org/apache/pinot/compat/tests/TableOp.java", "diffHunk": "@@ -44,6 +45,9 @@\n   private String _schemaFileName;\n   private Op _op;\n   private String _tableConfigFileName;\n+  private String _tableName;", "originalCommit": "6359fb577d1cac1c38c840cae958039661304ef3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ3MzY2NA==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r544473664", "body": "You may want to put this in another file, it will be needed in all the ops.", "bodyText": "You may want to put this in another file, it will be needed in all the ops.", "bodyHTML": "<p dir=\"auto\">You may want to put this in another file, it will be needed in all the ops.</p>", "author": "mcvsubbu", "createdAt": "2020-12-16T17:11:36Z", "path": "pinot-integration-tests/src/test/java/org/apache/pinot/compat/tests/TableOp.java", "diffHunk": "@@ -44,6 +45,9 @@\n   private String _schemaFileName;\n   private Op _op;\n   private String _tableConfigFileName;\n+  private String _tableName;\n+\n+  private static final String CONTROLLER_URL = \"localhost:9000\";", "originalCommit": "6359fb577d1cac1c38c840cae958039661304ef3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjE0NTg2Nw==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r546145867", "bodyText": "Let me create a CompatTestConstants class, and put it in that file.", "author": "jtao15", "createdAt": "2020-12-18T23:33:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ3MzY2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk3MjUxNQ==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r545972515", "body": "`RequestProcessor` is too generic a name, can we use a more readable name? This is just a soft suggestion, and not a blocking comment.", "bodyText": "RequestProcessor is too generic a name, can we use a more readable name? This is just a soft suggestion, and not a blocking comment.", "bodyHTML": "<p dir=\"auto\"><code>RequestProcessor</code> is too generic a name, can we use a more readable name? This is just a soft suggestion, and not a blocking comment.</p>", "author": "mayankshriv", "createdAt": "2020-12-18T17:15:13Z", "path": "pinot-integration-tests/src/test/java/org/apache/pinot/compat/tests/RequestProcessor.java", "diffHunk": "@@ -0,0 +1,88 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.compat.tests;\n+\n+import java.io.File;\n+import java.net.URI;\n+import org.apache.http.HttpEntity;\n+import org.apache.http.HttpVersion;\n+import org.apache.http.StatusLine;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpDelete;\n+import org.apache.http.client.methods.HttpGet;\n+import org.apache.http.client.methods.HttpPost;\n+import org.apache.http.client.methods.HttpUriRequest;\n+import org.apache.http.client.methods.RequestBuilder;\n+import org.apache.http.entity.ContentType;\n+import org.apache.http.entity.mime.HttpMultipartMode;\n+import org.apache.http.entity.mime.MultipartEntityBuilder;\n+import org.apache.http.entity.mime.content.ContentBody;\n+import org.apache.http.entity.mime.content.FileBody;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.apache.http.util.EntityUtils;\n+import org.apache.pinot.spi.utils.JsonUtils;\n+\n+\n+public class RequestProcessor {", "originalCommit": "6359fb577d1cac1c38c840cae958039661304ef3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjE0NTUwNg==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r546145506", "bodyText": "Let's call it CompatTestRequestProcessor then.", "author": "jtao15", "createdAt": "2020-12-18T23:31:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk3MjUxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjE1NzU3OA==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r546157578", "bodyText": "Perhaps HttpRequestProcessor but let us see if we can leverage the existing request processor code from tests , like @fx19880617  suggested", "author": "mcvsubbu", "createdAt": "2020-12-19T00:14:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk3MjUxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjE2NzEyOQ==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r546167129", "bodyText": "I see now, let me use ControllerTest functions instead.", "author": "jtao15", "createdAt": "2020-12-19T01:06:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk3MjUxNQ=="}], "type": "inlineReview"}, {"oid": "92156f942d357781a3b6fa4adebec1089a047ed3", "url": "https://github.com/apache/pinot/commit/92156f942d357781a3b6fa4adebec1089a047ed3", "message": "compatibility test: create/delete table operations", "committedDate": "2020-12-18T23:39:18Z", "type": "forcePushed"}, {"oid": "1ae9ec0ad00ad430146b139a14ce43d31a6fb77b", "url": "https://github.com/apache/pinot/commit/1ae9ec0ad00ad430146b139a14ce43d31a6fb77b", "message": "compatibility test: create/delete table operations", "committedDate": "2020-12-19T01:04:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjE1OTMwMg==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r546159302", "body": "We are already in compat.tests package, so let us not call it CompatTestConstants\r\n\r\nFor now, call it `ClusterDescriptor` we will evolve it as we add more operators. My thought is that eventually we will get these from env variables", "bodyText": "We are already in compat.tests package, so let us not call it CompatTestConstants\nFor now, call it ClusterDescriptor we will evolve it as we add more operators. My thought is that eventually we will get these from env variables", "bodyHTML": "<p dir=\"auto\">We are already in compat.tests package, so let us not call it CompatTestConstants</p>\n<p dir=\"auto\">For now, call it <code>ClusterDescriptor</code> we will evolve it as we add more operators. My thought is that eventually we will get these from env variables</p>", "author": "mcvsubbu", "createdAt": "2020-12-19T00:23:27Z", "path": "pinot-integration-tests/src/test/java/org/apache/pinot/compat/tests/CompatTestConstants.java", "diffHunk": "@@ -0,0 +1,23 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.apache.pinot.compat.tests;\n+\n+public class CompatTestConstants {", "originalCommit": "92156f942d357781a3b6fa4adebec1089a047ed3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwODc0NA==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r546908744", "body": "Use `JsonUtils.fileToObject()` method. Already there.", "bodyText": "Use JsonUtils.fileToObject() method. Already there.", "bodyHTML": "<p dir=\"auto\">Use <code>JsonUtils.fileToObject()</code> method. Already there.</p>", "author": "mcvsubbu", "createdAt": "2020-12-21T20:13:33Z", "path": "pinot-integration-tests/src/test/java/org/apache/pinot/compat/tests/TableOp.java", "diffHunk": "@@ -92,4 +101,45 @@ boolean runOp() {\n     }\n     return true;\n   }\n+\n+  private boolean createSchema() {\n+    try {\n+      ControllerTest.sendPostRequest(\n+          ControllerRequestURLBuilder.baseUrl(CONTROLLER_URL).forSchemaCreate(),\n+          FileUtils.readFileToString(new File(_schemaFileName)));\n+      return true;\n+    } catch (IOException e) {\n+      System.out.println(e.getMessage());\n+      return false;\n+    }\n+  }\n+\n+  private boolean createTable() {\n+    try {\n+      ControllerTest.sendPostRequest(\n+          ControllerRequestURLBuilder.baseUrl(CONTROLLER_URL).forSchemaCreate(),\n+          FileUtils.readFileToString(new File(_schemaFileName)));\n+      return true;\n+    } catch (IOException e) {\n+      System.out.println(e.getMessage());\n+      return false;\n+    }\n+  }\n+\n+  private boolean deleteTable() {\n+    try {\n+      ControllerTest.sendDeleteRequest(\n+          ControllerRequestURLBuilder.baseUrl(CONTROLLER_URL).forTableDelete(getTableNameFromTableConfigFile()));\n+      return true;\n+    } catch (IOException e) {\n+      System.out.println(e.getMessage());\n+      return false;\n+    }\n+  }\n+\n+  private String getTableNameFromTableConfigFile() throws IOException {", "originalCommit": "1ae9ec0ad00ad430146b139a14ce43d31a6fb77b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "52aa498eb04f784fda46d631e0cf097974a01a0f", "url": "https://github.com/apache/pinot/commit/52aa498eb04f784fda46d631e0cf097974a01a0f", "message": "compatibility test: create/delete table operations", "committedDate": "2020-12-21T23:34:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk5OTI0Mw==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r546999243", "body": "Let us change this to an error log for now. We can then configure logs appropriately to get whatever we want on the console.\r\nAlso, include the  table config file path on all log messages", "bodyText": "Let us change this to an error log for now. We can then configure logs appropriately to get whatever we want on the console.\nAlso, include the  table config file path on all log messages", "bodyHTML": "<p dir=\"auto\">Let us change this to an error log for now. We can then configure logs appropriately to get whatever we want on the console.<br>\nAlso, include the  table config file path on all log messages</p>", "author": "mcvsubbu", "createdAt": "2020-12-22T00:26:13Z", "path": "pinot-integration-tests/src/test/java/org/apache/pinot/compat/tests/TableOp.java", "diffHunk": "@@ -92,4 +101,40 @@ boolean runOp() {\n     }\n     return true;\n   }\n+\n+  private boolean createSchema() {\n+    try {\n+      ControllerTest.sendPostRequest(\n+          ControllerRequestURLBuilder.baseUrl(CONTROLLER_URL).forSchemaCreate(),\n+          FileUtils.readFileToString(new File(_schemaFileName)));\n+      return true;\n+    } catch (IOException e) {\n+      System.out.println(e.getMessage());", "originalCommit": "52aa498eb04f784fda46d631e0cf097974a01a0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk5OTI4Ng==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r546999286", "body": "error log", "bodyText": "error log", "bodyHTML": "<p dir=\"auto\">error log</p>", "author": "mcvsubbu", "createdAt": "2020-12-22T00:26:21Z", "path": "pinot-integration-tests/src/test/java/org/apache/pinot/compat/tests/TableOp.java", "diffHunk": "@@ -92,4 +101,40 @@ boolean runOp() {\n     }\n     return true;\n   }\n+\n+  private boolean createSchema() {\n+    try {\n+      ControllerTest.sendPostRequest(\n+          ControllerRequestURLBuilder.baseUrl(CONTROLLER_URL).forSchemaCreate(),\n+          FileUtils.readFileToString(new File(_schemaFileName)));\n+      return true;\n+    } catch (IOException e) {\n+      System.out.println(e.getMessage());\n+      return false;\n+    }\n+  }\n+\n+  private boolean createTable() {\n+    try {\n+      ControllerTest.sendPostRequest(\n+          ControllerRequestURLBuilder.baseUrl(CONTROLLER_URL).forSchemaCreate(),\n+          FileUtils.readFileToString(new File(_schemaFileName)));\n+      return true;\n+    } catch (IOException e) {\n+      System.out.println(e.getMessage());", "originalCommit": "52aa498eb04f784fda46d631e0cf097974a01a0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk5OTM3Nw==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r546999377", "body": "change to error log", "bodyText": "change to error log", "bodyHTML": "<p dir=\"auto\">change to error log</p>", "author": "mcvsubbu", "createdAt": "2020-12-22T00:26:40Z", "path": "pinot-integration-tests/src/test/java/org/apache/pinot/compat/tests/TableOp.java", "diffHunk": "@@ -92,4 +101,40 @@ boolean runOp() {\n     }\n     return true;\n   }\n+\n+  private boolean createSchema() {\n+    try {\n+      ControllerTest.sendPostRequest(\n+          ControllerRequestURLBuilder.baseUrl(CONTROLLER_URL).forSchemaCreate(),\n+          FileUtils.readFileToString(new File(_schemaFileName)));\n+      return true;\n+    } catch (IOException e) {\n+      System.out.println(e.getMessage());\n+      return false;\n+    }\n+  }\n+\n+  private boolean createTable() {\n+    try {\n+      ControllerTest.sendPostRequest(\n+          ControllerRequestURLBuilder.baseUrl(CONTROLLER_URL).forSchemaCreate(),\n+          FileUtils.readFileToString(new File(_schemaFileName)));\n+      return true;\n+    } catch (IOException e) {\n+      System.out.println(e.getMessage());\n+      return false;\n+    }\n+  }\n+\n+  private boolean deleteTable() {\n+    try {\n+      TableConfig tableConfig = JsonUtils.fileToObject(new File(_tableConfigFileName), TableConfig.class);\n+      ControllerTest.sendDeleteRequest(\n+          ControllerRequestURLBuilder.baseUrl(CONTROLLER_URL).forTableDelete(tableConfig.getTableName()));\n+      return true;\n+    } catch (IOException e) {\n+      System.out.println(e.getMessage());", "originalCommit": "52aa498eb04f784fda46d631e0cf097974a01a0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk5OTg0Mg==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r546999842", "body": "dont need this anymore", "bodyText": "dont need this anymore", "bodyHTML": "<p dir=\"auto\">dont need this anymore</p>", "author": "mcvsubbu", "createdAt": "2020-12-22T00:28:34Z", "path": "pinot-integration-tests/src/test/java/org/apache/pinot/compat/tests/TableOp.java", "diffHunk": "@@ -45,6 +54,8 @@\n   private Op _op;\n   private String _tableConfigFileName;\n \n+  private static final String TABLE_NAME = \"tableName\";", "originalCommit": "52aa498eb04f784fda46d631e0cf097974a01a0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1e632205207a504503659226b906525f8eeb59ed", "url": "https://github.com/apache/pinot/commit/1e632205207a504503659226b906525f8eeb59ed", "message": "compatibility test: create/delete table operations", "committedDate": "2020-12-22T01:13:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzAyODk1MA==", "url": "https://github.com/apache/pinot/pull/6360#discussion_r547028950", "body": "Please avoid import static", "bodyText": "Please avoid import static", "bodyHTML": "<p dir=\"auto\">Please avoid import static</p>", "author": "mcvsubbu", "createdAt": "2020-12-22T02:17:54Z", "path": "pinot-integration-tests/src/test/java/org/apache/pinot/compat/tests/TableOp.java", "diffHunk": "@@ -19,6 +19,17 @@\n package org.apache.pinot.compat.tests;\n \n import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n+import java.io.File;\n+import java.io.IOException;\n+import org.apache.commons.io.FileUtils;\n+import org.apache.pinot.controller.helix.ControllerRequestURLBuilder;\n+import org.apache.pinot.controller.helix.ControllerTest;\n+import org.apache.pinot.spi.config.table.TableConfig;\n+import org.apache.pinot.spi.utils.JsonUtils;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import static org.apache.pinot.compat.tests.ClusterDescriptor.CONTROLLER_URL;", "originalCommit": "1e632205207a504503659226b906525f8eeb59ed", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4df903121e605022ee4c0781a89e59764a0ca823", "url": "https://github.com/apache/pinot/commit/4df903121e605022ee4c0781a89e59764a0ca823", "message": "compatibility test: create/delete table operations", "committedDate": "2020-12-22T02:27:41Z", "type": "commit"}, {"oid": "4df903121e605022ee4c0781a89e59764a0ca823", "url": "https://github.com/apache/pinot/commit/4df903121e605022ee4c0781a89e59764a0ca823", "message": "compatibility test: create/delete table operations", "committedDate": "2020-12-22T02:27:41Z", "type": "forcePushed"}]}