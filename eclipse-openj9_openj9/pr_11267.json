{"pr_number": 11267, "pr_title": "Add a stub for NativeMethodHandle in JDK16", "pr_author": "babsingh", "pr_createdAt": "2020-11-24T21:09:42Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/11267", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTkyMDQwNg==", "url": "https://github.com/eclipse-openj9/openj9/pull/11267#discussion_r529920406", "body": "All uses of `OpenJDKCompileStubThrowError()` should be in a `throw` statement:\r\n```\r\n  throw OpenJDKCompileStub.OpenJDKCompileStubThrowError();\r\n```", "bodyText": "All uses of OpenJDKCompileStubThrowError() should be in a throw statement:\n  throw OpenJDKCompileStub.OpenJDKCompileStubThrowError();", "bodyHTML": "<p dir=\"auto\">All uses of <code>OpenJDKCompileStubThrowError()</code> should be in a <code>throw</code> statement:</p>\n<div class=\"snippet-clipboard-content position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"  throw OpenJDKCompileStub.OpenJDKCompileStubThrowError();\"><pre><code>  throw OpenJDKCompileStub.OpenJDKCompileStubThrowError();\n</code></pre></div>", "author": "keithc-ca", "createdAt": "2020-11-24T22:07:53Z", "path": "jcl/src/java.base/share/classes/java/lang/invoke/NativeMethodHandle.java", "diffHunk": "@@ -112,3 +113,25 @@ void compareWithNative(NativeMethodHandle left, Comparator c) {\n \t\tc.compareStructuralParameter(left.vmSlot, this.vmSlot);\n \t}\n }\n+/*[ELSE]*/\n+import java.util.List;\n+import jdk.internal.invoke.NativeEntryPoint;\n+\n+class NativeMethodHandle extends MethodHandle {\n+\tpublic static MethodHandle make(NativeEntryPoint entryPoint, MethodHandle mh) {\n+\t\tOpenJDKCompileStub.OpenJDKCompileStubThrowError();\n+\t\treturn null;", "originalCommit": "12dd2aa48fe20f5eb77893b0d99e4a08dcece337", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTkyMTAzMw==", "url": "https://github.com/eclipse-openj9/openj9/pull/11267#discussion_r529921033", "body": "This should repeat the condition:\r\n```\r\n/*[ELSE] Panama */\r\n```", "bodyText": "This should repeat the condition:\n/*[ELSE] Panama */", "bodyHTML": "<p dir=\"auto\">This should repeat the condition:</p>\n<div class=\"snippet-clipboard-content position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"/*[ELSE] Panama */\n\"><pre><code>/*[ELSE] Panama */\n</code></pre></div>", "author": "keithc-ca", "createdAt": "2020-11-24T22:08:30Z", "path": "jcl/src/java.base/share/classes/java/lang/invoke/NativeMethodHandle.java", "diffHunk": "@@ -112,3 +113,25 @@ void compareWithNative(NativeMethodHandle left, Comparator c) {\n \t\tc.compareStructuralParameter(left.vmSlot, this.vmSlot);\n \t}\n }\n+/*[ELSE]*/", "originalCommit": "12dd2aa48fe20f5eb77893b0d99e4a08dcece337", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTkyMjU4OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/11267#discussion_r529922588", "body": "Please use spaces around binary operators, just like you would in C code:\r\n```\r\n/*[INCLUDE-IF Panama | (JAVA_SPEC_VERSION >= 16)]*/\r\n```", "bodyText": "Please use spaces around binary operators, just like you would in C code:\n/*[INCLUDE-IF Panama | (JAVA_SPEC_VERSION >= 16)]*/", "bodyHTML": "<p dir=\"auto\">Please use spaces around binary operators, just like you would in C code:</p>\n<div class=\"snippet-clipboard-content position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"/*[INCLUDE-IF Panama | (JAVA_SPEC_VERSION &gt;= 16)]*/\n\"><pre><code>/*[INCLUDE-IF Panama | (JAVA_SPEC_VERSION &gt;= 16)]*/\n</code></pre></div>", "author": "keithc-ca", "createdAt": "2020-11-24T22:09:53Z", "path": "jcl/src/java.base/share/classes/java/lang/invoke/NativeMethodHandle.java", "diffHunk": "@@ -1,4 +1,4 @@\n-/*[INCLUDE-IF Panama]*/\n+/*[INCLUDE-IF Panama|(JAVA_SPEC_VERSION >= 16)]*/", "originalCommit": "12dd2aa48fe20f5eb77893b0d99e4a08dcece337", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6d80b3b73bce482ba5a67177dd4bd7e752515161", "url": "https://github.com/eclipse-openj9/openj9/commit/6d80b3b73bce482ba5a67177dd4bd7e752515161", "message": "Add a stub for NativeMethodHandle in JDK16\n\nfixes: https://github.com/eclipse/openj9/issues/11255\n\nSigned-off-by: Babneet Singh <sbabneet@ca.ibm.com>", "committedDate": "2020-11-24T22:53:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTk3MzU4NA==", "url": "https://github.com/eclipse-openj9/openj9/pull/11267#discussion_r529973584", "body": "This won't compile: the `return` here (and in `addRelatedMHs()`) is unreachable.", "bodyText": "This won't compile: the return here (and in addRelatedMHs()) is unreachable.", "bodyHTML": "<p dir=\"auto\">This won't compile: the <code>return</code> here (and in <code>addRelatedMHs()</code>) is unreachable.</p>", "author": "keithc-ca", "createdAt": "2020-11-24T22:58:29Z", "path": "jcl/src/java.base/share/classes/java/lang/invoke/NativeMethodHandle.java", "diffHunk": "@@ -112,3 +113,25 @@ void compareWithNative(NativeMethodHandle left, Comparator c) {\n \t\tc.compareStructuralParameter(left.vmSlot, this.vmSlot);\n \t}\n }\n+/*[ELSE] Panama */\n+import java.util.List;\n+import jdk.internal.invoke.NativeEntryPoint;\n+\n+class NativeMethodHandle extends MethodHandle {\n+\tpublic static MethodHandle make(NativeEntryPoint entryPoint, MethodHandle mh) {\n+\t\tthrow OpenJDKCompileStub.OpenJDKCompileStubThrowError();\n+\t\treturn null;", "originalCommit": "6d80b3b73bce482ba5a67177dd4bd7e752515161", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "790c0ef24012b61437f914dfbd0c198ae5861ab2", "url": "https://github.com/eclipse-openj9/openj9/commit/790c0ef24012b61437f914dfbd0c198ae5861ab2", "message": "Add a stub for NativeMethodHandle in JDK16\n\nfixes: https://github.com/eclipse/openj9/issues/11255\n\nSigned-off-by: Babneet Singh <sbabneet@ca.ibm.com>", "committedDate": "2020-11-24T23:09:01Z", "type": "commit"}, {"oid": "790c0ef24012b61437f914dfbd0c198ae5861ab2", "url": "https://github.com/eclipse-openj9/openj9/commit/790c0ef24012b61437f914dfbd0c198ae5861ab2", "message": "Add a stub for NativeMethodHandle in JDK16\n\nfixes: https://github.com/eclipse/openj9/issues/11255\n\nSigned-off-by: Babneet Singh <sbabneet@ca.ibm.com>", "committedDate": "2020-11-24T23:09:01Z", "type": "forcePushed"}]}