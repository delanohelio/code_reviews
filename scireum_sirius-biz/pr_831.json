{"pr_number": 831, "pr_title": "Provides a helper which directly creates potentially long running que\u2026", "pr_author": "andyHa", "pr_createdAt": "2020-07-26T11:02:06Z", "pr_url": "https://github.com/scireum/sirius-biz/pull/831", "timeline": [{"oid": "22c8de1cf5401c32a22de77dd3620d790bee86d7", "url": "https://github.com/scireum/sirius-biz/commit/22c8de1cf5401c32a22de77dd3620d790bee86d7", "message": "Provides a helper which directly creates potentially long running queries on the statistics warehouse.\n\n(Note, the queries are not made long running by the system but rather the framework will not report\nthese queries, as these are expected to be \"slower\" when crunching billions of rows).", "committedDate": "2020-07-26T09:22:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUxNTYzNA==", "url": "https://github.com/scireum/sirius-biz/pull/831#discussion_r460515634", "body": "```suggestion\r\n     * This is a Clickhouse database and the given query is automatically marked as potentially long running to\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * This is a Clickhouse database and the given query is automatically marked as potentiall long running to\n          \n          \n            \n                 * This is a Clickhouse database and the given query is automatically marked as potentially long running to", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">This</span> is a <span class=\"pl-smi\">Clickhouse</span> database and the given query is automatically marked as <span class=\"x x-first x-last\">potentiall</span> <span class=\"pl-k\">long</span> running to</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">This</span> is a <span class=\"pl-smi\">Clickhouse</span> database and the given query is automatically marked as <span class=\"x x-first x-last\">potentially</span> <span class=\"pl-k\">long</span> running to</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "meg1502", "createdAt": "2020-07-26T11:33:12Z", "path": "src/main/java/sirius/biz/analytics/events/EventRecorder.java", "diffHunk": "@@ -135,6 +136,27 @@ public Database getDatabase() {\n         return database;\n     }\n \n+    /**\n+     * Directly creates a new quey on the datastore used for events.\n+     * <p>\n+     * This is a Clickhouse database and the given query is automatically marked as potentiall long running to", "originalCommit": "22c8de1cf5401c32a22de77dd3620d790bee86d7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "64a85d80f2263f40b9cdbbb229e62d94db611a78", "url": "https://github.com/scireum/sirius-biz/commit/64a85d80f2263f40b9cdbbb229e62d94db611a78", "message": "Update src/main/java/sirius/biz/analytics/events/EventRecorder.java\n\nCo-authored-by: meg1502 <meg@scireum.de>", "committedDate": "2020-07-26T11:37:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU2NDc1MA==", "url": "https://github.com/scireum/sirius-biz/pull/831#discussion_r460564750", "body": "```suggestion\r\n     * Directly creates a new query on the datastore used for events.\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Directly creates a new quey on the datastore used for events.\n          \n          \n            \n                 * Directly creates a new query on the datastore used for events.", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Directly</span> creates a <span class=\"pl-k\">new</span> <span class=\"x x-first x-last\">quey</span> on the datastore used for events.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Directly</span> creates a <span class=\"pl-k\">new</span> <span class=\"x x-first x-last\">query</span> on the datastore used for events.</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "bwiedmann", "createdAt": "2020-07-26T19:34:11Z", "path": "src/main/java/sirius/biz/analytics/events/EventRecorder.java", "diffHunk": "@@ -135,6 +136,27 @@ public Database getDatabase() {\n         return database;\n     }\n \n+    /**\n+     * Directly creates a new quey on the datastore used for events.", "originalCommit": "64a85d80f2263f40b9cdbbb229e62d94db611a78", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU2NDg0OA==", "url": "https://github.com/scireum/sirius-biz/pull/831#discussion_r460564848", "body": "Codestyle?", "bodyText": "Codestyle?", "bodyHTML": "<p dir=\"auto\">Codestyle?</p>", "author": "bwiedmann", "createdAt": "2020-07-26T19:35:03Z", "path": "src/main/java/sirius/biz/analytics/events/EventRecorder.java", "diffHunk": "@@ -135,6 +136,27 @@ public Database getDatabase() {\n         return database;\n     }\n \n+    /**\n+     * Directly creates a new quey on the datastore used for events.\n+     * <p>\n+     * This is a Clickhouse database and the given query is automatically marked as potentially long running to\n+     * suppress warnings if the query takes longer than a usual SQL query (which is kind of expected for large\n+     * data warehouses).\n+     *\n+     * @param sql the SQL to execute. Note that this should be a constant string as parameters can later be passed in\n+     *            using {@link SQLQuery#set(String, Object)}", "originalCommit": "64a85d80f2263f40b9cdbbb229e62d94db611a78", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDY2MjUxMg==", "url": "https://github.com/scireum/sirius-biz/pull/831#discussion_r460662512", "bodyText": "Einr\u00fcckung passt hier glaub", "author": "sabieber", "createdAt": "2020-07-27T05:59:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDU2NDg0OA=="}], "type": "inlineReview"}, {"oid": "611da2fdc98c70400b382d836936ac90baa59722", "url": "https://github.com/scireum/sirius-biz/commit/611da2fdc98c70400b382d836936ac90baa59722", "message": "Update src/main/java/sirius/biz/analytics/events/EventRecorder.java\n\nCo-authored-by: Benjamin Wiedmann <bwi@scireum.de>", "committedDate": "2020-07-27T15:32:17Z", "type": "commit"}, {"oid": "dfc826953b903f088a1a703d8ea8c560bfa2d400", "url": "https://github.com/scireum/sirius-biz/commit/dfc826953b903f088a1a703d8ea8c560bfa2d400", "message": "Updates to the latest sirius-db and -web.", "committedDate": "2020-07-28T09:06:15Z", "type": "commit"}, {"oid": "24b6d67977627f7f86f0bc5096acfaf01881e991", "url": "https://github.com/scireum/sirius-biz/commit/24b6d67977627f7f86f0bc5096acfaf01881e991", "message": "Merge branch 'master' into aha/clickhouse-update", "committedDate": "2020-07-28T09:07:19Z", "type": "commit"}]}