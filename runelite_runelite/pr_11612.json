{"pr_number": 11612, "pr_title": "item stats - Fix Sanfew Serum and Revitalisation bonus calculations", "pr_author": "TheStonedTurtle", "pr_createdAt": "2020-05-15T14:24:29Z", "pr_url": "https://github.com/runelite/runelite/pull/11612", "timeline": [{"oid": "c35c6203d18c0a629e103b9240682128f2f1119d", "url": "https://github.com/runelite/runelite/commit/c35c6203d18c0a629e103b9240682128f2f1119d", "message": "item stats - Fix sanfew serum restore bonuses", "committedDate": "2020-05-15T14:25:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA3NzM1NA==", "url": "https://github.com/runelite/runelite/pull/11612#discussion_r429077354", "body": "Add a comment with the source of this data\r\n```suggestion\r\n\t\t// https://oldschool.runescape.wiki/w/Revitalisation_(%2B)#Maximum_stat_restoration\r\n\t\tREVITALISATION_TABLE = new ImmutableMap.Builder<Integer, Integer>()\r\n```", "bodyText": "Add a comment with the source of this data\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tREVITALISATION_TABLE = new ImmutableMap.Builder<Integer, Integer>()\n          \n          \n            \n            \t\t// https://oldschool.runescape.wiki/w/Revitalisation_(%2B)#Maximum_stat_restoration\n          \n          \n            \n            \t\tREVITALISATION_TABLE = new ImmutableMap.Builder<Integer, Integer>()", "bodyHTML": "<p dir=\"auto\">Add a comment with the source of this data</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"51\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-c1 x x-first\">REVITALISATION_TABLE</span><span class=\"x\"> </span><span class=\"pl-k x\">=</span><span class=\"x\"> </span><span class=\"pl-k x\">new</span><span class=\"x\"> </span><span class=\"pl-smi x\">ImmutableMap</span><span class=\"x\">.</span><span class=\"pl-k\"><span class=\"x\">Builder&lt;</span><span class=\"pl-smi x\">Integer</span><span class=\"x\">, </span><span class=\"pl-smi x\">Integer</span><span class=\"x\">&gt;</span></span><span class=\"x x-last\">()</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"51\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-c\"><span class=\"pl-c x x-first\">//</span><span class=\"x x-last\"> https://oldschool.runescape.wiki/w/Revitalisation_(%2B)#Maximum_stat_restoration</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"52\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-c1\">REVITALISATION_TABLE</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">ImmutableMap</span>.<span class=\"pl-k\">Builder&lt;<span class=\"pl-smi\">Integer</span>, <span class=\"pl-smi\">Integer</span>&gt;</span>()</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2020-05-22T07:04:03Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/itemstats/ItemStatEffectTest.java", "diffHunk": "@@ -0,0 +1,120 @@\n+/*\n+ * Copyright (c) 2020, TheStonedTurtle <https://github.com/TheStonedTurtle>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.itemstats;\n+\n+import com.google.common.collect.ImmutableMap;\n+import com.google.inject.testing.fieldbinder.Bind;\n+import java.util.Map;\n+import net.runelite.api.Client;\n+import net.runelite.api.ItemID;\n+import net.runelite.api.Skill;\n+import static org.junit.Assert.assertEquals;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import static org.mockito.ArgumentMatchers.any;\n+import org.mockito.Mock;\n+import static org.mockito.Mockito.when;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+public class ItemStatEffectTest\n+{\n+\tprivate static final ImmutableMap<Integer, Integer> REVITALISATION_TABLE;\n+\n+\tstatic\n+\t{\n+\t\tREVITALISATION_TABLE = new ImmutableMap.Builder<Integer, Integer>()", "originalCommit": "4f48e620e6b5081a6eae1d99add8e74130ef0f0a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA3OTA1NQ==", "url": "https://github.com/runelite/runelite/pull/11612#discussion_r429079055", "body": "```suggestion\r\n\t\t// https://oldschool.runescape.wiki/w/Super_restore#Maximum_restoration\r\n\t\tSUPER_RESTORE_TABLE = new ImmutableMap.Builder<Integer, Integer>()\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tSUPER_RESTORE_TABLE = new ImmutableMap.Builder<Integer, Integer>()\n          \n          \n            \n            \t\t// https://oldschool.runescape.wiki/w/Super_restore#Maximum_restoration\n          \n          \n            \n            \t\tSUPER_RESTORE_TABLE = new ImmutableMap.Builder<Integer, Integer>()", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"85\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-c1 x x-first\">SUPER_RESTORE_TABLE</span><span class=\"x\"> </span><span class=\"pl-k x\">=</span><span class=\"x\"> </span><span class=\"pl-k x\">new</span><span class=\"x\"> </span><span class=\"pl-smi x\">ImmutableMap</span><span class=\"x\">.</span><span class=\"pl-k\"><span class=\"x\">Builder&lt;</span><span class=\"pl-smi x\">Integer</span><span class=\"x\">, </span><span class=\"pl-smi x\">Integer</span><span class=\"x\">&gt;</span></span><span class=\"x x-last\">()</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"85\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-c\"><span class=\"pl-c x x-first\">//</span><span class=\"x x-last\"> https://oldschool.runescape.wiki/w/Super_restore#Maximum_restoration</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"86\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-c1\">SUPER_RESTORE_TABLE</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">ImmutableMap</span>.<span class=\"pl-k\">Builder&lt;<span class=\"pl-smi\">Integer</span>, <span class=\"pl-smi\">Integer</span>&gt;</span>()</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2020-05-22T07:08:46Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/itemstats/ItemStatEffectTest.java", "diffHunk": "@@ -78,6 +86,50 @@\n \t\t\t.put(47, 25)  \t.put(97, 40)\n \t\t\t.put(49, 25)  \t.put(99, 40)\n \t\t\t.build();\n+\n+\t\tSUPER_RESTORE_TABLE = new ImmutableMap.Builder<Integer, Integer>()", "originalCommit": "c35c6203d18c0a629e103b9240682128f2f1119d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA3OTA5Mw==", "url": "https://github.com/runelite/runelite/pull/11612#discussion_r429079093", "body": "```suggestion\r\n\t\t// https://oldschool.runescape.wiki/w/Sanfew_serum#Maximum_restoration\r\n\t\tSANFEW_TABLE = new ImmutableMap.Builder<Integer, Integer>()\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tSANFEW_TABLE = new ImmutableMap.Builder<Integer, Integer>()\n          \n          \n            \n            \t\t// https://oldschool.runescape.wiki/w/Sanfew_serum#Maximum_restoration\n          \n          \n            \n            \t\tSANFEW_TABLE = new ImmutableMap.Builder<Integer, Integer>()", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"107\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-c1 x x-first\">SANFEW_TABLE</span><span class=\"x\"> </span><span class=\"pl-k x\">=</span><span class=\"x\"> </span><span class=\"pl-k x\">new</span><span class=\"x\"> </span><span class=\"pl-smi x\">ImmutableMap</span><span class=\"x\">.</span><span class=\"pl-k\"><span class=\"x\">Builder&lt;</span><span class=\"pl-smi x\">Integer</span><span class=\"x\">, </span><span class=\"pl-smi x\">Integer</span><span class=\"x\">&gt;</span></span><span class=\"x x-last\">()</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"107\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-c\"><span class=\"pl-c x x-first\">//</span><span class=\"x x-last\"> https://oldschool.runescape.wiki/w/Sanfew_serum#Maximum_restoration</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"108\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-c1\">SANFEW_TABLE</span> <span class=\"pl-k\">=</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">ImmutableMap</span>.<span class=\"pl-k\">Builder&lt;<span class=\"pl-smi\">Integer</span>, <span class=\"pl-smi\">Integer</span>&gt;</span>()</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2020-05-22T07:08:56Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/itemstats/ItemStatEffectTest.java", "diffHunk": "@@ -78,6 +86,50 @@\n \t\t\t.put(47, 25)  \t.put(97, 40)\n \t\t\t.put(49, 25)  \t.put(99, 40)\n \t\t\t.build();\n+\n+\t\tSUPER_RESTORE_TABLE = new ImmutableMap.Builder<Integer, Integer>()\n+\t\t\t.put(1, 8)    \t.put(36, 17)  \t.put(72, 26)\n+\t\t\t.put(3, 8)    \t.put(39, 17)  \t.put(75, 26)\n+\t\t\t.put(4, 9)    \t.put(40, 18)  \t.put(76, 27)\n+\t\t\t.put(7, 9)    \t.put(43, 18)  \t.put(79, 27)\n+\t\t\t.put(8, 10)   \t.put(44, 19)  \t.put(80, 28)\n+\t\t\t.put(11, 10)  \t.put(47, 19)  \t.put(83, 28)\n+\t\t\t.put(12, 11)  \t.put(48, 20)  \t.put(84, 29)\n+\t\t\t.put(15, 11)  \t.put(51, 20)  \t.put(87, 29)\n+\t\t\t.put(16, 12)  \t.put(52, 21)  \t.put(88, 30)\n+\t\t\t.put(19, 12)  \t.put(55, 21)  \t.put(91, 30)\n+\t\t\t.put(20, 13)  \t.put(56, 22)  \t.put(92, 31)\n+\t\t\t.put(23, 13)  \t.put(59, 22)  \t.put(95, 31)\n+\t\t\t.put(24, 14)  \t.put(60, 23)  \t.put(96, 32)\n+\t\t\t.put(27, 14)  \t.put(63, 23)  \t.put(99, 32)\n+\t\t\t.put(28, 15)  \t.put(64, 24)\n+\t\t\t.put(31, 15)  \t.put(67, 24)\n+\t\t\t.put(32, 16)  \t.put(68, 25)\n+\t\t\t.put(35, 16)  \t.put(71, 25)\n+\t\t\t.build();\n+\n+\t\tSANFEW_TABLE = new ImmutableMap.Builder<Integer, Integer>()", "originalCommit": "c35c6203d18c0a629e103b9240682128f2f1119d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA4MTcxNA==", "url": "https://github.com/runelite/runelite/pull/11612#discussion_r429081714", "body": "Given that the wrench test code is exactly the same as the implementation, I don't see a reason to test it.", "bodyText": "Given that the wrench test code is exactly the same as the implementation, I don't see a reason to test it.", "bodyHTML": "<p dir=\"auto\">Given that the wrench test code is exactly the same as the implementation, I don't see a reason to test it.</p>", "author": "Nightfirecat", "createdAt": "2020-05-22T07:15:53Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/itemstats/ItemStatEffectTest.java", "diffHunk": "@@ -93,15 +145,59 @@ public void prepare()\n \t\t\t.thenReturn(0);\n \t}\n \n+\tprivate void prepareInventory()\n+\t{\n+\t\tfinal Item holy_wrench = new Item(ItemID.HOLY_WRENCH, 1);\n+\t\tfinal ItemContainer invi = mock(ItemContainer.class);\n+\t\twhen(invi.getItems())\n+\t\t\t.thenReturn(new Item[]{holy_wrench});\n+\n+\t\twhen(client.getItemContainer(eq(InventoryID.INVENTORY)))\n+\t\t\t.thenReturn(invi);\n+\t}\n+\n \t@Test\n \tpublic void testRevitalisationPlus()\n \t{\n \t\tfinal Effect item = itemStats.get(ItemID.REVITALISATION_1_20957);\n-\t\tmatchWikiTable(REVITALISATION_TABLE, item);\n+\t\tmatchWikiTable(REVITALISATION_TABLE, item, false);\n \t}\n \n-\tprivate void matchWikiTable(final ImmutableMap<Integer, Integer> table, final Effect item)\n+\t@Test\n+\tpublic void testSuperRestore()\n \t{\n+\t\tfinal Effect item = itemStats.get(ItemID.SUPER_RESTORE1);\n+\t\tmatchWikiTable(SUPER_RESTORE_TABLE, item, false);\n+\t}\n+\n+\t@Test\n+\tpublic void testSuperRestoreWithWrench()\n+\t{\n+\t\tprepareInventory();\n+\n+\t\tfinal Effect item = itemStats.get(ItemID.SUPER_RESTORE1);\n+\t\tmatchWikiTable(SUPER_RESTORE_TABLE, item, true);\n+\t}\n+\n+\t@Test\n+\tpublic void testSanfewSerum()\n+\t{\n+\t\tfinal Effect item = itemStats.get(ItemID.SANFEW_SERUM1);\n+\t\tmatchWikiTable(SANFEW_TABLE, item, false);\n+\t}\n+\n+\t@Test\n+\tpublic void testSanfewSerumWithWrench()\n+\t{\n+\t\tprepareInventory();\n+\n+\t\tfinal Effect item = itemStats.get(ItemID.SANFEW_SERUM1);\n+\t\tmatchWikiTable(SANFEW_TABLE, item, true);\n+\t}\n+\n+\tprivate void matchWikiTable(final ImmutableMap<Integer, Integer> table, final Effect item, boolean hasWrench)", "originalCommit": "c35c6203d18c0a629e103b9240682128f2f1119d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e02141e348c2da478ff64590a527b77731676393", "url": "https://github.com/runelite/runelite/commit/e02141e348c2da478ff64590a527b77731676393", "message": "item stats - Fix sanfew serum restore bonuses", "committedDate": "2020-05-22T07:40:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE1OTAzOQ==", "url": "https://github.com/runelite/runelite/pull/11612#discussion_r430159039", "body": "Nit-pick, but tabs shouldn't be included after the initial indentation. All of the alignment of table entries should be done using spaces. For instance, this line would be changed as follows:\r\n```suggestion\r\n\t\t\t.put(1, 8)      .put(36, 17)    .put(72, 26)\r\n```", "bodyText": "Nit-pick, but tabs shouldn't be included after the initial indentation. All of the alignment of table entries should be done using spaces. For instance, this line would be changed as follows:\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t.put(1, 8)    \t.put(36, 17)  \t.put(72, 26)\n          \n          \n            \n            \t\t\t.put(1, 8)      .put(36, 17)    .put(72, 26)", "bodyHTML": "<p dir=\"auto\">Nit-pick, but tabs shouldn't be included after the initial indentation. All of the alignment of table entries should be done using spaces. For instance, this line would be changed as follows:</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t\t.put(<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">8</span>)    <span class=\"x x-first x-last\">\t</span>.put(<span class=\"pl-c1\">36</span>, <span class=\"pl-c1\">17</span>)  <span class=\"x x-first x-last\">\t</span>.put(<span class=\"pl-c1\">72</span>, <span class=\"pl-c1\">26</span>)</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\t.put(<span class=\"pl-c1\">1</span>, <span class=\"pl-c1\">8</span>)    <span class=\"x x-first x-last\">  </span>.put(<span class=\"pl-c1\">36</span>, <span class=\"pl-c1\">17</span>)  <span class=\"x x-first x-last\">  </span>.put(<span class=\"pl-c1\">72</span>, <span class=\"pl-c1\">26</span>)</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2020-05-26T05:11:55Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/itemstats/ItemStatEffectTest.java", "diffHunk": "@@ -79,6 +86,52 @@\n \t\t\t.put(47, 25)  \t.put(97, 40)\n \t\t\t.put(49, 25)  \t.put(99, 40)\n \t\t\t.build();\n+\n+\t\t// https://oldschool.runescape.wiki/w/Super_restore#Maximum_restoration\n+\t\tSUPER_RESTORE_TABLE = new ImmutableMap.Builder<Integer, Integer>()\n+\t\t\t.put(1, 8)    \t.put(36, 17)  \t.put(72, 26)", "originalCommit": "e02141e348c2da478ff64590a527b77731676393", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5174554b5802b5a8511ba79a6ff66f99e8e7f972", "url": "https://github.com/runelite/runelite/commit/5174554b5802b5a8511ba79a6ff66f99e8e7f972", "message": "item stats - Fix sanfew serum restore bonuses", "committedDate": "2020-05-26T05:40:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIxNzE2MA==", "url": "https://github.com/runelite/runelite/pull/11612#discussion_r432217160", "body": "This looks like it's left behind from the holy wrench testing that was removed.", "bodyText": "This looks like it's left behind from the holy wrench testing that was removed.", "bodyHTML": "<p dir=\"auto\">This looks like it's left behind from the holy wrench testing that was removed.</p>", "author": "Nightfirecat", "createdAt": "2020-05-29T02:02:49Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/itemstats/ItemStatEffectTest.java", "diffHunk": "@@ -94,13 +147,38 @@ public void prepare()\n \t\t\t.thenReturn(0);\n \t}\n \n+\tprivate void prepareInventory()", "originalCommit": "5174554b5802b5a8511ba79a6ff66f99e8e7f972", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI0MDgzMw==", "url": "https://github.com/runelite/runelite/pull/11612#discussion_r432240833", "bodyText": "One of these force pushes will be right i promise.", "author": "TheStonedTurtle", "createdAt": "2020-05-29T03:49:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIxNzE2MA=="}], "type": "inlineReview"}, {"oid": "4ad73a3c1d9cfe9c97d23d29c24a225eb9f562ce", "url": "https://github.com/runelite/runelite/commit/4ad73a3c1d9cfe9c97d23d29c24a225eb9f562ce", "message": "item stats - Fix sanfew serum restore bonuses", "committedDate": "2020-05-29T03:47:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk1Mjc0Mw==", "url": "https://github.com/runelite/runelite/pull/11612#discussion_r432952743", "body": "this is only required if you are using the guice testlib stuff, and you aren't?", "bodyText": "this is only required if you are using the guice testlib stuff, and you aren't?", "bodyHTML": "<p dir=\"auto\">this is only required if you are using the guice testlib stuff, and you aren't?</p>", "author": "Adam-", "createdAt": "2020-05-31T14:29:32Z", "path": "runelite-client/src/test/java/net/runelite/client/plugins/itemstats/ItemStatEffectTest.java", "diffHunk": "@@ -0,0 +1,183 @@\n+/*\n+ * Copyright (c) 2020, TheStonedTurtle <https://github.com/TheStonedTurtle>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.itemstats;\n+\n+import com.google.common.collect.ImmutableMap;\n+import com.google.inject.testing.fieldbinder.Bind;\n+import java.util.Map;\n+import net.runelite.api.Client;\n+import net.runelite.api.ItemID;\n+import net.runelite.api.Skill;\n+import static org.junit.Assert.assertEquals;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import static org.mockito.ArgumentMatchers.any;\n+import org.mockito.Mock;\n+import static org.mockito.Mockito.when;\n+import org.mockito.junit.MockitoJUnitRunner;\n+\n+@RunWith(MockitoJUnitRunner.class)\n+public class ItemStatEffectTest\n+{\n+\tprivate static final ImmutableMap<Integer, Integer> REVITALISATION_TABLE;\n+\tprivate static final ImmutableMap<Integer, Integer> SUPER_RESTORE_TABLE;\n+\tprivate static final ImmutableMap<Integer, Integer> SANFEW_TABLE;\n+\n+\tstatic\n+\t{\n+\t\t// https://oldschool.runescape.wiki/w/Revitalisation_(+)#Maximum_stat_restoration\n+\t\tREVITALISATION_TABLE = new ImmutableMap.Builder<Integer, Integer>()\n+\t\t\t.put(1, 11)     .put(50, 26)\n+\t\t\t.put(3, 11)     .put(53, 26)\n+\t\t\t.put(4, 12)     .put(54, 27)\n+\t\t\t.put(6, 12)     .put(56, 27)\n+\t\t\t.put(7, 13)     .put(57, 28)\n+\t\t\t.put(9, 13)     .put(59, 28)\n+\t\t\t.put(10, 14)    .put(60, 29)\n+\t\t\t.put(13, 14)    .put(63, 29)\n+\t\t\t.put(14, 15)    .put(64, 30)\n+\t\t\t.put(16, 15)    .put(66, 30)\n+\t\t\t.put(17, 16)    .put(67, 31)\n+\t\t\t.put(19, 16)    .put(69, 31)\n+\t\t\t.put(20, 17)    .put(70, 32)\n+\t\t\t.put(23, 17)    .put(73, 32)\n+\t\t\t.put(24, 18)    .put(74, 33)\n+\t\t\t.put(26, 18)    .put(76, 33)\n+\t\t\t.put(27, 19)    .put(77, 34)\n+\t\t\t.put(29, 19)    .put(79, 34)\n+\t\t\t.put(30, 20)    .put(80, 35)\n+\t\t\t.put(33, 20)    .put(83, 35)\n+\t\t\t.put(34, 21)    .put(84, 36)\n+\t\t\t.put(36, 21)    .put(86, 36)\n+\t\t\t.put(37, 22)    .put(87, 37)\n+\t\t\t.put(39, 22)    .put(89, 37)\n+\t\t\t.put(40, 23)    .put(90, 38)\n+\t\t\t.put(43, 23)    .put(93, 38)\n+\t\t\t.put(44, 24)    .put(94, 39)\n+\t\t\t.put(46, 24)    .put(96, 39)\n+\t\t\t.put(47, 25)    .put(97, 40)\n+\t\t\t.put(49, 25)    .put(99, 40)\n+\t\t\t.build();\n+\n+\t\t// https://oldschool.runescape.wiki/w/Super_restore#Maximum_restoration\n+\t\tSUPER_RESTORE_TABLE = new ImmutableMap.Builder<Integer, Integer>()\n+\t\t\t.put(1, 8)      .put(36, 17)    .put(72, 26)\n+\t\t\t.put(3, 8)      .put(39, 17)    .put(75, 26)\n+\t\t\t.put(4, 9)      .put(40, 18)    .put(76, 27)\n+\t\t\t.put(7, 9)      .put(43, 18)    .put(79, 27)\n+\t\t\t.put(8, 10)     .put(44, 19)    .put(80, 28)\n+\t\t\t.put(11, 10)    .put(47, 19)    .put(83, 28)\n+\t\t\t.put(12, 11)    .put(48, 20)    .put(84, 29)\n+\t\t\t.put(15, 11)    .put(51, 20)    .put(87, 29)\n+\t\t\t.put(16, 12)    .put(52, 21)    .put(88, 30)\n+\t\t\t.put(19, 12)    .put(55, 21)    .put(91, 30)\n+\t\t\t.put(20, 13)    .put(56, 22)    .put(92, 31)\n+\t\t\t.put(23, 13)    .put(59, 22)    .put(95, 31)\n+\t\t\t.put(24, 14)    .put(60, 23)    .put(96, 32)\n+\t\t\t.put(27, 14)    .put(63, 23)    .put(99, 32)\n+\t\t\t.put(28, 15)    .put(64, 24)\n+\t\t\t.put(31, 15)    .put(67, 24)\n+\t\t\t.put(32, 16)    .put(68, 25)\n+\t\t\t.put(35, 16)    .put(71, 25)\n+\t\t\t.build();\n+\n+\t\t// https://oldschool.runescape.wiki/w/Sanfew_serum#Maximum_restoration\n+\t\tSANFEW_TABLE = new ImmutableMap.Builder<Integer, Integer>()\n+\t\t\t.put(1, 4)      .put(34, 14)    .put(67, 24)\n+\t\t\t.put(3, 4)      .put(36, 14)    .put(69, 24)\n+\t\t\t.put(4, 5)      .put(37, 15)    .put(70, 25)\n+\t\t\t.put(6, 5)      .put(39, 15)    .put(73, 25)\n+\t\t\t.put(7, 6)      .put(40, 16)    .put(74, 26)\n+\t\t\t.put(9, 6)      .put(43, 16)    .put(76, 26)\n+\t\t\t.put(10, 7)     .put(44, 17)    .put(77, 27)\n+\t\t\t.put(13, 7)     .put(46, 17)    .put(79, 27)\n+\t\t\t.put(14, 8)     .put(47, 18)    .put(80, 28)\n+\t\t\t.put(16, 8)     .put(49, 18)    .put(83, 28)\n+\t\t\t.put(17, 9)     .put(50, 19)    .put(84, 29)\n+\t\t\t.put(19, 9)     .put(53, 19)    .put(86, 29)\n+\t\t\t.put(20, 10)    .put(54, 20)    .put(87, 30)\n+\t\t\t.put(23, 10)    .put(56, 20)    .put(89, 30)\n+\t\t\t.put(24, 11)    .put(57, 21)    .put(90, 31)\n+\t\t\t.put(26, 11)    .put(59, 21)    .put(93, 31)\n+\t\t\t.put(27, 12)    .put(60, 22)    .put(94, 32)\n+\t\t\t.put(29, 12)    .put(63, 22)    .put(96, 32)\n+\t\t\t.put(30, 13)    .put(64, 23)    .put(97, 33)\n+\t\t\t.put(33, 13)    .put(66, 23)    .put(99, 33)\n+\t\t\t.build();\n+\t}\n+\n+\t@Mock\n+\t@Bind", "originalCommit": "4ad73a3c1d9cfe9c97d23d29c24a225eb9f562ce", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1c159c929a8ee3301cfb1b1902356214b2d23bd1", "url": "https://github.com/runelite/runelite/commit/1c159c929a8ee3301cfb1b1902356214b2d23bd1", "message": "item stats - Fix revitalisation potion prayer bonus", "committedDate": "2020-05-31T14:34:53Z", "type": "commit"}, {"oid": "4836080e56a6523a1b5a686b16a82a9182a393a0", "url": "https://github.com/runelite/runelite/commit/4836080e56a6523a1b5a686b16a82a9182a393a0", "message": "item stats - Fix sanfew serum restore bonuses", "committedDate": "2020-05-31T14:34:53Z", "type": "commit"}, {"oid": "4836080e56a6523a1b5a686b16a82a9182a393a0", "url": "https://github.com/runelite/runelite/commit/4836080e56a6523a1b5a686b16a82a9182a393a0", "message": "item stats - Fix sanfew serum restore bonuses", "committedDate": "2020-05-31T14:34:53Z", "type": "forcePushed"}]}