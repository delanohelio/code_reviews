{"pr_number": 11718, "pr_title": "Pyramid plunder", "pr_author": "Mitchell-Kovacs", "pr_createdAt": "2020-05-27T21:29:05Z", "pr_url": "https://github.com/runelite/runelite/pull/11718", "timeline": [{"oid": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "url": "https://github.com/runelite/runelite/commit/cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "message": "pyramid-plunder: Use convex hull instead of clickbox for containers. Use infobox instead of overlay for timer. Hide speartrap clickbox once you have passed them.", "committedDate": "2020-05-28T21:44:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NTIxNA==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437565214", "body": "```suggestion\r\nclass PyramidPlunderObjects\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            public class PyramidPlunderObjects\n          \n          \n            \n            class PyramidPlunderObjects", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"><span class=\"pl-k x x-first\">public</span><span class=\"x x-last\"> </span><span class=\"pl-k\">class</span> <span class=\"pl-en\">PyramidPlunderObjects</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"><span class=\"pl-k\">class</span> <span class=\"pl-en\">PyramidPlunderObjects</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Adam-", "createdAt": "2020-06-09T16:31:56Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderObjects.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import com.google.common.collect.ImmutableSet;\n+import java.util.Set;\n+import static net.runelite.api.ObjectID.GRAND_GOLD_CHEST;\n+import static net.runelite.api.ObjectID.SARCOPHAGUS_21255;\n+import static net.runelite.api.ObjectID.SPEARTRAP_21280;\n+import static net.runelite.api.ObjectID.TOMB_DOOR_20948;\n+import static net.runelite.api.ObjectID.URN_21261;\n+import static net.runelite.api.ObjectID.URN_21262;\n+import static net.runelite.api.ObjectID.URN_21263;\n+\n+public class PyramidPlunderObjects", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NTM5NQ==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437565395", "body": "All of the objects in this class should be referencing ObjectID/NullObjectID", "bodyText": "All of the objects in this class should be referencing ObjectID/NullObjectID", "bodyHTML": "<p dir=\"auto\">All of the objects in this class should be referencing ObjectID/NullObjectID</p>", "author": "Adam-", "createdAt": "2020-06-09T16:32:16Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderObjects.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import com.google.common.collect.ImmutableSet;\n+import java.util.Set;\n+import static net.runelite.api.ObjectID.GRAND_GOLD_CHEST;\n+import static net.runelite.api.ObjectID.SARCOPHAGUS_21255;\n+import static net.runelite.api.ObjectID.SPEARTRAP_21280;\n+import static net.runelite.api.ObjectID.TOMB_DOOR_20948;\n+import static net.runelite.api.ObjectID.URN_21261;\n+import static net.runelite.api.ObjectID.URN_21262;\n+import static net.runelite.api.ObjectID.URN_21263;\n+\n+public class PyramidPlunderObjects\n+{\n+\tpublic static final Set<Integer> TOMB_DOOR_WALL_IDS = ImmutableSet.of(26618, 26619, 26620, 26621);", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NTU3Ng==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437565576", "body": "This can't happen", "bodyText": "This can't happen", "bodyHTML": "<p dir=\"auto\">This can't happen</p>", "author": "Adam-", "createdAt": "2020-06-09T16:32:35Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderOverlay.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import java.awt.Color;\n+import java.awt.Dimension;\n+import java.awt.Graphics2D;\n+import java.awt.Shape;\n+import javax.inject.Inject;\n+import net.runelite.api.Client;\n+import net.runelite.api.ObjectComposition;\n+import net.runelite.api.Point;\n+import net.runelite.api.Varbits;\n+import net.runelite.api.coords.LocalPoint;\n+import net.runelite.api.widgets.Widget;\n+import net.runelite.api.widgets.WidgetInfo;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_CLOSED_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_CLOSED_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SPEARTRAP_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_CLOSED_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_WALL_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_CLOSED_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_IDS;\n+import net.runelite.client.ui.overlay.Overlay;\n+import net.runelite.client.ui.overlay.OverlayLayer;\n+import net.runelite.client.ui.overlay.OverlayPosition;\n+import net.runelite.client.ui.overlay.OverlayUtil;\n+\n+class PyramidPlunderOverlay extends Overlay\n+{\n+\tprivate static final int MAX_DISTANCE = 2350;\n+\n+\tprivate final Client client;\n+\tprivate final PyramidPlunderPlugin plugin;\n+\tprivate final PyramidPlunderConfig config;\n+\n+\t@Inject\n+\tprivate PyramidPlunderOverlay(Client client, PyramidPlunderPlugin plugin, PyramidPlunderConfig config)\n+\t{\n+\t\tsuper(plugin);\n+\t\tsetPosition(OverlayPosition.DYNAMIC);\n+\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n+\t\tthis.client = client;\n+\t\tthis.plugin = plugin;\n+\t\tthis.config = config;\n+\t}\n+\n+\t@Override\n+\tpublic Dimension render(Graphics2D graphics)\n+\t{\n+\t\tif (client.getLocalPlayer() == null)", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NTc3OQ==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437565779", "body": "```suggestion\r\nclass PyramidPlunderTimer extends Timer\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            public class PyramidPlunderTimer extends Timer\n          \n          \n            \n            class PyramidPlunderTimer extends Timer", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"><span class=\"pl-k x x-first\">public</span><span class=\"x x-last\"> </span><span class=\"pl-k\">class</span> <span class=\"pl-en\">PyramidPlunderTimer</span> <span class=\"pl-k\">extends</span> <span class=\"pl-e\">Timer</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"><span class=\"pl-k\">class</span> <span class=\"pl-en\">PyramidPlunderTimer</span> <span class=\"pl-k\">extends</span> <span class=\"pl-e\">Timer</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Adam-", "createdAt": "2020-06-09T16:32:54Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderTimer.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import java.awt.Color;\n+import java.awt.image.BufferedImage;\n+import java.time.Duration;\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n+import net.runelite.api.Client;\n+import net.runelite.api.Varbits;\n+import net.runelite.client.ui.overlay.infobox.Timer;\n+\n+public class PyramidPlunderTimer extends Timer", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NjA1Mg==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437566052", "body": "Add license header to each new file.", "bodyText": "Add license header to each new file.", "bodyHTML": "<p dir=\"auto\">Add license header to each new file.</p>", "author": "Adam-", "createdAt": "2020-06-09T16:33:25Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderTimer.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package net.runelite.client.plugins.pyramidplunder;", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NjcxNw==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437566717", "body": "this can't happen", "bodyText": "this can't happen", "bodyHTML": "<p dir=\"auto\">this can't happen</p>", "author": "Adam-", "createdAt": "2020-06-09T16:34:28Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderPlugin.java", "diffHunk": "@@ -0,0 +1,204 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import com.google.inject.Provides;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import javax.inject.Inject;\n+import lombok.Getter;\n+import net.runelite.api.Client;\n+import net.runelite.api.Constants;\n+import net.runelite.api.GameObject;\n+import net.runelite.api.GameState;\n+import static net.runelite.api.ItemID.PHARAOHS_SCEPTRE;\n+import net.runelite.api.Tile;\n+import net.runelite.api.TileObject;\n+import net.runelite.api.Varbits;\n+import net.runelite.api.WallObject;\n+import net.runelite.api.events.GameObjectSpawned;\n+import net.runelite.api.events.GameStateChanged;\n+import net.runelite.api.events.GameTick;\n+import net.runelite.api.events.WallObjectSpawned;\n+import net.runelite.api.widgets.Widget;\n+import net.runelite.api.widgets.WidgetInfo;\n+import net.runelite.client.config.ConfigManager;\n+import net.runelite.client.eventbus.Subscribe;\n+import net.runelite.client.game.ItemManager;\n+import net.runelite.client.plugins.Plugin;\n+import net.runelite.client.plugins.PluginDescriptor;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SPEARTRAP_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_WALL_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_IDS;\n+import net.runelite.client.ui.overlay.OverlayManager;\n+import net.runelite.client.ui.overlay.infobox.InfoBoxManager;\n+\n+@PluginDescriptor(\n+\tname = \"Pyramid Plunder\",\n+\tdescription = \"Show custom overlay for Pyramid Plunder\",\n+\ttags = {\"minigame\"},\n+\tenabledByDefault = false\n+)\n+public class PyramidPlunderPlugin extends Plugin\n+{\n+\t// Total number of game ticks until the pyramid plunder round ends (5 minutes)\n+\tprivate static final int PYRAMID_PLUNDER_DURATION = 500;\n+\tprivate static final int PYRAMID_PLUNDER_REGION = 7749;\n+\n+\t@Inject\n+\tprivate Client client;\n+\n+\t@Inject\n+\tprivate PyramidPlunderConfig config;\n+\n+\t@Inject\n+\tprivate OverlayManager overlayManager;\n+\n+\t@Inject\n+\tprivate PyramidPlunderOverlay overlay;\n+\n+\t@Inject\n+\tprivate InfoBoxManager infoBoxManager;\n+\n+\t@Inject\n+\tprivate ItemManager itemManager;\n+\n+\t@Getter\n+\tprivate final Map<TileObject, Tile> tilesToHighlight = new HashMap<>();\n+\n+\t@Getter\n+\tprivate final List<GameObject> objectsToHighlight = new ArrayList<>();\n+\n+\tprivate PyramidPlunderTimer timer;\n+\n+\t@Provides\n+\tPyramidPlunderConfig getConfig(ConfigManager configManager)\n+\t{\n+\t\treturn configManager.getConfig(PyramidPlunderConfig.class);\n+\t}\n+\n+\t@Override\n+\tprotected void startUp() throws Exception\n+\t{\n+\t\toverlayManager.add(overlay);\n+\t}\n+\n+\t@Override\n+\tprotected void shutDown() throws Exception\n+\t{\n+\t\ttilesToHighlight.clear();\n+\t\tobjectsToHighlight.clear();\n+\t\toverlayManager.remove(overlay);\n+\t\ttimer = null;\n+\t\tinfoBoxManager.removeIf(infoBox -> infoBox instanceof PyramidPlunderTimer);\n+\n+\t\tWidget ppWidget = client.getWidget(WidgetInfo.PYRAMID_PLUNDER_DATA);\n+\t\tif (ppWidget != null)\n+\t\t{\n+\t\t\tppWidget.setHidden(false);\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameStateChanged(GameStateChanged event)\n+\t{\n+\t\tif (event.getGameState() == GameState.LOADING)\n+\t\t{\n+\t\t\ttilesToHighlight.clear();\n+\t\t\tobjectsToHighlight.clear();\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameTick(GameTick tick)\n+\t{\n+\t\tif (config.showExactTimer() && isInPyramidPlunder())\n+\t\t{\n+\t\t\tif (timer == null)\n+\t\t\t{\n+\t\t\t\tint ppTimer = client.getVar(Varbits.PYRAMID_PLUNDER_TIMER);\n+\t\t\t\tlong timeLeft = (PYRAMID_PLUNDER_DURATION - ppTimer) * Constants.GAME_TICK_LENGTH;\n+\t\t\t\ttimer = new PyramidPlunderTimer(timeLeft, itemManager.getImage(PHARAOHS_SCEPTRE), this,\n+\t\t\t\t\tconfig, client);\n+\t\t\t\tinfoBoxManager.addInfoBox(timer);\n+\t\t\t}\n+\t\t}\n+\t\telse if (timer != null)\n+\t\t{\n+\t\t\tinfoBoxManager.removeIf(infoBox -> infoBox instanceof PyramidPlunderTimer);\n+\t\t\ttimer = null;\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onWallObjectSpawned(WallObjectSpawned event)\n+\t{\n+\t\tWallObject object = event.getWallObject();\n+\n+\t\tif (object == null)\n+\t\t{\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tif (TOMB_DOOR_WALL_IDS.contains(object.getId()))\n+\t\t{\n+\t\t\ttilesToHighlight.put(object, event.getTile());\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n+\t{\n+\t\tGameObject object = event.getGameObject();\n+\n+\t\tif (object == null)", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2NzExNg==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437567116", "body": "This region check is much faster, so check it first.", "bodyText": "This region check is much faster, so check it first.", "bodyHTML": "<p dir=\"auto\">This region check is much faster, so check it first.</p>", "author": "Adam-", "createdAt": "2020-06-09T16:35:08Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderPlugin.java", "diffHunk": "@@ -0,0 +1,204 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import com.google.inject.Provides;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import javax.inject.Inject;\n+import lombok.Getter;\n+import net.runelite.api.Client;\n+import net.runelite.api.Constants;\n+import net.runelite.api.GameObject;\n+import net.runelite.api.GameState;\n+import static net.runelite.api.ItemID.PHARAOHS_SCEPTRE;\n+import net.runelite.api.Tile;\n+import net.runelite.api.TileObject;\n+import net.runelite.api.Varbits;\n+import net.runelite.api.WallObject;\n+import net.runelite.api.events.GameObjectSpawned;\n+import net.runelite.api.events.GameStateChanged;\n+import net.runelite.api.events.GameTick;\n+import net.runelite.api.events.WallObjectSpawned;\n+import net.runelite.api.widgets.Widget;\n+import net.runelite.api.widgets.WidgetInfo;\n+import net.runelite.client.config.ConfigManager;\n+import net.runelite.client.eventbus.Subscribe;\n+import net.runelite.client.game.ItemManager;\n+import net.runelite.client.plugins.Plugin;\n+import net.runelite.client.plugins.PluginDescriptor;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SPEARTRAP_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_WALL_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_IDS;\n+import net.runelite.client.ui.overlay.OverlayManager;\n+import net.runelite.client.ui.overlay.infobox.InfoBoxManager;\n+\n+@PluginDescriptor(\n+\tname = \"Pyramid Plunder\",\n+\tdescription = \"Show custom overlay for Pyramid Plunder\",\n+\ttags = {\"minigame\"},\n+\tenabledByDefault = false\n+)\n+public class PyramidPlunderPlugin extends Plugin\n+{\n+\t// Total number of game ticks until the pyramid plunder round ends (5 minutes)\n+\tprivate static final int PYRAMID_PLUNDER_DURATION = 500;\n+\tprivate static final int PYRAMID_PLUNDER_REGION = 7749;\n+\n+\t@Inject\n+\tprivate Client client;\n+\n+\t@Inject\n+\tprivate PyramidPlunderConfig config;\n+\n+\t@Inject\n+\tprivate OverlayManager overlayManager;\n+\n+\t@Inject\n+\tprivate PyramidPlunderOverlay overlay;\n+\n+\t@Inject\n+\tprivate InfoBoxManager infoBoxManager;\n+\n+\t@Inject\n+\tprivate ItemManager itemManager;\n+\n+\t@Getter\n+\tprivate final Map<TileObject, Tile> tilesToHighlight = new HashMap<>();\n+\n+\t@Getter\n+\tprivate final List<GameObject> objectsToHighlight = new ArrayList<>();\n+\n+\tprivate PyramidPlunderTimer timer;\n+\n+\t@Provides\n+\tPyramidPlunderConfig getConfig(ConfigManager configManager)\n+\t{\n+\t\treturn configManager.getConfig(PyramidPlunderConfig.class);\n+\t}\n+\n+\t@Override\n+\tprotected void startUp() throws Exception\n+\t{\n+\t\toverlayManager.add(overlay);\n+\t}\n+\n+\t@Override\n+\tprotected void shutDown() throws Exception\n+\t{\n+\t\ttilesToHighlight.clear();\n+\t\tobjectsToHighlight.clear();\n+\t\toverlayManager.remove(overlay);\n+\t\ttimer = null;\n+\t\tinfoBoxManager.removeIf(infoBox -> infoBox instanceof PyramidPlunderTimer);\n+\n+\t\tWidget ppWidget = client.getWidget(WidgetInfo.PYRAMID_PLUNDER_DATA);\n+\t\tif (ppWidget != null)\n+\t\t{\n+\t\t\tppWidget.setHidden(false);\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameStateChanged(GameStateChanged event)\n+\t{\n+\t\tif (event.getGameState() == GameState.LOADING)\n+\t\t{\n+\t\t\ttilesToHighlight.clear();\n+\t\t\tobjectsToHighlight.clear();\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameTick(GameTick tick)\n+\t{\n+\t\tif (config.showExactTimer() && isInPyramidPlunder())\n+\t\t{\n+\t\t\tif (timer == null)\n+\t\t\t{\n+\t\t\t\tint ppTimer = client.getVar(Varbits.PYRAMID_PLUNDER_TIMER);\n+\t\t\t\tlong timeLeft = (PYRAMID_PLUNDER_DURATION - ppTimer) * Constants.GAME_TICK_LENGTH;\n+\t\t\t\ttimer = new PyramidPlunderTimer(timeLeft, itemManager.getImage(PHARAOHS_SCEPTRE), this,\n+\t\t\t\t\tconfig, client);\n+\t\t\t\tinfoBoxManager.addInfoBox(timer);\n+\t\t\t}\n+\t\t}\n+\t\telse if (timer != null)\n+\t\t{\n+\t\t\tinfoBoxManager.removeIf(infoBox -> infoBox instanceof PyramidPlunderTimer);\n+\t\t\ttimer = null;\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onWallObjectSpawned(WallObjectSpawned event)\n+\t{\n+\t\tWallObject object = event.getWallObject();\n+\n+\t\tif (object == null)\n+\t\t{\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tif (TOMB_DOOR_WALL_IDS.contains(object.getId()))\n+\t\t{\n+\t\t\ttilesToHighlight.put(object, event.getTile());\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameObjectSpawned(GameObjectSpawned event)\n+\t{\n+\t\tGameObject object = event.getGameObject();\n+\n+\t\tif (object == null)\n+\t\t{\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tif (SPEARTRAP_ID == object.getId())\n+\t\t{\n+\t\t\ttilesToHighlight.put(object, event.getTile());\n+\t\t}\n+\t\telse if (URN_IDS.contains(object.getId())\n+\t\t\t|| GRAND_GOLD_CHEST_ID == object.getId()\n+\t\t\t|| SARCOPHAGUS_ID == object.getId())\n+\t\t{\n+\t\t\tobjectsToHighlight.add(object);\n+\t\t}\n+\t}\n+\n+\tpublic boolean isInPyramidPlunder()\n+\t{\n+\t\tint timer = client.getVar(Varbits.PYRAMID_PLUNDER_TIMER);\n+\t\treturn client.getLocalPlayer() != null\n+\t\t\t&& timer > 0", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2Nzc3OA==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437567778", "body": "```suggestion\r\n\t\t\tinfoBoxManager.removeInfoBox(timer);\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tinfoBoxManager.removeIf(infoBox -> infoBox instanceof PyramidPlunderTimer);\n          \n          \n            \n            \t\t\tinfoBoxManager.removeInfoBox(timer);", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t\tinfoBoxManager<span class=\"pl-k\">.</span><span class=\"x x-first\">removeIf(infoBox </span><span class=\"pl-k x\">-</span><span class=\"pl-k x\">&gt;</span><span class=\"x\"> infoBox </span><span class=\"pl-k x\">instanceof</span><span class=\"x\"> </span><span class=\"pl-smi x x-last\">PyramidPlunderTimer</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\tinfoBoxManager<span class=\"pl-k\">.</span><span class=\"x x-first x-last\">removeInfoBox(timer</span>);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Adam-", "createdAt": "2020-06-09T16:36:12Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderPlugin.java", "diffHunk": "@@ -0,0 +1,204 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import com.google.inject.Provides;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import javax.inject.Inject;\n+import lombok.Getter;\n+import net.runelite.api.Client;\n+import net.runelite.api.Constants;\n+import net.runelite.api.GameObject;\n+import net.runelite.api.GameState;\n+import static net.runelite.api.ItemID.PHARAOHS_SCEPTRE;\n+import net.runelite.api.Tile;\n+import net.runelite.api.TileObject;\n+import net.runelite.api.Varbits;\n+import net.runelite.api.WallObject;\n+import net.runelite.api.events.GameObjectSpawned;\n+import net.runelite.api.events.GameStateChanged;\n+import net.runelite.api.events.GameTick;\n+import net.runelite.api.events.WallObjectSpawned;\n+import net.runelite.api.widgets.Widget;\n+import net.runelite.api.widgets.WidgetInfo;\n+import net.runelite.client.config.ConfigManager;\n+import net.runelite.client.eventbus.Subscribe;\n+import net.runelite.client.game.ItemManager;\n+import net.runelite.client.plugins.Plugin;\n+import net.runelite.client.plugins.PluginDescriptor;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SPEARTRAP_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_WALL_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_IDS;\n+import net.runelite.client.ui.overlay.OverlayManager;\n+import net.runelite.client.ui.overlay.infobox.InfoBoxManager;\n+\n+@PluginDescriptor(\n+\tname = \"Pyramid Plunder\",\n+\tdescription = \"Show custom overlay for Pyramid Plunder\",\n+\ttags = {\"minigame\"},\n+\tenabledByDefault = false\n+)\n+public class PyramidPlunderPlugin extends Plugin\n+{\n+\t// Total number of game ticks until the pyramid plunder round ends (5 minutes)\n+\tprivate static final int PYRAMID_PLUNDER_DURATION = 500;\n+\tprivate static final int PYRAMID_PLUNDER_REGION = 7749;\n+\n+\t@Inject\n+\tprivate Client client;\n+\n+\t@Inject\n+\tprivate PyramidPlunderConfig config;\n+\n+\t@Inject\n+\tprivate OverlayManager overlayManager;\n+\n+\t@Inject\n+\tprivate PyramidPlunderOverlay overlay;\n+\n+\t@Inject\n+\tprivate InfoBoxManager infoBoxManager;\n+\n+\t@Inject\n+\tprivate ItemManager itemManager;\n+\n+\t@Getter\n+\tprivate final Map<TileObject, Tile> tilesToHighlight = new HashMap<>();\n+\n+\t@Getter\n+\tprivate final List<GameObject> objectsToHighlight = new ArrayList<>();\n+\n+\tprivate PyramidPlunderTimer timer;\n+\n+\t@Provides\n+\tPyramidPlunderConfig getConfig(ConfigManager configManager)\n+\t{\n+\t\treturn configManager.getConfig(PyramidPlunderConfig.class);\n+\t}\n+\n+\t@Override\n+\tprotected void startUp() throws Exception\n+\t{\n+\t\toverlayManager.add(overlay);\n+\t}\n+\n+\t@Override\n+\tprotected void shutDown() throws Exception\n+\t{\n+\t\ttilesToHighlight.clear();\n+\t\tobjectsToHighlight.clear();\n+\t\toverlayManager.remove(overlay);\n+\t\ttimer = null;\n+\t\tinfoBoxManager.removeIf(infoBox -> infoBox instanceof PyramidPlunderTimer);\n+\n+\t\tWidget ppWidget = client.getWidget(WidgetInfo.PYRAMID_PLUNDER_DATA);\n+\t\tif (ppWidget != null)\n+\t\t{\n+\t\t\tppWidget.setHidden(false);\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameStateChanged(GameStateChanged event)\n+\t{\n+\t\tif (event.getGameState() == GameState.LOADING)\n+\t\t{\n+\t\t\ttilesToHighlight.clear();\n+\t\t\tobjectsToHighlight.clear();\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameTick(GameTick tick)\n+\t{\n+\t\tif (config.showExactTimer() && isInPyramidPlunder())\n+\t\t{\n+\t\t\tif (timer == null)\n+\t\t\t{\n+\t\t\t\tint ppTimer = client.getVar(Varbits.PYRAMID_PLUNDER_TIMER);\n+\t\t\t\tlong timeLeft = (PYRAMID_PLUNDER_DURATION - ppTimer) * Constants.GAME_TICK_LENGTH;\n+\t\t\t\ttimer = new PyramidPlunderTimer(timeLeft, itemManager.getImage(PHARAOHS_SCEPTRE), this,\n+\t\t\t\t\tconfig, client);\n+\t\t\t\tinfoBoxManager.addInfoBox(timer);\n+\t\t\t}\n+\t\t}\n+\t\telse if (timer != null)\n+\t\t{\n+\t\t\tinfoBoxManager.removeIf(infoBox -> infoBox instanceof PyramidPlunderTimer);", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2OTI4NQ==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437569285", "body": "this should be in an `clientThread.invoke()`", "bodyText": "this should be in an clientThread.invoke()", "bodyHTML": "<p dir=\"auto\">this should be in an <code>clientThread.invoke()</code></p>", "author": "Adam-", "createdAt": "2020-06-09T16:38:39Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderPlugin.java", "diffHunk": "@@ -0,0 +1,204 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import com.google.inject.Provides;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import javax.inject.Inject;\n+import lombok.Getter;\n+import net.runelite.api.Client;\n+import net.runelite.api.Constants;\n+import net.runelite.api.GameObject;\n+import net.runelite.api.GameState;\n+import static net.runelite.api.ItemID.PHARAOHS_SCEPTRE;\n+import net.runelite.api.Tile;\n+import net.runelite.api.TileObject;\n+import net.runelite.api.Varbits;\n+import net.runelite.api.WallObject;\n+import net.runelite.api.events.GameObjectSpawned;\n+import net.runelite.api.events.GameStateChanged;\n+import net.runelite.api.events.GameTick;\n+import net.runelite.api.events.WallObjectSpawned;\n+import net.runelite.api.widgets.Widget;\n+import net.runelite.api.widgets.WidgetInfo;\n+import net.runelite.client.config.ConfigManager;\n+import net.runelite.client.eventbus.Subscribe;\n+import net.runelite.client.game.ItemManager;\n+import net.runelite.client.plugins.Plugin;\n+import net.runelite.client.plugins.PluginDescriptor;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SPEARTRAP_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_WALL_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_IDS;\n+import net.runelite.client.ui.overlay.OverlayManager;\n+import net.runelite.client.ui.overlay.infobox.InfoBoxManager;\n+\n+@PluginDescriptor(\n+\tname = \"Pyramid Plunder\",\n+\tdescription = \"Show custom overlay for Pyramid Plunder\",\n+\ttags = {\"minigame\"},\n+\tenabledByDefault = false\n+)\n+public class PyramidPlunderPlugin extends Plugin\n+{\n+\t// Total number of game ticks until the pyramid plunder round ends (5 minutes)\n+\tprivate static final int PYRAMID_PLUNDER_DURATION = 500;\n+\tprivate static final int PYRAMID_PLUNDER_REGION = 7749;\n+\n+\t@Inject\n+\tprivate Client client;\n+\n+\t@Inject\n+\tprivate PyramidPlunderConfig config;\n+\n+\t@Inject\n+\tprivate OverlayManager overlayManager;\n+\n+\t@Inject\n+\tprivate PyramidPlunderOverlay overlay;\n+\n+\t@Inject\n+\tprivate InfoBoxManager infoBoxManager;\n+\n+\t@Inject\n+\tprivate ItemManager itemManager;\n+\n+\t@Getter\n+\tprivate final Map<TileObject, Tile> tilesToHighlight = new HashMap<>();\n+\n+\t@Getter\n+\tprivate final List<GameObject> objectsToHighlight = new ArrayList<>();\n+\n+\tprivate PyramidPlunderTimer timer;\n+\n+\t@Provides\n+\tPyramidPlunderConfig getConfig(ConfigManager configManager)\n+\t{\n+\t\treturn configManager.getConfig(PyramidPlunderConfig.class);\n+\t}\n+\n+\t@Override\n+\tprotected void startUp() throws Exception\n+\t{\n+\t\toverlayManager.add(overlay);\n+\t}\n+\n+\t@Override\n+\tprotected void shutDown() throws Exception\n+\t{\n+\t\ttilesToHighlight.clear();\n+\t\tobjectsToHighlight.clear();\n+\t\toverlayManager.remove(overlay);\n+\t\ttimer = null;\n+\t\tinfoBoxManager.removeIf(infoBox -> infoBox instanceof PyramidPlunderTimer);\n+\n+\t\tWidget ppWidget = client.getWidget(WidgetInfo.PYRAMID_PLUNDER_DATA);", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgwODc4OA==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437808788", "bodyText": "Just for my understanding, why should this be in clientThread.invoke()?", "author": "Mitchell-Kovacs", "createdAt": "2020-06-10T01:25:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2OTI4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgxMzQzMA==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437813430", "bodyText": "shutDown runs on the EDT and it is mostly not safe to mutate client state off of the client thread.", "author": "Adam-", "createdAt": "2020-06-10T01:43:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2OTI4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU2OTc0MA==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437569740", "body": "Instead of all of this logic it may be better to just override Infobox `render()`\r\n\r\n```java\r\n@Override\r\npublic boolean render() {\r\n    return config.showExactTimer();\r\n}\r\n```", "bodyText": "Instead of all of this logic it may be better to just override Infobox render()\n@Override\npublic boolean render() {\n    return config.showExactTimer();\n}", "bodyHTML": "<p dir=\"auto\">Instead of all of this logic it may be better to just override Infobox <code>render()</code></p>\n<div class=\"highlight highlight-source-java position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"@Override\npublic boolean render() {\n    return config.showExactTimer();\n}\n\"><pre><span class=\"pl-k\">@Override</span>\n<span class=\"pl-k\">public</span> <span class=\"pl-k\">boolean</span> render() {\n    <span class=\"pl-k\">return</span> config<span class=\"pl-k\">.</span>showExactTimer();\n}</pre></div>", "author": "Adam-", "createdAt": "2020-06-09T16:39:26Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderPlugin.java", "diffHunk": "@@ -0,0 +1,204 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import com.google.inject.Provides;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import javax.inject.Inject;\n+import lombok.Getter;\n+import net.runelite.api.Client;\n+import net.runelite.api.Constants;\n+import net.runelite.api.GameObject;\n+import net.runelite.api.GameState;\n+import static net.runelite.api.ItemID.PHARAOHS_SCEPTRE;\n+import net.runelite.api.Tile;\n+import net.runelite.api.TileObject;\n+import net.runelite.api.Varbits;\n+import net.runelite.api.WallObject;\n+import net.runelite.api.events.GameObjectSpawned;\n+import net.runelite.api.events.GameStateChanged;\n+import net.runelite.api.events.GameTick;\n+import net.runelite.api.events.WallObjectSpawned;\n+import net.runelite.api.widgets.Widget;\n+import net.runelite.api.widgets.WidgetInfo;\n+import net.runelite.client.config.ConfigManager;\n+import net.runelite.client.eventbus.Subscribe;\n+import net.runelite.client.game.ItemManager;\n+import net.runelite.client.plugins.Plugin;\n+import net.runelite.client.plugins.PluginDescriptor;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SPEARTRAP_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_WALL_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_IDS;\n+import net.runelite.client.ui.overlay.OverlayManager;\n+import net.runelite.client.ui.overlay.infobox.InfoBoxManager;\n+\n+@PluginDescriptor(\n+\tname = \"Pyramid Plunder\",\n+\tdescription = \"Show custom overlay for Pyramid Plunder\",\n+\ttags = {\"minigame\"},\n+\tenabledByDefault = false\n+)\n+public class PyramidPlunderPlugin extends Plugin\n+{\n+\t// Total number of game ticks until the pyramid plunder round ends (5 minutes)\n+\tprivate static final int PYRAMID_PLUNDER_DURATION = 500;\n+\tprivate static final int PYRAMID_PLUNDER_REGION = 7749;\n+\n+\t@Inject\n+\tprivate Client client;\n+\n+\t@Inject\n+\tprivate PyramidPlunderConfig config;\n+\n+\t@Inject\n+\tprivate OverlayManager overlayManager;\n+\n+\t@Inject\n+\tprivate PyramidPlunderOverlay overlay;\n+\n+\t@Inject\n+\tprivate InfoBoxManager infoBoxManager;\n+\n+\t@Inject\n+\tprivate ItemManager itemManager;\n+\n+\t@Getter\n+\tprivate final Map<TileObject, Tile> tilesToHighlight = new HashMap<>();\n+\n+\t@Getter\n+\tprivate final List<GameObject> objectsToHighlight = new ArrayList<>();\n+\n+\tprivate PyramidPlunderTimer timer;\n+\n+\t@Provides\n+\tPyramidPlunderConfig getConfig(ConfigManager configManager)\n+\t{\n+\t\treturn configManager.getConfig(PyramidPlunderConfig.class);\n+\t}\n+\n+\t@Override\n+\tprotected void startUp() throws Exception\n+\t{\n+\t\toverlayManager.add(overlay);\n+\t}\n+\n+\t@Override\n+\tprotected void shutDown() throws Exception\n+\t{\n+\t\ttilesToHighlight.clear();\n+\t\tobjectsToHighlight.clear();\n+\t\toverlayManager.remove(overlay);\n+\t\ttimer = null;\n+\t\tinfoBoxManager.removeIf(infoBox -> infoBox instanceof PyramidPlunderTimer);\n+\n+\t\tWidget ppWidget = client.getWidget(WidgetInfo.PYRAMID_PLUNDER_DATA);\n+\t\tif (ppWidget != null)\n+\t\t{\n+\t\t\tppWidget.setHidden(false);\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameStateChanged(GameStateChanged event)\n+\t{\n+\t\tif (event.getGameState() == GameState.LOADING)\n+\t\t{\n+\t\t\ttilesToHighlight.clear();\n+\t\t\tobjectsToHighlight.clear();\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameTick(GameTick tick)\n+\t{\n+\t\tif (config.showExactTimer() && isInPyramidPlunder())", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU3MDIxOQ==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437570219", "body": "this can't happejn", "bodyText": "this can't happejn", "bodyHTML": "<p dir=\"auto\">this can't happejn</p>", "author": "Adam-", "createdAt": "2020-06-09T16:40:09Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderPlugin.java", "diffHunk": "@@ -0,0 +1,204 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import com.google.inject.Provides;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import javax.inject.Inject;\n+import lombok.Getter;\n+import net.runelite.api.Client;\n+import net.runelite.api.Constants;\n+import net.runelite.api.GameObject;\n+import net.runelite.api.GameState;\n+import static net.runelite.api.ItemID.PHARAOHS_SCEPTRE;\n+import net.runelite.api.Tile;\n+import net.runelite.api.TileObject;\n+import net.runelite.api.Varbits;\n+import net.runelite.api.WallObject;\n+import net.runelite.api.events.GameObjectSpawned;\n+import net.runelite.api.events.GameStateChanged;\n+import net.runelite.api.events.GameTick;\n+import net.runelite.api.events.WallObjectSpawned;\n+import net.runelite.api.widgets.Widget;\n+import net.runelite.api.widgets.WidgetInfo;\n+import net.runelite.client.config.ConfigManager;\n+import net.runelite.client.eventbus.Subscribe;\n+import net.runelite.client.game.ItemManager;\n+import net.runelite.client.plugins.Plugin;\n+import net.runelite.client.plugins.PluginDescriptor;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SPEARTRAP_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_WALL_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_IDS;\n+import net.runelite.client.ui.overlay.OverlayManager;\n+import net.runelite.client.ui.overlay.infobox.InfoBoxManager;\n+\n+@PluginDescriptor(\n+\tname = \"Pyramid Plunder\",\n+\tdescription = \"Show custom overlay for Pyramid Plunder\",\n+\ttags = {\"minigame\"},\n+\tenabledByDefault = false\n+)\n+public class PyramidPlunderPlugin extends Plugin\n+{\n+\t// Total number of game ticks until the pyramid plunder round ends (5 minutes)\n+\tprivate static final int PYRAMID_PLUNDER_DURATION = 500;\n+\tprivate static final int PYRAMID_PLUNDER_REGION = 7749;\n+\n+\t@Inject\n+\tprivate Client client;\n+\n+\t@Inject\n+\tprivate PyramidPlunderConfig config;\n+\n+\t@Inject\n+\tprivate OverlayManager overlayManager;\n+\n+\t@Inject\n+\tprivate PyramidPlunderOverlay overlay;\n+\n+\t@Inject\n+\tprivate InfoBoxManager infoBoxManager;\n+\n+\t@Inject\n+\tprivate ItemManager itemManager;\n+\n+\t@Getter\n+\tprivate final Map<TileObject, Tile> tilesToHighlight = new HashMap<>();\n+\n+\t@Getter\n+\tprivate final List<GameObject> objectsToHighlight = new ArrayList<>();\n+\n+\tprivate PyramidPlunderTimer timer;\n+\n+\t@Provides\n+\tPyramidPlunderConfig getConfig(ConfigManager configManager)\n+\t{\n+\t\treturn configManager.getConfig(PyramidPlunderConfig.class);\n+\t}\n+\n+\t@Override\n+\tprotected void startUp() throws Exception\n+\t{\n+\t\toverlayManager.add(overlay);\n+\t}\n+\n+\t@Override\n+\tprotected void shutDown() throws Exception\n+\t{\n+\t\ttilesToHighlight.clear();\n+\t\tobjectsToHighlight.clear();\n+\t\toverlayManager.remove(overlay);\n+\t\ttimer = null;\n+\t\tinfoBoxManager.removeIf(infoBox -> infoBox instanceof PyramidPlunderTimer);\n+\n+\t\tWidget ppWidget = client.getWidget(WidgetInfo.PYRAMID_PLUNDER_DATA);\n+\t\tif (ppWidget != null)\n+\t\t{\n+\t\t\tppWidget.setHidden(false);\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameStateChanged(GameStateChanged event)\n+\t{\n+\t\tif (event.getGameState() == GameState.LOADING)\n+\t\t{\n+\t\t\ttilesToHighlight.clear();\n+\t\t\tobjectsToHighlight.clear();\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onGameTick(GameTick tick)\n+\t{\n+\t\tif (config.showExactTimer() && isInPyramidPlunder())\n+\t\t{\n+\t\t\tif (timer == null)\n+\t\t\t{\n+\t\t\t\tint ppTimer = client.getVar(Varbits.PYRAMID_PLUNDER_TIMER);\n+\t\t\t\tlong timeLeft = (PYRAMID_PLUNDER_DURATION - ppTimer) * Constants.GAME_TICK_LENGTH;\n+\t\t\t\ttimer = new PyramidPlunderTimer(timeLeft, itemManager.getImage(PHARAOHS_SCEPTRE), this,\n+\t\t\t\t\tconfig, client);\n+\t\t\t\tinfoBoxManager.addInfoBox(timer);\n+\t\t\t}\n+\t\t}\n+\t\telse if (timer != null)\n+\t\t{\n+\t\t\tinfoBoxManager.removeIf(infoBox -> infoBox instanceof PyramidPlunderTimer);\n+\t\t\ttimer = null;\n+\t\t}\n+\t}\n+\n+\t@Subscribe\n+\tpublic void onWallObjectSpawned(WallObjectSpawned event)\n+\t{\n+\t\tWallObject object = event.getWallObject();\n+\n+\t\tif (object == null)", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU3MjgyNQ==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437572825", "body": "We have an GAME_TICKS temporal unit in `RSTimeUnit` if you want to use that.", "bodyText": "We have an GAME_TICKS temporal unit in RSTimeUnit if you want to use that.", "bodyHTML": "<p dir=\"auto\">We have an GAME_TICKS temporal unit in <code>RSTimeUnit</code> if you want to use that.</p>", "author": "Adam-", "createdAt": "2020-06-09T16:44:42Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderPlugin.java", "diffHunk": "@@ -0,0 +1,204 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import com.google.inject.Provides;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import javax.inject.Inject;\n+import lombok.Getter;\n+import net.runelite.api.Client;\n+import net.runelite.api.Constants;\n+import net.runelite.api.GameObject;\n+import net.runelite.api.GameState;\n+import static net.runelite.api.ItemID.PHARAOHS_SCEPTRE;\n+import net.runelite.api.Tile;\n+import net.runelite.api.TileObject;\n+import net.runelite.api.Varbits;\n+import net.runelite.api.WallObject;\n+import net.runelite.api.events.GameObjectSpawned;\n+import net.runelite.api.events.GameStateChanged;\n+import net.runelite.api.events.GameTick;\n+import net.runelite.api.events.WallObjectSpawned;\n+import net.runelite.api.widgets.Widget;\n+import net.runelite.api.widgets.WidgetInfo;\n+import net.runelite.client.config.ConfigManager;\n+import net.runelite.client.eventbus.Subscribe;\n+import net.runelite.client.game.ItemManager;\n+import net.runelite.client.plugins.Plugin;\n+import net.runelite.client.plugins.PluginDescriptor;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SPEARTRAP_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_WALL_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_IDS;\n+import net.runelite.client.ui.overlay.OverlayManager;\n+import net.runelite.client.ui.overlay.infobox.InfoBoxManager;\n+\n+@PluginDescriptor(\n+\tname = \"Pyramid Plunder\",\n+\tdescription = \"Show custom overlay for Pyramid Plunder\",\n+\ttags = {\"minigame\"},\n+\tenabledByDefault = false\n+)\n+public class PyramidPlunderPlugin extends Plugin\n+{\n+\t// Total number of game ticks until the pyramid plunder round ends (5 minutes)\n+\tprivate static final int PYRAMID_PLUNDER_DURATION = 500;", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU3MzE3Nw==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r437573177", "body": "Prefer loops to `forEach` if it doesn't decrease readability.", "bodyText": "Prefer loops to forEach if it doesn't decrease readability.", "bodyHTML": "<p dir=\"auto\">Prefer loops to <code>forEach</code> if it doesn't decrease readability.</p>", "author": "Adam-", "createdAt": "2020-06-09T16:45:17Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderOverlay.java", "diffHunk": "@@ -0,0 +1,172 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import java.awt.Color;\n+import java.awt.Dimension;\n+import java.awt.Graphics2D;\n+import java.awt.Shape;\n+import javax.inject.Inject;\n+import net.runelite.api.Client;\n+import net.runelite.api.ObjectComposition;\n+import net.runelite.api.Point;\n+import net.runelite.api.Varbits;\n+import net.runelite.api.coords.LocalPoint;\n+import net.runelite.api.widgets.Widget;\n+import net.runelite.api.widgets.WidgetInfo;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_CLOSED_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_CLOSED_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SPEARTRAP_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_CLOSED_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_WALL_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_CLOSED_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_IDS;\n+import net.runelite.client.ui.overlay.Overlay;\n+import net.runelite.client.ui.overlay.OverlayLayer;\n+import net.runelite.client.ui.overlay.OverlayPosition;\n+import net.runelite.client.ui.overlay.OverlayUtil;\n+\n+class PyramidPlunderOverlay extends Overlay\n+{\n+\tprivate static final int MAX_DISTANCE = 2350;\n+\n+\tprivate final Client client;\n+\tprivate final PyramidPlunderPlugin plugin;\n+\tprivate final PyramidPlunderConfig config;\n+\n+\t@Inject\n+\tprivate PyramidPlunderOverlay(Client client, PyramidPlunderPlugin plugin, PyramidPlunderConfig config)\n+\t{\n+\t\tsuper(plugin);\n+\t\tsetPosition(OverlayPosition.DYNAMIC);\n+\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n+\t\tthis.client = client;\n+\t\tthis.plugin = plugin;\n+\t\tthis.config = config;\n+\t}\n+\n+\t@Override\n+\tpublic Dimension render(Graphics2D graphics)\n+\t{\n+\t\tif (client.getLocalPlayer() == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\tWidget ppWidget = client.getWidget(WidgetInfo.PYRAMID_PLUNDER_DATA);\n+\t\tif (ppWidget == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\t\tppWidget.setHidden(config.hideTimer());\n+\n+\n+\t\t// Highlight convex hulls of urns, chests, and sarcophagus\n+\t\tint currentFloor = client.getVar(Varbits.PYRAMID_PLUNDER_ROOM);\n+\t\tplugin.getObjectsToHighlight().forEach(object ->", "originalCommit": "cd6a9f21f8e3c8ea946bcccfd269d73790626cd1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6d7007c986771e5c4ebcdad2406aa377018b10b0", "url": "https://github.com/runelite/runelite/commit/6d7007c986771e5c4ebcdad2406aa377018b10b0", "message": "pyramid-plunder: Addresses feedback:\nPyramidPlunderObjects: Fix visibility and object id imports\nPyramidPlunderOverlay: Removed not needed code and changed loop\nPyramidPlunderTimer: Uses config to determine if timer should be rendered\nPyramidPlunderPlugin: Removed not needed code,  use RSTimeUnit, modified isInPyramidPlunder check order, and moved setting widget to visible on shut down to client thread invoke", "committedDate": "2020-06-10T01:19:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5NTQxNw==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r438495417", "body": "These need distance checks probably. It highlights the objects in all of the rooms. ", "bodyText": "These need distance checks probably. It highlights the objects in all of the rooms.", "bodyHTML": "<p dir=\"auto\">These need distance checks probably. It highlights the objects in all of the rooms.</p>", "author": "raiyni", "createdAt": "2020-06-11T01:36:54Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderOverlay.java", "diffHunk": "@@ -0,0 +1,168 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import java.awt.Color;\n+import java.awt.Dimension;\n+import java.awt.Graphics2D;\n+import java.awt.Shape;\n+import javax.inject.Inject;\n+import net.runelite.api.Client;\n+import net.runelite.api.GameObject;\n+import net.runelite.api.ObjectComposition;\n+import net.runelite.api.Point;\n+import net.runelite.api.Varbits;\n+import net.runelite.api.coords.LocalPoint;\n+import net.runelite.api.widgets.Widget;\n+import net.runelite.api.widgets.WidgetInfo;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_CLOSED_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_CLOSED_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SPEARTRAP_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_CLOSED_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_WALL_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_CLOSED_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_IDS;\n+import net.runelite.client.ui.overlay.Overlay;\n+import net.runelite.client.ui.overlay.OverlayLayer;\n+import net.runelite.client.ui.overlay.OverlayPosition;\n+import net.runelite.client.ui.overlay.OverlayUtil;\n+\n+class PyramidPlunderOverlay extends Overlay\n+{\n+\tprivate static final int MAX_DISTANCE = 2350;\n+\n+\tprivate final Client client;\n+\tprivate final PyramidPlunderPlugin plugin;\n+\tprivate final PyramidPlunderConfig config;\n+\n+\t@Inject\n+\tprivate PyramidPlunderOverlay(Client client, PyramidPlunderPlugin plugin, PyramidPlunderConfig config)\n+\t{\n+\t\tsuper(plugin);\n+\t\tsetPosition(OverlayPosition.DYNAMIC);\n+\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n+\t\tthis.client = client;\n+\t\tthis.plugin = plugin;\n+\t\tthis.config = config;\n+\t}\n+\n+\t@Override\n+\tpublic Dimension render(Graphics2D graphics)\n+\t{\n+\t\tWidget ppWidget = client.getWidget(WidgetInfo.PYRAMID_PLUNDER_DATA);\n+\t\tif (ppWidget == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\tppWidget.setHidden(config.hideTimer());\n+\n+\t\t// Highlight convex hulls of urns, chests, and sarcophagus\n+\t\tint currentFloor = client.getVar(Varbits.PYRAMID_PLUNDER_ROOM);\n+\t\tfor (GameObject object : plugin.getObjectsToHighlight())", "originalCommit": "48b2b44a3c855f91d9ec9baa62d9a5be3c2faf16", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5NzAyMQ==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r438497021", "body": "The time displayed left seems to end a few seconds early in the infobox. ", "bodyText": "The time displayed left seems to end a few seconds early in the infobox.", "bodyHTML": "<p dir=\"auto\">The time displayed left seems to end a few seconds early in the infobox.</p>", "author": "raiyni", "createdAt": "2020-06-11T01:43:38Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderTimer.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import java.awt.Color;\n+import java.awt.image.BufferedImage;\n+import java.time.Duration;\n+import java.time.Instant;\n+import java.time.temporal.ChronoUnit;\n+import net.runelite.api.Client;\n+import net.runelite.api.Varbits;\n+import net.runelite.client.ui.overlay.infobox.Timer;\n+\n+class PyramidPlunderTimer extends Timer", "originalCommit": "48b2b44a3c855f91d9ec9baa62d9a5be3c2faf16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUyNTI1Nw==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r438525257", "bodyText": "This is probably just tick drift, all of the long running timers have it.", "author": "Adam-", "createdAt": "2020-06-11T03:40:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5NzAyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUzMjQ5Ng==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r438532496", "bodyText": "It's actually just me being dumb and using duration.get(ChronoUnit.SECONDS) thinking it will return the seconds remaining and not just the seconds portion of the duration. It also looks like you get kicked out one game tick after the timer hits 500.", "author": "Mitchell-Kovacs", "createdAt": "2020-06-11T04:12:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5NzAyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5NzM3Ng==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r438497376", "body": "Do this in `onConfigChanged` and startup", "bodyText": "Do this in onConfigChanged and startup", "bodyHTML": "<p dir=\"auto\">Do this in <code>onConfigChanged</code> and startup</p>", "author": "raiyni", "createdAt": "2020-06-11T01:44:51Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderOverlay.java", "diffHunk": "@@ -0,0 +1,168 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+\n+import java.awt.Color;\n+import java.awt.Dimension;\n+import java.awt.Graphics2D;\n+import java.awt.Shape;\n+import javax.inject.Inject;\n+import net.runelite.api.Client;\n+import net.runelite.api.GameObject;\n+import net.runelite.api.ObjectComposition;\n+import net.runelite.api.Point;\n+import net.runelite.api.Varbits;\n+import net.runelite.api.coords.LocalPoint;\n+import net.runelite.api.widgets.Widget;\n+import net.runelite.api.widgets.WidgetInfo;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_CLOSED_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.GRAND_GOLD_CHEST_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_CLOSED_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SARCOPHAGUS_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.SPEARTRAP_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_CLOSED_ID;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.TOMB_DOOR_WALL_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_CLOSED_IDS;\n+import static net.runelite.client.plugins.pyramidplunder.PyramidPlunderObjects.URN_IDS;\n+import net.runelite.client.ui.overlay.Overlay;\n+import net.runelite.client.ui.overlay.OverlayLayer;\n+import net.runelite.client.ui.overlay.OverlayPosition;\n+import net.runelite.client.ui.overlay.OverlayUtil;\n+\n+class PyramidPlunderOverlay extends Overlay\n+{\n+\tprivate static final int MAX_DISTANCE = 2350;\n+\n+\tprivate final Client client;\n+\tprivate final PyramidPlunderPlugin plugin;\n+\tprivate final PyramidPlunderConfig config;\n+\n+\t@Inject\n+\tprivate PyramidPlunderOverlay(Client client, PyramidPlunderPlugin plugin, PyramidPlunderConfig config)\n+\t{\n+\t\tsuper(plugin);\n+\t\tsetPosition(OverlayPosition.DYNAMIC);\n+\t\tsetLayer(OverlayLayer.ABOVE_SCENE);\n+\t\tthis.client = client;\n+\t\tthis.plugin = plugin;\n+\t\tthis.config = config;\n+\t}\n+\n+\t@Override\n+\tpublic Dimension render(Graphics2D graphics)\n+\t{\n+\t\tWidget ppWidget = client.getWidget(WidgetInfo.PYRAMID_PLUNDER_DATA);\n+\t\tif (ppWidget == null)\n+\t\t{\n+\t\t\treturn null;\n+\t\t}\n+\n+\t\tppWidget.setHidden(config.hideTimer());", "originalCommit": "48b2b44a3c855f91d9ec9baa62d9a5be3c2faf16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUwOTA1Mg==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r438509052", "bodyText": "As in remove this logic entirely from the overlay and put it in those places or also just include this logic in those places?", "author": "Mitchell-Kovacs", "createdAt": "2020-06-11T02:31:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5NzM3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUxMTkwNw==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r438511907", "bodyText": "Move it", "author": "raiyni", "createdAt": "2020-06-11T02:44:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5NzM3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUxMTkxMA==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r438511910", "bodyText": "This won't work if done on startup/config changed", "author": "Adam-", "createdAt": "2020-06-11T02:44:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5NzM3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5NzkzOQ==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r438497939", "body": "Defaulting these to 9 seems too restricted for the standard player?", "bodyText": "Defaulting these to 9 seems too restricted for the standard player?", "bodyHTML": "<p dir=\"auto\">Defaulting these to 9 seems too restricted for the standard player?</p>", "author": "raiyni", "createdAt": "2020-06-11T01:47:03Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/pyramidplunder/PyramidPlunderConfig.java", "diffHunk": "@@ -0,0 +1,154 @@\n+/*\n+ * Copyright (c) 2020 Mitchell <https://github.com/Mitchell-Kovacs>\n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright notice, this\n+ *    list of conditions and the following disclaimer.\n+ * 2. Redistributions in binary form must reproduce the above copyright notice,\n+ *    this list of conditions and the following disclaimer in the documentation\n+ *    and/or other materials provided with the distribution.\n+ *\n+ * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n+ * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n+ * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n+ * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n+ * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n+ * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n+ * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n+ */\n+package net.runelite.client.plugins.pyramidplunder;\n+import java.awt.Color;\n+import net.runelite.client.config.Config;\n+import net.runelite.client.config.ConfigGroup;\n+import net.runelite.client.config.ConfigItem;\n+\n+@ConfigGroup(\"pyramidplunder\")\n+public interface PyramidPlunderConfig extends Config\n+{\n+\t@ConfigItem(\n+\t\tposition = 0,\n+\t\tkeyName = \"hideTimer\",\n+\t\tname = \"Hide default timer\",\n+\t\tdescription = \"Hides the default pyramid plunder timer\"\n+\t)\n+\tdefault boolean hideTimer()\n+\t{\n+\t\treturn true;\n+\t}\n+\n+\t@ConfigItem(\n+\t\tposition = 1,\n+\t\tkeyName = \"showExactTimer\",\n+\t\tname = \"Show exact timer\",\n+\t\tdescription = \"Displays the amount of time remaining as an infobox\"\n+\t)\n+\tdefault boolean showExactTimer()\n+\t{\n+\t\treturn true;\n+\t}\n+\n+\t@ConfigItem(\n+\t\tposition = 2,\n+\t\tkeyName = \"timerLowWarning\",\n+\t\tname = \"Timer low warning\",\n+\t\tdescription = \"Determines the time when the timers color will change\"\n+\t)\n+\tdefault int timerLowWarning()\n+\t{\n+\t\treturn 30;\n+\t}\n+\n+\t@ConfigItem(\n+\t\tposition = 3,\n+\t\tkeyName = \"highlightDoorsColor\",\n+\t\tname = \"Highlight doors color\",\n+\t\tdescription = \"Selects the color for highlighting tomb doors\"\n+\t)\n+\tdefault Color highlightDoorsColor()\n+\t{\n+\t\treturn Color.green;\n+\t}\n+\n+\t@ConfigItem(\n+\t\tposition = 4,\n+\t\tkeyName = \"highlightDoors\",\n+\t\tname = \"Highlight doors\",\n+\t\tdescription = \"Highlights the four tomb doors in each room\"\n+\t)\n+\tdefault boolean highlightDoors()\n+\t{\n+\t\treturn true;\n+\t}\n+\n+\t@ConfigItem(\n+\t\tposition = 5,\n+\t\tkeyName = \"highlightSpeartrapColor\",\n+\t\tname = \"Highlight speartrap color\",\n+\t\tdescription = \"Selects the color for highlighting speartraps\"\n+\t)\n+\tdefault Color highlightSpeartrapsColor()\n+\t{\n+\t\treturn Color.orange;\n+\t}\n+\n+\t@ConfigItem(\n+\t\tposition = 6,\n+\t\tkeyName = \"highlightSpeartraps\",\n+\t\tname = \"Highlight speartraps\",\n+\t\tdescription = \"Highlight the spear traps at the entrance of each room\"\n+\t)\n+\tdefault boolean highlightSpeartraps()\n+\t{\n+\t\treturn true;\n+\t}\n+\n+\t@ConfigItem(\n+\t\tposition = 7,\n+\t\tkeyName = \"highlightContainersColor\",\n+\t\tname = \"Highlight containers color\",\n+\t\tdescription = \"Selects the color for highlighting urns, chests and sarcophagus\"\n+\t)\n+\tdefault Color highlightContainersColor()\n+\t{\n+\t\treturn Color.yellow;\n+\t}\n+\n+\t@ConfigItem(\n+\t\tposition = 8,\n+\t\tkeyName = \"highlightUrnsFloor\",\n+\t\tname = \"Highlight urns floor\",\n+\t\tdescription = \"Highlight the urns starting at selected floor and up\"\n+\t)\n+\tdefault int highlightUrnsFloor()\n+\t{\n+\t\treturn 9;", "originalCommit": "48b2b44a3c855f91d9ec9baa62d9a5be3c2faf16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUwOTA3NQ==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r438509075", "bodyText": "My thinking is that it fills the screen up with the overlay so the standard player would not want it on, it also had the added benefit of not trying to figure out how the average player plays. I think efficient starts at being able to loot floor 8 and uses the following:\n\nurns starting floor 7\nchest starting floor 6\nsarcophagus starting never (9)\n\nWhat numbers do you think I should use?", "author": "Mitchell-Kovacs", "createdAt": "2020-06-11T02:32:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5NzkzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUxMjg4MA==", "url": "https://github.com/runelite/runelite/pull/11718#discussion_r438512880", "bodyText": "Oh, right. There is only 8 floors. That seems fine to use 9 as off then by default.", "author": "raiyni", "createdAt": "2020-06-11T02:48:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5NzkzOQ=="}], "type": "inlineReview"}, {"oid": "9e35d17743e34bd1a5ba81334c3f11ddf112afe8", "url": "https://github.com/runelite/runelite/commit/9e35d17743e34bd1a5ba81334c3f11ddf112afe8", "message": "Add Pyramid Plunder plugin\n\nCo-authored-by: Adam <Adam@sigterm.info>", "committedDate": "2020-06-24T19:39:19Z", "type": "forcePushed"}, {"oid": "7a431fc8dbdae33027f892b896dddd8ac56c5aec", "url": "https://github.com/runelite/runelite/commit/7a431fc8dbdae33027f892b896dddd8ac56c5aec", "message": "Add Pyramid Plunder plugin\n\nCo-authored-by: Adam <Adam@sigterm.info>", "committedDate": "2020-06-24T19:49:18Z", "type": "commit"}, {"oid": "7a431fc8dbdae33027f892b896dddd8ac56c5aec", "url": "https://github.com/runelite/runelite/commit/7a431fc8dbdae33027f892b896dddd8ac56c5aec", "message": "Add Pyramid Plunder plugin\n\nCo-authored-by: Adam <Adam@sigterm.info>", "committedDate": "2020-06-24T19:49:18Z", "type": "forcePushed"}]}