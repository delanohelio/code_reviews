{"pr_number": 11052, "pr_title": "Nmz Plugin - Fix area check to exclude KBD lair", "pr_author": "TheStonedTurtle", "pr_createdAt": "2020-03-22T05:35:28Z", "pr_url": "https://github.com/runelite/runelite/pull/11052", "timeline": [{"oid": "0c3d61430a7233ff6f9f47369126f3d0450e5148", "url": "https://github.com/runelite/runelite/commit/0c3d61430a7233ff6f9f47369126f3d0450e5148", "message": "Discord Plugin - Add KBD game event type\n\nKBD uses same region as NMZ but is always on plane 0", "committedDate": "2020-03-27T04:09:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMTIzOQ==", "url": "https://github.com/runelite/runelite/pull/11052#discussion_r399731239", "body": "Given that we don't show players as being in the wilderness and players necessarily must travel through the wilderness to get to KBD, I think we shouldn't show this at all.", "bodyText": "Given that we don't show players as being in the wilderness and players necessarily must travel through the wilderness to get to KBD, I think we shouldn't show this at all.", "bodyHTML": "<p dir=\"auto\">Given that we don't show players as being in the wilderness and players necessarily must travel through the wilderness to get to KBD, I think we shouldn't show this at all.</p>", "author": "Nightfirecat", "createdAt": "2020-03-29T01:32:46Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/discord/DiscordGameEventType.java", "diffHunk": "@@ -87,6 +87,8 @@\n \tBOSS_ZALCANO(\"Zalcano\", DiscordAreaType.BOSSES, 13250),\n \tBOSS_ZULRAH(\"Zulrah\", DiscordAreaType.BOSSES, 9007),\n \tBOSS_NIGHTMARE(\"Nightmare of Ashihama\", DiscordAreaType.BOSSES, 15515),\n+\t// KBD shares its region with NMZ and should be manually checked for and assigned by the plugin\n+\tBOSS_KING_BLACK_DRAGON(\"King black dragon\", DiscordAreaType.BOSSES),", "originalCommit": "0c3d61430a7233ff6f9f47369126f3d0450e5148", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "65a581d6072e2c1f25b5602d7a228929db25beff", "url": "https://github.com/runelite/runelite/commit/65a581d6072e2c1f25b5602d7a228929db25beff", "message": "Discord Plugin - Fix NMZ area check to exclude KBD lair\n\nNMZ reuses the KBD region ID but is always above plane 0", "committedDate": "2020-03-29T02:02:05Z", "type": "forcePushed"}, {"oid": "779769a4e7f8587c961c6894116dde5a4f9adefc", "url": "https://github.com/runelite/runelite/commit/779769a4e7f8587c961c6894116dde5a4f9adefc", "message": "Discord Plugin - Fix NMZ area check to exclude KBD lair\n\nNMZ reuses the KBD region ID but is always above plane 0", "committedDate": "2020-03-29T02:04:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczNzYxNg==", "url": "https://github.com/runelite/runelite/pull/11052#discussion_r399737616", "body": "Add a newline after this so it doesn't look like one big block.\r\n```suggestion\r\n\t\tDiscordGameEventType discordGameEventType = DiscordGameEventType.fromRegion(playerRegionID);\r\n\r\n```", "bodyText": "Add a newline after this so it doesn't look like one big block.\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tDiscordGameEventType discordGameEventType = DiscordGameEventType.fromRegion(playerRegionID);\n          \n          \n            \n            \t\tDiscordGameEventType discordGameEventType = DiscordGameEventType.fromRegion(playerRegionID);", "bodyHTML": "<p dir=\"auto\">Add a newline after this so it doesn't look like one big block.</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"384\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-smi\">DiscordGameEventType</span> discordGameEventType <span class=\"pl-k\">=</span> <span class=\"pl-smi\">DiscordGameEventType</span><span class=\"pl-k\">.</span>fromRegion(playerRegionID);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"384\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-smi\">DiscordGameEventType</span> discordGameEventType <span class=\"pl-k\">=</span> <span class=\"pl-smi\">DiscordGameEventType</span><span class=\"pl-k\">.</span>fromRegion(playerRegionID);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"385\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2020-03-29T03:05:56Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/discord/DiscordPlugin.java", "diffHunk": "@@ -381,7 +381,14 @@ private void checkForAreaUpdate()\n \t\t\treturn;\n \t\t}\n \n-\t\tfinal DiscordGameEventType discordGameEventType = DiscordGameEventType.fromRegion(playerRegionID);\n+\t\tDiscordGameEventType discordGameEventType = DiscordGameEventType.fromRegion(playerRegionID);", "originalCommit": "779769a4e7f8587c961c6894116dde5a4f9adefc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI2MjI3OQ==", "url": "https://github.com/runelite/runelite/pull/11052#discussion_r401262279", "body": "```suggestion\r\n\t\t\tdiscordGameEventType = null;\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\tdiscordGameEventType = null;\n          \n          \n            \n            \t\t\tdiscordGameEventType = null;", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t\t<span class=\"x x-first x-last\">\t</span>discordGameEventType <span class=\"pl-k\">=</span> <span class=\"pl-c1\">null</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\tdiscordGameEventType <span class=\"pl-k\">=</span> <span class=\"pl-c1\">null</span>;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Adam-", "createdAt": "2020-03-31T22:55:25Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/discord/DiscordPlugin.java", "diffHunk": "@@ -381,7 +381,15 @@ private void checkForAreaUpdate()\n \t\t\treturn;\n \t\t}\n \n-\t\tfinal DiscordGameEventType discordGameEventType = DiscordGameEventType.fromRegion(playerRegionID);\n+\t\tDiscordGameEventType discordGameEventType = DiscordGameEventType.fromRegion(playerRegionID);\n+\n+\t\t// NMZ uses the same region ID as KBD. KBD is always on plane 0 and NMZ is always above plane 0\n+\t\t// Since KBD requires going through the wilderness there is no EventType for it\n+\t\tif (DiscordGameEventType.MG_NIGHTMARE_ZONE.equals(discordGameEventType)\n+\t\t\t&& client.getLocalPlayer().getWorldLocation().getPlane() == 0)\n+\t\t{\n+\t\t\t\tdiscordGameEventType = null;", "originalCommit": "23e34bb1356b4c27143b3053b4161d83e30dd29a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI2MjYwMg==", "url": "https://github.com/runelite/runelite/pull/11052#discussion_r401262602", "body": "```suggestion\r\n\t\tif (DiscordGameEventType.MG_NIGHTMARE_ZONE == discordGameEventType\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tif (DiscordGameEventType.MG_NIGHTMARE_ZONE.equals(discordGameEventType)\n          \n          \n            \n            \t\tif (DiscordGameEventType.MG_NIGHTMARE_ZONE == discordGameEventType", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-k\">if</span> (<span class=\"pl-smi\">DiscordGameEventType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>MG_NIGHTMARE_ZONE</span><span class=\"pl-k x x-first\">.</span><span class=\"x x-last\">equals(</span>discordGameEventType<span class=\"x x-first x-last\">)</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-k\">if</span> (<span class=\"pl-smi\">DiscordGameEventType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>MG_NIGHTMARE_ZONE</span><span class=\"x x-first\"> </span><span class=\"pl-k x\">==</span><span class=\"x x-last\"> </span>discordGameEventType</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Adam-", "createdAt": "2020-03-31T22:56:19Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/discord/DiscordPlugin.java", "diffHunk": "@@ -381,7 +381,15 @@ private void checkForAreaUpdate()\n \t\t\treturn;\n \t\t}\n \n-\t\tfinal DiscordGameEventType discordGameEventType = DiscordGameEventType.fromRegion(playerRegionID);\n+\t\tDiscordGameEventType discordGameEventType = DiscordGameEventType.fromRegion(playerRegionID);\n+\n+\t\t// NMZ uses the same region ID as KBD. KBD is always on plane 0 and NMZ is always above plane 0\n+\t\t// Since KBD requires going through the wilderness there is no EventType for it\n+\t\tif (DiscordGameEventType.MG_NIGHTMARE_ZONE.equals(discordGameEventType)", "originalCommit": "23e34bb1356b4c27143b3053b4161d83e30dd29a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5e99fae00e61abdcf94af4cf60092e893dc64cf9", "url": "https://github.com/runelite/runelite/commit/5e99fae00e61abdcf94af4cf60092e893dc64cf9", "message": "Discord Plugin - Fix NMZ area check to exclude KBD lair\n\nNMZ reuses the KBD region ID but is always above plane 0", "committedDate": "2020-04-01T01:28:44Z", "type": "forcePushed"}, {"oid": "0faf994f5467b07df2fead0841d3eb6915e79864", "url": "https://github.com/runelite/runelite/commit/0faf994f5467b07df2fead0841d3eb6915e79864", "message": "nightmarezone: Fix area check to exclude KBD lair\n\nFixes #3692", "committedDate": "2020-04-01T03:52:28Z", "type": "commit"}, {"oid": "7744056766e09aee1157a2014eb5d5092155a898", "url": "https://github.com/runelite/runelite/commit/7744056766e09aee1157a2014eb5d5092155a898", "message": "discord: Fix NMZ area check to exclude KBD lair\n\nNMZ reuses the KBD region ID but is always above plane 0", "committedDate": "2020-04-01T03:52:46Z", "type": "commit"}, {"oid": "7744056766e09aee1157a2014eb5d5092155a898", "url": "https://github.com/runelite/runelite/commit/7744056766e09aee1157a2014eb5d5092155a898", "message": "discord: Fix NMZ area check to exclude KBD lair\n\nNMZ reuses the KBD region ID but is always above plane 0", "committedDate": "2020-04-01T03:52:46Z", "type": "forcePushed"}]}