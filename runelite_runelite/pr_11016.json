{"pr_number": 11016, "pr_title": "friendslist: update titles using onScriptPostFired rather than onGameTick", "pr_author": "melkypie", "pr_createdAt": "2020-03-15T16:48:52Z", "pr_url": "https://github.com/runelite/runelite/pull/11016", "timeline": [{"oid": "f891e882441cfbf5a4ef95cbfa92480a29b2bf75", "url": "https://github.com/runelite/runelite/commit/f891e882441cfbf5a4ef95cbfa92480a29b2bf75", "message": "friendslist: update titles using onScriptPostFired rather than onGameTick", "committedDate": "2020-03-15T17:03:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDEyMjExOQ==", "url": "https://github.com/runelite/runelite/pull/11016#discussion_r394122119", "body": "There's already extra whitespace at the end of the method before, we definitely don't need more of it. Remove these empty lines.\r\n```suggestion\r\n```", "bodyText": "There's already extra whitespace at the end of the method before, we definitely don't need more of it. Remove these empty lines.\n  \n    \n      \n        Suggested change", "bodyHTML": "<p dir=\"auto\">There's already extra whitespace at the end of the method before, we definitely don't need more of it. Remove these empty lines.</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2020-03-18T06:02:25Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/friendlist/FriendListPlugin.java", "diffHunk": "@@ -62,44 +63,52 @@ protected void shutDown()\n \t}\n \n \t@Subscribe\n-\tpublic void onGameTick(GameTick tick)\n+\tpublic void onScriptPostFired(ScriptPostFired event)\n \t{\n-\t\tfinal int world = client.getWorld();\n-\t\tfinal boolean isMember = client.getVar(VarPlayer.MEMBERSHIP_DAYS) > 0;\n-\n-\t\tfinal NameableContainer<Friend> friendContainer = client.getFriendContainer();\n-\t\tfinal int friendCount = friendContainer.getCount();\n-\t\tif (friendCount >= 0)\n+\t\tif (event.getScriptId() == ScriptID.FRIENDS_LIST_BUILD)\n \t\t{\n-\t\t\tfinal int limit = isMember ? MAX_FRIENDS_P2P : MAX_FRIENDS_F2P;\n+\t\t\tfinal int world = client.getWorld();\n+\t\t\tfinal boolean isMember = client.getVar(VarPlayer.MEMBERSHIP_DAYS) > 0;\n+\t\t\tfinal NameableContainer<Friend> friendContainer = client.getFriendContainer();\n+\t\t\tfinal int friendCount = friendContainer.getCount();\n+\t\t\tif (friendCount >= 0)\n+\t\t\t{\n+\t\t\t\tfinal int limit = isMember ? MAX_FRIENDS_P2P : MAX_FRIENDS_F2P;\n \n-\t\t\tfinal String title = \"Friends - W\" +\n-\t\t\t\tworld +\n-\t\t\t\t\" (\" +\n-\t\t\t\tfriendCount +\n-\t\t\t\t\"/\" +\n-\t\t\t\tlimit +\n-\t\t\t\t\")\";\n+\t\t\t\tfinal String title = \"Friends - W\" +\n+\t\t\t\t\tworld +\n+\t\t\t\t\t\" (\" +\n+\t\t\t\t\tfriendCount +\n+\t\t\t\t\t\"/\" +\n+\t\t\t\t\tlimit +\n+\t\t\t\t\t\")\";\n \n-\t\t\tsetFriendsListTitle(title);\n+\t\t\t\tsetFriendsListTitle(title);\n+\t\t\t}\n \t\t}\n-\n-\t\tfinal NameableContainer<Ignore> ignoreContainer = client.getIgnoreContainer();\n-\t\tfinal int ignoreCount = ignoreContainer.getCount();\n-\t\tif (ignoreCount >= 0)\n+\t\telse if (event.getScriptId() == ScriptID.IGNORE_LIST_BUILD)\n \t\t{\n-\t\t\tfinal int limit = isMember ? MAX_IGNORES_P2P : MAX_IGNORES_F2P;\n+\t\t\tfinal int world = client.getWorld();\n+\t\t\tfinal boolean isMember = client.getVar(VarPlayer.MEMBERSHIP_DAYS) > 0;\n+\t\t\tfinal NameableContainer<Ignore> ignoreContainer = client.getIgnoreContainer();\n+\t\t\tfinal int ignoreCount = ignoreContainer.getCount();\n+\t\t\tif (ignoreCount >= 0)\n+\t\t\t{\n+\t\t\t\tfinal int limit = isMember ? MAX_IGNORES_P2P : MAX_IGNORES_F2P;\n \n-\t\t\tfinal String title = \"Ignores - W\" +\n-\t\t\t\tworld +\n-\t\t\t\t\" (\" +\n-\t\t\t\tignoreCount +\n-\t\t\t\t\"/\" +\n-\t\t\t\tlimit +\n-\t\t\t\t\")\";\n+\t\t\t\tfinal String title = \"Ignores - W\" +\n+\t\t\t\t\tworld +\n+\t\t\t\t\t\" (\" +\n+\t\t\t\t\tignoreCount +\n+\t\t\t\t\t\"/\" +\n+\t\t\t\t\tlimit +\n+\t\t\t\t\t\")\";\n \n-\t\t\tsetIgnoreListTitle(title);\n+\t\t\t\tsetIgnoreListTitle(title);\n+\t\t\t}\n \t\t}\n+\n+", "originalCommit": "f891e882441cfbf5a4ef95cbfa92480a29b2bf75", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cd4aa75d8fe163bf5e305ec78136f0bbaf2e7ad4", "url": "https://github.com/runelite/runelite/commit/cd4aa75d8fe163bf5e305ec78136f0bbaf2e7ad4", "message": "friendslist: update titles using onScriptPostFired rather than onGameTick", "committedDate": "2020-03-18T11:18:16Z", "type": "commit"}, {"oid": "cd4aa75d8fe163bf5e305ec78136f0bbaf2e7ad4", "url": "https://github.com/runelite/runelite/commit/cd4aa75d8fe163bf5e305ec78136f0bbaf2e7ad4", "message": "friendslist: update titles using onScriptPostFired rather than onGameTick", "committedDate": "2020-03-18T11:18:16Z", "type": "forcePushed"}]}