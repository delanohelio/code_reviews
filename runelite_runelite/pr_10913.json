{"pr_number": 10913, "pr_title": "Add an option to show the average amount for a loot source in the loot tracker", "pr_author": "mikesena", "pr_createdAt": "2020-02-29T11:44:14Z", "pr_url": "https://github.com/runelite/runelite/pull/10913", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgzMzEwMw==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r386833103", "body": "```suggestion\r\n\t\tdescription = \"Show the average value of each loot instead of the sum total value\"\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tdescription = \"Whether to show the total value or the average\"\n          \n          \n            \n            \t\tdescription = \"Show the average value of each loot instead of the sum total value\"", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\tdescription <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">Whether to show </span>the <span class=\"x x-first x-last\">total</span> value <span class=\"x x-first x-last\">or </span>the <span class=\"x x-first x-last\">average</span><span class=\"pl-pds\">\"</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\tdescription <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">Show </span>the <span class=\"x x-first x-last\">average</span> value <span class=\"x x-first x-last\">of each loot instead of </span>the <span class=\"x x-first x-last\">sum total value</span><span class=\"pl-pds\">\"</span></span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2020-03-03T07:12:33Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerConfig.java", "diffHunk": "@@ -69,6 +69,16 @@ default boolean showPriceType()\n \t\treturn false;\n \t}\n \n+\t@ConfigItem(\n+\t\tkeyName = \"showAverage\",\n+\t\tname = \"Show Average Price\",\n+\t\tdescription = \"Whether to show the total value or the average\"", "originalCommit": "e1d0726d0fda238209d3afd496a921970969aed6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgzNDc4Mw==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r386834783", "body": "Why does this change add the average string to the tooltip even when the configuration option is disabled?", "bodyText": "Why does this change add the average string to the tooltip even when the configuration option is disabled?", "bodyHTML": "<p dir=\"auto\">Why does this change add the average string to the tooltip even when the configuration option is disabled?</p>", "author": "Nightfirecat", "createdAt": "2020-03-03T07:17:58Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerBox.java", "diffHunk": "@@ -215,13 +218,24 @@ void rebuild()\n \t\t\tpriceTypeString = priceType == LootTrackerPriceType.HIGH_ALCHEMY ? \"HA: \" : \"GE: \";\n \t\t}\n \n-\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n-\t\tpriceLabel.setToolTipText(QuantityFormatter.formatNumber(totalPrice) + \" gp\");\n+\t\tString averageString = kills > 1 ? QuantityFormatter.formatNumber(totalPrice / kills) + \" gp\" : \"0\";\n+\t\tString totalString = priceTypeString + QuantityFormatter.formatNumber(totalPrice) + \" gp\";\n+\t\tif (showAverage)\n+\t\t{\n+\t\t\tpriceLabel.setText(averageString);\n+\t\t\tpriceLabel.setToolTipText(totalString + \" (total)\");\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice));\n+\t\t\tpriceLabel.setToolTipText(\"<html>\" + QuantityFormatter.formatNumber(totalPrice) + \" gp<br>\" + averageString + \" (average)</html>\");\t\t\t\n+\t\t}\t\t", "originalCommit": "e1d0726d0fda238209d3afd496a921970969aed6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzI3NDQ5MA==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r387274490", "bodyText": "@Nightfirecat  - I saw the setting as the displayed value, and the tooltip as a means to show the opposite.  2 reasons for doing that:\n\nI assume it won't be the option that people will want displayed by default.  The number of kills / values (i.e. \"x 135\") currently doesn't display anything.  So even though it's disabled, I think it's reasonable to add that as a hover item.\nBoth figures are valuable to know - and I think there'd be interest from many in seeing both.  The hover text is simply the one you don't normally want to see.", "author": "mikesena", "createdAt": "2020-03-03T20:27:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgzNDc4Mw=="}], "type": "inlineReview"}, {"oid": "7171069e133c361f12803c5924460990d1c079dd", "url": "https://github.com/runelite/runelite/commit/7171069e133c361f12803c5924460990d1c079dd", "message": "Add an option to show the average amount for a loot source in the loot tracker", "committedDate": "2020-03-03T20:30:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODA3NjkzMA==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r388076930", "body": "Compared to the price label text prior to this change, this is missing the `+ \" gp\"` suffix. `totalString` should be used instead\r\n```suggestion\r\n\t\t\tpriceLabel.setText(totalString);\r\n```", "bodyText": "Compared to the price label text prior to this change, this is missing the + \" gp\" suffix. totalString should be used instead\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice));\n          \n          \n            \n            \t\t\tpriceLabel.setText(totalString);", "bodyHTML": "<p dir=\"auto\">Compared to the price label text prior to this change, this is missing the <code>+ \" gp\"</code> suffix. <code>totalString</code> should be used instead</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t\tpriceLabel<span class=\"pl-k\">.</span>setText(<span class=\"x x-first\">priceTypeString </span><span class=\"pl-k x\">+</span><span class=\"x\"> </span><span class=\"pl-smi x\">QuantityFormatter</span><span class=\"pl-k x\">.</span><span class=\"x x-last\">quantityToStackSize(totalPrice)</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\tpriceLabel<span class=\"pl-k\">.</span>setText(<span class=\"x x-first x-last\">totalString</span>);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2020-03-05T04:50:24Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerBox.java", "diffHunk": "@@ -215,13 +218,24 @@ void rebuild()\n \t\t\tpriceTypeString = priceType == LootTrackerPriceType.HIGH_ALCHEMY ? \"HA: \" : \"GE: \";\n \t\t}\n \n-\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n-\t\tpriceLabel.setToolTipText(QuantityFormatter.formatNumber(totalPrice) + \" gp\");\n+\t\tString averageString = kills > 1 ? QuantityFormatter.formatNumber(totalPrice / kills) + \" gp\" : \"0\";\n+\t\tString totalString = priceTypeString + QuantityFormatter.formatNumber(totalPrice) + \" gp\";\n+\t\tif (showAverage)\n+\t\t{\n+\t\t\tpriceLabel.setText(averageString);\n+\t\t\tpriceLabel.setToolTipText(totalString + \" (total)\");\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice));", "originalCommit": "7171069e133c361f12803c5924460990d1c079dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODA5ODg4NQ==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r388098885", "bodyText": "I can't believe I missed that sorry.  I've pushed up a change that removes the totalString, in favour of making it exactly the same as before.", "author": "mikesena", "createdAt": "2020-03-05T06:26:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODA3NjkzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEwMTMxOA==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r388101318", "bodyText": "@Nightfirecat  - I think this conversation can be resolved", "author": "mikesena", "createdAt": "2020-03-05T06:35:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODA3NjkzMA=="}], "type": "inlineReview"}, {"oid": "7f02eaf3245ba5a94070f3b5fab00ba395b80b2a", "url": "https://github.com/runelite/runelite/commit/7f02eaf3245ba5a94070f3b5fab00ba395b80b2a", "message": "Add an option to show the average amount for a loot source in the loot tracker", "committedDate": "2020-03-05T06:25:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMzA5MA==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r388123090", "body": "There's loads of trailing space here\r\n```suggestion\r\n\t\t\tpriceLabel.setToolTipText(\"<html>\" + QuantityFormatter.formatNumber(totalPrice) + \" gp<br>\" + averageString + \" (average)</html>\");\r\n```", "bodyText": "There's loads of trailing space here\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tpriceLabel.setToolTipText(\"<html>\" + QuantityFormatter.formatNumber(totalPrice) + \" gp<br>\" + averageString + \" (average)</html>\");\t\t\t\n          \n          \n            \n            \t\t\tpriceLabel.setToolTipText(\"<html>\" + QuantityFormatter.formatNumber(totalPrice) + \" gp<br>\" + averageString + \" (average)</html>\");", "bodyHTML": "<p dir=\"auto\">There's loads of trailing space here</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t\tpriceLabel<span class=\"pl-k\">.</span>setToolTipText(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>&lt;html&gt;<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">+</span> <span class=\"pl-smi\">QuantityFormatter</span><span class=\"pl-k\">.</span>formatNumber(totalPrice) <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span> gp&lt;br&gt;<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">+</span> averageString <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span> (average)&lt;/html&gt;<span class=\"pl-pds\">\"</span></span>);<span class=\"x x-first x-last\">\t\t\t</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\tpriceLabel<span class=\"pl-k\">.</span>setToolTipText(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>&lt;html&gt;<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">+</span> <span class=\"pl-smi\">QuantityFormatter</span><span class=\"pl-k\">.</span>formatNumber(totalPrice) <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span> gp&lt;br&gt;<span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">+</span> averageString <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span> (average)&lt;/html&gt;<span class=\"pl-pds\">\"</span></span>);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2020-03-05T07:45:35Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerBox.java", "diffHunk": "@@ -215,13 +218,23 @@ void rebuild()\n \t\t\tpriceTypeString = priceType == LootTrackerPriceType.HIGH_ALCHEMY ? \"HA: \" : \"GE: \";\n \t\t}\n \n-\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n-\t\tpriceLabel.setToolTipText(QuantityFormatter.formatNumber(totalPrice) + \" gp\");\n+\t\tString averageString = kills > 1 ? QuantityFormatter.formatNumber(totalPrice / kills) + \" gp\" : \"0\";\n+\t\tif (showAverage)\n+\t\t{\n+\t\t\tpriceLabel.setText(averageString);\n+\t\t\tpriceLabel.setToolTipText(priceTypeString + QuantityFormatter.formatNumber(totalPrice) + \" gp (total)\");\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n+\t\t\tpriceLabel.setToolTipText(\"<html>\" + QuantityFormatter.formatNumber(totalPrice) + \" gp<br>\" + averageString + \" (average)</html>\");\t\t\t", "originalCommit": "7f02eaf3245ba5a94070f3b5fab00ba395b80b2a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE4NDUwNg==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r388184506", "bodyText": "Sigh, sorry @Nightfirecat  - missed that too.  Fixed.", "author": "mikesena", "createdAt": "2020-03-05T09:52:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMzA5MA=="}], "type": "inlineReview"}, {"oid": "4a64382c0199631bcf3e9379110231446dc0a2b5", "url": "https://github.com/runelite/runelite/commit/4a64382c0199631bcf3e9379110231446dc0a2b5", "message": "Add an option to show the average amount for a loot source in the loot tracker", "committedDate": "2020-03-05T09:51:36Z", "type": "forcePushed"}, {"oid": "21e7224990635c03027723b5b510ca4ed384c92b", "url": "https://github.com/runelite/runelite/commit/21e7224990635c03027723b5b510ca4ed384c92b", "message": "Toggle average prices from the panel instead of the config page", "committedDate": "2020-03-07T12:13:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMyNTEyMg==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r389325122", "body": "Remove this eof line addition now that there are no other config changes", "bodyText": "Remove this eof line addition now that there are no other config changes", "bodyHTML": "<p dir=\"auto\">Remove this eof line addition now that there are no other config changes</p>", "author": "Nightfirecat", "createdAt": "2020-03-08T01:10:04Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerConfig.java", "diffHunk": "@@ -90,4 +90,4 @@ default boolean syncPanel()\n \t{\n \t\treturn true;\n \t}\n-}\n\\ No newline at end of file\n+}", "originalCommit": "21e7224990635c03027723b5b510ca4ed384c92b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM1MjYyMQ==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r389352621", "bodyText": "Done.  I squashed my 2 commits together - assuming that the visual button is a better approach.", "author": "mikesena", "createdAt": "2020-03-08T09:44:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMyNTEyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMyNjQ2Mw==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r389326463", "body": "This makes the average value of a single kill 0, which is not correct.", "bodyText": "This makes the average value of a single kill 0, which is not correct.", "bodyHTML": "<p dir=\"auto\">This makes the average value of a single kill 0, which is not correct.</p>", "author": "Nightfirecat", "createdAt": "2020-03-08T01:37:25Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerBox.java", "diffHunk": "@@ -215,13 +218,23 @@ void rebuild()\n \t\t\tpriceTypeString = priceType == LootTrackerPriceType.HIGH_ALCHEMY ? \"HA: \" : \"GE: \";\n \t\t}\n \n-\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n-\t\tpriceLabel.setToolTipText(QuantityFormatter.formatNumber(totalPrice) + \" gp\");\n+\t\tString averageString = kills > 1 ? QuantityFormatter.formatNumber(totalPrice / kills) + \" gp\" : \"0\";", "originalCommit": "21e7224990635c03027723b5b510ca4ed384c92b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM1MjY0Ng==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r389352646", "bodyText": "Correct, great pick-up.  Fixed.", "author": "mikesena", "createdAt": "2020-03-08T09:45:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMyNjQ2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMyNjU1MA==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r389326550", "body": "Why is this tooltip added here? Given that this is price information, it should only be handled with the price data on the right, which is already covered in the code above.", "bodyText": "Why is this tooltip added here? Given that this is price information, it should only be handled with the price data on the right, which is already covered in the code above.", "bodyHTML": "<p dir=\"auto\">Why is this tooltip added here? Given that this is price information, it should only be handled with the price data on the right, which is already covered in the code above.</p>", "author": "Nightfirecat", "createdAt": "2020-03-08T01:39:45Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/loottracker/LootTrackerBox.java", "diffHunk": "@@ -215,13 +218,23 @@ void rebuild()\n \t\t\tpriceTypeString = priceType == LootTrackerPriceType.HIGH_ALCHEMY ? \"HA: \" : \"GE: \";\n \t\t}\n \n-\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n-\t\tpriceLabel.setToolTipText(QuantityFormatter.formatNumber(totalPrice) + \" gp\");\n+\t\tString averageString = kills > 1 ? QuantityFormatter.formatNumber(totalPrice / kills) + \" gp\" : \"0\";\n+\t\tif (showAverage)\n+\t\t{\n+\t\t\tpriceLabel.setText(averageString);\n+\t\t\tpriceLabel.setToolTipText(priceTypeString + QuantityFormatter.formatNumber(totalPrice) + \" gp (total)\");\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tpriceLabel.setText(priceTypeString + QuantityFormatter.quantityToStackSize(totalPrice) + \" gp\");\n+\t\t\tpriceLabel.setToolTipText(\"<html>\" + QuantityFormatter.formatNumber(totalPrice) + \" gp<br>\" + averageString + \" (average)</html>\");\n+\t\t}\n \n \t\tfinal long kills = getTotalKills();\n \t\tif (kills > 1)\n \t\t{\n \t\t\tsubTitleLabel.setText(\"x \" + kills);\n+\t\t\tsubTitleLabel.setToolTipText(averageString + \" (average)\");", "originalCommit": "21e7224990635c03027723b5b510ca4ed384c92b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM1MjgxMQ==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r389352811", "bodyText": "This was my original way of doing it.  I hovered over the kill count, hoping it would show me the average.  Maybe others have the same approach.\nIf you're okay for it to be left it, I think it's a good location to always be able to see the average, without clicking the button.  I can remove it if you'd prefer though.", "author": "mikesena", "createdAt": "2020-03-08T09:47:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMyNjU1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgwMjg3Mw==", "url": "https://github.com/runelite/runelite/pull/10913#discussion_r391802873", "bodyText": "I don't think it belongs here, but I'll let others comment with their feelings on this.", "author": "Nightfirecat", "createdAt": "2020-03-12T18:09:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMyNjU1MA=="}], "type": "inlineReview"}, {"oid": "37738b3989f70a4d509799f0591ac64fb89ad7c5", "url": "https://github.com/runelite/runelite/commit/37738b3989f70a4d509799f0591ac64fb89ad7c5", "message": "Add an option to show the average amount for a loot source in the loot tracker", "committedDate": "2020-03-08T09:43:39Z", "type": "forcePushed"}, {"oid": "f5e3b6df15c2e64179fcf6b640d17f3e6f8ec2de", "url": "https://github.com/runelite/runelite/commit/f5e3b6df15c2e64179fcf6b640d17f3e6f8ec2de", "message": "Show the average per kill as a tooltip in the loot tracker box", "committedDate": "2020-03-14T11:31:31Z", "type": "commit"}, {"oid": "f5e3b6df15c2e64179fcf6b640d17f3e6f8ec2de", "url": "https://github.com/runelite/runelite/commit/f5e3b6df15c2e64179fcf6b640d17f3e6f8ec2de", "message": "Show the average per kill as a tooltip in the loot tracker box", "committedDate": "2020-03-14T11:31:31Z", "type": "forcePushed"}]}