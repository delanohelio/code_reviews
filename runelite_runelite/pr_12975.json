{"pr_number": 12975, "pr_title": "grounditems: add despawn timer for items placed on tables", "pr_author": "akhtar-u", "pr_createdAt": "2020-12-25T06:08:56Z", "pr_url": "https://github.com/runelite/runelite/pull/12975", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzgzNjEzNw==", "url": "https://github.com/runelite/runelite/pull/12975#discussion_r557836137", "body": "```suggestion\r\n\t\t// We can only accurately guess despawn times for our own pvm loot, dropped items,\r\n\t\t// and items we placed on tables\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t// We can only accurately guess despawn times for our own pvm loot, dropped items\n          \n          \n            \n            \t\t// or for items placed on tables\n          \n          \n            \n            \t\t// We can only accurately guess despawn times for our own pvm loot, dropped items,\n          \n          \n            \n            \t\t// and items we placed on tables", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-c\"><span class=\"pl-c\">//</span> We can only accurately guess despawn times for our own pvm loot, dropped items</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-c\"><span class=\"pl-c\">//</span> <span class=\"x x-first x-last\">or for </span>items placed on tables</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-c\"><span class=\"pl-c\">//</span> We can only accurately guess despawn times for our own pvm loot, dropped items<span class=\"x x-first x-last\">,</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-c\"><span class=\"pl-c\">//</span> <span class=\"x x-first x-last\">and </span>items<span class=\"x x-first x-last\"> we</span> placed on tables</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2021-01-15T03:13:07Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/grounditems/GroundItemsOverlay.java", "diffHunk": "@@ -394,8 +395,10 @@ else if (groundItemTimers == DespawnTimerMode.SECONDS || groundItemTimers == Des\n \n \tprivate Instant calculateDespawnTime(GroundItem groundItem)\n \t{\n-\t\t// We can only accurately guess despawn times for our own pvm loot and dropped items\n-\t\tif (groundItem.getLootType() != LootType.PVM && groundItem.getLootType() != LootType.DROPPED)\n+\t\t// We can only accurately guess despawn times for our own pvm loot, dropped items\n+\t\t// or for items placed on tables", "originalCommit": "6ed288256a70e79fb85751fa204baf2fa47d4d4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzgzNjI0MA==", "url": "https://github.com/runelite/runelite/pull/12975#discussion_r557836240", "body": "Let's make this one type per line now that we're breaking to another line to begin with.\r\n```suggestion\r\n\t\tif (groundItem.getLootType() != LootType.PVM\r\n\t\t\t&& groundItem.getLootType() != LootType.DROPPED\r\n\t\t\t&& groundItem.getLootType() != LootType.TABLE)\r\n```", "bodyText": "Let's make this one type per line now that we're breaking to another line to begin with.\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tif (groundItem.getLootType() != LootType.PVM && groundItem.getLootType() != LootType.DROPPED\n          \n          \n            \n            \t\t\t&& groundItem.getLootType() != LootType.TABLE)\n          \n          \n            \n            \t\tif (groundItem.getLootType() != LootType.PVM\n          \n          \n            \n            \t\t\t&& groundItem.getLootType() != LootType.DROPPED\n          \n          \n            \n            \t\t\t&& groundItem.getLootType() != LootType.TABLE)", "bodyHTML": "<p dir=\"auto\">Let's make this one type per line now that we're breaking to another line to begin with.</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"405\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-k\">if</span> (groundItem<span class=\"pl-k\">.</span>getLootType() <span class=\"pl-k\">!=</span> <span class=\"pl-smi\">LootType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>PVM</span> <span class=\"pl-k\">&amp;&amp;</span> groundItem<span class=\"pl-k\">.</span>getLootType() <span class=\"pl-k\">!=</span> <span class=\"pl-smi\">LootType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>DROPPED</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"406\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t\t<span class=\"pl-k\">&amp;&amp;</span> groundItem<span class=\"pl-k\">.</span>getLootType() <span class=\"pl-k\">!=</span> <span class=\"pl-smi\">LootType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>TABLE</span>)</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"405\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-k\">if</span> (groundItem<span class=\"pl-k\">.</span>getLootType() <span class=\"pl-k\">!=</span> <span class=\"pl-smi\">LootType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>PVM</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"406\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\t<span class=\"pl-k\">&amp;&amp;</span> groundItem<span class=\"pl-k\">.</span>getLootType() <span class=\"pl-k\">!=</span> <span class=\"pl-smi\">LootType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>DROPPED</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"407\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\t<span class=\"pl-k\">&amp;&amp;</span> groundItem<span class=\"pl-k\">.</span>getLootType() <span class=\"pl-k\">!=</span> <span class=\"pl-smi\">LootType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>TABLE</span>)</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2021-01-15T03:13:38Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/grounditems/GroundItemsOverlay.java", "diffHunk": "@@ -394,8 +395,10 @@ else if (groundItemTimers == DespawnTimerMode.SECONDS || groundItemTimers == Des\n \n \tprivate Instant calculateDespawnTime(GroundItem groundItem)\n \t{\n-\t\t// We can only accurately guess despawn times for our own pvm loot and dropped items\n-\t\tif (groundItem.getLootType() != LootType.PVM && groundItem.getLootType() != LootType.DROPPED)\n+\t\t// We can only accurately guess despawn times for our own pvm loot, dropped items\n+\t\t// or for items placed on tables\n+\t\tif (groundItem.getLootType() != LootType.PVM && groundItem.getLootType() != LootType.DROPPED\n+\t\t\t&& groundItem.getLootType() != LootType.TABLE)", "originalCommit": "6ed288256a70e79fb85751fa204baf2fa47d4d4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzgzNjUyMA==", "url": "https://github.com/runelite/runelite/pull/12975#discussion_r557836520", "body": "```suggestion\r\n\t\t// We can only accurately guess despawn times for our own pvm loot, dropped items,\r\n\t\t// and items we placed on tables\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t// We can only accurately guess despawn times for our own pvm loot, dropped items\n          \n          \n            \n            \t\t// or for items placed on tables\n          \n          \n            \n            \t\t// We can only accurately guess despawn times for our own pvm loot, dropped items,\n          \n          \n            \n            \t\t// and items we placed on tables", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-c\"><span class=\"pl-c\">//</span> We can only accurately guess despawn times for our own pvm loot, dropped items</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-c\"><span class=\"pl-c\">//</span> <span class=\"x x-first x-last\">or for </span>items placed on tables</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-c\"><span class=\"pl-c\">//</span> We can only accurately guess despawn times for our own pvm loot, dropped items<span class=\"x x-first x-last\">,</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-c\"><span class=\"pl-c\">//</span> <span class=\"x x-first x-last\">and </span>items<span class=\"x x-first x-last\"> we</span> placed on tables</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2021-01-15T03:14:45Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/grounditems/GroundItemsOverlay.java", "diffHunk": "@@ -475,8 +482,10 @@ else if (isInKBDorNMZ())\n \n \tprivate Color getItemTimerColor(GroundItem groundItem)\n \t{\n-\t\t// We can only accurately guess despawn times for our own pvm loot and dropped items\n-\t\tif (groundItem.getLootType() != LootType.PVM && groundItem.getLootType() != LootType.DROPPED)\n+\t\t// We can only accurately guess despawn times for our own pvm loot, dropped items\n+\t\t// or for items placed on tables", "originalCommit": "6ed288256a70e79fb85751fa204baf2fa47d4d4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzgzNjU3NA==", "url": "https://github.com/runelite/runelite/pull/12975#discussion_r557836574", "body": "```suggestion\r\n\t\tif (groundItem.getLootType() != LootType.PVM\r\n\t\t\t&& groundItem.getLootType() != LootType.DROPPED\r\n\t\t\t&& groundItem.getLootType() != LootType.TABLE)\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tif (groundItem.getLootType() != LootType.PVM && groundItem.getLootType() != LootType.DROPPED\n          \n          \n            \n            \t\t\t&& groundItem.getLootType() != LootType.TABLE)\n          \n          \n            \n            \t\tif (groundItem.getLootType() != LootType.PVM\n          \n          \n            \n            \t\t\t&& groundItem.getLootType() != LootType.DROPPED\n          \n          \n            \n            \t\t\t&& groundItem.getLootType() != LootType.TABLE)", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"497\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-k\">if</span> (groundItem<span class=\"pl-k\">.</span>getLootType() <span class=\"pl-k\">!=</span> <span class=\"pl-smi\">LootType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>PVM</span> <span class=\"pl-k\">&amp;&amp;</span> groundItem<span class=\"pl-k\">.</span>getLootType() <span class=\"pl-k\">!=</span> <span class=\"pl-smi\">LootType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>DROPPED</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"498\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t\t<span class=\"pl-k\">&amp;&amp;</span> groundItem<span class=\"pl-k\">.</span>getLootType() <span class=\"pl-k\">!=</span> <span class=\"pl-smi\">LootType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>TABLE</span>)</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"497\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-k\">if</span> (groundItem<span class=\"pl-k\">.</span>getLootType() <span class=\"pl-k\">!=</span> <span class=\"pl-smi\">LootType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>PVM</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"498\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\t<span class=\"pl-k\">&amp;&amp;</span> groundItem<span class=\"pl-k\">.</span>getLootType() <span class=\"pl-k\">!=</span> <span class=\"pl-smi\">LootType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>DROPPED</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"499\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\t<span class=\"pl-k\">&amp;&amp;</span> groundItem<span class=\"pl-k\">.</span>getLootType() <span class=\"pl-k\">!=</span> <span class=\"pl-smi\">LootType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>TABLE</span>)</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2021-01-15T03:15:01Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/grounditems/GroundItemsOverlay.java", "diffHunk": "@@ -475,8 +482,10 @@ else if (isInKBDorNMZ())\n \n \tprivate Color getItemTimerColor(GroundItem groundItem)\n \t{\n-\t\t// We can only accurately guess despawn times for our own pvm loot and dropped items\n-\t\tif (groundItem.getLootType() != LootType.PVM && groundItem.getLootType() != LootType.DROPPED)\n+\t\t// We can only accurately guess despawn times for our own pvm loot, dropped items\n+\t\t// or for items placed on tables\n+\t\tif (groundItem.getLootType() != LootType.PVM && groundItem.getLootType() != LootType.DROPPED\n+\t\t\t&& groundItem.getLootType() != LootType.TABLE)", "originalCommit": "6ed288256a70e79fb85751fa204baf2fa47d4d4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzgzNjgxNQ==", "url": "https://github.com/runelite/runelite/pull/12975#discussion_r557836815", "body": "The menu action will only ever be one or the other, let's not do both checks every time\r\n```suggestion\r\n\t\telse if (menuOptionClicked.getMenuAction() == MenuAction.ITEM_USE_ON_GAME_OBJECT)\r\n```", "bodyText": "The menu action will only ever be one or the other, let's not do both checks every time\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tif (menuOptionClicked.getMenuAction() == MenuAction.ITEM_USE_ON_GAME_OBJECT)\n          \n          \n            \n            \t\telse if (menuOptionClicked.getMenuAction() == MenuAction.ITEM_USE_ON_GAME_OBJECT)", "bodyHTML": "<p dir=\"auto\">The menu action will only ever be one or the other, let's not do both checks every time</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-k\">if</span> (menuOptionClicked<span class=\"pl-k\">.</span>getMenuAction() <span class=\"pl-k\">==</span> <span class=\"pl-smi\">MenuAction</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>ITEM_USE_ON_GAME_OBJECT</span>)</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-k x x-first\">else</span><span class=\"x x-last\"> </span><span class=\"pl-k\">if</span> (menuOptionClicked<span class=\"pl-k\">.</span>getMenuAction() <span class=\"pl-k\">==</span> <span class=\"pl-smi\">MenuAction</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>ITEM_USE_ON_GAME_OBJECT</span>)</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2021-01-15T03:15:58Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/grounditems/GroundItemsPlugin.java", "diffHunk": "@@ -687,5 +695,11 @@ public void onMenuOptionClicked(MenuOptionClicked menuOptionClicked)\n \t\t\t// item spawns that are drops\n \t\t\tdroppedItemQueue.add(itemId);\n \t\t}\n+\t\t// Keep queue of items placed on table\n+\t\tif (menuOptionClicked.getMenuAction() == MenuAction.ITEM_USE_ON_GAME_OBJECT)", "originalCommit": "6ed288256a70e79fb85751fa204baf2fa47d4d4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzgzNzYyOA==", "url": "https://github.com/runelite/runelite/pull/12975#discussion_r557837628", "body": "This seems wrong. If two items spawn on the same tick, this doesn't make any attempt to check the item ID, tile height, or location to ensure it is the item we placed on a table.", "bodyText": "This seems wrong. If two items spawn on the same tick, this doesn't make any attempt to check the item ID, tile height, or location to ensure it is the item we placed on a table.", "bodyHTML": "<p dir=\"auto\">This seems wrong. If two items spawn on the same tick, this doesn't make any attempt to check the item ID, tile height, or location to ensure it is the item we placed on a table.</p>", "author": "Nightfirecat", "createdAt": "2021-01-15T03:18:51Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/grounditems/GroundItemsPlugin.java", "diffHunk": "@@ -384,6 +385,7 @@ private GroundItem buildGroundItem(final Tile tile, final TileItem item)\n \t\tfinal int realItemId = itemComposition.getNote() != -1 ? itemComposition.getLinkedNoteId() : itemId;\n \t\tfinal int alchPrice = itemComposition.getHaPrice();\n \t\tfinal boolean dropped = tile.getWorldLocation().equals(client.getLocalPlayer().getWorldLocation()) && droppedItemQueue.remove(itemId);\n+\t\tfinal boolean onTable = tableItemQueue.isEmpty();", "originalCommit": "6ed288256a70e79fb85751fa204baf2fa47d4d4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1OTI1NTEzNg==", "url": "https://github.com/runelite/runelite/pull/12975#discussion_r559255136", "bodyText": "I think checking for itemID should be enough.", "author": "akhtar-u", "createdAt": "2021-01-17T23:25:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzgzNzYyOA=="}], "type": "inlineReview"}, {"oid": "a3234834396f7299fce5eaadf72f626c94c7db69", "url": "https://github.com/runelite/runelite/commit/a3234834396f7299fce5eaadf72f626c94c7db69", "message": "change boolean to check itemID", "committedDate": "2021-01-17T23:24:00Z", "type": "forcePushed"}, {"oid": "2bfe07daa838e7def590ea6990b605e74b74b3ea", "url": "https://github.com/runelite/runelite/commit/2bfe07daa838e7def590ea6990b605e74b74b3ea", "message": "add despawn timer for items placed on tables", "committedDate": "2021-01-17T23:31:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDU4MjkwMw==", "url": "https://github.com/runelite/runelite/pull/12975#discussion_r560582903", "body": "This should be initialized to `-1` on plugin startup, as `DWARF_REMAINS` is a valid item at ID 0.", "bodyText": "This should be initialized to -1 on plugin startup, as DWARF_REMAINS is a valid item at ID 0.", "bodyHTML": "<p dir=\"auto\">This should be initialized to <code>-1</code> on plugin startup, as <code>DWARF_REMAINS</code> is a valid item at ID 0.</p>", "author": "Nightfirecat", "createdAt": "2021-01-20T00:03:00Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/grounditems/GroundItemsPlugin.java", "diffHunk": "@@ -180,6 +180,10 @@\n \tprivate LoadingCache<NamedQuantity, Boolean> highlightedItems;\n \tprivate LoadingCache<NamedQuantity, Boolean> hiddenItems;\n \tprivate final Queue<Integer> droppedItemQueue = EvictingQueue.create(16); // recently dropped items\n+\tprivate final Queue<Integer> tableItemQueue = EvictingQueue.create(16); // recently placed items\n+\n+\t// item being used on table\n+\tprivate int itemUsedID;", "originalCommit": "2bfe07daa838e7def590ea6990b605e74b74b3ea", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDU4MzAyMw==", "url": "https://github.com/runelite/runelite/pull/12975#discussion_r560583023", "body": "```suggestion\r\n\t\telse if (itemUsedID != -1 && menuOptionClicked.getMenuAction() == MenuAction.ITEM_USE_ON_GAME_OBJECT)\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\telse if (menuOptionClicked.getMenuAction() == MenuAction.ITEM_USE_ON_GAME_OBJECT)\n          \n          \n            \n            \t\telse if (itemUsedID != -1 && menuOptionClicked.getMenuAction() == MenuAction.ITEM_USE_ON_GAME_OBJECT)", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"695\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t<span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (menuOptionClicked<span class=\"pl-k\">.</span>getMenuAction() <span class=\"pl-k\">==</span> <span class=\"pl-smi\">MenuAction</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>ITEM_USE_ON_GAME_OBJECT</span>)</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"695\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t<span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (<span class=\"x x-first\">itemUsedID </span><span class=\"pl-k x\">!=</span><span class=\"x\"> </span><span class=\"pl-k x\">-</span><span class=\"pl-c1 x\">1</span><span class=\"x\"> </span><span class=\"pl-k x\">&amp;&amp;</span><span class=\"x x-last\"> </span>menuOptionClicked<span class=\"pl-k\">.</span>getMenuAction() <span class=\"pl-k\">==</span> <span class=\"pl-smi\">MenuAction</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>ITEM_USE_ON_GAME_OBJECT</span>)</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Nightfirecat", "createdAt": "2021-01-20T00:03:26Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/grounditems/GroundItemsPlugin.java", "diffHunk": "@@ -687,5 +697,14 @@ public void onMenuOptionClicked(MenuOptionClicked menuOptionClicked)\n \t\t\t// item spawns that are drops\n \t\t\tdroppedItemQueue.add(itemId);\n \t\t}\n+\t\t// Keep queue of items placed on table\n+\t\telse if (menuOptionClicked.getMenuAction() == MenuAction.ITEM_USE)\n+\t\t{\n+\t\t\titemUsedID = menuOptionClicked.getId();\n+\t\t}\n+\t\telse if (menuOptionClicked.getMenuAction() == MenuAction.ITEM_USE_ON_GAME_OBJECT)", "originalCommit": "2bfe07daa838e7def590ea6990b605e74b74b3ea", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6bc6b59c22ab40b5cf858669981b57c09d82c2ec", "url": "https://github.com/runelite/runelite/commit/6bc6b59c22ab40b5cf858669981b57c09d82c2ec", "message": "initialize itemUsedID to -1", "committedDate": "2021-01-21T20:56:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzQxMDU0Nw==", "url": "https://github.com/runelite/runelite/pull/12975#discussion_r563410547", "body": "I guess you are just copying the dropped item queue logic here; but the dropped item queue exists because you can drop multiple items on each tick, and it needs to be able to track each of them. However you cannot place multiple items on a table on the same tick since it is an object interaction, and so I think this is unnecessary.", "bodyText": "I guess you are just copying the dropped item queue logic here; but the dropped item queue exists because you can drop multiple items on each tick, and it needs to be able to track each of them. However you cannot place multiple items on a table on the same tick since it is an object interaction, and so I think this is unnecessary.", "bodyHTML": "<p dir=\"auto\">I guess you are just copying the dropped item queue logic here; but the dropped item queue exists because you can drop multiple items on each tick, and it needs to be able to track each of them. However you cannot place multiple items on a table on the same tick since it is an object interaction, and so I think this is unnecessary.</p>", "author": "Adam-", "createdAt": "2021-01-25T00:35:54Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/grounditems/GroundItemsPlugin.java", "diffHunk": "@@ -180,6 +180,10 @@\n \tprivate LoadingCache<NamedQuantity, Boolean> highlightedItems;\n \tprivate LoadingCache<NamedQuantity, Boolean> hiddenItems;\n \tprivate final Queue<Integer> droppedItemQueue = EvictingQueue.create(16); // recently dropped items\n+\tprivate final Queue<Integer> tableItemQueue = EvictingQueue.create(16); // recently placed items", "originalCommit": "a8ba7f42ad14b8ed48cecc07653c53d46901bd0a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzQxMDkzOA==", "url": "https://github.com/runelite/runelite/pull/12975#discussion_r563410938", "body": "I am fairly certain that `tile.getItemLayer().getHeight() > 0` is true iif the item is on a table, so maybe that can just be used instead.", "bodyText": "I am fairly certain that tile.getItemLayer().getHeight() > 0 is true iif the item is on a table, so maybe that can just be used instead.", "bodyHTML": "<p dir=\"auto\">I am fairly certain that <code>tile.getItemLayer().getHeight() &gt; 0</code> is true iif the item is on a table, so maybe that can just be used instead.</p>", "author": "Adam-", "createdAt": "2021-01-25T00:38:19Z", "path": "runelite-client/src/main/java/net/runelite/client/plugins/grounditems/GroundItemsPlugin.java", "diffHunk": "@@ -384,6 +389,7 @@ private GroundItem buildGroundItem(final Tile tile, final TileItem item)\n \t\tfinal int realItemId = itemComposition.getNote() != -1 ? itemComposition.getLinkedNoteId() : itemId;\n \t\tfinal int alchPrice = itemComposition.getHaPrice();\n \t\tfinal boolean dropped = tile.getWorldLocation().equals(client.getLocalPlayer().getWorldLocation()) && droppedItemQueue.remove(itemId);\n+\t\tfinal boolean onTable = tableItemQueue.remove(itemId);", "originalCommit": "a8ba7f42ad14b8ed48cecc07653c53d46901bd0a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "571ecffcec0b67ff904af0a3edc63c42ec686a4f", "url": "https://github.com/runelite/runelite/commit/571ecffcec0b67ff904af0a3edc63c42ec686a4f", "message": "remove queue and use itemlayer height", "committedDate": "2021-01-26T03:34:45Z", "type": "forcePushed"}, {"oid": "2b8550c776dd53ce33927652738e348defb20254", "url": "https://github.com/runelite/runelite/commit/2b8550c776dd53ce33927652738e348defb20254", "message": "grounditems: Add despawn timer for items placed on tables", "committedDate": "2021-02-03T04:19:11Z", "type": "forcePushed"}, {"oid": "e90b8293de3e37dc3c99578ce2d7438001492b1c", "url": "https://github.com/runelite/runelite/commit/e90b8293de3e37dc3c99578ce2d7438001492b1c", "message": "grounditems: Add despawn timer for items placed on tables", "committedDate": "2021-02-03T22:45:42Z", "type": "commit"}, {"oid": "e90b8293de3e37dc3c99578ce2d7438001492b1c", "url": "https://github.com/runelite/runelite/commit/e90b8293de3e37dc3c99578ce2d7438001492b1c", "message": "grounditems: Add despawn timer for items placed on tables", "committedDate": "2021-02-03T22:45:42Z", "type": "forcePushed"}]}