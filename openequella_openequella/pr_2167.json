{"pr_number": 2167, "pr_title": "Make date range end inclusive in searches", "pr_author": "PenghaiZhang", "pr_createdAt": "2020-08-11T05:25:05Z", "pr_url": "https://github.com/openequella/openEQUELLA/pull/2167", "timeline": [{"oid": "d7fd6a03087ede4d8fac6b308274a1a0db2d417a", "url": "https://github.com/openequella/openEQUELLA/commit/d7fd6a03087ede4d8fac6b308274a1a0db2d417a", "message": "Make the end of date range inclusive in searches.\n\nFirstly, change the time of start to '00:00:00' and that of end to\n'23:59:59'. Secondly, to ensure the old Search page keeps unchanged, add a\nnew boolean variable to flag if a search is performed by 'Search2' API.\nAnd then in the function that prepares Lucine queries, use proper timezone\nbased on the flag.", "committedDate": "2020-08-11T05:12:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODM5MzEzOA==", "url": "https://github.com/openequella/openEQUELLA/pull/2167#discussion_r468393138", "body": "Two things:\r\n\r\n1. Could we use a better name for this? From what I can gather, it only does one thing - control whether or not to include a timezone in the DateFilter. So maybe a name like `useServerTimeZone`?\r\n2. Like we've started doing in all our TS code, let's add a JavaDoc comment to any new bits we add - especially here at the interface level.", "bodyText": "Two things:\n\nCould we use a better name for this? From what I can gather, it only does one thing - control whether or not to include a timezone in the DateFilter. So maybe a name like useServerTimeZone?\nLike we've started doing in all our TS code, let's add a JavaDoc comment to any new bits we add - especially here at the interface level.", "bodyHTML": "<p dir=\"auto\">Two things:</p>\n<ol dir=\"auto\">\n<li>Could we use a better name for this? From what I can gather, it only does one thing - control whether or not to include a timezone in the DateFilter. So maybe a name like <code>useServerTimeZone</code>?</li>\n<li>Like we've started doing in all our TS code, let's add a JavaDoc comment to any new bits we add - especially here at the interface level.</li>\n</ol>", "author": "edalex-ian", "createdAt": "2020-08-11T07:53:14Z", "path": "Source/Plugins/Core/com.equella.base/src/com/tle/common/searching/Search.java", "diffHunk": "@@ -86,4 +86,6 @@ public SortField getSortField(boolean reverseTheDefault) {\n   String getPrivilegeToCollect();\n \n   Collection<DateFilter> getDateFilters();\n+\n+  boolean isFromSearch2API();", "originalCommit": "d7fd6a03087ede4d8fac6b308274a1a0db2d417a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODkyNjY5Mw==", "url": "https://github.com/openequella/openEQUELLA/pull/2167#discussion_r468926693", "bodyText": "I actually came up with this name when I was working on the multiple Dynamic Collections because I wanted to indicate some code is only written for the new Search page. However, as we won't do multiple Dynamic Collections, perhaps this feature becomes the only one that requires changes on legacy code. So I am happy to rename the variable to useServerTimeZone.", "author": "PenghaiZhang", "createdAt": "2020-08-11T23:49:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODM5MzEzOA=="}], "type": "inlineReview"}, {"oid": "8c96f1862d00c65ae0ff9e098a4d6e87a3d0c659", "url": "https://github.com/openequella/openEQUELLA/commit/8c96f1862d00c65ae0ff9e098a4d6e87a3d0c659", "message": "Simplify SearchHelper's method 'handleModifiedDate'.", "committedDate": "2020-08-12T00:13:02Z", "type": "commit"}, {"oid": "12120bd516e381d7d5d42d1ae7b0f55bbdf6ee66", "url": "https://github.com/openequella/openEQUELLA/commit/12120bd516e381d7d5d42d1ae7b0f55bbdf6ee66", "message": "Rename variable 'isFromSearch2API' to 'useServerTimeZone' and add JavaDoc.", "committedDate": "2020-08-12T00:14:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAyMzUxOA==", "url": "https://github.com/openequella/openEQUELLA/pull/2167#discussion_r469023518", "body": "```suggestion\r\n   * Indicates if the server time zone should be included in searches.\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Indicate if the server time zone is needed in searches.\n          \n          \n            \n               * Indicates if the server time zone should be included in searches.", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">   <span class=\"pl-k\">*</span> <span class=\"pl-smi x x-first x-last\">Indicate</span> <span class=\"pl-k\">if</span> the server time zone <span class=\"x x-first x-last\">is needed</span> in searches.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">   <span class=\"pl-k\">*</span> <span class=\"pl-smi x x-first x-last\">Indicates</span> <span class=\"pl-k\">if</span> the server time zone <span class=\"x x-first x-last\">should be included</span> in searches.</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "edalex-ian", "createdAt": "2020-08-12T06:03:04Z", "path": "Source/Plugins/Core/com.equella.base/src/com/tle/common/searching/Search.java", "diffHunk": "@@ -87,5 +87,10 @@ public SortField getSortField(boolean reverseTheDefault) {\n \n   Collection<DateFilter> getDateFilters();\n \n-  boolean isFromSearch2API();\n+  /**\n+   * Indicate if the server time zone is needed in searches.", "originalCommit": "12120bd516e381d7d5d42d1ae7b0f55bbdf6ee66", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3489e5b52972d129912004de67d8b092ccb80bee", "url": "https://github.com/openequella/openEQUELLA/commit/3489e5b52972d129912004de67d8b092ccb80bee", "message": "Two tweaks for JavaDoc.\n\nCo-authored-by: edalex-ian <43919233+edalex-ian@users.noreply.github.com>", "committedDate": "2020-08-12T06:14:27Z", "type": "commit"}]}