{"pr_number": 1088, "pr_title": "Let the carrier be null on the inject methods, to support possible lambda usages", "pr_author": "jkwatson", "pr_createdAt": "2020-04-07T21:27:42Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/1088", "timeline": [{"oid": "d13112ca347ff415c0d431d6f67db6404e721aa8", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/d13112ca347ff415c0d431d6f67db6404e721aa8", "message": "Let the carrier be null on the inject methods, to support possible lambda usages.", "committedDate": "2020-04-07T21:26:38Z", "type": "commit"}, {"oid": "17e188bdedb41b95a578601787ec1ef0a7710af9", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/17e188bdedb41b95a578601787ec1ef0a7710af9", "message": "update the javadoc/annotations to make the nullability clear.", "committedDate": "2020-04-09T15:54:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxMzYzNA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1088#discussion_r406313634", "body": "```suggestion\r\n   * Injects the value downstream, for example as HTTP headers. The carrier may be null to\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Injects the value downstream. For example, as http headers. The carrier may be null to\n          \n          \n            \n               * Injects the value downstream, for example as HTTP headers. The carrier may be null to", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">   <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Injects</span> the value downstream<span class=\"x x-first\">. </span><span class=\"pl-smi x x-last\">For</span> example<span class=\"x x-first x-last\">,</span> as <span class=\"x x-first x-last\">http</span> headers. <span class=\"pl-smi\">The</span> carrier may be <span class=\"pl-c1\">null</span> to</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">   <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Injects</span> the value downstream<span class=\"x x-first\">, </span><span class=\"pl-k x x-last\">for</span> example as <span class=\"pl-c1 x x-first x-last\">HTTP</span> headers. <span class=\"pl-smi\">The</span> carrier may be <span class=\"pl-c1\">null</span> to</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Oberon00", "createdAt": "2020-04-09T16:06:45Z", "path": "context_prop/src/main/java/io/opentelemetry/context/propagation/HttpTextFormat.java", "diffHunk": "@@ -69,15 +69,17 @@\n   List<String> fields();\n \n   /**\n-   * Injects the value downstream. For example, as http headers.\n+   * Injects the value downstream. For example, as http headers. The carrier may be null to", "originalCommit": "17e188bdedb41b95a578601787ec1ef0a7710af9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxMzkzOQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1088#discussion_r406313939", "body": "```suggestion\r\n   * facilitate calling this method with a lambda for the {@link Setter}, in which case that\r\n```\r\n\r\nJava is redundant in a Javadoc, IMHO.", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * facilitate calling this method with a java lambda for the {@link Setter}, in which case that\n          \n          \n            \n               * facilitate calling this method with a lambda for the {@link Setter}, in which case that\n          \n      \n    \n    \n  \n\nJava is redundant in a Javadoc, IMHO.", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">   <span class=\"pl-k\">*</span> facilitate calling <span class=\"pl-c1\">this</span> method with a <span class=\"x x-first x-last\">java </span>lambda <span class=\"pl-k\">for</span> the {<span class=\"pl-k\">@link</span> <span class=\"pl-smi\">Setter</span>}, in which <span class=\"pl-k\">case</span> that</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">   <span class=\"pl-k\">*</span> facilitate calling <span class=\"pl-c1\">this</span> method with a lambda <span class=\"pl-k\">for</span> the {<span class=\"pl-k\">@link</span> <span class=\"pl-smi\">Setter</span>}, in which <span class=\"pl-k\">case</span> that</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n\n<p dir=\"auto\">Java is redundant in a Javadoc, IMHO.</p>", "author": "Oberon00", "createdAt": "2020-04-09T16:07:20Z", "path": "context_prop/src/main/java/io/opentelemetry/context/propagation/HttpTextFormat.java", "diffHunk": "@@ -69,15 +69,17 @@\n   List<String> fields();\n \n   /**\n-   * Injects the value downstream. For example, as http headers.\n+   * Injects the value downstream. For example, as http headers. The carrier may be null to\n+   * facilitate calling this method with a java lambda for the {@link Setter}, in which case that", "originalCommit": "17e188bdedb41b95a578601787ec1ef0a7710af9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxNTg2Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1088#discussion_r406315862", "bodyText": "fair. :)", "author": "jkwatson", "createdAt": "2020-04-09T16:10:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxMzkzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxNDE5Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1088#discussion_r406314192", "body": "```suggestion\r\n   * null will be passed to the {@link Setter} implementation.\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * null will be passed to your {@link Setter} implementation.\n          \n          \n            \n               * null will be passed to the {@link Setter} implementation.", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">   <span class=\"pl-k\">*</span> <span class=\"pl-c1\">null</span> will be passed to <span class=\"x x-first x-last\">your</span> {<span class=\"pl-k\">@link</span> <span class=\"pl-smi\">Setter</span>} implementation.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">   <span class=\"pl-k\">*</span> <span class=\"pl-c1\">null</span> will be passed to <span class=\"x x-first x-last\">the</span> {<span class=\"pl-k\">@link</span> <span class=\"pl-smi\">Setter</span>} implementation.</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Oberon00", "createdAt": "2020-04-09T16:07:45Z", "path": "context_prop/src/main/java/io/opentelemetry/context/propagation/HttpTextFormat.java", "diffHunk": "@@ -69,15 +69,17 @@\n   List<String> fields();\n \n   /**\n-   * Injects the value downstream. For example, as http headers.\n+   * Injects the value downstream. For example, as http headers. The carrier may be null to\n+   * facilitate calling this method with a java lambda for the {@link Setter}, in which case that\n+   * null will be passed to your {@link Setter} implementation.", "originalCommit": "17e188bdedb41b95a578601787ec1ef0a7710af9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxNDgyMg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1088#discussion_r406314822", "body": "While at it, you could also add `@Nonnull`.", "bodyText": "While at it, you could also add @Nonnull.", "bodyHTML": "<p dir=\"auto\">While at it, you could also add <code>@Nonnull</code>.</p>", "author": "Oberon00", "createdAt": "2020-04-09T16:08:45Z", "path": "context_prop/src/main/java/io/opentelemetry/context/propagation/HttpTextFormat.java", "diffHunk": "@@ -69,15 +69,17 @@\n   List<String> fields();\n \n   /**\n-   * Injects the value downstream. For example, as http headers.\n+   * Injects the value downstream. For example, as http headers. The carrier may be null to\n+   * facilitate calling this method with a java lambda for the {@link Setter}, in which case that\n+   * null will be passed to your {@link Setter} implementation.\n    *\n    * @param context the {@code Context} containing the value to be injected.\n    * @param carrier holds propagation fields. For example, an outgoing message or http request.\n    * @param setter invoked for each propagation key to add or remove.\n    * @param <C> carrier of propagation fields, such as an http request\n    * @since 0.1.0\n    */\n-  <C> void inject(Context context, C carrier, Setter<C> setter);\n+  <C> void inject(Context context, @Nullable C carrier, Setter<C> setter);", "originalCommit": "17e188bdedb41b95a578601787ec1ef0a7710af9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxNjc2MQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1088#discussion_r406316761", "bodyText": "is that implied? We haven't done a lot of annotations like that on our parameters. If we want to start annotating all parameters on API methods, let's do that as a separate PR.", "author": "jkwatson", "createdAt": "2020-04-09T16:11:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxNDgyMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMyNjMxNg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1088#discussion_r406326316", "bodyText": "Right, let's not expand the scope of this PR too much \ud83d\udc4c", "author": "Oberon00", "createdAt": "2020-04-09T16:27:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxNDgyMg=="}], "type": "inlineReview"}, {"oid": "358111ea573d0d9631df4323a513688116ba33c4", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/358111ea573d0d9631df4323a513688116ba33c4", "message": "Update context_prop/src/main/java/io/opentelemetry/context/propagation/HttpTextFormat.java\n\nCo-Authored-By: Christian Neum\u00fcller <christian+github@neumueller.me>", "committedDate": "2020-04-09T16:09:53Z", "type": "commit"}, {"oid": "ed31642c391809c9e0b63da34e7bcb5e205ed3e5", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/ed31642c391809c9e0b63da34e7bcb5e205ed3e5", "message": "Update context_prop/src/main/java/io/opentelemetry/context/propagation/HttpTextFormat.java\n\nCo-Authored-By: Christian Neum\u00fcller <christian+github@neumueller.me>", "committedDate": "2020-04-09T16:10:25Z", "type": "commit"}, {"oid": "655e0822bcef0baf65da26d0d1b62abb81bad583", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/655e0822bcef0baf65da26d0d1b62abb81bad583", "message": "Update context_prop/src/main/java/io/opentelemetry/context/propagation/HttpTextFormat.java\n\nCo-Authored-By: Christian Neum\u00fcller <christian+github@neumueller.me>", "committedDate": "2020-04-09T16:10:36Z", "type": "commit"}, {"oid": "388f5cdd04d0da7f337b2a8c2af58e05e9da4c5b", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/388f5cdd04d0da7f337b2a8c2af58e05e9da4c5b", "message": "update formatting", "committedDate": "2020-04-09T16:16:42Z", "type": "commit"}]}