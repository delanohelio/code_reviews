{"pr_number": 2146, "pr_title": "Replace SpanData.hasRemoteParent/getParentSpanId with getParentSpanContext", "pr_author": "anuraaga", "pr_createdAt": "2020-11-27T06:06:16Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/2146", "timeline": [{"oid": "bdeb6cac1fbaa1e1154dbe288bcc12d31bbaceba", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/bdeb6cac1fbaa1e1154dbe288bcc12d31bbaceba", "message": "Remove SpanData.hasRemoteParent", "committedDate": "2020-11-27T06:04:51Z", "type": "commit"}, {"oid": "600b6ab87b3675f5fd30231dba92d4316f696257", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/600b6ab87b3675f5fd30231dba92d4316f696257", "message": "Replace parentSpanId with parentSpanContext", "committedDate": "2020-11-27T08:53:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ5NDk3OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2146#discussion_r531494979", "body": "I don't know if we even want to deprecate that. So far, it seems exporters have only needed this, so it seems OK to keep it as convenience shortcut.\r\nI'm fine with deprecating/removing it though, just a thought.", "bodyText": "I don't know if we even want to deprecate that. So far, it seems exporters have only needed this, so it seems OK to keep it as convenience shortcut.\nI'm fine with deprecating/removing it though, just a thought.", "bodyHTML": "<p dir=\"auto\">I don't know if we even want to deprecate that. So far, it seems exporters have only needed this, so it seems OK to keep it as convenience shortcut.<br>\nI'm fine with deprecating/removing it though, just a thought.</p>", "author": "Oberon00", "createdAt": "2020-11-27T09:55:22Z", "path": "sdk/trace/src/main/java/io/opentelemetry/sdk/trace/data/SpanData.java", "diffHunk": "@@ -50,13 +50,36 @@\n    */\n   TraceState getTraceState();\n \n+  /**\n+   * Returns the parent {@link SpanContext}. If the span is a root span, the {@link SpanContext}\n+   * returned will be invalid.\n+   */\n+  SpanContext getParentSpanContext();\n+\n   /**\n    * Returns the parent {@code SpanId}. If the {@code Span} is a root {@code Span}, the SpanId\n    * returned will be invalid..\n    *\n    * @return the parent {@code SpanId} or an invalid SpanId if this is a root {@code Span}.\n+   * @deprecated Use {@link #getParentSpanContext()}\n    */\n-  String getParentSpanId();\n+  @Deprecated", "originalCommit": "600b6ab87b3675f5fd30231dba92d4316f696257", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjcyOTQ5OA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2146#discussion_r532729498", "bodyText": "I'm fine either way.", "author": "jkwatson", "createdAt": "2020-11-30T16:30:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ5NDk3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzA2NzY0MQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2146#discussion_r533067641", "bodyText": "Makes sense to me to keep it so undeprecated", "author": "anuraaga", "createdAt": "2020-12-01T04:36:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ5NDk3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTQ5NjAyMg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2146#discussion_r531496022", "body": "```suggestion\r\n   * @param parentSpanContext the parent span context, or {@link SpanContext#getInvalid()} if this\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * @param parentSpanContext the span_id of the parent span, or {@code Span.INVALID} if the new\n          \n          \n            \n               * @param parentSpanContext the parent span context, or {@link SpanContext#getInvalid()} if this", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">   <span class=\"pl-k\">*</span> <span class=\"pl-k\">@param</span> parentSpanContext the <span class=\"x x-first x-last\">span_id of the </span>parent span, or {<span class=\"pl-k\">@<span class=\"x x-first\">code</span></span><span class=\"x\"> </span><span class=\"pl-smi x\">Span</span><span class=\"pl-c1\"><span class=\"pl-k x\">.</span><span class=\"x x-last\">INVALID</span></span>} <span class=\"pl-k\">if</span> <span class=\"x x-first\">the </span><span class=\"pl-k x x-last\">new</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">   <span class=\"pl-k\">*</span> <span class=\"pl-k\">@param</span> parentSpanContext the parent span<span class=\"x x-first x-last\"> context</span>, or {<span class=\"pl-k\">@<span class=\"x x-first\">link</span></span><span class=\"x\"> </span><span class=\"pl-smi x\">SpanContext</span><span class=\"x x-last\">#getInvalid()</span>} <span class=\"pl-k\">if</span> <span class=\"pl-c1 x x-first x-last\">this</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Oberon00", "createdAt": "2020-11-27T09:57:05Z", "path": "sdk/trace/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java", "diffHunk": "@@ -135,10 +131,8 @@ private RecordEventsReadableSpan(\n    * @param context supplies the trace_id and span_id for the newly started span.\n    * @param name the displayed name for the new span.\n    * @param kind the span kind.\n-   * @param parentSpanId the span_id of the parent span, or {@code Span.INVALID} if the new span is\n-   *     a root span.\n-   * @param hasRemoteParent {@code true} if the parentContext is remote. {@code false} if this is a\n-   *     root span.\n+   * @param parentSpanContext the span_id of the parent span, or {@code Span.INVALID} if the new", "originalCommit": "600b6ab87b3675f5fd30231dba92d4316f696257", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8bae0df50f35e7eabcedaad95801548d4ef86be5", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/8bae0df50f35e7eabcedaad95801548d4ef86be5", "message": "Update sdk/trace/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java\n\nCo-authored-by: Christian Neum\u00fcller <christian+github@neumueller.me>", "committedDate": "2020-12-01T00:14:36Z", "type": "commit"}, {"oid": "cc06bd800751c4a3bb0c5780fd8f33a43f234ea6", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/cc06bd800751c4a3bb0c5780fd8f33a43f234ea6", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-java into remove-hasremoteparent", "committedDate": "2020-12-01T04:31:25Z", "type": "commit"}, {"oid": "8cab905918a39f12d904c1296dbd1097436ba26a", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/8cab905918a39f12d904c1296dbd1097436ba26a", "message": "Keep parentId", "committedDate": "2020-12-01T04:36:06Z", "type": "commit"}, {"oid": "aaf3bd43baa37221460482a910d574c941fa1c5a", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/aaf3bd43baa37221460482a910d574c941fa1c5a", "message": "Merge branch 'remove-hasremoteparent' of github.com:anuraaga/opentelemetry-java into remove-hasremoteparent", "committedDate": "2020-12-01T04:36:18Z", "type": "commit"}, {"oid": "a56b892c69f383c837898d157156356440bced5c", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/a56b892c69f383c837898d157156356440bced5c", "message": "Merge branch 'master' of github.com:open-telemetry/opentelemetry-java into remove-hasremoteparent", "committedDate": "2020-12-01T06:01:50Z", "type": "commit"}]}