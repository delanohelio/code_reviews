{"pr_number": 6742, "pr_title": "Add custom registry type support to DeferredRegister.", "pr_author": "LexManos", "pr_createdAt": "2020-06-04T03:21:24Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/6742", "timeline": [{"oid": "1ebf8e01b4d7d996059859252bcffdd125453751", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/1ebf8e01b4d7d996059859252bcffdd125453751", "message": "Add custom registry type support to DeferredRegister.", "committedDate": "2020-06-04T03:19:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIwNTQ1Ng==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6742#discussion_r435205456", "body": "```suggestion\r\n    /**\r\n     * Use for vanilla/forge registries. See example above.\r\n     */\r\n    public static <B extends IForgeRegistryEntry<B>> DeferredRegister<B> create(IForgeRegistry<B> reg, String modid)\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static <B extends IForgeRegistryEntry<B>> DeferredRegister<B> create(IForgeRegistry<B> reg, String modid)\n          \n          \n            \n                /**\n          \n          \n            \n                 * Use for vanilla/forge registries. See example above.\n          \n          \n            \n                 */\n          \n          \n            \n                public static <B extends IForgeRegistryEntry<B>> DeferredRegister<B> create(IForgeRegistry<B> reg, String modid)", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"65\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k x x-first\">public</span><span class=\"x\"> </span><span class=\"pl-k x\">static</span><span class=\"x\"> </span><span class=\"pl-k x\">&lt;</span><span class=\"pl-smi x\">B</span><span class=\"x\"> extends </span><span class=\"pl-k\"><span class=\"x\">IForgeRegistryEntry&lt;</span><span class=\"pl-smi x\">B</span><span class=\"x\">&gt;</span></span><span class=\"pl-k x\">&gt;</span><span class=\"x\"> </span><span class=\"pl-k\"><span class=\"x\">DeferredRegister&lt;</span><span class=\"pl-smi x\">B</span><span class=\"x\">&gt;</span></span><span class=\"x\"> create(</span><span class=\"pl-k\"><span class=\"x\">IForgeRegistry&lt;</span><span class=\"pl-smi x\">B</span><span class=\"x\">&gt;</span></span><span class=\"x\"> reg, </span><span class=\"pl-smi x\">String</span><span class=\"x x-last\"> modid)</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"65\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-c\"><span class=\"pl-c x x-first x-last\">/**</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"66\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Use</span> <span class=\"pl-k\">for</span> vanilla<span class=\"pl-k\">/</span>forge registries. <span class=\"pl-smi\">See</span> example above.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"67\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*/</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"68\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">&lt;</span><span class=\"pl-smi\">B</span> extends <span class=\"pl-k\">IForgeRegistryEntry&lt;<span class=\"pl-smi\">B</span>&gt;</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-k\">DeferredRegister&lt;<span class=\"pl-smi\">B</span>&gt;</span> create(<span class=\"pl-k\">IForgeRegistry&lt;<span class=\"pl-smi\">B</span>&gt;</span> reg, <span class=\"pl-smi\">String</span> modid)</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Cyborgmas", "createdAt": "2020-06-04T12:12:26Z", "path": "src/main/java/net/minecraftforge/registries/DeferredRegister.java", "diffHunk": "@@ -56,15 +59,35 @@\n  */\n public class DeferredRegister<T extends IForgeRegistryEntry<T>>\n {\n-    private final IForgeRegistry<T> type;\n+    public static <B extends IForgeRegistryEntry<B>> DeferredRegister<B> create(IForgeRegistry<B> reg, String modid)", "originalCommit": "1ebf8e01b4d7d996059859252bcffdd125453751", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIwNTcyMw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6742#discussion_r435205723", "body": "```suggestion\r\n    /**\r\n     * Use for custom registries that are made during the NewRegistry event. \r\n     */\r\n    public static <B extends IForgeRegistryEntry<B>> DeferredRegister<B> create(Class<B> base, String modid)\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static <B extends IForgeRegistryEntry<B>> DeferredRegister<B> create(Class<B> base, String modid)\n          \n          \n            \n                /**\n          \n          \n            \n                 * Use for custom registries that are made during the NewRegistry event. \n          \n          \n            \n                 */\n          \n          \n            \n                public static <B extends IForgeRegistryEntry<B>> DeferredRegister<B> create(Class<B> base, String modid)", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"73\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k x x-first\">public</span><span class=\"x\"> </span><span class=\"pl-k x\">static</span><span class=\"x\"> </span><span class=\"pl-k x\">&lt;</span><span class=\"pl-smi x\">B</span><span class=\"x\"> extends </span><span class=\"pl-k\"><span class=\"x\">IForgeRegistryEntry&lt;</span><span class=\"pl-smi x\">B</span><span class=\"x\">&gt;</span></span><span class=\"pl-k x\">&gt;</span><span class=\"x\"> </span><span class=\"pl-k\"><span class=\"x\">DeferredRegister&lt;</span><span class=\"pl-smi x\">B</span><span class=\"x\">&gt;</span></span><span class=\"x\"> create(</span><span class=\"pl-k\"><span class=\"x\">Class&lt;</span><span class=\"pl-smi x\">B</span><span class=\"x\">&gt;</span></span><span class=\"x\"> base, </span><span class=\"pl-smi x\">String</span><span class=\"x x-last\"> modid)</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"73\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-c\"><span class=\"pl-c x x-first x-last\">/**</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"74\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Use</span> <span class=\"pl-k\">for</span> custom registries that are made during the <span class=\"pl-smi\">NewRegistry</span> event. </td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"75\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*/</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"76\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">&lt;</span><span class=\"pl-smi\">B</span> extends <span class=\"pl-k\">IForgeRegistryEntry&lt;<span class=\"pl-smi\">B</span>&gt;</span><span class=\"pl-k\">&gt;</span> <span class=\"pl-k\">DeferredRegister&lt;<span class=\"pl-smi\">B</span>&gt;</span> create(<span class=\"pl-k\">Class&lt;<span class=\"pl-smi\">B</span>&gt;</span> base, <span class=\"pl-smi\">String</span> modid)</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Cyborgmas", "createdAt": "2020-06-04T12:12:57Z", "path": "src/main/java/net/minecraftforge/registries/DeferredRegister.java", "diffHunk": "@@ -56,15 +59,35 @@\n  */\n public class DeferredRegister<T extends IForgeRegistryEntry<T>>\n {\n-    private final IForgeRegistry<T> type;\n+    public static <B extends IForgeRegistryEntry<B>> DeferredRegister<B> create(IForgeRegistry<B> reg, String modid)\n+    {\n+        return new DeferredRegister<B>(reg, modid);\n+    }\n+\n+    public static <B extends IForgeRegistryEntry<B>> DeferredRegister<B> create(Class<B> base, String modid)", "originalCommit": "1ebf8e01b4d7d996059859252bcffdd125453751", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIxMDY2Mg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6742#discussion_r435210662", "bodyText": "In java it isn't @see THING it is {@link THING}", "author": "pupnewfster", "createdAt": "2020-06-04T12:22:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIwNTcyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIxMjU5MA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6742#discussion_r435212590", "bodyText": "Hmm it worked though. Gave me a link to the function.", "author": "Cyborgmas", "createdAt": "2020-06-04T12:25:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIwNTcyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIxNDA0NQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6742#discussion_r435214045", "bodyText": "Ah turns out java also has a @see I just have never actually seen it used before so didn't realize it was actually a thing.", "author": "pupnewfster", "createdAt": "2020-06-04T12:28:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIwNTcyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIwNjAzOA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6742#discussion_r435206038", "body": "```suggestion\r\n    /**\r\n     * For custom registries only, fills the {@link #registryFactory} to be called later see {@link #register(IEventBus)}\r\n     *\r\n     * Calls {@link RegistryBuilder#setName} and {@link RegistryBuilder#setType} automatically.\r\n     *\r\n     * @param name  Path of the registry's {@link ResourceLocation}\r\n     * @param sup   Supplier of the RegistryBuilder that is called to fill {@link #type} during the NewRegistry event\r\n     * @return      A supplier of the {@link IForgeRegistry} created by the builder.\r\n     */\r\n    public Supplier<IForgeRegistry<T>> makeRegistry(final String name, final Supplier<RegistryBuilder<T>> sup) {\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public Supplier<IForgeRegistry<T>> makeRegistry(final String name, final Supplier<RegistryBuilder<T>> sup) {\n          \n          \n            \n                /**\n          \n          \n            \n                 * For custom registries only, fills the {@link #registryFactory} to be called later see {@link #register(IEventBus)}\n          \n          \n            \n                 *\n          \n          \n            \n                 * Calls {@link RegistryBuilder#setName} and {@link RegistryBuilder#setType} automatically.\n          \n          \n            \n                 *\n          \n          \n            \n                 * @param name  Path of the registry's {@link ResourceLocation}\n          \n          \n            \n                 * @param sup   Supplier of the RegistryBuilder that is called to fill {@link #type} during the NewRegistry event\n          \n          \n            \n                 * @return      A supplier of the {@link IForgeRegistry} created by the builder.\n          \n          \n            \n                 */\n          \n          \n            \n                public Supplier<IForgeRegistry<T>> makeRegistry(final String name, final Supplier<RegistryBuilder<T>> sup) {", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"137\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k x x-first\">public</span><span class=\"x\"> </span><span class=\"pl-k\"><span class=\"x\">Supplier&lt;</span><span class=\"pl-k\"><span class=\"x\">IForgeRegistry&lt;</span><span class=\"pl-smi x\">T</span><span class=\"x\">&gt;</span></span><span class=\"x\">&gt;</span></span><span class=\"x\"> makeRegistry(</span><span class=\"pl-k x\">final</span><span class=\"x\"> </span><span class=\"pl-smi x\">String</span><span class=\"x\"> name, </span><span class=\"pl-k x\">final</span><span class=\"x\"> </span><span class=\"pl-k\"><span class=\"x\">Supplier&lt;</span><span class=\"pl-k\"><span class=\"x\">RegistryBuilder&lt;</span><span class=\"pl-smi x\">T</span><span class=\"x\">&gt;</span></span><span class=\"x\">&gt;</span></span><span class=\"x x-last\"> sup) {</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"137\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-c\"><span class=\"pl-c x x-first x-last\">/**</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"138\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">For</span> custom registries only, fills the {<span class=\"pl-k\">@link</span> #registryFactory} to be called later see {<span class=\"pl-k\">@link</span> #register(<span class=\"pl-smi\">IEventBus</span>)}</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"139\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"140\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Calls</span> {<span class=\"pl-k\">@link</span> <span class=\"pl-smi\">RegistryBuilder</span>#setName} and {<span class=\"pl-k\">@link</span> <span class=\"pl-smi\">RegistryBuilder</span>#setType} automatically.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"141\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"142\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-k\">@param</span> name  <span class=\"pl-smi\">Path</span> of the registry<span class=\"pl-s\"><span class=\"pl-pds\">'</span>s {@link ResourceLocation}</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"143\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-k\">@param</span> sup   <span class=\"pl-smi\">Supplier</span> of the <span class=\"pl-smi\">RegistryBuilder</span> that is called to fill {<span class=\"pl-k\">@link</span> #type} during the <span class=\"pl-smi\">NewRegistry</span> event</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"144\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-k\">@return</span>      <span class=\"pl-smi\">A</span> supplier of the {<span class=\"pl-k\">@link</span> <span class=\"pl-smi\">IForgeRegistry</span>} created by the builder.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"145\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*/</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"146\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">Supplier&lt;<span class=\"pl-k\">IForgeRegistry&lt;<span class=\"pl-smi\">T</span>&gt;</span>&gt;</span> makeRegistry(<span class=\"pl-k\">final</span> <span class=\"pl-smi\">String</span> name, <span class=\"pl-k\">final</span> <span class=\"pl-k\">Supplier&lt;<span class=\"pl-k\">RegistryBuilder&lt;<span class=\"pl-smi\">T</span>&gt;</span>&gt;</span> sup) {</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Cyborgmas", "createdAt": "2020-06-04T12:13:31Z", "path": "src/main/java/net/minecraftforge/registries/DeferredRegister.java", "diffHunk": "@@ -80,13 +103,32 @@ public DeferredRegister(IForgeRegistry<T> reg, String modid)\n         Objects.requireNonNull(name);\n         Objects.requireNonNull(sup);\n         final ResourceLocation key = new ResourceLocation(modid, name);\n-        RegistryObject<I> ret = RegistryObject.of(key, this.type);\n+\n+        RegistryObject<I> ret;\n+        if (this.type != null)\n+            ret = RegistryObject.of(key, this.type);\n+        else if (this.superType != null)\n+            ret = RegistryObject.of(key, this.superType, this.modid);\n+        else\n+            throw new IllegalStateException(\"Could not create RegistryObject in DeferredRegister\");\n+\n         if (entries.putIfAbsent((RegistryObject<T>) ret, () -> sup.get().setRegistryName(key)) != null) {\n             throw new IllegalArgumentException(\"Duplicate registration \" + name);\n         }\n+\n         return ret;\n     }\n \n+    public Supplier<IForgeRegistry<T>> makeRegistry(final String name, final Supplier<RegistryBuilder<T>> sup) {", "originalCommit": "1ebf8e01b4d7d996059859252bcffdd125453751", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIwNjQ5MQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6742#discussion_r435206491", "body": "```suggestion\r\n     * See the example usage.\r\n     *\r\n     * If using this for a custom registry, creates the the registry for you in {@link #createRegistry} using the {@link RegistryEvent.NewRegistry} event\r\n     * If no {@link #registryFactory} was provided, listens to the NewRegistry event on {@link EventPriority.LOWEST} to check if the registry was properly created.\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * See the example usage.\n          \n          \n            \n                 * See the example usage.\n          \n          \n            \n                 *\n          \n          \n            \n                 * If using this for a custom registry, creates the the registry for you in {@link #createRegistry} using the {@link RegistryEvent.NewRegistry} event\n          \n          \n            \n                 * If no {@link #registryFactory} was provided, listens to the NewRegistry event on {@link EventPriority.LOWEST} to check if the registry was properly created.", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"149\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">See</span> the example usage.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"149\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">See</span> the example usage.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"150\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"151\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">If</span> using <span class=\"pl-c1\">this</span> <span class=\"pl-k\">for</span> a custom registry, creates the the registry <span class=\"pl-k\">for</span> you in {<span class=\"pl-k\">@link</span> #createRegistry} using the {<span class=\"pl-k\">@link</span> <span class=\"pl-smi\">RegistryEvent</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">NewRegistry</span>} event</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"152\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-smi\">If</span> no {<span class=\"pl-k\">@link</span> #registryFactory} was provided, listens to the <span class=\"pl-smi\">NewRegistry</span> event on {<span class=\"pl-k\">@link</span> <span class=\"pl-smi\">EventPriority</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>LOWEST</span>} to check <span class=\"pl-k\">if</span> the registry was properly created.</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Cyborgmas", "createdAt": "2020-06-04T12:14:25Z", "path": "src/main/java/net/minecraftforge/registries/DeferredRegister.java", "diffHunk": "@@ -80,13 +103,32 @@ public DeferredRegister(IForgeRegistry<T> reg, String modid)\n         Objects.requireNonNull(name);\n         Objects.requireNonNull(sup);\n         final ResourceLocation key = new ResourceLocation(modid, name);\n-        RegistryObject<I> ret = RegistryObject.of(key, this.type);\n+\n+        RegistryObject<I> ret;\n+        if (this.type != null)\n+            ret = RegistryObject.of(key, this.type);\n+        else if (this.superType != null)\n+            ret = RegistryObject.of(key, this.superType, this.modid);\n+        else\n+            throw new IllegalStateException(\"Could not create RegistryObject in DeferredRegister\");\n+\n         if (entries.putIfAbsent((RegistryObject<T>) ret, () -> sup.get().setRegistryName(key)) != null) {\n             throw new IllegalArgumentException(\"Duplicate registration \" + name);\n         }\n+\n         return ret;\n     }\n \n+    public Supplier<IForgeRegistry<T>> makeRegistry(final String name, final Supplier<RegistryBuilder<T>> sup) {\n+        if (this.superType == null)\n+            throw new IllegalStateException(\"Cannot create a registry without specifying a base type\");\n+        if (this.type != null || this.registryFactory != null)\n+            throw new IllegalStateException(\"Cannot create a registry for a type that already exists\");\n+\n+        this.registryFactory = () -> sup.get().setName(new ResourceLocation(modid, name)).setType(this.superType);\n+        return () -> this.type;\n+    }\n+\n     /**\n      * Adds our event handler to the specified event bus, this MUST be called in order for this class to function.\n      * See the example usage.", "originalCommit": "1ebf8e01b4d7d996059859252bcffdd125453751", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ1NTQxMQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6742#discussion_r435455411", "body": "As a reference to `Class<T> superType` is now stored in `DeferredRegister` would it make more sense to just compare `event.getGenericType()` to that rather than querying the registry for it?", "bodyText": "As a reference to Class<T> superType is now stored in DeferredRegister would it make more sense to just compare event.getGenericType() to that rather than querying the registry for it?", "bodyHTML": "<p dir=\"auto\">As a reference to <code>Class&lt;T&gt; superType</code> is now stored in <code>DeferredRegister</code> would it make more sense to just compare <code>event.getGenericType()</code> to that rather than querying the registry for it?</p>", "author": "pupnewfster", "createdAt": "2020-06-04T18:17:02Z", "path": "src/main/java/net/minecraftforge/registries/DeferredRegister.java", "diffHunk": "@@ -108,7 +156,7 @@ public void register(IEventBus bus)\n \n     private void addEntries(RegistryEvent.Register<?> event)\n     {\n-        if (event.getGenericType() == this.type.getRegistrySuperType())\n+        if (this.type != null && event.getGenericType() == this.type.getRegistrySuperType())", "originalCommit": "1ebf8e01b4d7d996059859252bcffdd125453751", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ2NzQzMw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6742#discussion_r435467433", "bodyText": "No, because the intent is to not have superType be in here/definitive.\nAs one of the intentions is to be able to be used as a soft link.\nBy referring to the registry by name or some other method.", "author": "LexManos", "createdAt": "2020-06-04T18:33:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ1NTQxMQ=="}], "type": "inlineReview"}, {"oid": "6d74ef665071c840d117144efa9d58f58badaf5c", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/6d74ef665071c840d117144efa9d58f58badaf5c", "message": "Update src/main/java/net/minecraftforge/registries/DeferredRegister.java\n\nCo-authored-by: Cyborgmas <thpetuaudletang@gmail.com>", "committedDate": "2020-06-12T22:24:54Z", "type": "commit"}, {"oid": "143fcd0b617a143d6039af828e4500c15a4cd731", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/143fcd0b617a143d6039af828e4500c15a4cd731", "message": "Update src/main/java/net/minecraftforge/registries/DeferredRegister.java\n\nCo-authored-by: Cyborgmas <thpetuaudletang@gmail.com>", "committedDate": "2020-06-12T22:26:39Z", "type": "commit"}, {"oid": "41c4905fe9a6418bf53905ebf48b8cca95fce304", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/41c4905fe9a6418bf53905ebf48b8cca95fce304", "message": "Update src/main/java/net/minecraftforge/registries/DeferredRegister.java\n\nCo-authored-by: Cyborgmas <thpetuaudletang@gmail.com>", "committedDate": "2020-06-12T22:27:22Z", "type": "commit"}]}