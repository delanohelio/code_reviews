{"pr_number": 12983, "pr_title": "[BEAM-10994] Add hotKeyLoggingEnabled to the Java DataflowPipelineOptions", "pr_author": "rohdesamuel", "pr_createdAt": "2020-10-01T00:07:42Z", "pr_url": "https://github.com/apache/beam/pull/12983", "timeline": [{"oid": "06b5a1acac365534975e9600f85a8cea118c7af1", "url": "https://github.com/apache/beam/commit/06b5a1acac365534975e9600f85a8cea118c7af1", "message": "Add hotKeyLoggingEnabled to the Java DataflowPipelineOptions\n\nThis will ultimately control whether or not the literal hot key content\nis logged to Cloud Logging.", "committedDate": "2020-10-01T00:02:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODMzNTcyNw==", "url": "https://github.com/apache/beam/pull/12983#discussion_r498335727", "body": "Note that you can use \"is\" for boolean types on the getter. Do whatever is the most common though in the codebase for consistency reasons.\r\n\r\n```suggestion\r\n  boolean isHotKeyLoggingEnabled();\r\n```", "bodyText": "Note that you can use \"is\" for boolean types on the getter. Do whatever is the most common though in the codebase for consistency reasons.\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              boolean getHotKeyLoggingEnabled();\n          \n          \n            \n              boolean isHotKeyLoggingEnabled();", "bodyHTML": "<p dir=\"auto\">Note that you can use \"is\" for boolean types on the getter. Do whatever is the most common though in the codebase for consistency reasons.</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">  <span class=\"pl-k\">boolean</span> <span class=\"x x-first x-last\">getHotKeyLoggingEnabled</span>();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">  <span class=\"pl-k\">boolean</span> <span class=\"x x-first x-last\">isHotKeyLoggingEnabled</span>();</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "lukecwik", "createdAt": "2020-10-01T15:31:27Z", "path": "runners/google-cloud-dataflow-java/src/main/java/org/apache/beam/runners/dataflow/options/DataflowPipelineOptions.java", "diffHunk": "@@ -197,4 +197,11 @@ public String create(PipelineOptions options) {\n           .toString();\n     }\n   }\n+\n+  /** If enabled then the literal key will be logged to Cloud Logging if a hot key is detected. */\n+  @Description(\n+      \"If enabled then the literal key will be logged to Cloud Logging if a hot key is detected.\")\n+  boolean getHotKeyLoggingEnabled();", "originalCommit": "06b5a1acac365534975e9600f85a8cea118c7af1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2286ab5c5c9eeedeca5f3b31efcb0a4514a9e8c7", "url": "https://github.com/apache/beam/commit/2286ab5c5c9eeedeca5f3b31efcb0a4514a9e8c7", "message": "getHotKeyLoggingEnabled -> isHotKeyLoggingEnabled\n\nCo-authored-by: Lukasz Cwik <lcwik@google.com>", "committedDate": "2020-10-01T19:18:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUyNjkzMg==", "url": "https://github.com/apache/beam/pull/12983#discussion_r498526932", "body": "I don't believe there is value in testing this as PipelineOptionsFactoryTest covers these kinds of tests.\r\n```suggestion\r\n```", "bodyText": "I don't believe there is value in testing this as PipelineOptionsFactoryTest covers these kinds of tests.\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n                @Test\n          \n          \n            \n                public void testHotKeyLoggingEnabled() {\n          \n          \n            \n                  DataflowPipelineOptions options = PipelineOptionsFactory.as(DataflowPipelineOptions.class);\n          \n          \n            \n                  options.setHotKeyLoggingEnabled(true);\n          \n          \n            \n                  assertEquals(true, options.getHotKeyLoggingEnabled());\n          \n          \n            \n                }", "bodyHTML": "<p dir=\"auto\">I don't believe there is value in testing this as PipelineOptionsFactoryTest covers these kinds of tests.</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">@Test</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">void</span> testHotKeyLoggingEnabled() {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">      <span class=\"pl-smi\">DataflowPipelineOptions</span> options <span class=\"pl-k\">=</span> <span class=\"pl-smi\">PipelineOptionsFactory</span><span class=\"pl-k\">.</span>as(<span class=\"pl-smi\">DataflowPipelineOptions</span><span class=\"pl-k\">.</span>class);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">      options<span class=\"pl-k\">.</span>setHotKeyLoggingEnabled(<span class=\"pl-c1\">true</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">      assertEquals(<span class=\"pl-c1\">true</span>, options<span class=\"pl-k\">.</span>getHotKeyLoggingEnabled());</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    }</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "lukecwik", "createdAt": "2020-10-01T21:40:13Z", "path": "runners/google-cloud-dataflow-java/src/test/java/org/apache/beam/runners/dataflow/options/DataflowPipelineOptionsTest.java", "diffHunk": "@@ -243,5 +243,12 @@ public void testDefaultGcpRegionFromGcloud() throws IOException, InterruptedExce\n       DataflowPipelineOptions options = PipelineOptionsFactory.as(DataflowPipelineOptions.class);\n       assertEquals(\"us-west1\", options.getRegion());\n     }\n+\n+    @Test\n+    public void testHotKeyLoggingEnabled() {\n+      DataflowPipelineOptions options = PipelineOptionsFactory.as(DataflowPipelineOptions.class);\n+      options.setHotKeyLoggingEnabled(true);\n+      assertEquals(true, options.getHotKeyLoggingEnabled());\n+    }", "originalCommit": "2286ab5c5c9eeedeca5f3b31efcb0a4514a9e8c7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "36678badeccc605c4123cdcf0a18617e9b6ffdb5", "url": "https://github.com/apache/beam/commit/36678badeccc605c4123cdcf0a18617e9b6ffdb5", "message": "Update runners/google-cloud-dataflow-java/src/test/java/org/apache/beam/runners/dataflow/options/DataflowPipelineOptionsTest.java", "committedDate": "2020-10-01T21:40:33Z", "type": "commit"}]}