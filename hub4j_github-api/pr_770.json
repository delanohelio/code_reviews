{"pr_number": 770, "pr_title": "Change withURLPath to setRawURLPath", "pr_author": "sladyn98", "pr_createdAt": "2020-04-02T12:32:58Z", "pr_url": "https://github.com/hub4j/github-api/pull/770", "timeline": [{"oid": "6a176e64546d999cb4d27b7d4bd2db8dcdaa51ee", "url": "https://github.com/hub4j/github-api/commit/6a176e64546d999cb4d27b7d4bd2db8dcdaa51ee", "message": "added test and modified url", "committedDate": "2020-04-06T12:43:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA2MjE5Ng==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r404062196", "body": "@bitwiseman protection_url is a full url `http://localhost:36413/repos/github-api-test-org/temp-testDisableProtectionOnly/branches/master/protection`, so I changed it , is this similar to what you have in mind ", "bodyText": "@bitwiseman protection_url is a full url http://localhost:36413/repos/github-api-test-org/temp-testDisableProtectionOnly/branches/master/protection, so I changed it , is this similar to what you have in mind", "bodyHTML": "<p dir=\"auto\"><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/bitwiseman/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/bitwiseman\">@bitwiseman</a> protection_url is a full url <code>http://localhost:36413/repos/github-api-test-org/temp-testDisableProtectionOnly/branches/master/protection</code>, so I changed it , is this similar to what you have in mind</p>", "author": "sladyn98", "createdAt": "2020-04-06T12:46:20Z", "path": "src/main/java/org/kohsuke/github/GHBranch.java", "diffHunk": "@@ -118,7 +118,7 @@ public String getSHA1() {\n      *             if disabling protection fails\n      */\n     public void disableProtection() throws IOException {\n-        root.createRequest().method(\"DELETE\").withUrlPath(protection_url).send();\n+        root.createRequest().method(\"DELETE\").setRawUrlPath(protection_url).send();", "originalCommit": "6a176e64546d999cb4d27b7d4bd2db8dcdaa51ee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA2NDY4NA==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r404064684", "bodyText": "I will add the wire mock snapshot soon.", "author": "sladyn98", "createdAt": "2020-04-06T12:50:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA2MjE5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg2MjU3NA==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r405862574", "bodyText": "Yes, this is the kind of change that I'm looking for.", "author": "bitwiseman", "createdAt": "2020-04-08T22:59:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA2MjE5Ng=="}], "type": "inlineReview"}, {"oid": "f48b33e3639a552f85f714e69f24385eb1251004", "url": "https://github.com/hub4j/github-api/commit/f48b33e3639a552f85f714e69f24385eb1251004", "message": "Add resource files", "committedDate": "2020-04-07T12:47:20Z", "type": "forcePushed"}, {"oid": "f48b33e3639a552f85f714e69f24385eb1251004", "url": "https://github.com/hub4j/github-api/commit/f48b33e3639a552f85f714e69f24385eb1251004", "message": "Add resource files", "committedDate": "2020-04-07T12:47:20Z", "type": "forcePushed"}, {"oid": "5837cf42b0a339e2b41d61395b814f9618874494", "url": "https://github.com/hub4j/github-api/commit/5837cf42b0a339e2b41d61395b814f9618874494", "message": "Add resource files", "committedDate": "2020-04-20T07:51:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMzMTEwMA==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r411331100", "body": "Even though the above branch master is already protected it still throws a message that the branch is not protected. It seems a bit strange\r\n```   \r\n \"body\": \"{\\\"message\\\":\\\"Branch not protected\\\",\\\"documentation_url\\\":\\\"https://developer.github.com/v3/repos/branches/#remove-branch-protection\\\"}\",\r\n```", "bodyText": "Even though the above branch master is already protected it still throws a message that the branch is not protected. It seems a bit strange\n \"body\": \"{\\\"message\\\":\\\"Branch not protected\\\",\\\"documentation_url\\\":\\\"https://developer.github.com/v3/repos/branches/#remove-branch-protection\\\"}\",", "bodyHTML": "<p dir=\"auto\">Even though the above branch master is already protected it still throws a message that the branch is not protected. It seems a bit strange</p>\n<div class=\"snippet-clipboard-content position-relative overflow-auto\" data-snippet-clipboard-copy-content=\" &quot;body&quot;: &quot;{\\&quot;message\\&quot;:\\&quot;Branch not protected\\&quot;,\\&quot;documentation_url\\&quot;:\\&quot;https://developer.github.com/v3/repos/branches/#remove-branch-protection\\&quot;}&quot;,\n\"><pre><code> \"body\": \"{\\\"message\\\":\\\"Branch not protected\\\",\\\"documentation_url\\\":\\\"https://developer.github.com/v3/repos/branches/#remove-branch-protection\\\"}\",\n</code></pre></div>", "author": "sladyn98", "createdAt": "2020-04-20T12:19:21Z", "path": "src/test/java/org/kohsuke/github/GHBranchProtectionTest.java", "diffHunk": "@@ -73,4 +80,11 @@ public void testSignedCommits() throws Exception {\n         protection.disableSignedCommits();\n         assertFalse(protection.getRequiredSignatures());\n     }\n+\n+    @Test\n+    public void testGetProtection() throws Exception {\n+        GHBranchProtection protection = branch.enableProtection().enable();\n+        GHBranchProtection protectionTest = repo.getBranch(BRANCH).getProtection();\n+        assertTrue(protectionTest instanceof GHBranchProtection);", "originalCommit": "eefaf57374ddf6dd153e4188e29c37857dfef99a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc2NzQwMw==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r411767403", "bodyText": "GitHub doesn't think it is protected.   The data files definitely show that.", "author": "bitwiseman", "createdAt": "2020-04-20T23:46:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMzMTEwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkyODI2Mg==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r411928262", "bodyText": "Is there any solution ? Because manually changing doesn't seem to work", "author": "sladyn98", "createdAt": "2020-04-21T07:10:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMzMTEwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg2NTUwMg==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r413865502", "bodyText": "@sladyn98\nNot sure.  I'll take a look.", "author": "bitwiseman", "createdAt": "2020-04-23T14:52:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMzMTEwMA=="}], "type": "inlineReview"}, {"oid": "21e9dd6f51366ed319c044993e5f50872a3b282a", "url": "https://github.com/hub4j/github-api/commit/21e9dd6f51366ed319c044993e5f50872a3b282a", "message": "Change withURLPath to setRawURLPath", "committedDate": "2020-04-23T18:13:50Z", "type": "commit"}, {"oid": "191dd49653ba5d52909966b6a690f9b5f2df7359", "url": "https://github.com/hub4j/github-api/commit/191dd49653ba5d52909966b6a690f9b5f2df7359", "message": "added test and modified url", "committedDate": "2020-04-23T18:13:50Z", "type": "commit"}, {"oid": "81d7d6236bfab3afb04d45acd5f8fe32bbe78081", "url": "https://github.com/hub4j/github-api/commit/81d7d6236bfab3afb04d45acd5f8fe32bbe78081", "message": "Add resource files", "committedDate": "2020-04-23T18:13:50Z", "type": "commit"}, {"oid": "057ba3887374c951afb9056ef939a7c1fac5c7e9", "url": "https://github.com/hub4j/github-api/commit/057ba3887374c951afb9056ef939a7c1fac5c7e9", "message": "Added getProtectionTest", "committedDate": "2020-04-23T18:13:50Z", "type": "commit"}, {"oid": "c3e94585552ef7fcf2aa8bf3f6cbc17ddd89ac44", "url": "https://github.com/hub4j/github-api/commit/c3e94585552ef7fcf2aa8bf3f6cbc17ddd89ac44", "message": "Additional modifications to test", "committedDate": "2020-04-23T18:13:51Z", "type": "commit"}, {"oid": "83122ac99e501c1242d43e3d9250406d2657a733", "url": "https://github.com/hub4j/github-api/commit/83122ac99e501c1242d43e3d9250406d2657a733", "message": "Take new snapshot of testGetProtection()", "committedDate": "2020-04-23T18:13:51Z", "type": "commit"}, {"oid": "ca76975461e6bc498551f08b0def85a11515603d", "url": "https://github.com/hub4j/github-api/commit/ca76975461e6bc498551f08b0def85a11515603d", "message": "Record Disable test", "committedDate": "2020-04-23T18:13:51Z", "type": "commit"}, {"oid": "ca76975461e6bc498551f08b0def85a11515603d", "url": "https://github.com/hub4j/github-api/commit/ca76975461e6bc498551f08b0def85a11515603d", "message": "Record Disable test", "committedDate": "2020-04-23T18:13:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxMjI1Ng==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r415512256", "body": "This is not a raw URL.  \r\n\r\nI'm going to add  check to `setRawUrlPath` the requires it starting with `http`. ", "bodyText": "This is not a raw URL.\nI'm going to add  check to setRawUrlPath the requires it starting with http.", "bodyHTML": "<p dir=\"auto\">This is not a raw URL.</p>\n<p dir=\"auto\">I'm going to add  check to <code>setRawUrlPath</code> the requires it starting with <code>http</code>.</p>", "author": "bitwiseman", "createdAt": "2020-04-27T05:04:00Z", "path": "src/main/java/org/kohsuke/github/GHGist.java", "diffHunk": "@@ -182,7 +182,7 @@ public void star() throws IOException {\n      *             the io exception\n      */\n     public void unstar() throws IOException {\n-        root.createRequest().method(\"DELETE\").withUrlPath(getApiTailUrl(\"star\")).send();\n+        root.createRequest().method(\"DELETE\").setRawUrlPath(getApiTailUrl(\"star\")).send();", "originalCommit": "ca76975461e6bc498551f08b0def85a11515603d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxMjQxOA==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r415512418", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    root.createRequest().method(\"DELETE\").setRawUrlPath(getApiTailUrl(\"star\")).send();\n          \n          \n            \n                    root.createRequest().method(\"DELETE\").withUrlPath(getApiTailUrl(\"star\")).send();", "author": "bitwiseman", "createdAt": "2020-04-27T05:04:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxMjI1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxNzUzMQ==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r415517531", "bodyText": "Sounds like a really good idea.", "author": "sladyn98", "createdAt": "2020-04-27T05:19:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxMjI1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxMjQ2Nw==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r415512467", "body": "```suggestion\r\n        root.createRequest().method(\"PUT\").withUrlPath(getApiTailUrl(\"star\")).send();\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    root.createRequest().method(\"PUT\").setRawUrlPath(getApiTailUrl(\"star\")).send();\n          \n          \n            \n                    root.createRequest().method(\"PUT\").withUrlPath(getApiTailUrl(\"star\")).send();", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        root<span class=\"pl-k\">.</span>createRequest()<span class=\"pl-k\">.</span>method(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>PUT<span class=\"pl-pds\">\"</span></span>)<span class=\"pl-k\">.</span><span class=\"x x-first x-last\">setRawUrlPath</span>(getApiTailUrl(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>star<span class=\"pl-pds\">\"</span></span>))<span class=\"pl-k\">.</span>send();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        root<span class=\"pl-k\">.</span>createRequest()<span class=\"pl-k\">.</span>method(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>PUT<span class=\"pl-pds\">\"</span></span>)<span class=\"pl-k\">.</span><span class=\"x x-first x-last\">withUrlPath</span>(getApiTailUrl(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>star<span class=\"pl-pds\">\"</span></span>))<span class=\"pl-k\">.</span>send();</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "bitwiseman", "createdAt": "2020-04-27T05:04:42Z", "path": "src/main/java/org/kohsuke/github/GHGist.java", "diffHunk": "@@ -172,7 +172,7 @@ String getApiTailUrl(String tail) {\n      *             the io exception\n      */\n     public void star() throws IOException {\n-        root.createRequest().method(\"PUT\").withUrlPath(getApiTailUrl(\"star\")).send();\n+        root.createRequest().method(\"PUT\").setRawUrlPath(getApiTailUrl(\"star\")).send();", "originalCommit": "ca76975461e6bc498551f08b0def85a11515603d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7069176cf698deb84bf2d55d0bc0539580114325", "url": "https://github.com/hub4j/github-api/commit/7069176cf698deb84bf2d55d0bc0539580114325", "message": "Apply suggestions from code review\n\nCo-Authored-By: Liam Newman <bitwiseman@gmail.com>", "committedDate": "2020-04-27T05:19:57Z", "type": "commit"}, {"oid": "3b51e87fbf1c803dcae47b415b22c9ed52e681dc", "url": "https://github.com/hub4j/github-api/commit/3b51e87fbf1c803dcae47b415b22c9ed52e681dc", "message": "Merge branch 'master' into change_url_methods", "committedDate": "2020-04-27T16:48:23Z", "type": "commit"}]}