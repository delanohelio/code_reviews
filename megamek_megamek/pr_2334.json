{"pr_number": 2334, "pr_title": "Housekeeping", "pr_author": "SJuliez", "pr_createdAt": "2020-10-11T16:16:45Z", "pr_url": "https://github.com/MegaMek/megamek/pull/2334", "timeline": [{"oid": "73a6f42b040dcd7b5864ec729e47ef2f8b61eeab", "url": "https://github.com/MegaMek/megamek/commit/73a6f42b040dcd7b5864ec729e47ef2f8b61eeab", "message": "Diverse changes", "committedDate": "2020-10-07T21:17:45Z", "type": "commit"}, {"oid": "f4892fa6bf24b2837f1e0b1b65391a2cc0db9470", "url": "https://github.com/MegaMek/megamek/commit/f4892fa6bf24b2837f1e0b1b65391a2cc0db9470", "message": "Adjustments", "committedDate": "2020-10-08T20:52:06Z", "type": "commit"}, {"oid": "f4d6fc281a7ce8e28366ed4dccf06850ea11859e", "url": "https://github.com/MegaMek/megamek/commit/f4d6fc281a7ce8e28366ed4dccf06850ea11859e", "message": "PreferenceChange use, Shortcut", "committedDate": "2020-10-11T13:57:51Z", "type": "commit"}, {"oid": "73a30c18902820b16a802bfdc5da440cc67ca26a", "url": "https://github.com/MegaMek/megamek/commit/73a30c18902820b16a802bfdc5da440cc67ca26a", "message": "Adjustment", "committedDate": "2020-10-11T14:18:33Z", "type": "commit"}, {"oid": "cdb5f06bdd43afba2997892658e558d3e604193a", "url": "https://github.com/MegaMek/megamek/commit/cdb5f06bdd43afba2997892658e558d3e604193a", "message": "Have Minimap respect the Mousewheeldirection setting", "committedDate": "2020-10-11T15:20:24Z", "type": "commit"}, {"oid": "9b62d4556b07e9894d23cb3b01d2ddb2b4da6dfb", "url": "https://github.com/MegaMek/megamek/commit/9b62d4556b07e9894d23cb3b01d2ddb2b4da6dfb", "message": "Font correction", "committedDate": "2020-10-11T16:10:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2ODIyMw==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r506968223", "body": "```suggestion\r\n        store.setDefault(FOV_DARKEN, true);\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    store.setDefault(FOV_DARKEN,true);\n          \n          \n            \n                    store.setDefault(FOV_DARKEN, true);", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        store<span class=\"pl-k\">.</span>setDefault(<span class=\"pl-c1\">FOV_DARKEN</span>,<span class=\"pl-c1\">true</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        store<span class=\"pl-k\">.</span>setDefault(<span class=\"pl-c1\">FOV_DARKEN</span>,<span class=\"x x-first x-last\"> </span><span class=\"pl-c1\">true</span>);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-10-17T18:03:07Z", "path": "megamek/src/megamek/client/ui/swing/GUIPreferences.java", "diffHunk": "@@ -312,14 +312,20 @@ protected GUIPreferences() {\n \n         store.setDefault(FOV_HIGHLIGHT_RINGS_RADII, \"5 10 15 20 25\");\n         store.setDefault(FOV_HIGHLIGHT_RINGS_COLORS_HSB, \"0.3 1.0 1.0 ; 0.45 1.0 1.0 ; 0.6 1.0 1.0 ; 0.75 1.0 1.0 ; 0.9 1.0 1.0 ; 1.05 1.0 1.0 \");\n-\n+        store.setDefault(FOV_HIGHLIGHT,false);\n+        store.setDefault(FOV_HIGHLIGHT_ALPHA, 40);\n+        store.setDefault(FOV_DARKEN,true);", "originalCommit": "9b62d4556b07e9894d23cb3b01d2ddb2b4da6dfb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2ODIzMA==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r506968230", "body": "```suggestion\r\n        store.setDefault(FOV_HIGHLIGHT, false);\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    store.setDefault(FOV_HIGHLIGHT,false);\n          \n          \n            \n                    store.setDefault(FOV_HIGHLIGHT, false);", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        store<span class=\"pl-k\">.</span>setDefault(<span class=\"pl-c1\">FOV_HIGHLIGHT</span>,<span class=\"pl-c1\">false</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        store<span class=\"pl-k\">.</span>setDefault(<span class=\"pl-c1\">FOV_HIGHLIGHT</span>,<span class=\"x x-first x-last\"> </span><span class=\"pl-c1\">false</span>);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-10-17T18:03:13Z", "path": "megamek/src/megamek/client/ui/swing/GUIPreferences.java", "diffHunk": "@@ -312,14 +312,20 @@ protected GUIPreferences() {\n \n         store.setDefault(FOV_HIGHLIGHT_RINGS_RADII, \"5 10 15 20 25\");\n         store.setDefault(FOV_HIGHLIGHT_RINGS_COLORS_HSB, \"0.3 1.0 1.0 ; 0.45 1.0 1.0 ; 0.6 1.0 1.0 ; 0.75 1.0 1.0 ; 0.9 1.0 1.0 ; 1.05 1.0 1.0 \");\n-\n+        store.setDefault(FOV_HIGHLIGHT,false);", "originalCommit": "9b62d4556b07e9894d23cb3b01d2ddb2b4da6dfb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2ODI2OQ==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r506968269", "body": "I know this is old, but why is this saved as a string \"false\"? Any ideas?", "bodyText": "I know this is old, but why is this saved as a string \"false\"? Any ideas?", "bodyHTML": "<p dir=\"auto\">I know this is old, but why is this saved as a string \"false\"? Any ideas?</p>", "author": "Windchild292", "createdAt": "2020-10-17T18:03:43Z", "path": "megamek/src/megamek/client/ui/swing/GUIPreferences.java", "diffHunk": "@@ -312,14 +312,20 @@ protected GUIPreferences() {\n \n         store.setDefault(FOV_HIGHLIGHT_RINGS_RADII, \"5 10 15 20 25\");\n         store.setDefault(FOV_HIGHLIGHT_RINGS_COLORS_HSB, \"0.3 1.0 1.0 ; 0.45 1.0 1.0 ; 0.6 1.0 1.0 ; 0.75 1.0 1.0 ; 0.9 1.0 1.0 ; 1.05 1.0 1.0 \");\n-\n+        store.setDefault(FOV_HIGHLIGHT,false);\n+        store.setDefault(FOV_HIGHLIGHT_ALPHA, 40);\n+        store.setDefault(FOV_DARKEN,true);\n+        store.setDefault(FOV_DARKEN_ALPHA, 100);\n+        store.setDefault(FOV_STRIPES, 35);\n+        store.setDefault(FOV_GRAYSCALE, \"false\");", "originalCommit": "9b62d4556b07e9894d23cb3b01d2ddb2b4da6dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk3NjQzMg==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r506976432", "bodyText": "Hmmmm no :)", "author": "SJuliez", "createdAt": "2020-10-17T19:35:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2ODI2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzgxMDc1OQ==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r507810759", "bodyText": "It's actually treated as a boolean everywhere else, so this is just wrong. I'll correct it.", "author": "SJuliez", "createdAt": "2020-10-19T14:43:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2ODI2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2ODI5Mg==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r506968292", "body": "Why were these moved?", "bodyText": "Why were these moved?", "bodyHTML": "<p dir=\"auto\">Why were these moved?</p>", "author": "Windchild292", "createdAt": "2020-10-17T18:03:58Z", "path": "megamek/src/megamek/client/ui/swing/GUIPreferences.java", "diffHunk": "@@ -312,14 +312,20 @@ protected GUIPreferences() {\n \n         store.setDefault(FOV_HIGHLIGHT_RINGS_RADII, \"5 10 15 20 25\");\n         store.setDefault(FOV_HIGHLIGHT_RINGS_COLORS_HSB, \"0.3 1.0 1.0 ; 0.45 1.0 1.0 ; 0.6 1.0 1.0 ; 0.75 1.0 1.0 ; 0.9 1.0 1.0 ; 1.05 1.0 1.0 \");\n-\n+        store.setDefault(FOV_HIGHLIGHT,false);\n+        store.setDefault(FOV_HIGHLIGHT_ALPHA, 40);\n+        store.setDefault(FOV_DARKEN,true);\n+        store.setDefault(FOV_DARKEN_ALPHA, 100);\n+        store.setDefault(FOV_STRIPES, 35);\n+        store.setDefault(FOV_GRAYSCALE, \"false\");", "originalCommit": "9b62d4556b07e9894d23cb3b01d2ddb2b4da6dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzgxMTcwNQ==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r507811705", "bodyText": "I moved a few of the lines around to group them up better. May not have been terribly important for these specific lines, I don't remember.", "author": "SJuliez", "createdAt": "2020-10-19T14:44:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2ODI5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2ODkzNw==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r506968937", "body": "```suggestion\r\n                        return !shouldIgnoreKeyCommands();\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    if (shouldIgnoreKeyCommands()) {\n          \n          \n            \n                                        return false;\n          \n          \n            \n                                    } else {\n          \n          \n            \n                                        return true;\n          \n          \n            \n                                    }\n          \n          \n            \n                                    return !shouldIgnoreKeyCommands();", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                        <span class=\"pl-k\">if</span> (shouldIgnoreKeyCommands()) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                            <span class=\"pl-k\">return</span> <span class=\"pl-c1\">false</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                        } <span class=\"pl-k\">else</span> {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                            <span class=\"pl-k\">return</span> <span class=\"pl-c1\">true</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                        }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                        <span class=\"pl-k\">return</span> <span class=\"pl-k\">!</span>shouldIgnoreKeyCommands();</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-10-17T18:11:05Z", "path": "megamek/src/megamek/client/ui/swing/boardview/BoardView1.java", "diffHunk": "@@ -1050,6 +1050,28 @@ public void performAction() {\n                         toggleKeybindsOverlay();\n                     }\n                 });\n+        \n+        // Register the action for TOGGLE_HEX_COORDS\n+        controller.registerCommandAction(KeyCommandBind.TOGGLE_HEX_COORDS.cmd,\n+                new CommandAction() {\n+\n+                    @Override\n+                    public boolean shouldPerformAction() {\n+                        if (shouldIgnoreKeyCommands()) {\n+                            return false;\n+                        } else {\n+                            return true;\n+                        }", "originalCommit": "9b62d4556b07e9894d23cb3b01d2ddb2b4da6dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzgxMjE4Mw==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r507812183", "bodyText": "Oh indeed :) Never noticed. I'll correct this for all the other binds too.", "author": "SJuliez", "createdAt": "2020-10-19T14:45:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2ODkzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2OTkyNA==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r506969924", "body": "Before I continue I have to get clarification on this: Why are we saving values for a revert and not just having the update only occur when the dialog is saved?", "bodyText": "Before I continue I have to get clarification on this: Why are we saving values for a revert and not just having the update only occur when the dialog is saved?", "bodyHTML": "<p dir=\"auto\">Before I continue I have to get clarification on this: Why are we saving values for a revert and not just having the update only occur when the dialog is saved?</p>", "author": "Windchild292", "createdAt": "2020-10-17T18:22:31Z", "path": "megamek/src/megamek/client/ui/swing/CommonSettingsDialog.java", "diffHunk": "@@ -303,6 +301,27 @@ public void mouseDragged(MouseEvent e) {\n     \n     private static final Dimension LABEL_SPACER = new Dimension(5,0);\n     private static final Dimension DEPENDENT_INSET = new Dimension(25,0);\n+    \n+    // Save some values to restore them when the dialog is canceled\n+    private boolean savedFovHighlight;\n+    private boolean savedFovDarken;\n+    private boolean savedFovGrayscale;\n+    private boolean savedAOHexShadows;\n+    private boolean savedShadowMap;\n+    private boolean savedHexInclines;\n+    private boolean savedLevelhighlight;\n+    private boolean savedFloatingIso;\n+    private boolean savedMmSymbol;\n+    private boolean savedTeamColoring;\n+    private boolean savedUnitLabelBorder;\n+    private boolean savedShowDamageDecal;\n+    private boolean savedShowDamageLabel;\n+    private String savedFovHighlightRingsRadii;\n+    private String savedFovHighlightRingsColors;\n+    private int savedFovHighlightAlpha;\n+    private int savedFovDarkenAlpha;\n+    private int savedNumStripesSlider;\n+    HashMap<String, String> savedAdvancedOpt = new HashMap<>();", "originalCommit": "9b62d4556b07e9894d23cb3b01d2ddb2b4da6dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk3NjI3OQ==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r506976279", "bodyText": "Because these settings immediately show on the board or minimap so people can see the effect and to do this they must be saved to the GUIPrefs.", "author": "SJuliez", "createdAt": "2020-10-17T19:33:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2OTkyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk3OTgwNg==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r506979806", "bodyText": "That makes sense. I'll finish my review post-D&D", "author": "Windchild292", "createdAt": "2020-10-17T20:15:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk2OTkyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzIxNDg0Mg==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r507214842", "body": "```suggestion\r\n\r\n```", "bodyText": "Suggested change", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"><span class=\"x x-first x-last\">        </span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-10-18T21:17:30Z", "path": "megamek/src/megamek/client/ui/swing/CommonSettingsDialog.java", "diffHunk": "@@ -320,34 +339,13 @@ public CommonSettingsDialog(JFrame owner, ClientGUI cg) {\n      * @param owner - the <code>Frame</code> that owns this dialog.\n      */\n     public CommonSettingsDialog(JFrame owner) {\n-        // Initialize our superclass with a title.\n-        super(owner, Messages.getString(\"CommonSettingsDialog.title\")); //$NON-NLS-1$\n-\n-        panTabs = new JTabbedPane();\n-\n-        JPanel settingsPanel = getSettingsPanel();\n-        JScrollPane settingsPane = new JScrollPane(settingsPanel);\n-        panTabs.add(\"Main\", settingsPane);\n-\n-        JPanel tacticalOverlaySettingsPanel = getTacticalOverlaySettingsPanel();\n-        JScrollPane tacticalOverlaySettingsPane = new JScrollPane(tacticalOverlaySettingsPanel);\n-        panTabs.add(\"Graphics\", tacticalOverlaySettingsPane);\n-\n-        JPanel keyBindPanel = getKeyBindPanel();\n-        JScrollPane keyBindScrollPane = new JScrollPane(keyBindPanel);\n-        panTabs.add(\"Key Binds\", keyBindScrollPane);\n-\n-        JPanel buttonOrderPanel = getButtonOrderPanel();\n-        panTabs.add(\"Button Order\", buttonOrderPanel);\n-        \n-        JPanel advancedSettingsPanel = getAdvancedSettingsPanel();\n-        JScrollPane advancedSettingsPane = new JScrollPane(advancedSettingsPanel);\n-        panTabs.add(\"Advanced\", advancedSettingsPane);\n+        super(owner, Messages.getString(\"CommonSettingsDialog.title\"), true);\n \n+        JTabbedPane panTabs = new JTabbedPane();\n         setLayout(new BorderLayout());\n         getContentPane().add(panTabs, BorderLayout.CENTER);\n         getContentPane().add(getButtonsPanel(), BorderLayout.PAGE_END);\n-\n+        ", "originalCommit": "9b62d4556b07e9894d23cb3b01d2ddb2b4da6dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzgxNDY5Mw==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r507814693", "bodyText": "Not sure what's wrong with this line. No tabs. A bit of breathing space for the code ;)", "author": "SJuliez", "createdAt": "2020-10-19T14:48:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzIxNDg0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk0ODA1OQ==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r508948059", "bodyText": "This removes the extra spacing from it, which would be automatically removed in a further commit. Just dealing with future blankspace changes now.", "author": "Windchild292", "createdAt": "2020-10-21T02:17:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzIxNDg0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzIxNTgyOQ==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r507215829", "body": "```suggestion\r\n\r\n```", "bodyText": "Suggested change", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"><span class=\"x x-first x-last\">        </span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-10-18T21:25:09Z", "path": "megamek/src/megamek/client/ui/swing/CommonSettingsDialog.java", "diffHunk": "@@ -605,7 +594,7 @@ private JPanel getSettingsPanel() {\n         row = new ArrayList<>();\n         row.add(getFocus);\n         comps.add(row);\n-\n+        ", "originalCommit": "9b62d4556b07e9894d23cb3b01d2ddb2b4da6dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzgxNTQzMQ==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r507815431", "bodyText": "This empty line separates the option blocks. Not different from many before and after. Dont think this should be changed.", "author": "SJuliez", "createdAt": "2020-10-19T14:49:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzIxNTgyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk0ODAwOQ==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r508948009", "bodyText": "This removes the extra spacing from it, which would be automatically removed in a further commit. Just dealing with future blankspace changes now.", "author": "Windchild292", "createdAt": "2020-10-21T02:17:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzIxNTgyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzIxNjI2Mg==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r507216262", "body": "This is not a Java-style array.", "bodyText": "This is not a Java-style array.", "bodyHTML": "<p dir=\"auto\">This is not a Java-style array.</p>", "author": "Windchild292", "createdAt": "2020-10-18T21:29:36Z", "path": "megamek/src/megamek/client/ui/swing/CommonSettingsDialog.java", "diffHunk": "@@ -1776,98 +1765,50 @@ private JPanel getButtonOrderPanel(){\n         JTabbedPane phasePane = new JTabbedPane();\n         buttonOrderPanel.add(phasePane);\n         \n-        StatusBarPhaseDisplay.PhaseCommand commands[];\n-        StatusBarPhaseDisplay.CommandComparator cmdComp = \n-                new StatusBarPhaseDisplay.CommandComparator(); \n-        PhaseCommandListMouseAdapter cmdMouseAdaptor = \n-                new PhaseCommandListMouseAdapter();\n-\n         // MovementPhaseDisplay        \n-        JPanel movementPanel = new JPanel();\n-        movePhaseCommands = \n-                new DefaultListModel<StatusBarPhaseDisplay.PhaseCommand>();\n-        commands = MovementDisplay.MoveCommand.values();\n-        Arrays.sort(commands, cmdComp);        \n-        for (StatusBarPhaseDisplay.PhaseCommand cmd : commands) {\n-            movePhaseCommands.addElement(cmd);\n-        }\n-        JList<StatusBarPhaseDisplay.PhaseCommand> moveList = new JList<>(movePhaseCommands);\n-        moveList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n-        moveList.addMouseListener(cmdMouseAdaptor);\n-        moveList.addMouseMotionListener(cmdMouseAdaptor);\n-        movementPanel.add(moveList);\n-        JScrollPane movementScrollPane = new JScrollPane(movementPanel);\n-        phasePane.add(\"Movement\", movementScrollPane);\n+        movePhaseCommands = new DefaultListModel<StatusBarPhaseDisplay.PhaseCommand>();\n+        phasePane.add(\"Movement\", getButtonOrderPane(movePhaseCommands,\n+                MovementDisplay.MoveCommand.values()));\n         \n         // DeploymentPhaseDisplay\n-        JPanel deployPanel = new JPanel();\n-        deployPhaseCommands = \n-                new DefaultListModel<StatusBarPhaseDisplay.PhaseCommand>();\n-        commands = DeploymentDisplay.DeployCommand.values();\n-        Arrays.sort(commands, cmdComp);        \n-        for (StatusBarPhaseDisplay.PhaseCommand cmd : commands) {\n-            deployPhaseCommands.addElement(cmd);\n-        }\n-        JList<StatusBarPhaseDisplay.PhaseCommand> deployList = new JList<>(deployPhaseCommands);\n-        deployList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n-        deployList.addMouseListener(cmdMouseAdaptor);\n-        deployList.addMouseMotionListener(cmdMouseAdaptor);\n-        deployPanel.add(deployList);\n-        JScrollPane deployScrollPane = new JScrollPane(deployPanel);\n-        phasePane.add(\"Deployment\", deployScrollPane);\n+        deployPhaseCommands = new DefaultListModel<StatusBarPhaseDisplay.PhaseCommand>();\n+        phasePane.add(\"Deployment\", getButtonOrderPane(deployPhaseCommands,\n+                DeploymentDisplay.DeployCommand.values()));\n         \n         // FiringPhaseDisplay\n-        JPanel firingPanel = new JPanel();\n-        firingPhaseCommands = \n-                new DefaultListModel<StatusBarPhaseDisplay.PhaseCommand>();\n-        commands = FiringDisplay.FiringCommand.values();\n-        Arrays.sort(commands, cmdComp);        \n-        for (StatusBarPhaseDisplay.PhaseCommand cmd : commands) {\n-            firingPhaseCommands.addElement(cmd);\n-        }\n-        JList<StatusBarPhaseDisplay.PhaseCommand> firingList = new JList<>(firingPhaseCommands);\n-        firingList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n-        firingList.addMouseListener(cmdMouseAdaptor);\n-        firingList.addMouseMotionListener(cmdMouseAdaptor);\n-        firingPanel.add(firingList);\n-        JScrollPane firingScrollPane = new JScrollPane(firingPanel);\n-        phasePane.add(\"Firing\", firingScrollPane);\n+        firingPhaseCommands = new DefaultListModel<StatusBarPhaseDisplay.PhaseCommand>();\n+        phasePane.add(\"Firing\", getButtonOrderPane(firingPhaseCommands,\n+                FiringDisplay.FiringCommand.values()));\n         \n         // PhysicalPhaseDisplay\n-        JPanel physicalPanel = new JPanel();\n-        physicalPhaseCommands = \n-                new DefaultListModel<StatusBarPhaseDisplay.PhaseCommand>();\n-        commands = PhysicalDisplay.PhysicalCommand.values();\n-        Arrays.sort(commands, cmdComp);        \n-        for (StatusBarPhaseDisplay.PhaseCommand cmd : commands) {\n-            physicalPhaseCommands.addElement(cmd);\n-        }\n-        JList<StatusBarPhaseDisplay.PhaseCommand> physicalList = new JList<>(physicalPhaseCommands);\n-        physicalList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n-        physicalList.addMouseListener(cmdMouseAdaptor);\n-        physicalList.addMouseMotionListener(cmdMouseAdaptor);\n-        physicalPanel.add(physicalList);\n-        JScrollPane physicalScrollPane = new JScrollPane(physicalPanel);\n-        phasePane.add(\"Physical\", physicalScrollPane);          \n+        physicalPhaseCommands = new DefaultListModel<StatusBarPhaseDisplay.PhaseCommand>();\n+        phasePane.add(\"Physical\", getButtonOrderPane(physicalPhaseCommands,\n+                PhysicalDisplay.PhysicalCommand.values()));          \n         \n         // TargetingPhaseDisplay\n-        JPanel targetingPanel = new JPanel();\n-        targetingPhaseCommands = \n-                new DefaultListModel<StatusBarPhaseDisplay.PhaseCommand>();\n-        commands = TargetingPhaseDisplay.TargetingCommand.values();\n+        targetingPhaseCommands = new DefaultListModel<StatusBarPhaseDisplay.PhaseCommand>();\n+        phasePane.add(\"Targeting\", getButtonOrderPane(targetingPhaseCommands,\n+                TargetingPhaseDisplay.TargetingCommand.values()));\n+        \n+        return buttonOrderPanel;\n+    }\n+\n+    /** Constructs the button ordering panel for one phase. */ \n+    private JScrollPane getButtonOrderPane(DefaultListModel<PhaseCommand> list, \n+            StatusBarPhaseDisplay.PhaseCommand commands[]) {", "originalCommit": "9b62d4556b07e9894d23cb3b01d2ddb2b4da6dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg4NjMzOA==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r507886338", "bodyText": "PhaseCommand[] commands", "author": "SJuliez", "createdAt": "2020-10-19T16:23:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzIxNjI2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzIxNjcyNg==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r507216726", "body": "Just checking, but we don't need to do either of these to properly update the board with the newly changed state?", "bodyText": "Just checking, but we don't need to do either of these to properly update the board with the newly changed state?", "bodyHTML": "<p dir=\"auto\">Just checking, but we don't need to do either of these to properly update the board with the newly changed state?</p>", "author": "Windchild292", "createdAt": "2020-10-18T21:34:17Z", "path": "megamek/src/megamek/client/ui/swing/CommonSettingsDialog.java", "diffHunk": "@@ -1202,10 +1224,6 @@ public void itemStateChanged(ItemEvent event) {\n             stampFormatLabel.setEnabled(stampFilenames.isSelected());\n         } else if (source.equals(fovInsideEnabled)) {\n             guip.setFovHighlight(fovInsideEnabled.isSelected());\n-            if ((clientgui != null) && (clientgui.bv != null)) {\n-                clientgui.bv.clearHexImageCache();\n-                clientgui.bv.repaint();\n-            }", "originalCommit": "9b62d4556b07e9894d23cb3b01d2ddb2b4da6dfb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzgzMzA1MA==", "url": "https://github.com/MegaMek/megamek/pull/2334#discussion_r507833050", "bodyText": "No, these lines are actually nonsense I may have put in myself a few years ago. The boardview does preferencechange-listening and can update when such an event is fired. It just needs the right checks for what pref has changed to update accordingly. It could even update without checking what has changed but I think that's bad form, as all hexes have to be redrawn etc.", "author": "SJuliez", "createdAt": "2020-10-19T15:12:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzIxNjcyNg=="}], "type": "inlineReview"}, {"oid": "97f34391d0fec407b653847631032789a5900730", "url": "https://github.com/MegaMek/megamek/commit/97f34391d0fec407b653847631032789a5900730", "message": "Review suggestions", "committedDate": "2020-10-19T15:13:04Z", "type": "commit"}, {"oid": "26ddb8b35becef2ca606b5826e6566f55d5c7a83", "url": "https://github.com/MegaMek/megamek/commit/26ddb8b35becef2ca606b5826e6566f55d5c7a83", "message": "Applying spacing fixes", "committedDate": "2020-10-21T03:17:27Z", "type": "commit"}]}