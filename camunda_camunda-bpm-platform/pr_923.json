{"pr_number": 923, "pr_title": "chore(engine): send telemetry data for application server vendor/version", "pr_author": "yanavasileva", "pr_createdAt": "2020-08-04T12:36:07Z", "pr_url": "https://github.com/camunda/camunda-bpm-platform/pull/923", "timeline": [{"oid": "949af8699ae341c1edf0d3a137862a2fb2178cfa", "url": "https://github.com/camunda/camunda-bpm-platform/commit/949af8699ae341c1edf0d3a137862a2fb2178cfa", "message": "chore(engine-rest): fetch server info via ServletContextListener\n\n* introduce RestContainerBootstrap to fetch the server info\n* extract getProcessEngineProvider() to EngineUtil\n* register the listener to all web.xml", "committedDate": "2020-08-18T13:02:32Z", "type": "forcePushed"}, {"oid": "260aae148535629c4104f0c7214625328cea0bad", "url": "https://github.com/camunda/camunda-bpm-platform/commit/260aae148535629c4104f0c7214625328cea0bad", "message": "chore(engine-rest): fetch server info via ServletContextListener\n\n* introduce RestContainerBootstrap to fetch the server info\n* extract getProcessEngineProvider() to EngineUtil\n* register the listener to all web.xml", "committedDate": "2020-08-19T06:19:06Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDQ4NjYwMQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/923#discussion_r474486601", "body": "This method should be also thread safe\r\n```suggestion\r\n  public synchronized void setApplicationServer(String applicationServerVersion) {\r\n```", "bodyText": "This method should be also thread safe\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void setApplicationServer(String applicationServerVersion) {\n          \n          \n            \n              public synchronized void setApplicationServer(String applicationServerVersion) {", "bodyHTML": "<p dir=\"auto\">This method should be also thread safe</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">  <span class=\"pl-k\">public</span> <span class=\"pl-k\">void</span> setApplicationServer(<span class=\"pl-smi\">String</span> applicationServerVersion) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">  <span class=\"pl-k\">public</span> <span class=\"pl-k x x-first\">synchronized</span><span class=\"x x-last\"> </span><span class=\"pl-k\">void</span> setApplicationServer(<span class=\"pl-smi\">String</span> applicationServerVersion) {</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "yanavasileva", "createdAt": "2020-08-21T07:50:02Z", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/telemetry/TelemetryRegistry.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n+ * under one or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information regarding copyright\n+ * ownership. Camunda licenses this file to you under the Apache License,\n+ * Version 2.0; you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.camunda.bpm.engine.impl.telemetry;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+import org.camunda.bpm.engine.impl.telemetry.dto.ApplicationServer;\n+\n+public class TelemetryRegistry {\n+\n+  protected Map<String, Object> entries = new HashMap<>();\n+  protected ApplicationServer applicationServer;\n+\n+  public synchronized ApplicationServer getApplicationServer() {\n+    return applicationServer;\n+  }\n+\n+  public synchronized void setApplicationServer(ApplicationServer applicationServer) {\n+    this.applicationServer = applicationServer;\n+  }\n+\n+  public void setApplicationServer(String applicationServerVersion) {", "originalCommit": "260aae148535629c4104f0c7214625328cea0bad", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0d04f46ff413a4560096dc42b1c8e185f5562d6e", "url": "https://github.com/camunda/camunda-bpm-platform/commit/0d04f46ff413a4560096dc42b1c8e185f5562d6e", "message": "fixup! chore(engine): extend telemetry data with application server information", "committedDate": "2020-08-21T10:08:13Z", "type": "forcePushed"}, {"oid": "472c6d4f9598f19e717e2bce319795c26016abe8", "url": "https://github.com/camunda/camunda-bpm-platform/commit/472c6d4f9598f19e717e2bce319795c26016abe8", "message": "chore(engine): extend telemetry data with application server information\n\n* introduce TelemetryRegistry and initialize it during initTelemetry\n* add ApplicationServer dto\n* fetch the registry during telemetry send\n* add test for parsing the server info and sending the data", "committedDate": "2020-08-21T11:01:19Z", "type": "commit"}, {"oid": "e19e69749bcd65f8c4d21cbe38c84ce65a27dc29", "url": "https://github.com/camunda/camunda-bpm-platform/commit/e19e69749bcd65f8c4d21cbe38c84ce65a27dc29", "message": "chore(engine-rest): fetch server info via ServletContextListener\n\n* introduce RestContainerBootstrap to fetch the server info\n* extract getProcessEngineProvider() to EngineUtil\n* register the listener to all web.xml", "committedDate": "2020-08-21T11:01:19Z", "type": "commit"}, {"oid": "e19e69749bcd65f8c4d21cbe38c84ce65a27dc29", "url": "https://github.com/camunda/camunda-bpm-platform/commit/e19e69749bcd65f8c4d21cbe38c84ce65a27dc29", "message": "chore(engine-rest): fetch server info via ServletContextListener\n\n* introduce RestContainerBootstrap to fetch the server info\n* extract getProcessEngineProvider() to EngineUtil\n* register the listener to all web.xml", "committedDate": "2020-08-21T11:01:19Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMxNDY4Mg==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/923#discussion_r479314682", "body": "I don't like this setter. It is much cleaner if we just get the respective object and then set it.", "bodyText": "I don't like this setter. It is much cleaner if we just get the respective object and then set it.", "bodyHTML": "<p dir=\"auto\">I don't like this setter. It is much cleaner if we just get the respective object and then set it.</p>", "author": "tasso94", "createdAt": "2020-08-28T13:55:32Z", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/telemetry/dto/Data.java", "diffHunk": "@@ -43,4 +45,12 @@ public void setProduct(Product product) {\n     this.product = product;\n   }\n \n+  public void setApplicationServer(ApplicationServer applicationServer) {\n+    this.product.internals.applicationServer = applicationServer;", "originalCommit": "e19e69749bcd65f8c4d21cbe38c84ce65a27dc29", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMxODEwMQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/923#discussion_r479318101", "body": "```suggestion\r\n    Pattern pattern = Pattern.compile(\"[\\\\sA-Za-z]+\");\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Pattern pattern = Pattern.compile(\"[ A-Za-z]+\");\n          \n          \n            \n                Pattern pattern = Pattern.compile(\"[\\\\sA-Za-z]+\");", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-smi\">Pattern</span> pattern <span class=\"pl-k\">=</span> <span class=\"pl-smi\">Pattern</span><span class=\"pl-k\">.</span>compile(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>[<span class=\"x x-first x-last\"> A</span>-Za-z]+<span class=\"pl-pds\">\"</span></span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-smi\">Pattern</span> pattern <span class=\"pl-k\">=</span> <span class=\"pl-smi\">Pattern</span><span class=\"pl-k\">.</span>compile(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>[<span class=\"pl-cce x x-first\">\\\\</span><span class=\"x x-last\">sA</span>-Za-z]+<span class=\"pl-pds\">\"</span></span>);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "tasso94", "createdAt": "2020-08-28T13:59:12Z", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/util/ParseUtil.java", "diffHunk": "@@ -116,4 +116,18 @@ public static ProcessEngineDetails parseProcessEngineVersion(String packageImple\n \n     return new ProcessEngineDetails(version, edition);\n   }\n+\n+  public static String parseServerVendor(String applicationServerInfo) {\n+    String serverVendor = null;\n+    Pattern pattern = Pattern.compile(\"[ A-Za-z]+\");", "originalCommit": "e19e69749bcd65f8c4d21cbe38c84ce65a27dc29", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMxOTk2NQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/923#discussion_r479319965", "body": "```suggestion\r\n      return \"WildFly\";\r\n```\r\nI think the official name is not `JBoss Wildfly`. What is the idea behind this wording?", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  return \"JBoss WildFly\";\n          \n          \n            \n                  return \"WildFly\";\n          \n      \n    \n    \n  \n\nI think the official name is not JBoss Wildfly. What is the idea behind this wording?", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">      <span class=\"pl-k\">return</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">JBoss </span>WildFly<span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">      <span class=\"pl-k\">return</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>WildFly<span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n\n<p dir=\"auto\">I think the official name is not <code>JBoss Wildfly</code>. What is the idea behind this wording?</p>", "author": "tasso94", "createdAt": "2020-08-28T14:01:03Z", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/util/ParseUtil.java", "diffHunk": "@@ -116,4 +116,18 @@ public static ProcessEngineDetails parseProcessEngineVersion(String packageImple\n \n     return new ProcessEngineDetails(version, edition);\n   }\n+\n+  public static String parseServerVendor(String applicationServerInfo) {\n+    String serverVendor = null;\n+    Pattern pattern = Pattern.compile(\"[ A-Za-z]+\");\n+    Matcher matcher = pattern.matcher(applicationServerInfo);\n+    if (matcher.find()) {\n+      serverVendor = matcher.group(0).trim();\n+    }\n+    if (serverVendor.contains(\"WildFly\")) {\n+      return \"JBoss WildFly\";", "originalCommit": "e19e69749bcd65f8c4d21cbe38c84ce65a27dc29", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTMzOTU4Nw==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/923#discussion_r479339587", "body": "```suggestion\r\n    Internals internals = data.getProduct().getInternals();\r\n    ApplicationServer applicationServer = processEngineConfiguration.getTelemetryRegistry().getApplicationServer();\r\n    if (internals.getApplicationServer() == null && applicationServer != null) {\r\n      internals.setApplicationServer(applicationServer);\r\n    }\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (data.getProduct().getInternals().getApplicationServer() == null &&\n          \n          \n            \n                    processEngineConfiguration.getTelemetryRegistry().getApplicationServer() != null) {\n          \n          \n            \n                  data.setApplicationServer(processEngineConfiguration.getTelemetryRegistry().getApplicationServer());\n          \n          \n            \n                }\n          \n          \n            \n                Internals internals = data.getProduct().getInternals();\n          \n          \n            \n                ApplicationServer applicationServer = processEngineConfiguration.getTelemetryRegistry().getApplicationServer();\n          \n          \n            \n                if (internals.getApplicationServer() == null && applicationServer != null) {\n          \n          \n            \n                  internals.setApplicationServer(applicationServer);\n          \n          \n            \n                }", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"112\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">if</span> (data<span class=\"pl-k\">.</span>getProduct()<span class=\"pl-k\">.</span>getInternals()<span class=\"pl-k\">.</span>getApplicationServer() <span class=\"pl-k\">==</span> <span class=\"pl-c1\">null</span> <span class=\"pl-k\">&amp;&amp;</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"113\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        processEngineConfiguration<span class=\"pl-k\">.</span>getTelemetryRegistry()<span class=\"pl-k\">.</span>getApplicationServer() <span class=\"pl-k\">!=</span> <span class=\"pl-c1\">null</span>) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"114\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">      data<span class=\"pl-k\">.</span>setApplicationServer(processEngineConfiguration<span class=\"pl-k\">.</span>getTelemetryRegistry()<span class=\"pl-k\">.</span>getApplicationServer());</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"115\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"112\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-smi\">Internals</span> internals <span class=\"pl-k\">=</span> data<span class=\"pl-k\">.</span>getProduct()<span class=\"pl-k\">.</span>getInternals();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"113\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-smi\">ApplicationServer</span> applicationServer <span class=\"pl-k\">=</span> processEngineConfiguration<span class=\"pl-k\">.</span>getTelemetryRegistry()<span class=\"pl-k\">.</span>getApplicationServer();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"114\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">if</span> (internals<span class=\"pl-k\">.</span>getApplicationServer() <span class=\"pl-k\">==</span> <span class=\"pl-c1\">null</span> <span class=\"pl-k\">&amp;&amp;</span> applicationServer <span class=\"pl-k\">!=</span> <span class=\"pl-c1\">null</span>) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"115\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">      internals<span class=\"pl-k\">.</span>setApplicationServer(applicationServer);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"116\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    }</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "tasso94", "createdAt": "2020-08-28T14:24:09Z", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/telemetry/reporter/TelemetrySendingTask.java", "diffHunk": "@@ -98,5 +102,11 @@ protected void sendData() {\n     });\n   }\n \n+  protected void resolveDataFromRegistry(ProcessEngineConfigurationImpl processEngineConfiguration) {\n+    if (data.getProduct().getInternals().getApplicationServer() == null &&\n+        processEngineConfiguration.getTelemetryRegistry().getApplicationServer() != null) {\n+      data.setApplicationServer(processEngineConfiguration.getTelemetryRegistry().getApplicationServer());\n+    }", "originalCommit": "e19e69749bcd65f8c4d21cbe38c84ce65a27dc29", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTM0MTI3OQ==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/923#discussion_r479341279", "body": "```suggestion\r\n    if (serverInfo != null && !serverInfo.isEmpty() ) {\r\n      Set<String> processEngineNames = getProcessEngineProvider().getProcessEngineNames();\r\n      for (String engineName : processEngineNames) {\r\n        ProcessEngine processEngine = lookupProcessEngine(engineName);\r\n        ProcessEngineConfiguration configuration = processEngine.getProcessEngineConfiguration();\r\n        TelemetryRegistry telemetryRegistry = configuration.getTelemetryRegistry();\r\n        if (telemetryRegistry != null && telemetryRegistry.getApplicationServer() == null) {\r\n            telemetryRegistry.setApplicationServer(serverInfo);\r\n        }\r\n      }\r\n    }\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (serverInfo != null && !sce.getServletContext().getServerInfo().isEmpty() ) {\n          \n          \n            \n                  Set<String> processEngineNames = getProcessEngineProvider().getProcessEngineNames();\n          \n          \n            \n                  for (String engineName : processEngineNames) {\n          \n          \n            \n                    ProcessEngine processEngine = lookupProcessEngine(engineName);\n          \n          \n            \n                    try {\n          \n          \n            \n                      if (processEngine.getProcessEngineConfiguration().getTelemetryRegistry() != null &&\n          \n          \n            \n                          processEngine.getProcessEngineConfiguration().getTelemetryRegistry().getApplicationServer() == null) {\n          \n          \n            \n            \n          \n          \n            \n                        processEngine.getProcessEngineConfiguration()\n          \n          \n            \n                            .getTelemetryRegistry()\n          \n          \n            \n                            .setApplicationServer(serverInfo);\n          \n          \n            \n                      }\n          \n          \n            \n                    } catch (Exception e) {\n          \n          \n            \n                      // do nothing\n          \n          \n            \n                    }\n          \n          \n            \n                  }\n          \n          \n            \n                }\n          \n          \n            \n                if (serverInfo != null && !serverInfo.isEmpty() ) {\n          \n          \n            \n                  Set<String> processEngineNames = getProcessEngineProvider().getProcessEngineNames();\n          \n          \n            \n                  for (String engineName : processEngineNames) {\n          \n          \n            \n                    ProcessEngine processEngine = lookupProcessEngine(engineName);\n          \n          \n            \n                    ProcessEngineConfiguration configuration = processEngine.getProcessEngineConfiguration();\n          \n          \n            \n                    TelemetryRegistry telemetryRegistry = configuration.getTelemetryRegistry();\n          \n          \n            \n                    if (telemetryRegistry != null && telemetryRegistry.getApplicationServer() == null) {\n          \n          \n            \n                        telemetryRegistry.setApplicationServer(serverInfo);\n          \n          \n            \n                    }\n          \n          \n            \n                  }\n          \n          \n            \n                }", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">if</span> (serverInfo <span class=\"pl-k\">!=</span> <span class=\"pl-c1\">null</span> <span class=\"pl-k\">&amp;&amp;</span> <span class=\"pl-k\">!</span>sce<span class=\"pl-k\">.</span>getServletContext()<span class=\"pl-k\">.</span>getServerInfo()<span class=\"pl-k\">.</span>isEmpty() ) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">      <span class=\"pl-k\">Set&lt;<span class=\"pl-smi\">String</span>&gt;</span> processEngineNames <span class=\"pl-k\">=</span> getProcessEngineProvider()<span class=\"pl-k\">.</span>getProcessEngineNames();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">      <span class=\"pl-k\">for</span> (<span class=\"pl-smi\">String</span> engineName <span class=\"pl-k\">:</span> processEngineNames) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-smi\">ProcessEngine</span> processEngine <span class=\"pl-k\">=</span> lookupProcessEngine(engineName);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-k\">try</span> {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">          <span class=\"pl-k\">if</span> (processEngine<span class=\"pl-k\">.</span>getProcessEngineConfiguration()<span class=\"pl-k\">.</span>getTelemetryRegistry() <span class=\"pl-k\">!=</span> <span class=\"pl-c1\">null</span> <span class=\"pl-k\">&amp;&amp;</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">              processEngine<span class=\"pl-k\">.</span>getProcessEngineConfiguration()<span class=\"pl-k\">.</span>getTelemetryRegistry()<span class=\"pl-k\">.</span>getApplicationServer() <span class=\"pl-k\">==</span> <span class=\"pl-c1\">null</span>) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            processEngine<span class=\"pl-k\">.</span>getProcessEngineConfiguration()</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                .getTelemetryRegistry()</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                .setApplicationServer(serverInfo);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">          }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        } <span class=\"pl-k\">catch</span> (<span class=\"pl-smi\">Exception</span> e) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">          <span class=\"pl-c\"><span class=\"pl-c\">//</span> do nothing</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">      }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">if</span> (serverInfo <span class=\"pl-k\">!=</span> <span class=\"pl-c1\">null</span> <span class=\"pl-k\">&amp;&amp;</span> <span class=\"pl-k\">!</span>serverInfo<span class=\"pl-k\">.</span>isEmpty() ) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">      <span class=\"pl-k\">Set&lt;<span class=\"pl-smi\">String</span>&gt;</span> processEngineNames <span class=\"pl-k\">=</span> getProcessEngineProvider()<span class=\"pl-k\">.</span>getProcessEngineNames();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">      <span class=\"pl-k\">for</span> (<span class=\"pl-smi\">String</span> engineName <span class=\"pl-k\">:</span> processEngineNames) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-smi\">ProcessEngine</span> processEngine <span class=\"pl-k\">=</span> lookupProcessEngine(engineName);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-smi\">ProcessEngineConfiguration</span> configuration <span class=\"pl-k\">=</span> processEngine<span class=\"pl-k\">.</span>getProcessEngineConfiguration();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-smi\">TelemetryRegistry</span> telemetryRegistry <span class=\"pl-k\">=</span> configuration<span class=\"pl-k\">.</span>getTelemetryRegistry();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-k\">if</span> (telemetryRegistry <span class=\"pl-k\">!=</span> <span class=\"pl-c1\">null</span> <span class=\"pl-k\">&amp;&amp;</span> telemetryRegistry<span class=\"pl-k\">.</span>getApplicationServer() <span class=\"pl-k\">==</span> <span class=\"pl-c1\">null</span>) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            telemetryRegistry<span class=\"pl-k\">.</span>setApplicationServer(serverInfo);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">      }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    }</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "tasso94", "createdAt": "2020-08-28T14:26:54Z", "path": "engine-rest/engine-rest/src/main/java/org/camunda/bpm/engine/rest/impl/web/bootstrap/RestContainerBootstrap.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/*\n+ * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH\n+ * under one or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information regarding copyright\n+ * ownership. Camunda licenses this file to you under the Apache License,\n+ * Version 2.0; you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.camunda.bpm.engine.rest.impl.web.bootstrap;\n+\n+import static org.camunda.bpm.engine.rest.util.EngineUtil.getProcessEngineProvider;\n+import static org.camunda.bpm.engine.rest.util.EngineUtil.lookupProcessEngine;\n+\n+import java.util.Set;\n+\n+import javax.servlet.ServletContextEvent;\n+import javax.servlet.ServletContextListener;\n+\n+import org.camunda.bpm.engine.ProcessEngine;\n+\n+public class RestContainerBootstrap implements ServletContextListener {\n+\n+  @Override\n+  public void contextInitialized(ServletContextEvent sce) {\n+    String serverInfo = sce.getServletContext().getServerInfo();\n+    if (serverInfo != null && !sce.getServletContext().getServerInfo().isEmpty() ) {\n+      Set<String> processEngineNames = getProcessEngineProvider().getProcessEngineNames();\n+      for (String engineName : processEngineNames) {\n+        ProcessEngine processEngine = lookupProcessEngine(engineName);\n+        try {\n+          if (processEngine.getProcessEngineConfiguration().getTelemetryRegistry() != null &&\n+              processEngine.getProcessEngineConfiguration().getTelemetryRegistry().getApplicationServer() == null) {\n+\n+            processEngine.getProcessEngineConfiguration()\n+                .getTelemetryRegistry()\n+                .setApplicationServer(serverInfo);\n+          }\n+        } catch (Exception e) {\n+          // do nothing\n+        }\n+      }\n+    }", "originalCommit": "e19e69749bcd65f8c4d21cbe38c84ce65a27dc29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTM0MTgzMw==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/923#discussion_r479341833", "bodyText": "Instead of this exception handling, let's just take care that in ParseUtil#parseServerVendor no exceptions are thrown.", "author": "tasso94", "createdAt": "2020-08-28T14:27:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTM0MTI3OQ=="}], "type": "inlineReview"}, {"oid": "95ea34f3ea0c86c952a5678788be23c0e20929c5", "url": "https://github.com/camunda/camunda-bpm-platform/commit/95ea34f3ea0c86c952a5678788be23c0e20929c5", "message": "chore(engine/rest): apply suggestions from code review\n\nCo-authored-by: Tassilo Weidner <tassilo.weidner@camunda.com>", "committedDate": "2020-08-31T13:53:34Z", "type": "commit"}, {"oid": "f4f5d771f34a9194d6e21144cae29c4bc79eeab9", "url": "https://github.com/camunda/camunda-bpm-platform/commit/f4f5d771f34a9194d6e21144cae29c4bc79eeab9", "message": "improve(engine/rest): improve set app server info in telemetry", "committedDate": "2020-08-31T15:11:53Z", "type": "commit"}, {"oid": "f4f5d771f34a9194d6e21144cae29c4bc79eeab9", "url": "https://github.com/camunda/camunda-bpm-platform/commit/f4f5d771f34a9194d6e21144cae29c4bc79eeab9", "message": "improve(engine/rest): improve set app server info in telemetry", "committedDate": "2020-08-31T15:11:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTE4NDc1OA==", "url": "https://github.com/camunda/camunda-bpm-platform/pull/923#discussion_r481184758", "body": "A proposal to be super sure that an exception is **never** thrown:\r\n\r\n```suggestion\r\n    String serverVendor = \"\";\r\n\r\n    Pattern pattern = Pattern.compile(\"[\\\\sA-Za-z]+\");\r\n    Matcher matcher = pattern.matcher(applicationServerInfo);\r\n    if (matcher.find()) {\r\n      try {\r\n        serverVendor = matcher.group();\r\n      } catch (IllegalStateException ignored) {\r\n      }\r\n\r\n      serverVendor = serverVendor.trim();\r\n\r\n      if (serverVendor.contains(\"WildFly\")) {\r\n        return \"WildFly\";\r\n      }\r\n    }\r\n\r\n    return serverVendor;\r\n```", "bodyText": "A proposal to be super sure that an exception is never thrown:\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                String serverVendor = null;\n          \n          \n            \n                Pattern pattern = Pattern.compile(\"[\\\\sA-Za-z]+\");\n          \n          \n            \n                Matcher matcher = pattern.matcher(applicationServerInfo);\n          \n          \n            \n                if (matcher.find()) {\n          \n          \n            \n                  serverVendor = matcher.group(0).trim();\n          \n          \n            \n                }\n          \n          \n            \n                if (serverVendor.contains(\"WildFly\")) {\n          \n          \n            \n                  return \"WildFly\";\n          \n          \n            \n                }\n          \n          \n            \n                return serverVendor;\n          \n          \n            \n                String serverVendor = \"\";\n          \n          \n            \n            \n          \n          \n            \n                Pattern pattern = Pattern.compile(\"[\\\\sA-Za-z]+\");\n          \n          \n            \n                Matcher matcher = pattern.matcher(applicationServerInfo);\n          \n          \n            \n                if (matcher.find()) {\n          \n          \n            \n                  try {\n          \n          \n            \n                    serverVendor = matcher.group();\n          \n          \n            \n                  } catch (IllegalStateException ignored) {\n          \n          \n            \n                  }\n          \n          \n            \n            \n          \n          \n            \n                  serverVendor = serverVendor.trim();\n          \n          \n            \n            \n          \n          \n            \n                  if (serverVendor.contains(\"WildFly\")) {\n          \n          \n            \n                    return \"WildFly\";\n          \n          \n            \n                  }\n          \n          \n            \n                }\n          \n          \n            \n            \n          \n          \n            \n                return serverVendor;", "bodyHTML": "<p dir=\"auto\">A proposal to be super sure that an exception is <strong>never</strong> thrown:</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"138\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-smi\">String</span> serverVendor <span class=\"pl-k\">=</span> <span class=\"pl-c1\">null</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"139\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-smi\">Pattern</span> pattern <span class=\"pl-k\">=</span> <span class=\"pl-smi\">Pattern</span><span class=\"pl-k\">.</span>compile(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>[<span class=\"pl-cce\">\\\\</span>sA-Za-z]+<span class=\"pl-pds\">\"</span></span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"140\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-smi\">Matcher</span> matcher <span class=\"pl-k\">=</span> pattern<span class=\"pl-k\">.</span>matcher(applicationServerInfo);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"141\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">if</span> (matcher<span class=\"pl-k\">.</span>find()) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"142\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">      serverVendor <span class=\"pl-k\">=</span> matcher<span class=\"pl-k\">.</span>group(<span class=\"pl-c1\">0</span>)<span class=\"pl-k\">.</span>trim();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"143\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"144\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">if</span> (serverVendor<span class=\"pl-k\">.</span>contains(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>WildFly<span class=\"pl-pds\">\"</span></span>)) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"145\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">      <span class=\"pl-k\">return</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>WildFly<span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"146\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"147\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">return</span> serverVendor;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"138\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-smi\">String</span> serverVendor <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"139\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"140\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-smi\">Pattern</span> pattern <span class=\"pl-k\">=</span> <span class=\"pl-smi\">Pattern</span><span class=\"pl-k\">.</span>compile(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>[<span class=\"pl-cce\">\\\\</span>sA-Za-z]+<span class=\"pl-pds\">\"</span></span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"141\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-smi\">Matcher</span> matcher <span class=\"pl-k\">=</span> pattern<span class=\"pl-k\">.</span>matcher(applicationServerInfo);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"142\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">if</span> (matcher<span class=\"pl-k\">.</span>find()) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"143\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">      <span class=\"pl-k\">try</span> {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"144\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        serverVendor <span class=\"pl-k\">=</span> matcher<span class=\"pl-k\">.</span>group();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"145\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">      } <span class=\"pl-k\">catch</span> (<span class=\"pl-smi\">IllegalStateException</span> ignored) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"146\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">      }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"147\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"148\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">      serverVendor <span class=\"pl-k\">=</span> serverVendor<span class=\"pl-k\">.</span>trim();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"149\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"150\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">      <span class=\"pl-k\">if</span> (serverVendor<span class=\"pl-k\">.</span>contains(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>WildFly<span class=\"pl-pds\">\"</span></span>)) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"151\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-k\">return</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>WildFly<span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"152\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">      }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"153\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"154\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"155\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">return</span> serverVendor;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "tasso94", "createdAt": "2020-09-01T14:34:24Z", "path": "engine/src/main/java/org/camunda/bpm/engine/impl/util/ParseUtil.java", "diffHunk": "@@ -116,4 +116,18 @@ public static ProcessEngineDetails parseProcessEngineVersion(String packageImple\n \n     return new ProcessEngineDetails(version, edition);\n   }\n+\n+  public static String parseServerVendor(String applicationServerInfo) {\n+    String serverVendor = null;\n+    Pattern pattern = Pattern.compile(\"[\\\\sA-Za-z]+\");\n+    Matcher matcher = pattern.matcher(applicationServerInfo);\n+    if (matcher.find()) {\n+      serverVendor = matcher.group(0).trim();\n+    }\n+    if (serverVendor.contains(\"WildFly\")) {\n+      return \"WildFly\";\n+    }\n+    return serverVendor;", "originalCommit": "f4f5d771f34a9194d6e21144cae29c4bc79eeab9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9506f031ca163e281fde222905767ab80f4a4862", "url": "https://github.com/camunda/camunda-bpm-platform/commit/9506f031ca163e281fde222905767ab80f4a4862", "message": "chore(engine): apply suggestions from code review\n\nCo-authored-by: Tassilo Weidner <tassilo.weidner@camunda.com>", "committedDate": "2020-09-01T14:52:08Z", "type": "commit"}]}