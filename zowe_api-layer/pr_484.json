{"pr_number": 484, "pr_title": "Client certificate is not used when it is not needed", "pr_author": "plavjanik", "pr_createdAt": "2020-01-30T20:31:43Z", "pr_url": "https://github.com/zowe/api-layer/pull/484", "timeline": [{"oid": "04144cff08762a4b6be572e51b672b88f35d720b", "url": "https://github.com/zowe/api-layer/commit/04144cff08762a4b6be572e51b672b88f35d720b", "message": "Do not use client certs for z/OSMF\n\nSigned-off-by: Petr Plavjanik <plavjanik@gmail.com>", "committedDate": "2020-01-30T19:15:19Z", "type": "commit"}, {"oid": "56d22ce69003bfb0dfa76e9319e627150dc87902", "url": "https://github.com/zowe/api-layer/commit/56d22ce69003bfb0dfa76e9319e627150dc87902", "message": "Use HttpClient without keystore in Zuul\n\nSigned-off-by: Petr Plavjanik <plavjanik@gmail.com>", "committedDate": "2020-01-30T20:26:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM1OTUyNw==", "url": "https://github.com/zowe/api-layer/pull/484#discussion_r373359527", "body": "What about use lambda:\r\n\r\n            Supplier<HttpsConfig.HttpsConfigBuilder> httpsConfigBuilderSupplier = () ->\r\n                HttpsConfig.builder().protocol(protocol)\r\n                .trustStore(trustStore)\r\n                .trustStoreType(trustStoreType).trustStorePassword(trustStorePassword).trustStoreRequired(trustStoreRequired)\r\n                .verifySslCertificatesOfServices(verifySslCertificatesOfServices);\r\n\r\n\r\nHttpsFactory factory = new HttpsFactory(httpsConfig);\r\n\r\nHttpsFactory factoryWithoutKeyStore = new HttpsFactory(httpsConfigBuilderSupplier.get().build());\r\n            secureHttpClientWithoutKeystore = factoryWithoutKeyStore.createSecureHttpClient();", "bodyText": "What about use lambda:\n        Supplier<HttpsConfig.HttpsConfigBuilder> httpsConfigBuilderSupplier = () ->\n            HttpsConfig.builder().protocol(protocol)\n            .trustStore(trustStore)\n            .trustStoreType(trustStoreType).trustStorePassword(trustStorePassword).trustStoreRequired(trustStoreRequired)\n            .verifySslCertificatesOfServices(verifySslCertificatesOfServices);\n\nHttpsFactory factory = new HttpsFactory(httpsConfig);\nHttpsFactory factoryWithoutKeyStore = new HttpsFactory(httpsConfigBuilderSupplier.get().build());\nsecureHttpClientWithoutKeystore = factoryWithoutKeyStore.createSecureHttpClient();", "bodyHTML": "<p dir=\"auto\">What about use lambda:</p>\n<div class=\"snippet-clipboard-content position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"        Supplier&lt;HttpsConfig.HttpsConfigBuilder&gt; httpsConfigBuilderSupplier = () -&gt;\n            HttpsConfig.builder().protocol(protocol)\n            .trustStore(trustStore)\n            .trustStoreType(trustStoreType).trustStorePassword(trustStorePassword).trustStoreRequired(trustStoreRequired)\n            .verifySslCertificatesOfServices(verifySslCertificatesOfServices);\"><pre><code>        Supplier&lt;HttpsConfig.HttpsConfigBuilder&gt; httpsConfigBuilderSupplier = () -&gt;\n            HttpsConfig.builder().protocol(protocol)\n            .trustStore(trustStore)\n            .trustStoreType(trustStoreType).trustStorePassword(trustStorePassword).trustStoreRequired(trustStoreRequired)\n            .verifySslCertificatesOfServices(verifySslCertificatesOfServices);\n</code></pre></div>\n<p dir=\"auto\">HttpsFactory factory = new HttpsFactory(httpsConfig);</p>\n<p dir=\"auto\">HttpsFactory factoryWithoutKeyStore = new HttpsFactory(httpsConfigBuilderSupplier.get().build());<br>\nsecureHttpClientWithoutKeystore = factoryWithoutKeyStore.createSecureHttpClient();</p>", "author": "pj892031", "createdAt": "2020-01-31T08:18:00Z", "path": "apiml-common/src/main/java/com/ca/mfaas/product/web/HttpConfig.java", "diffHunk": "@@ -96,6 +99,13 @@ public void init() {\n             secureHostnameVerifier = factory.createHostnameVerifier();\n             eurekaJerseyClientBuilder = factory.createEurekaJerseyClientBuilder(eurekaServerUrl, serviceId);\n \n+            HttpsConfig httpsConfigWithoutKeystore = HttpsConfig.builder().protocol(protocol).trustStore(trustStore)", "originalCommit": "56d22ce69003bfb0dfa76e9319e627150dc87902", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM3NTY1MQ==", "url": "https://github.com/zowe/api-layer/pull/484#discussion_r373375651", "bodyText": "That will look nicer! I have created an issue so we do not forget about", "author": "plavjanik", "createdAt": "2020-01-31T09:03:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM1OTUyNw=="}], "type": "inlineReview"}]}