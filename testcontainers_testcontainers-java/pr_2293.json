{"pr_number": 2293, "pr_title": "Don't display a stack trace in the logs when .testcontainers.properties is not found", "pr_author": "rishumehrotra", "pr_createdAt": "2020-01-27T09:30:04Z", "pr_url": "https://github.com/testcontainers/testcontainers-java/pull/2293", "timeline": [{"oid": "4e2e2d0d44e0ad37b09a7b29211a620cf0b3690e", "url": "https://github.com/testcontainers/testcontainers-java/commit/4e2e2d0d44e0ad37b09a7b29211a620cf0b3690e", "message": "Fixing https://github.com/testcontainers/testcontainers-java/issues/2253", "committedDate": "2020-01-27T09:28:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEzNTExMQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2293#discussion_r371135111", "body": "this does not seem to fix the issue described in #2253.\r\nIf I understood it correctly, @vmassol was talking about **not** displaying the stacktrace but the only the error message, to make the logs less verbose", "bodyText": "this does not seem to fix the issue described in #2253.\nIf I understood it correctly, @vmassol was talking about not displaying the stacktrace but the only the error message, to make the logs less verbose", "bodyHTML": "<p dir=\"auto\">this does not seem to fix the issue described in <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"550636371\" data-permission-text=\"Title is private\" data-url=\"https://github.com/testcontainers/testcontainers-java/issues/2253\" data-hovercard-type=\"issue\" data-hovercard-url=\"/testcontainers/testcontainers-java/issues/2253/hovercard\" href=\"https://github.com/testcontainers/testcontainers-java/issues/2253\">#2253</a>.<br>\nIf I understood it correctly, <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/vmassol/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/vmassol\">@vmassol</a> was talking about <strong>not</strong> displaying the stacktrace but the only the error message, to make the logs less verbose</p>", "author": "bsideup", "createdAt": "2020-01-27T09:31:35Z", "path": "core/src/main/java/org/testcontainers/utility/TestcontainersConfiguration.java", "diffHunk": "@@ -169,7 +169,7 @@ private static Properties readProperties(URL url) {\n         try (InputStream inputStream = url.openStream()) {\n             properties.load(inputStream);\n         } catch (FileNotFoundException e) {\n-            log.trace(\"Testcontainers config override was found on {} but the file was not found\", url, e);\n+            log.warn(\"Testcontainers config override was found on {} but the file was not found\", url, e);", "originalCommit": "4e2e2d0d44e0ad37b09a7b29211a620cf0b3690e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEzNjA4MA==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2293#discussion_r371136080", "bodyText": "ugh. My bad. removing \"e\" should help then ?", "author": "rishumehrotra", "createdAt": "2020-01-27T09:33:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEzNTExMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEzNjM1OQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2293#discussion_r371136359", "bodyText": "please follow the issue's description, it is very well described and suggests a solution", "author": "bsideup", "createdAt": "2020-01-27T09:34:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEzNTExMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEzNjU5OQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2293#discussion_r371136599", "bodyText": "Understood. Will do.", "author": "rishumehrotra", "createdAt": "2020-01-27T09:35:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEzNTExMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTU5NDA1Mw==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2293#discussion_r371594053", "bodyText": "Resubmitted", "author": "rishumehrotra", "createdAt": "2020-01-28T03:24:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEzNTExMQ=="}], "type": "inlineReview"}, {"oid": "36a8ef10d0a7daa99a2abad6858b890c00318d12", "url": "https://github.com/testcontainers/testcontainers-java/commit/36a8ef10d0a7daa99a2abad6858b890c00318d12", "message": "adding ExceptionUtils", "committedDate": "2020-01-28T02:11:47Z", "type": "commit"}, {"oid": "63f1cf60c9f07b271eb88e8b250a35990223beff", "url": "https://github.com/testcontainers/testcontainers-java/commit/63f1cf60c9f07b271eb88e8b250a35990223beff", "message": "Merge branch 'master' into bugfix/2253", "committedDate": "2020-02-17T01:34:03Z", "type": "commit"}, {"oid": "132742a51dc2fc85169875e3bc145eb291a471f8", "url": "https://github.com/testcontainers/testcontainers-java/commit/132742a51dc2fc85169875e3bc145eb291a471f8", "message": "Merge branch 'master' into bugfix/2253", "committedDate": "2020-05-01T18:54:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY4ODU4Ng==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2293#discussion_r418688586", "body": "I could be reading it wrong, but won't this insert the exception message right into the middle of the log string in a very strange way?\r\n\r\ne.g. if the exception message is `something went wrong` then we're going to end up logging:\r\n\r\n`Testcontainers config override was found on something went wrong but the file was not found`\r\n\r\nI think we want:\r\n```suggestion\r\n            log.warn(\"Testcontainers config override was found on {} but the file was not found. Exception message: {}\", url, ExceptionUtils.getRootCauseMessage(e));\r\n```\r\n\r\nand similar for the `IOException` case...\r\n\r\nWDYT?", "bodyText": "I could be reading it wrong, but won't this insert the exception message right into the middle of the log string in a very strange way?\ne.g. if the exception message is something went wrong then we're going to end up logging:\nTestcontainers config override was found on something went wrong but the file was not found\nI think we want:\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        log.warn(\"Testcontainers config override was found on {} but the file was not found\", ExceptionUtils.getRootCauseMessage(e));\n          \n          \n            \n                        log.warn(\"Testcontainers config override was found on {} but the file was not found. Exception message: {}\", url, ExceptionUtils.getRootCauseMessage(e));\n          \n      \n    \n    \n  \n\nand similar for the IOException case...\nWDYT?", "bodyHTML": "<p dir=\"auto\">I could be reading it wrong, but won't this insert the exception message right into the middle of the log string in a very strange way?</p>\n<p dir=\"auto\">e.g. if the exception message is <code>something went wrong</code> then we're going to end up logging:</p>\n<p dir=\"auto\"><code>Testcontainers config override was found on something went wrong but the file was not found</code></p>\n<p dir=\"auto\">I think we want:</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            log<span class=\"pl-k\">.</span>warn(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Testcontainers config override was found on {} but the file was not found<span class=\"pl-pds x x-first x-last\">\"</span></span>, <span class=\"pl-smi\">ExceptionUtils</span><span class=\"pl-k\">.</span>getRootCauseMessage(e));</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            log<span class=\"pl-k\">.</span>warn(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Testcontainers config override was found on {} but the file was not found<span class=\"x x-first\">. Exception message: {}</span><span class=\"pl-pds x\">\"</span></span><span class=\"x x-last\">, url</span>, <span class=\"pl-smi\">ExceptionUtils</span><span class=\"pl-k\">.</span>getRootCauseMessage(e));</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n\n<p dir=\"auto\">and similar for the <code>IOException</code> case...</p>\n<p dir=\"auto\">WDYT?</p>", "author": "rnorth", "createdAt": "2020-05-01T19:01:16Z", "path": "core/src/main/java/org/testcontainers/utility/TestcontainersConfiguration.java", "diffHunk": "@@ -169,9 +170,9 @@ private static Properties readProperties(URL url) {\n         try (InputStream inputStream = url.openStream()) {\n             properties.load(inputStream);\n         } catch (FileNotFoundException e) {\n-            log.trace(\"Testcontainers config override was found on {} but the file was not found\", url, e);\n+            log.warn(\"Testcontainers config override was found on {} but the file was not found\", ExceptionUtils.getRootCauseMessage(e));", "originalCommit": "132742a51dc2fc85169875e3bc145eb291a471f8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk0MjU1MQ==", "url": "https://github.com/testcontainers/testcontainers-java/pull/2293#discussion_r463942551", "bodyText": "Thanks @rnorth . Fixing.", "author": "rishumehrotra", "createdAt": "2020-08-01T09:10:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODY4ODU4Ng=="}], "type": "inlineReview"}, {"oid": "f798e5c4f8ade457ad616dd2787f7700afaf1625", "url": "https://github.com/testcontainers/testcontainers-java/commit/f798e5c4f8ade457ad616dd2787f7700afaf1625", "message": "adding comments", "committedDate": "2020-08-01T09:08:39Z", "type": "commit"}, {"oid": "7c7bf0326f9f48bea1f432c04d11b53f4ab9026e", "url": "https://github.com/testcontainers/testcontainers-java/commit/7c7bf0326f9f48bea1f432c04d11b53f4ab9026e", "message": "fixing log.warn", "committedDate": "2020-08-01T09:10:07Z", "type": "commit"}, {"oid": "aa66bcec7fba23c1dd4de6f62a26c882ddaa8913", "url": "https://github.com/testcontainers/testcontainers-java/commit/aa66bcec7fba23c1dd4de6f62a26c882ddaa8913", "message": "Merge branch 'master' into bugfix/2253", "committedDate": "2020-08-01T09:11:06Z", "type": "commit"}, {"oid": "dc94d895a2ccfb9a91772528e16ae03d456c36e9", "url": "https://github.com/testcontainers/testcontainers-java/commit/dc94d895a2ccfb9a91772528e16ae03d456c36e9", "message": "Merge branch 'master' into bugfix/2253", "committedDate": "2020-08-01T18:03:27Z", "type": "commit"}, {"oid": "6f16c232e2b2449f31524136e7eff398495349fd", "url": "https://github.com/testcontainers/testcontainers-java/commit/6f16c232e2b2449f31524136e7eff398495349fd", "message": "Merge branch 'master' into bugfix/2253", "committedDate": "2020-10-01T07:18:48Z", "type": "commit"}, {"oid": "18c5d5018d20ad464e4a831fc495490302bb08df", "url": "https://github.com/testcontainers/testcontainers-java/commit/18c5d5018d20ad464e4a831fc495490302bb08df", "message": "Merge branch 'master' into bugfix/2253", "committedDate": "2020-10-02T19:13:36Z", "type": "commit"}]}