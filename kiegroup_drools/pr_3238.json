{"pr_number": 3238, "pr_title": "DROOLS-5874 : Guided Rule Editor: Call method on XYZ with formula containing quotes does not re-open correctly", "pr_author": "Rikkola", "pr_createdAt": "2020-11-13T12:25:12Z", "pr_url": "https://github.com/kiegroup/drools/pull/3238", "timeline": [{"oid": "c026a56aa11ae7a7fa9b5335698ae42b1570c986", "url": "https://github.com/kiegroup/drools/commit/c026a56aa11ae7a7fa9b5335698ae42b1570c986", "message": "DROOLS-5696 : Guided Rule Editor: Call method on XYZ with formula containing quotes does not re-open correctly", "committedDate": "2020-11-13T12:27:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU5NzI5NA==", "url": "https://github.com/kiegroup/drools/pull/3238#discussion_r533597294", "body": "@Rikkola @jstastny-cz could you please help me in understanding this complex quoting? \r\n- Does the method `add` take one argument of type `String`?\r\n- Lets say the `when` part of the rule was evaluated to `true` and lets say variable `bar` holds value `1` and the variable `foo` holds value `2`, I am correct that we would like to produce java code, that will add one item into list  `a`, and this item will be `\"2, 1\"`?\r\n\r\nIf the answer for both is true, I think such value composed from two bound variables can be created via formula expression just as: `foo \", \" + bar`\r\n\r\nCould you please explain me more properly steps to reproduce? ", "bodyText": "@Rikkola @jstastny-cz could you please help me in understanding this complex quoting?\n\nDoes the method add take one argument of type String?\nLets say the when part of the rule was evaluated to true and lets say variable bar holds value 1 and the variable foo holds value 2, I am correct that we would like to produce java code, that will add one item into list  a, and this item will be \"2, 1\"?\n\nIf the answer for both is true, I think such value composed from two bound variables can be created via formula expression just as: foo \", \" + bar\nCould you please explain me more properly steps to reproduce?", "bodyHTML": "<p dir=\"auto\"><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/Rikkola/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Rikkola\">@Rikkola</a> <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/jstastny-cz/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/jstastny-cz\">@jstastny-cz</a> could you please help me in understanding this complex quoting?</p>\n<ul dir=\"auto\">\n<li>Does the method <code>add</code> take one argument of type <code>String</code>?</li>\n<li>Lets say the <code>when</code> part of the rule was evaluated to <code>true</code> and lets say variable <code>bar</code> holds value <code>1</code> and the variable <code>foo</code> holds value <code>2</code>, I am correct that we would like to produce java code, that will add one item into list  <code>a</code>, and this item will be <code>\"2, 1\"</code>?</li>\n</ul>\n<p dir=\"auto\">If the answer for both is true, I think such value composed from two bound variables can be created via formula expression just as: <code>foo \", \" + bar</code></p>\n<p dir=\"auto\">Could you please explain me more properly steps to reproduce?</p>", "author": "jomarko", "createdAt": "2020-12-01T17:36:19Z", "path": "drools-workbench-models/drools-workbench-models-commons/src/test/java/org/drools/workbench/models/commons/backend/rule/RuleModelDRLPersistenceUnmarshallingTest.java", "diffHunk": "@@ -1202,6 +1202,39 @@ public void testDotInString() {\n                      actionCallMethod.getFieldValues()[0].getValue());\n     }\n \n+    @Test\n+    public void testDotInStringWithEscapedQuotes() {\n+        String drl = \"import java.lang.Number;\\n\"\n+                + \"import java.util.ArrayList;\\n\"\n+                + \"rule rule1\\n\"\n+                + \"when\\n\"\n+                + \"a : ArrayList( )\\n\"\n+                + \"bar : Number( )\\n\"\n+                + \"foo : Number( )\\n\"\n+                + \"then\\n\"\n+                + \"a.add( \\\"\\\\\\\"foo, bar\\\\\\\"\\\" );\\n\"\n+                + \"end\";", "originalCommit": "c026a56aa11ae7a7fa9b5335698ae42b1570c986", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzYwOTYxMA==", "url": "https://github.com/kiegroup/drools/pull/3238#discussion_r533609610", "bodyText": "I think the breaking input here was a formula using just literals, we've discussed also in the cherry-pick PR in #3227 (comment) .", "author": "jstastny-cz", "createdAt": "2020-12-01T17:54:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU5NzI5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzYxMTQxNA==", "url": "https://github.com/kiegroup/drools/pull/3238#discussion_r533611414", "bodyText": "Though I think we agreed to create a separate issue for the Literal case. DROOLS-5696 should be considered fixed now, this should be tracked separately.", "author": "jstastny-cz", "createdAt": "2020-12-01T17:57:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU5NzI5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk1NTE0OQ==", "url": "https://github.com/kiegroup/drools/pull/3238#discussion_r533955149", "bodyText": "@jstastny-cz thank you. I reported new jira for it https://issues.redhat.com/browse/DROOLS-5874\n@Rikkola please update jira description to match the proper jira number.\nThank you both for help.", "author": "jomarko", "createdAt": "2020-12-02T07:43:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU5NzI5NA=="}], "type": "inlineReview"}, {"oid": "674549be808037a4d4b96fc00f085056f6a523ae", "url": "https://github.com/kiegroup/drools/commit/674549be808037a4d4b96fc00f085056f6a523ae", "message": "DROOLS-5874 : Guided Rule Editor: Call method on XYZ with literal value containing quotes does not re-open correctly", "committedDate": "2020-12-02T09:02:02Z", "type": "commit"}, {"oid": "674549be808037a4d4b96fc00f085056f6a523ae", "url": "https://github.com/kiegroup/drools/commit/674549be808037a4d4b96fc00f085056f6a523ae", "message": "DROOLS-5874 : Guided Rule Editor: Call method on XYZ with literal value containing quotes does not re-open correctly", "committedDate": "2020-12-02T09:02:02Z", "type": "forcePushed"}]}