{"pr_number": 6165, "pr_title": "Fix UploadFilesActivity toolbar color in light mode", "pr_author": "JorisBodin", "pr_createdAt": "2020-05-27T14:30:13Z", "pr_url": "https://github.com/nextcloud/android/pull/6165", "timeline": [{"oid": "47ebef15c14b4c9eec21ce080939dbda87af9f55", "url": "https://github.com/nextcloud/android/commit/47ebef15c14b4c9eec21ce080939dbda87af9f55", "message": "Refactor UploadFilesActivity\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-05-27T14:18:45Z", "type": "commit"}, {"oid": "67ea4c872ef46e11797403eb9cb24e0ac03b3204", "url": "https://github.com/nextcloud/android/commit/67ea4c872ef46e11797403eb9cb24e0ac03b3204", "message": "Remove deprecated method and fix color in light\n\nSigned-off-by: Joris Bodin <joris.bodin@infomaniak.com>", "committedDate": "2020-05-27T14:21:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE4NDQ5NQ==", "url": "https://github.com/nextcloud/android/pull/6165#discussion_r431184495", "body": "![Codacy](https://app.codacy.com/assets/images/favicon.png) Issue found: [Possible God Class (WMC=82, ATFD=172, TCC=20.968%)](https://app.codacy.com/manual/Nextcloud/android/pullRequest?prid=5593764)", "bodyText": "Issue found: Possible God Class (WMC=82, ATFD=172, TCC=20.968%)", "bodyHTML": "<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://camo.githubusercontent.com/ddf013cbb1295b347431f8757e505fb295e9c7dd5043d9a3a0bf610dd0bb0da7/68747470733a2f2f6170702e636f646163792e636f6d2f6173736574732f696d616765732f66617669636f6e2e706e67\"><img src=\"https://camo.githubusercontent.com/ddf013cbb1295b347431f8757e505fb295e9c7dd5043d9a3a0bf610dd0bb0da7/68747470733a2f2f6170702e636f646163792e636f6d2f6173736574732f696d616765732f66617669636f6e2e706e67\" alt=\"Codacy\" data-canonical-src=\"https://app.codacy.com/assets/images/favicon.png\" style=\"max-width: 100%;\"></a> Issue found: <a href=\"https://app.codacy.com/manual/Nextcloud/android/pullRequest?prid=5593764\" rel=\"nofollow\">Possible God Class (WMC=82, ATFD=172, TCC=20.968%)</a></p>", "author": "nextcloud-android-bot", "createdAt": "2020-05-27T14:34:35Z", "path": "src/main/java/com/owncloud/android/ui/activity/UploadFilesActivity.java", "diffHunk": "@@ -77,52 +71,55 @@\n import static com.owncloud.android.utils.DisplayUtils.openSortingOrderDialogFragment;\n \n /**\n- * Displays local files and let the user choose what of them wants to upload\n- * to the current ownCloud account.\n+ * Displays local files and let the user choose what of them wants to upload to the current ownCloud account.\n  */\n-public class UploadFilesActivity extends FileActivity implements\n-    LocalFileListFragment.ContainerActivity, ActionBar.OnNavigationListener,\n+public class UploadFilesActivity extends FileActivity implements LocalFileListFragment.ContainerActivity,", "originalCommit": "67ea4c872ef46e11797403eb9cb24e0ac03b3204", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE4NDUyMg==", "url": "https://github.com/nextcloud/android/pull/6165#discussion_r431184522", "body": "![Codacy](https://app.codacy.com/assets/images/favicon.png) Issue found: [Document empty method body](https://app.codacy.com/manual/Nextcloud/android/pullRequest?prid=5593764)", "bodyText": "Issue found: Document empty method body", "bodyHTML": "<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://camo.githubusercontent.com/ddf013cbb1295b347431f8757e505fb295e9c7dd5043d9a3a0bf610dd0bb0da7/68747470733a2f2f6170702e636f646163792e636f6d2f6173736574732f696d616765732f66617669636f6e2e706e67\"><img src=\"https://camo.githubusercontent.com/ddf013cbb1295b347431f8757e505fb295e9c7dd5043d9a3a0bf610dd0bb0da7/68747470733a2f2f6170702e636f646163792e636f6d2f6173736574732f696d616765732f66617669636f6e2e706e67\" alt=\"Codacy\" data-canonical-src=\"https://app.codacy.com/assets/images/favicon.png\" style=\"max-width: 100%;\"></a> Issue found: <a href=\"https://app.codacy.com/manual/Nextcloud/android/pullRequest?prid=5593764\" rel=\"nofollow\">Document empty method body</a></p>", "author": "nextcloud-android-bot", "createdAt": "2020-05-27T14:34:36Z", "path": "src/main/java/com/owncloud/android/ui/activity/UploadFilesActivity.java", "diffHunk": "@@ -208,14 +205,34 @@ public void onCreate(Bundle savedInstanceState) {\n \n         if (actionBar != null) {\n             actionBar.setHomeButtonEnabled(true);   // mandatory since Android ICS, according to the official documentation\n-            actionBar.setDisplayHomeAsUpEnabled(mCurrentDir != null && mCurrentDir.getName() != null);\n+            actionBar.setDisplayHomeAsUpEnabled(mCurrentDir != null);\n             actionBar.setDisplayShowTitleEnabled(false);\n-            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);\n-            actionBar.setListNavigationCallbacks(mDirectories, this);\n \n             ThemeUtils.tintBackButton(actionBar, this);\n         }\n \n+        showToolbarSpinner();\n+        mToolbarSpinner.setAdapter(mDirectories);\n+        mToolbarSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\n+            @Override\n+            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {\n+                int i = position;\n+                while (i-- != 0) {\n+                    onBackPressed();\n+                }\n+                // the next operation triggers a new call to this method, but it's necessary to\n+                // ensure that the name exposed in the action bar is the current directory when the\n+                // user selected it in the navigation list\n+                if (position != 0) {\n+                    mToolbarSpinner.setSelection(0);\n+                }\n+            }\n+\n+            @Override\n+            public void onNothingSelected(AdapterView<?> parent) {", "originalCommit": "67ea4c872ef46e11797403eb9cb24e0ac03b3204", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}