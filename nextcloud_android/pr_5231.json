{"pr_number": 5231, "pr_title": "images: slightly rounded corners", "pr_author": "tobiasKaminsky", "pr_createdAt": "2020-01-18T15:24:28Z", "pr_url": "https://github.com/nextcloud/android/pull/5231", "timeline": [{"oid": "ef0b0fe9eecb9ebd2d2644e326bacbed366bb8ac", "url": "https://github.com/nextcloud/android/commit/ef0b0fe9eecb9ebd2d2644e326bacbed366bb8ac", "message": "images: slightly rounded corners\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-01-18T15:22:54Z", "type": "commit"}, {"oid": "4fb140d275061e028d70b3a24fa3af36713daba0", "url": "https://github.com/nextcloud/android/commit/4fb140d275061e028d70b3a24fa3af36713daba0", "message": "round corners only in list view\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-01-22T12:45:31Z", "type": "commit"}, {"oid": "82dd14f6bcf68b2d6d5dd6e698213e460ce476a7", "url": "https://github.com/nextcloud/android/commit/82dd14f6bcf68b2d6d5dd6e698213e460ce476a7", "message": "extract doubled code\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-01-30T19:31:45Z", "type": "commit"}, {"oid": "763ee606d1aa3574686f337cff30ac0f62e312b7", "url": "https://github.com/nextcloud/android/commit/763ee606d1aa3574686f337cff30ac0f62e312b7", "message": "use radius, and do not only test for it\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-01-30T20:39:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4NjM0MA==", "url": "https://github.com/nextcloud/android/pull/5231#discussion_r369786340", "body": "```suggestion\r\n                            Resources resources = activity.getResources();\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        Resources resources = MainApp.getAppContext().getResources();\n          \n          \n            \n                                        Resources resources = activity.getResources();", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                            <span class=\"pl-smi\">Resources</span> resources <span class=\"pl-k\">=</span> <span class=\"pl-smi x x-first\">MainApp</span><span class=\"pl-k x\">.</span><span class=\"x x-last\">getAppContext()</span><span class=\"pl-k\">.</span>getResources();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                            <span class=\"pl-smi\">Resources</span> resources <span class=\"pl-k\">=</span> <span class=\"x x-first x-last\">activity</span><span class=\"pl-k\">.</span>getResources();</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "AndyScherzinger", "createdAt": "2020-01-22T20:29:22Z", "path": "src/main/java/com/owncloud/android/ui/adapter/OCFileListAdapter.java", "diffHunk": "@@ -602,7 +603,17 @@ private void setThumbnail(OCFile file, ImageView thumbnailView) {\n                         Bitmap withOverlay = ThumbnailsCacheManager.addVideoOverlay(thumbnail);\n                         thumbnailView.setImageBitmap(withOverlay);\n                     } else {\n-                        thumbnailView.setImageBitmap(thumbnail);\n+                        if (gridView) {\n+                            thumbnailView.setImageBitmap(thumbnail);\n+                        } else {\n+                            Resources resources = MainApp.getAppContext().getResources();", "originalCommit": "4fb140d275061e028d70b3a24fa3af36713daba0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4ODM2OA==", "url": "https://github.com/nextcloud/android/pull/5231#discussion_r369788368", "body": "shouldn't this rather be\r\n```suggestion\r\n            roundedBitmap.setCornerRadius(radius);\r\n```", "bodyText": "shouldn't this rather be\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        roundedBitmap.setCornerRadius(20);\n          \n          \n            \n                        roundedBitmap.setCornerRadius(radius);", "bodyHTML": "<p dir=\"auto\">shouldn't this rather be</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            roundedBitmap<span class=\"pl-k\">.</span>setCornerRadius(<span class=\"pl-c1 x x-first x-last\">20</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            roundedBitmap<span class=\"pl-k\">.</span>setCornerRadius(<span class=\"x x-first x-last\">radius</span>);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "AndyScherzinger", "createdAt": "2020-01-22T20:34:27Z", "path": "src/main/java/com/owncloud/android/utils/BitmapUtils.java", "diffHunk": "@@ -376,16 +377,34 @@ public static String md5(String string) throws NoSuchAlgorithmException {\n      * @param bitmap the original bitmap\n      * @return the circular bitmap\n      */\n-    public static RoundedBitmapDrawable bitmapToCircularBitmapDrawable(Resources resources, Bitmap bitmap) {\n+    public static RoundedBitmapDrawable bitmapToCircularBitmapDrawable(Resources resources,\n+                                                                       Bitmap bitmap,\n+                                                                       float radius) {\n         if (bitmap == null) {\n             return null;\n         }\n \n         RoundedBitmapDrawable roundedBitmap = RoundedBitmapDrawableFactory.create(resources, bitmap);\n         roundedBitmap.setCircular(true);\n+\n+        if (radius != -1) {\n+            roundedBitmap.setCornerRadius(20);", "originalCommit": "4fb140d275061e028d70b3a24fa3af36713daba0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4OTA1Ng==", "url": "https://github.com/nextcloud/android/pull/5231#discussion_r369789056", "bodyText": "due to the dp value coming in the corner radius probably rather 2 or 4 dp. The 20 is a fixed number and not a density pixel so it doesn't care about display density, while the original dp value so sent in does!", "author": "AndyScherzinger", "createdAt": "2020-01-22T20:36:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTc4ODM2OA=="}], "type": "inlineReview"}, {"oid": "d6275c48332afac1d6f1370855c6f4a3e62d86a4", "url": "https://github.com/nextcloud/android/commit/d6275c48332afac1d6f1370855c6f4a3e62d86a4", "message": "use 10dp\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-01-31T06:20:14Z", "type": "commit"}, {"oid": "66b78e0eb75881304527f49b248d2e307892faa9", "url": "https://github.com/nextcloud/android/commit/66b78e0eb75881304527f49b248d2e307892faa9", "message": "changed to 8dp\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-02-03T05:58:39Z", "type": "commit"}, {"oid": "b787284ab6c0a389d0d57e71877d1d4cd301ed8c", "url": "https://github.com/nextcloud/android/commit/b787284ab6c0a389d0d57e71877d1d4cd301ed8c", "message": "bump spotbugs\n\nSigned-off-by: tobiasKaminsky <tobias@kaminsky.me>", "committedDate": "2020-02-03T10:53:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDAzODQ1Mg==", "url": "https://github.com/nextcloud/android/pull/5231#discussion_r374038452", "body": "![Codacy](https://app.codacy.com/assets/images/favicon.png) Issue found: [Avoid using redundant field initializer for 'roundedCorners'](https://app.codacy.com/manual/Nextcloud/android/pullRequest?prid=4845036)", "bodyText": "Issue found: Avoid using redundant field initializer for 'roundedCorners'", "bodyHTML": "<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://camo.githubusercontent.com/ddf013cbb1295b347431f8757e505fb295e9c7dd5043d9a3a0bf610dd0bb0da7/68747470733a2f2f6170702e636f646163792e636f6d2f6173736574732f696d616765732f66617669636f6e2e706e67\"><img src=\"https://camo.githubusercontent.com/ddf013cbb1295b347431f8757e505fb295e9c7dd5043d9a3a0bf610dd0bb0da7/68747470733a2f2f6170702e636f646163792e636f6d2f6173736574732f696d616765732f66617669636f6e2e706e67\" alt=\"Codacy\" data-canonical-src=\"https://app.codacy.com/assets/images/favicon.png\" style=\"max-width: 100%;\"></a> Issue found: <a href=\"https://app.codacy.com/manual/Nextcloud/android/pullRequest?prid=4845036\" rel=\"nofollow\">Avoid using redundant field initializer for 'roundedCorners'</a></p>", "author": "nextcloud-android-bot", "createdAt": "2020-02-03T10:56:46Z", "path": "src/main/java/com/owncloud/android/datamodel/ThumbnailsCacheManager.java", "diffHunk": "@@ -410,12 +410,23 @@ private String getImageKey() {\n         private String mImageKey;\n         private FileDataStorageManager mStorageManager;\n         private GetMethod getMethod;\n+        private boolean roundedCorners = false;", "originalCommit": "b787284ab6c0a389d0d57e71877d1d4cd301ed8c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}