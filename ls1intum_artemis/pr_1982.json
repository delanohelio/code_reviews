{"pr_number": 1982, "pr_title": "[Exam] Add submitted flag to scores CSV", "pr_author": "sascha11110", "pr_createdAt": "2020-07-28T15:34:47Z", "pr_url": "https://github.com/ls1intum/Artemis/pull/1982", "timeline": [{"oid": "75429cbf683a688448a2e62eae1dcee63251ef02", "url": "https://github.com/ls1intum/Artemis/commit/75429cbf683a688448a2e62eae1dcee63251ef02", "message": "Add submitted to ExamScoresDTO", "committedDate": "2020-07-28T15:26:33Z", "type": "commit"}, {"oid": "9f7d4e69c60b545a36447940e16177a0bfb7cc88", "url": "https://github.com/ls1intum/Artemis/commit/9f7d4e69c60b545a36447940e16177a0bfb7cc88", "message": "Add submitted to CSV export", "committedDate": "2020-07-28T15:27:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc0OTY3OQ==", "url": "https://github.com/ls1intum/Artemis/pull/1982#discussion_r461749679", "body": "please double check that this call also works without any issues when there are many (i.e. >1000) student exams. We previously had some issues when too many entities in the database were fetched. I assume there is an edge case when it comes to the relationships between student exam and some other entities (we don't know the exact reason yet).\r\n\r\nIt is more safe to fetch 2 times:\r\n1) Exam with exercise groups and exercises\r\n2) List of all students exams for one particular exam (without any other entities).\r\n\r\nThis should also be faster in terms of performance and memory consumption, because the entity graph will be much simpler!\r\n\r\nCan you please change it accordingly?", "bodyText": "please double check that this call also works without any issues when there are many (i.e. >1000) student exams. We previously had some issues when too many entities in the database were fetched. I assume there is an edge case when it comes to the relationships between student exam and some other entities (we don't know the exact reason yet).\nIt is more safe to fetch 2 times:\n\nExam with exercise groups and exercises\nList of all students exams for one particular exam (without any other entities).\n\nThis should also be faster in terms of performance and memory consumption, because the entity graph will be much simpler!\nCan you please change it accordingly?", "bodyHTML": "<p dir=\"auto\">please double check that this call also works without any issues when there are many (i.e. &gt;1000) student exams. We previously had some issues when too many entities in the database were fetched. I assume there is an edge case when it comes to the relationships between student exam and some other entities (we don't know the exact reason yet).</p>\n<p dir=\"auto\">It is more safe to fetch 2 times:</p>\n<ol dir=\"auto\">\n<li>Exam with exercise groups and exercises</li>\n<li>List of all students exams for one particular exam (without any other entities).</li>\n</ol>\n<p dir=\"auto\">This should also be faster in terms of performance and memory consumption, because the entity graph will be much simpler!</p>\n<p dir=\"auto\">Can you please change it accordingly?</p>", "author": "krusche", "createdAt": "2020-07-28T17:27:00Z", "path": "src/main/java/de/tum/in/www1/artemis/service/ExamService.java", "diffHunk": "@@ -201,8 +201,7 @@ public void delete(Long examId) {\n      * @return return ExamScoresDTO with students, scores and exerciseGroups for exam\n      */\n     public ExamScoresDTO getExamScore(Long examId) {\n-        Exam exam = examRepository.findWithRegisteredUsersAndExerciseGroupsAndExercisesById(examId)\n-                .orElseThrow(() -> new EntityNotFoundException(\"Exam with id: \\\"\" + examId + \"\\\" does not exist\"));\n+        Exam exam = examRepository.findOneWithEagerExercisesGroupsAndStudentExams(examId);", "originalCommit": "9f7d4e69c60b545a36447940e16177a0bfb7cc88", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4MDI1MQ==", "url": "https://github.com/ls1intum/Artemis/pull/1982#discussion_r461780251", "bodyText": "See 1ba0f66", "author": "sascha11110", "createdAt": "2020-07-28T18:18:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc0OTY3OQ=="}], "type": "inlineReview"}, {"oid": "1ba0f668b248510539b168f45d42f27fb077086e", "url": "https://github.com/ls1intum/Artemis/commit/1ba0f668b248510539b168f45d42f27fb077086e", "message": "Load student exams and exercise groups / exercises separately", "committedDate": "2020-07-28T18:17:48Z", "type": "commit"}]}