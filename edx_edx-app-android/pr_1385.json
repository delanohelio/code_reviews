{"pr_number": 1385, "pr_title": "Update already enrolled course message", "pr_author": "omerhabib26", "pr_createdAt": "2020-03-18T12:17:49Z", "pr_url": "https://github.com/edx/edx-app-android/pull/1385", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU4MDg4OA==", "url": "https://github.com/edx/edx-app-android/pull/1385#discussion_r395580888", "body": "We are duplicating the functionality of this function. It should be removed and the following should be used.\r\nhttps://github.com/edx/edx-app-android/blob/c897ba317039e0ad0d77d206ea09b47d44404461/OpenEdXMobile/src/main/java/org/edx/mobile/course/CourseAPI.java#L118-L131", "bodyText": "We are duplicating the functionality of this function. It should be removed and the following should be used.\n\n  \n    \n      edx-app-android/OpenEdXMobile/src/main/java/org/edx/mobile/course/CourseAPI.java\n    \n    \n        Lines 118 to 131\n      in\n      c897ba3\n    \n    \n    \n    \n\n        \n          \n               /** \n        \n\n        \n          \n                * @param courseId The course ID. \n        \n\n        \n          \n                * @return The course identified by the provided ID if available from the cache, null if no \n        \n\n        \n          \n                *         course is found. \n        \n\n        \n          \n                */ \n        \n\n        \n          \n               @Nullable \n        \n\n        \n          \n               public EnrolledCoursesResponse getCourseById(@NonNull final String courseId) throws Exception { \n        \n\n        \n          \n                   for (EnrolledCoursesResponse r : executeStrict(getEnrolledCoursesFromCache())) { \n        \n\n        \n          \n                       if (r.getCourse().getId().equals(courseId)) { \n        \n\n        \n          \n                           return r; \n        \n\n        \n          \n                       } \n        \n\n        \n          \n                   } \n        \n\n        \n          \n                   return null; \n        \n\n        \n          \n               }", "bodyHTML": "<p dir=\"auto\">We are duplicating the functionality of this function. It should be removed and the following should be used.<br>\n<div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom color-bg-subtle\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/edx/edx-app-android/blob/c897ba317039e0ad0d77d206ea09b47d44404461/OpenEdXMobile/src/main/java/org/edx/mobile/course/CourseAPI.java#L118-L131\">edx-app-android/OpenEdXMobile/src/main/java/org/edx/mobile/course/CourseAPI.java</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 118 to 131\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/edx/edx-app-android/commit/c897ba317039e0ad0d77d206ea09b47d44404461\">c897ba3</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L118\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"118\"></td>\n          <td id=\"LC118\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-c\"><span class=\"pl-c\">/**</span></span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L119\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"119\"></td>\n          <td id=\"LC119\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\">     * <span class=\"pl-k\">@param</span> courseId The course ID.</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L120\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"120\"></td>\n          <td id=\"LC120\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\">     * <span class=\"pl-k\">@return</span> The course identified by the provided ID if available from the cache, null if no</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L121\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"121\"></td>\n          <td id=\"LC121\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\">     *         course is found.</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L122\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"122\"></td>\n          <td id=\"LC122\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\">     <span class=\"pl-c\">*/</span></span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L123\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"123\"></td>\n          <td id=\"LC123\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-k\">@Nullable</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L124\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"124\"></td>\n          <td id=\"LC124\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-k\">public</span> <span class=\"pl-smi\">EnrolledCoursesResponse</span> <span class=\"pl-en\">getCourseById</span>(<span class=\"pl-k\">@NonNull</span> <span class=\"pl-k\">final</span> <span class=\"pl-smi\">String</span> <span class=\"pl-v\">courseId</span>) <span class=\"pl-k\">throws</span> <span class=\"pl-smi\">Exception</span> { </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L125\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"125\"></td>\n          <td id=\"LC125\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">         <span class=\"pl-k\">for</span> (<span class=\"pl-smi\">EnrolledCoursesResponse</span> r <span class=\"pl-k\">:</span> executeStrict(getEnrolledCoursesFromCache())) { </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L126\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"126\"></td>\n          <td id=\"LC126\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">             <span class=\"pl-k\">if</span> (r<span class=\"pl-k\">.</span>getCourse()<span class=\"pl-k\">.</span>getId()<span class=\"pl-k\">.</span>equals(courseId)) { </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L127\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"127\"></td>\n          <td id=\"LC127\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">                 <span class=\"pl-k\">return</span> r; </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L128\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"128\"></td>\n          <td id=\"LC128\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">             } </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L129\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"129\"></td>\n          <td id=\"LC129\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">         } </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L130\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"130\"></td>\n          <td id=\"LC130\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">         <span class=\"pl-k\">return</span> <span class=\"pl-c1\">null</span>; </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L131\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"131\"></td>\n          <td id=\"LC131\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     } </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>", "author": "farhan", "createdAt": "2020-03-20T11:37:16Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/services/CourseManager.java", "diffHunk": "@@ -134,4 +139,26 @@ public boolean apply(CourseComponent courseComponent) {\n             }\n         });\n     }\n+\n+    /**\n+     * Obtain the enrolled courses data from app level cache and then find the specified course.\n+     *\n+     * @param courseId    Id of the course.\n+     * @return Searched out the course. In case course is not present in\n+     * app level cache it will return false.\n+     */\n+    public Boolean getEnrolledCourseByIdFromAppLevelCache(@NonNull final String courseId) {\n+        try {\n+            List<EnrolledCoursesResponse> enrolledCoursesResponse =\n+                    executeStrict(courseApi.getEnrolledCoursesFromCache());\n+            for (EnrolledCoursesResponse course : enrolledCoursesResponse) {", "originalCommit": "92cd5c289e290b9232c41a0acb4a73df11b7eae4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU4MTkwOQ==", "url": "https://github.com/edx/edx-app-android/pull/1385#discussion_r395581909", "body": "Function doc is not properly indented.\r\nPro Tip: Use \"Option + Command + L\" short cut key.\r\nAlso content of the comment needs to be improved", "bodyText": "Function doc is not properly indented.\nPro Tip: Use \"Option + Command + L\" short cut key.\nAlso content of the comment needs to be improved", "bodyHTML": "<p dir=\"auto\">Function doc is not properly indented.<br>\nPro Tip: Use \"Option + Command + L\" short cut key.<br>\nAlso content of the comment needs to be improved</p>", "author": "farhan", "createdAt": "2020-03-20T11:39:45Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/services/CourseManager.java", "diffHunk": "@@ -134,4 +139,26 @@ public boolean apply(CourseComponent courseComponent) {\n             }\n         });\n     }\n+\n+    /**\n+     * Obtain the enrolled courses data from app level cache and then find the specified course.", "originalCommit": "92cd5c289e290b9232c41a0acb4a73df11b7eae4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ba7ae5cf8491adec68e08e8e38099706b1f43d7e", "url": "https://github.com/edx/edx-app-android/commit/ba7ae5cf8491adec68e08e8e38099706b1f43d7e", "message": "Address PR comments", "committedDate": "2020-03-25T07:11:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTUyMjY0MQ==", "url": "https://github.com/edx/edx-app-android/pull/1385#discussion_r401522641", "body": "it's better to check if the course is already enrolled before the service call of course enrollment and move to the course dashboard without calling an extra service.", "bodyText": "it's better to check if the course is already enrolled before the service call of course enrollment and move to the course dashboard without calling an extra service.", "bodyHTML": "<p dir=\"auto\">it's better to check if the course is already enrolled before the service call of course enrollment and move to the course dashboard without calling an extra service.</p>", "author": "farhan-arshad-dev", "createdAt": "2020-04-01T10:44:27Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/util/links/DefaultActionListener.java", "diffHunk": "@@ -162,7 +162,10 @@ public void onClickEnroll(@NonNull final String courseId, final boolean emailOpt\n                     protected void onResponse(@NonNull final ResponseBody responseBody) {\n                         super.onResponse(responseBody);\n                         logger.debug(\"Enrollment successful: \" + courseId);\n-                        Toast.makeText(activity, activity.getString(R.string.you_are_now_enrolled), Toast.LENGTH_SHORT).show();\n+                        Toast.makeText(activity, activity.getString(\n+                                courseApi.isCourseEnrolled(courseId) ?", "originalCommit": "ba7ae5cf8491adec68e08e8e38099706b1f43d7e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cb4689a8014e5280251d965fbac714c782ffaa36", "url": "https://github.com/edx/edx-app-android/commit/cb4689a8014e5280251d965fbac714c782ffaa36", "message": "Address PR comments", "committedDate": "2020-04-01T13:47:46Z", "type": "forcePushed"}, {"oid": "2a13d70198bd70c41e0331658694039fb5c05ca6", "url": "https://github.com/edx/edx-app-android/commit/2a13d70198bd70c41e0331658694039fb5c05ca6", "message": "Update already enrolled course message", "committedDate": "2020-04-02T15:39:07Z", "type": "forcePushed"}, {"oid": "83732240d024dfa6f5f88eb2af2283d92de79b03", "url": "https://github.com/edx/edx-app-android/commit/83732240d024dfa6f5f88eb2af2283d92de79b03", "message": "LEARNER-6671 Update already enrolled course message", "committedDate": "2020-04-02T15:42:35Z", "type": "forcePushed"}, {"oid": "6f2f1afc117297ae7f42b85c5f6b3d082695c3f8", "url": "https://github.com/edx/edx-app-android/commit/6f2f1afc117297ae7f42b85c5f6b3d082695c3f8", "message": "Update already enrolled course message\n- LEARNER-6671", "committedDate": "2020-04-02T15:46:23Z", "type": "commit"}, {"oid": "6f2f1afc117297ae7f42b85c5f6b3d082695c3f8", "url": "https://github.com/edx/edx-app-android/commit/6f2f1afc117297ae7f42b85c5f6b3d082695c3f8", "message": "Update already enrolled course message\n- LEARNER-6671", "committedDate": "2020-04-02T15:46:23Z", "type": "forcePushed"}]}