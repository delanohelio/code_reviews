{"pr_number": 4409, "pr_title": "CUSTOM-142 Delete JVM options with min max versions.", "pr_author": "rdebusscher", "pr_createdAt": "2020-01-06T12:51:11Z", "pr_url": "https://github.com/payara/Payara/pull/4409", "timeline": [{"oid": "d473a21a7a9ac1db17b30201e91a631a8d970c62", "url": "https://github.com/payara/Payara/commit/d473a21a7a9ac1db17b30201e91a631a8d970c62", "message": "Delete JVM options with min max versions. CUSTOM-142.", "committedDate": "2020-01-06T12:42:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDU4ODg4OA==", "url": "https://github.com/payara/Payara/pull/4409#discussion_r364588888", "body": "This method has expectations ... it expects that formatting is done in option.toString() and it's result will be same as strings in bag1.getJvmRawOptions(). \r\nSeems fragile to me, \r\n\r\ngetJvmRawOptions does not have javadoc, but it looks it is the content of the XML element.\r\nJvmOption.toString prints also minVersion and maxVersion, seems it is really symetric at this moment ... ok.\r\n", "bodyText": "This method has expectations ... it expects that formatting is done in option.toString() and it's result will be same as strings in bag1.getJvmRawOptions().\nSeems fragile to me,\ngetJvmRawOptions does not have javadoc, but it looks it is the content of the XML element.\nJvmOption.toString prints also minVersion and maxVersion, seems it is really symetric at this moment ... ok.", "bodyHTML": "<p dir=\"auto\">This method has expectations ... it expects that formatting is done in option.toString() and it's result will be same as strings in bag1.getJvmRawOptions().<br>\nSeems fragile to me,</p>\n<p dir=\"auto\">getJvmRawOptions does not have javadoc, but it looks it is the content of the XML element.<br>\nJvmOption.toString prints also minVersion and maxVersion, seems it is really symetric at this moment ... ok.</p>", "author": "dmatej", "createdAt": "2020-01-09T07:24:48Z", "path": "nucleus/core/kernel/src/main/java/com/sun/enterprise/v3/admin/commands/DeleteJvmOptions.java", "diffHunk": "@@ -162,7 +162,8 @@ private void deleteX(final JvmOptionBag bag, final List<String> toRemove, final\n         SingleConfigCode<JvmOptionBag> scc = (JvmOptionBag bag1) -> {\n             List<String> jvmopts = new ArrayList<>(bag1.getJvmRawOptions());\n             int orig = jvmopts.size();\n-            boolean removed = jvmopts.removeIf(option -> toRemove.contains(new JvmOption(option).option));\n+            // using new JvmOption(option).toString() (instead op option directly) to make sure the correct formatting is applied.\n+            boolean removed = jvmopts.removeIf(option -> toRemove.contains(new JvmOption(option).toString()));", "originalCommit": "d473a21a7a9ac1db17b30201e91a631a8d970c62", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}