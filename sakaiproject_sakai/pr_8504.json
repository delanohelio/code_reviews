{"pr_number": 8504, "pr_title": "SAK-44195 - Use Ignite to move key pairs around the cluster", "pr_author": "csev", "pr_createdAt": "2020-09-02T01:02:51Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8504", "timeline": [{"oid": "16cb30824881a4133343eef7e78e420fd427855f", "url": "https://github.com/sakaiproject/sakai/commit/16cb30824881a4133343eef7e78e420fd427855f", "message": "SAK-44195 - Use Ignite to move key pairs around the cluster", "committedDate": "2020-09-02T01:02:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA4Njk3Mw==", "url": "https://github.com/sakaiproject/sakai/pull/8504#discussion_r482086973", "body": "Instead of getting the underlying Cache implementation its best to use the spring Cache Manager:\r\n\r\n```org.sakaiproject.ignite.SakaiCacheManager```\r\n\r\nThis Cache Manager is already enabled so all you really to do in your tool is just turn on scanning with:\r\n\r\n```<cache:annotation-driven cache-manager=\"org.sakaiproject.ignite.SakaiCacheManager\"/>```\r\n\r\nAnd use the annotations like:\r\n@CachePut\r\n@CacheEvict\r\n\r\nSee this guide:\r\nhttps://www.baeldung.com/spring-cache-tutorial", "bodyText": "Instead of getting the underlying Cache implementation its best to use the spring Cache Manager:\norg.sakaiproject.ignite.SakaiCacheManager\nThis Cache Manager is already enabled so all you really to do in your tool is just turn on scanning with:\n<cache:annotation-driven cache-manager=\"org.sakaiproject.ignite.SakaiCacheManager\"/>\nAnd use the annotations like:\n@CachePut\n@CacheEvict\nSee this guide:\nhttps://www.baeldung.com/spring-cache-tutorial", "bodyHTML": "<p dir=\"auto\">Instead of getting the underlying Cache implementation its best to use the spring Cache Manager:</p>\n<p dir=\"auto\"><code>org.sakaiproject.ignite.SakaiCacheManager</code></p>\n<p dir=\"auto\">This Cache Manager is already enabled so all you really to do in your tool is just turn on scanning with:</p>\n<p dir=\"auto\"><code>&lt;cache:annotation-driven cache-manager=\"org.sakaiproject.ignite.SakaiCacheManager\"/&gt;</code></p>\n<p dir=\"auto\">And use the annotations like:<br>\n@CachePut<br>\n@CacheEvict</p>\n<p dir=\"auto\">See this guide:<br>\n<a href=\"https://www.baeldung.com/spring-cache-tutorial\" rel=\"nofollow\">https://www.baeldung.com/spring-cache-tutorial</a></p>", "author": "ern", "createdAt": "2020-09-02T13:53:57Z", "path": "basiclti/basiclti-blis/src/java/org/sakaiproject/lti13/LTI13Servlet.java", "diffHunk": "@@ -117,13 +120,25 @@\n \t// TODO: Rotate these after a while\n \tprivate KeyPair tokenKeyPair = null;\n \n+    protected static Ignite ignite = null;\n+    protected static IgniteCache<String, String> igniteCache = null;\n+\n+\tprivate static final String CACHE_NAME = LTI13Servlet.class.getName() + \"_cache\";\n+\tprivate static final String CACHE_PUBLIC = \"key::public\";\n+\tprivate static final String CACHE_PRIVATE = \"key::private\";\n+\n \t@Override\n \tpublic void init(ServletConfig config) throws ServletException {\n \t\tsuper.init(config);\n \t\tif (ltiService == null) {\n \t\t\tltiService = (LTIService) ComponentManager.get(\"org.sakaiproject.lti.api.LTIService\");\n \t\t}\n \n+        if (igniteCache == null) {\n+            Ignite ignite = (Ignite) ComponentManager.get(\"org.sakaiproject.ignite.SakaiIgnite\");", "originalCommit": "16cb30824881a4133343eef7e78e420fd427855f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}