{"pr_number": 1976, "pr_title": "Improve OLAP queries for BerkeleyDB", "pr_author": "mad", "pr_createdAt": "2020-02-18T16:49:00Z", "pr_url": "https://github.com/JanusGraph/janusgraph/pull/1976", "timeline": [{"oid": "f1ac81803b292cdc8d9dc7d815189bfd0cfe13ee", "url": "https://github.com/JanusGraph/janusgraph/commit/f1ac81803b292cdc8d9dc7d815189bfd0cfe13ee", "message": "Improve OLAP queries for BerkeleyDB\n\nIntroduce CACHE_MODE parameters\nAvoid interruption if store unsupported it\n\nSigned-off-by: Pavel Ershov <owner.mad.epa@gmail.com>", "committedDate": "2020-02-19T16:54:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgyMTExNw==", "url": "https://github.com/JanusGraph/janusgraph/pull/1976#discussion_r381821117", "body": "![Codacy](https://app.codacy.com/assets/images/favicon.png) Issue found: [An instanceof check is being performed on the caught exception.  Create a separate catch clause for this exception type.](https://app.codacy.com/manual/JanusGraph/janusgraph/pullRequest?prid=5026056)", "bodyText": "Issue found: An instanceof check is being performed on the caught exception.  Create a separate catch clause for this exception type.", "bodyHTML": "<p dir=\"auto\"><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://camo.githubusercontent.com/ddf013cbb1295b347431f8757e505fb295e9c7dd5043d9a3a0bf610dd0bb0da7/68747470733a2f2f6170702e636f646163792e636f6d2f6173736574732f696d616765732f66617669636f6e2e706e67\"><img src=\"https://camo.githubusercontent.com/ddf013cbb1295b347431f8757e505fb295e9c7dd5043d9a3a0bf610dd0bb0da7/68747470733a2f2f6170702e636f646163792e636f6d2f6173736574732f696d616765732f66617669636f6e2e706e67\" alt=\"Codacy\" data-canonical-src=\"https://app.codacy.com/assets/images/favicon.png\" style=\"max-width: 100%;\"></a> Issue found: <a href=\"https://app.codacy.com/manual/JanusGraph/janusgraph/pullRequest?prid=5026056\" rel=\"nofollow\">An instanceof check is being performed on the caught exception.  Create a separate catch clause for this exception type.</a></p>", "author": "FlorianHockmann", "createdAt": "2020-02-20T07:21:47Z", "path": "janusgraph-core/src/main/java/org/janusgraph/diskstorage/log/kcvs/KCVSLog.java", "diffHunk": "@@ -741,6 +741,9 @@ public void run() {\n                 }\n                 messageTimeStart = messageTimeEnd;\n             } catch (Throwable e) {\n+                if (e instanceof PermanentBackendException) {", "originalCommit": "f1ac81803b292cdc8d9dc7d815189bfd0cfe13ee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc4MDA2OA==", "url": "https://github.com/JanusGraph/janusgraph/pull/1976#discussion_r384780068", "bodyText": "Good point", "author": "farodin91", "createdAt": "2020-02-26T21:34:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgyMTExNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTEzMTg1OA==", "url": "https://github.com/JanusGraph/janusgraph/pull/1976#discussion_r415131858", "bodyText": "I add another fix for that. PermanentBackendException will be contains in Throwable cause but not direct exception", "author": "mad", "createdAt": "2020-04-25T19:53:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgyMTExNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc3ODcwNA==", "url": "https://github.com/JanusGraph/janusgraph/pull/1976#discussion_r384778704", "body": "It would be good to know all possibilities here.", "bodyText": "It would be good to know all possibilities here.", "bodyHTML": "<p dir=\"auto\">It would be good to know all possibilities here.</p>", "author": "farodin91", "createdAt": "2020-02-26T21:31:56Z", "path": "janusgraph-berkeleyje/src/main/java/org/janusgraph/diskstorage/berkeleyje/BerkeleyJEStoreManager.java", "diffHunk": "@@ -67,6 +67,11 @@\n             \"The BDB record lock mode used for read operations\",\n             ConfigOption.Type.MASKABLE, String.class, LockMode.DEFAULT.toString(), disallowEmpty(String.class));\n \n+    public static final ConfigOption<String> CACHE_MODE =\n+        new ConfigOption<>(BERKELEY_NS, \"cache-mode\",\n+            \"Modes that can be specified for control over caching of records in the JE in-memory cache\",\n+            ConfigOption.Type.MASKABLE,  String.class, CacheMode.DEFAULT.toString(), disallowEmpty(String.class));", "originalCommit": "f1ac81803b292cdc8d9dc7d815189bfd0cfe13ee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTEyNzY1MQ==", "url": "https://github.com/JanusGraph/janusgraph/pull/1976#discussion_r415127651", "bodyText": "I don't think this possibilities will be useful, because it is internal modes of bdb and for understanding it required consult with javadoc", "author": "mad", "createdAt": "2020-04-25T19:28:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDc3ODcwNA=="}], "type": "inlineReview"}, {"oid": "cb99a4bd1490d8f0e813a40a785914ab6bb4988b", "url": "https://github.com/JanusGraph/janusgraph/commit/cb99a4bd1490d8f0e813a40a785914ab6bb4988b", "message": "Improve OLAP queries for BerkeleyDB\n\nIntroduce CACHE_MODE parameters\nAvoid interruption if store unsupported it\n\nSigned-off-by: Pavel Ershov <owner.mad.epa@gmail.com>", "committedDate": "2020-04-25T19:26:36Z", "type": "commit"}, {"oid": "cb99a4bd1490d8f0e813a40a785914ab6bb4988b", "url": "https://github.com/JanusGraph/janusgraph/commit/cb99a4bd1490d8f0e813a40a785914ab6bb4988b", "message": "Improve OLAP queries for BerkeleyDB\n\nIntroduce CACHE_MODE parameters\nAvoid interruption if store unsupported it\n\nSigned-off-by: Pavel Ershov <owner.mad.epa@gmail.com>", "committedDate": "2020-04-25T19:26:36Z", "type": "forcePushed"}]}