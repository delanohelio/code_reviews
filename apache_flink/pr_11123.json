{"pr_number": 11123, "pr_title": "[FLINK-16014][s3] Force usage of SAXParserFactory over XMLReaderFactory in aws-java-sdk-s3.", "pr_author": "AHeise", "pr_createdAt": "2020-02-18T13:18:34Z", "pr_url": "https://github.com/apache/flink/pull/11123", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY5MTYwOQ==", "url": "https://github.com/apache/flink/pull/11123#discussion_r380691609", "body": "add a note that this can be removed once Java8 support is dropped?", "bodyText": "add a note that this can be removed once Java8 support is dropped?", "bodyHTML": "<p dir=\"auto\">add a note that this can be removed once Java8 support is dropped?</p>", "author": "zentol", "createdAt": "2020-02-18T14:06:25Z", "path": "flink-filesystems/flink-s3-fs-base/src/main/java/org/xml/sax/helpers/XMLReaderFactory.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.xml.sax.helpers;\n+\n+import org.apache.xerces.jaxp.SAXParserFactoryImpl;\n+import org.xml.sax.SAXException;\n+import org.xml.sax.XMLReader;\n+\n+import javax.xml.parsers.ParserConfigurationException;\n+import javax.xml.parsers.SAXParserFactory;\n+\n+/**\n+ * Workaround for JDK-8015099, this factory always provides a bundled xerces parser for plugins.\n+ *\n+ * <p>Will provide a proper isolation for all kinds of different setups (other sax parser in lib or bundled in user\n+ * code).\n+ */\n+public class XMLReaderFactory {", "originalCommit": "83b98e39b163308ede9d79d2f905d6c12f23203b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "86c767d21b0e1b49e068fb086741776aa7d56b3e", "url": "https://github.com/apache/flink/commit/86c767d21b0e1b49e068fb086741776aa7d56b3e", "message": "[FLINK-16014][s3] Force usage of SAXParserFactory over XMLReaderFactory in aws-java-sdk-s3.\n\nThis avoids a ClassNotFound exception of the underlying XML reader class in plugin classloaders.\nRoot cause is a bug in JDK8 (JDK-8015099). XMLReaderFactory caches the class name independent of the classloader. On EMR, xercesImpl is on classpath (because of HDFS) and will be loaded at some point in time.", "committedDate": "2020-03-06T16:56:47Z", "type": "commit"}]}