{"pr_number": 10874, "pr_title": "[FLINK-15552][table api] parameters --library and --jar doesn't work for DDL in sqlClient", "pr_author": "leonardBang", "pr_createdAt": "2020-01-16T14:46:09Z", "pr_url": "https://github.com/apache/flink/pull/10874", "timeline": [{"oid": "d55a80e9da0760f4a1d39ff60f50ac9cb8e40557", "url": "https://github.com/apache/flink/commit/d55a80e9da0760f4a1d39ff60f50ac9cb8e40557", "message": "[FLINK-15552][table api] parameters --library and --jar doesn't work for DDL in sqlClient", "committedDate": "2020-01-16T14:39:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzczODc0NA==", "url": "https://github.com/apache/flink/pull/10874#discussion_r367738744", "body": "We can simplify it a bit more:\r\n\r\n```java\r\n\t\t\tClassLoader cl = classLoader.orElse(Thread.currentThread().getContextClassLoader());\r\n\t\t\tServiceLoader\r\n\t\t\t\t.load(TableFactory.class, cl)\r\n\t\t\t\t.iterator()\r\n\t\t\t\t.forEachRemaining(result::add);\r\n```", "bodyText": "We can simplify it a bit more:\n\t\t\tClassLoader cl = classLoader.orElse(Thread.currentThread().getContextClassLoader());\n\t\t\tServiceLoader\n\t\t\t\t.load(TableFactory.class, cl)\n\t\t\t\t.iterator()\n\t\t\t\t.forEachRemaining(result::add);", "bodyHTML": "<p dir=\"auto\">We can simplify it a bit more:</p>\n<div class=\"highlight highlight-source-java position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"\t\t\tClassLoader cl = classLoader.orElse(Thread.currentThread().getContextClassLoader());\n\t\t\tServiceLoader\n\t\t\t\t.load(TableFactory.class, cl)\n\t\t\t\t.iterator()\n\t\t\t\t.forEachRemaining(result::add);\n\"><pre>\t\t\t<span class=\"pl-smi\">ClassLoader</span> cl <span class=\"pl-k\">=</span> classLoader<span class=\"pl-k\">.</span>orElse(<span class=\"pl-smi\">Thread</span><span class=\"pl-k\">.</span>currentThread()<span class=\"pl-k\">.</span>getContextClassLoader());\n\t\t\t<span class=\"pl-smi\">ServiceLoader</span>\n\t\t\t\t.load(<span class=\"pl-smi\">TableFactory</span><span class=\"pl-k\">.</span>class, cl)\n\t\t\t\t.iterator()\n\t\t\t\t.forEachRemaining(result<span class=\"pl-k\">::</span>add);</pre></div>", "author": "wuchong", "createdAt": "2020-01-17T02:03:48Z", "path": "flink-table/flink-table-common/src/main/java/org/apache/flink/table/factories/TableFactoryService.java", "diffHunk": "@@ -214,7 +213,10 @@\n \t\t\t\t\t.iterator()\n \t\t\t\t\t.forEachRemaining(result::add);\n \t\t\t} else {\n-\t\t\t\tdefaultLoader.iterator().forEachRemaining(result::add);\n+\t\t\t\tServiceLoader\n+\t\t\t\t\t.load(TableFactory.class, Thread.currentThread().getContextClassLoader())\n+\t\t\t\t\t.iterator()\n+\t\t\t\t\t.forEachRemaining(result::add);\n \t\t\t}", "originalCommit": "d55a80e9da0760f4a1d39ff60f50ac9cb8e40557", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc0MDU1Mw==", "url": "https://github.com/apache/flink/pull/10874#discussion_r367740553", "bodyText": "nice tips", "author": "leonardBang", "createdAt": "2020-01-17T02:12:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzczODc0NA=="}], "type": "inlineReview"}, {"oid": "c956c947157110421ea2a1f29f1d0d67040875cd", "url": "https://github.com/apache/flink/commit/c956c947157110421ea2a1f29f1d0d67040875cd", "message": "1.fix ScalaShellITcase 2. address comment", "committedDate": "2020-01-17T08:56:59Z", "type": "commit"}, {"oid": "0012c39e883a1d1685dd1f09d08d460370b82151", "url": "https://github.com/apache/flink/commit/0012c39e883a1d1685dd1f09d08d460370b82151", "message": "fix typo", "committedDate": "2020-01-17T10:10:47Z", "type": "commit"}]}