{"pr_number": 4425, "pr_title": "Replace specific enqueue options with one", "pr_author": "vkay94", "pr_createdAt": "2020-10-06T12:55:41Z", "pr_url": "https://github.com/TeamNewPipe/NewPipe/pull/4425", "timeline": [{"oid": "cd515993f5ee47edd17aa737b537ab3c614b671d", "url": "https://github.com/TeamNewPipe/NewPipe/commit/cd515993f5ee47edd17aa737b537ab3c614b671d", "message": "Enqueue: Add auto-select StreamDialogEntry for current PlayerType", "committedDate": "2020-10-06T11:33:44Z", "type": "commit"}, {"oid": "ed6fc4d848ba113c1087ca453541af08752e4316", "url": "https://github.com/TeamNewPipe/NewPipe/commit/ed6fc4d848ba113c1087ca453541af08752e4316", "message": "Enqueue: Replaced specific StreamDialogEntry items with one\n\nThe enqueue options won't be shown in the dialogs if the Player service is not running. When it's running one item (enqueue stream) will be shown and enqueues the item into the Player type which is currently selected.", "committedDate": "2020-10-06T12:38:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI1NzI3Mw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4425#discussion_r500257273", "body": "br br?", "bodyText": "br br?", "bodyHTML": "<p dir=\"auto\">br br?</p>", "author": "opusforlife2", "createdAt": "2020-10-06T13:03:17Z", "path": "app/src/main/java/org/schabi/newpipe/util/StreamDialogEntry.java", "diffHunk": "@@ -1,21 +1,61 @@\n package org.schabi.newpipe.util;\n \n import android.content.Context;\n+import android.widget.Toast;\n \n import androidx.fragment.app.Fragment;\n \n import org.schabi.newpipe.R;\n import org.schabi.newpipe.extractor.stream.StreamInfoItem;\n import org.schabi.newpipe.local.dialog.PlaylistAppendDialog;\n+import org.schabi.newpipe.player.MainPlayer;\n+import org.schabi.newpipe.player.helper.PlayerHolder;\n import org.schabi.newpipe.player.playqueue.SinglePlayQueue;\n \n+import java.util.ArrayList;\n import java.util.Collections;\n \n public enum StreamDialogEntry {\n     //////////////////////////////////////\n     // enum values with DEFAULT actions //\n     //////////////////////////////////////\n \n+    /**\n+     * Enqueues the stream automatically to the current PlayerType.<br>\n+     * <br>", "originalCommit": "ed6fc4d848ba113c1087ca453541af08752e4316", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI1ODg3MQ==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4425#discussion_r500258871", "bodyText": "This is  just Java Doc syntax for linebreaks.", "author": "vkay94", "createdAt": "2020-10-06T13:05:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI1NzI3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI1OTY5Mg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4425#discussion_r500259692", "bodyText": "Ah.", "author": "opusforlife2", "createdAt": "2020-10-06T13:06:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI1NzI3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI4MjgwNg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4425#discussion_r500282806", "body": "Add a method to `VideoPlayerImpl` that just returns the `playerType` field", "bodyText": "Add a method to VideoPlayerImpl that just returns the playerType field", "bodyHTML": "<p dir=\"auto\">Add a method to <code>VideoPlayerImpl</code> that just returns the <code>playerType</code> field</p>", "author": "Stypox", "createdAt": "2020-10-06T13:36:34Z", "path": "app/src/main/java/org/schabi/newpipe/player/helper/PlayerHolder.java", "diffHunk": "@@ -31,6 +35,24 @@ private PlayerHolder() {\n     private static MainPlayer playerService;\n     private static VideoPlayerImpl player;\n \n+    /**\n+     * Returns the current {@link MainPlayer.PlayerType} of the {@link MainPlayer} service,\n+     * otherwise `null` if no service running.\n+     *\n+     * @return Current PlayerType\n+     */\n+    @Nullable\n+    public static MainPlayer.PlayerType getType() {\n+        if (player == null) {\n+            return null;\n+        }\n+\n+        return player.videoPlayerSelected() ? MainPlayer.PlayerType.VIDEO\n+                : player.popupPlayerSelected() ? MainPlayer.PlayerType.POPUP\n+                : player.audioPlayerSelected() ? MainPlayer.PlayerType.AUDIO\n+                : null;", "originalCommit": "ed6fc4d848ba113c1087ca453541af08752e4316", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDMwMTcwMg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4425#discussion_r500301702", "bodyText": "Alright, I keep the static method in PlayerHolder, so it will call return player.getPlayerType().", "author": "vkay94", "createdAt": "2020-10-06T13:56:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI4MjgwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI4OTMzNw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4425#discussion_r500289337", "body": "I think you can replace this part with something like this, and call it a day. As you said the `type` can never theoretically be `null` or an invalid value, so we can just include that impossible situation into the condition for opening the main video player (enqueueing when there is no player does not raise errors, but just opens that player).\r\n```suggestion\r\n        if (type == AUDIO) {\r\n            NavigationHelper.enqueueOnBackgroundPlayer(fragment.getContext(),\r\n                    new SinglePlayQueue(item), false);\r\n        } else if (type == POPUP) {\r\n            NavigationHelper.enqueueOnPopupPlayer(fragment.getContext(),\r\n                    new SinglePlayQueue(item), false);\r\n        } else /* type == VIDEO */ {\r\n            NavigationHelper.enqueueOnVideoPlayer(fragment.getContext(),\r\n                    new SinglePlayQueue(item), false);\r\n        }\r\n```", "bodyText": "I think you can replace this part with something like this, and call it a day. As you said the type can never theoretically be null or an invalid value, so we can just include that impossible situation into the condition for opening the main video player (enqueueing when there is no player does not raise errors, but just opens that player).\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (type == null) {\n          \n          \n            \n                        // This code shouldn't be reached since the checks for appending this entry should be\n          \n          \n            \n                        // done within the showStreamDialog calls.\n          \n          \n            \n                        Toast.makeText(fragment.getContext(),\n          \n          \n            \n                                \"No player currently playing\", Toast.LENGTH_SHORT).show();\n          \n          \n            \n                        return;\n          \n          \n            \n                    }\n          \n          \n            \n                    switch (type) {\n          \n          \n            \n                        case AUDIO:\n          \n          \n            \n                            NavigationHelper.enqueueOnBackgroundPlayer(fragment.getContext(),\n          \n          \n            \n                                    new SinglePlayQueue(item), false);\n          \n          \n            \n                            break;\n          \n          \n            \n                        case POPUP:\n          \n          \n            \n                            NavigationHelper.enqueueOnPopupPlayer(fragment.getContext(),\n          \n          \n            \n                                    new SinglePlayQueue(item), false);\n          \n          \n            \n                            break;\n          \n          \n            \n                        case VIDEO:\n          \n          \n            \n                            NavigationHelper.enqueueOnVideoPlayer(fragment.getContext(),\n          \n          \n            \n                                    new SinglePlayQueue(item), false);\n          \n          \n            \n                            break;\n          \n          \n            \n                        default:\n          \n          \n            \n                            // Same as above, but keep it for now for debugging.\n          \n          \n            \n                            Toast.makeText(fragment.getContext(),\n          \n          \n            \n                                    \"Unreachable code executed\", Toast.LENGTH_SHORT).show();\n          \n          \n            \n                            break;\n          \n          \n            \n                    }\n          \n          \n            \n                    if (type == AUDIO) {\n          \n          \n            \n                        NavigationHelper.enqueueOnBackgroundPlayer(fragment.getContext(),\n          \n          \n            \n                                new SinglePlayQueue(item), false);\n          \n          \n            \n                    } else if (type == POPUP) {\n          \n          \n            \n                        NavigationHelper.enqueueOnPopupPlayer(fragment.getContext(),\n          \n          \n            \n                                new SinglePlayQueue(item), false);\n          \n          \n            \n                    } else /* type == VIDEO */ {\n          \n          \n            \n                        NavigationHelper.enqueueOnVideoPlayer(fragment.getContext(),\n          \n          \n            \n                                new SinglePlayQueue(item), false);\n          \n          \n            \n                    }", "bodyHTML": "<p dir=\"auto\">I think you can replace this part with something like this, and call it a day. As you said the <code>type</code> can never theoretically be <code>null</code> or an invalid value, so we can just include that impossible situation into the condition for opening the main video player (enqueueing when there is no player does not raise errors, but just opens that player).</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-k\">if</span> (type <span class=\"pl-k\">==</span> <span class=\"pl-c1\">null</span>) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-c\"><span class=\"pl-c\">//</span> This code shouldn't be reached since the checks for appending this entry should be</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-c\"><span class=\"pl-c\">//</span> done within the showStreamDialog calls.</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-smi\">Toast</span><span class=\"pl-k\">.</span>makeText(fragment<span class=\"pl-k\">.</span>getContext(),</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                    <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>No player currently playing<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-smi\">Toast</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>LENGTH_SHORT</span>)<span class=\"pl-k\">.</span>show();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-k\">return</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-k\">switch</span> (type) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-k\">case</span> <span class=\"pl-c1\">AUDIO</span><span class=\"pl-k\">:</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"pl-smi\">NavigationHelper</span><span class=\"pl-k\">.</span>enqueueOnBackgroundPlayer(fragment<span class=\"pl-k\">.</span>getContext(),</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                        <span class=\"pl-k\">new</span> <span class=\"pl-smi\">SinglePlayQueue</span>(item), <span class=\"pl-c1\">false</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"pl-k\">break</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-k\">case</span> <span class=\"pl-c1\">POPUP</span><span class=\"pl-k\">:</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"pl-smi\">NavigationHelper</span><span class=\"pl-k\">.</span>enqueueOnPopupPlayer(fragment<span class=\"pl-k\">.</span>getContext(),</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                        <span class=\"pl-k\">new</span> <span class=\"pl-smi\">SinglePlayQueue</span>(item), <span class=\"pl-c1\">false</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"pl-k\">break</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-k\">case</span> <span class=\"pl-c1\">VIDEO</span><span class=\"pl-k\">:</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"pl-smi\">NavigationHelper</span><span class=\"pl-k\">.</span>enqueueOnVideoPlayer(fragment<span class=\"pl-k\">.</span>getContext(),</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                        <span class=\"pl-k\">new</span> <span class=\"pl-smi\">SinglePlayQueue</span>(item), <span class=\"pl-c1\">false</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"pl-k\">break</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-k\">default</span><span class=\"pl-k\">:</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"pl-c\"><span class=\"pl-c\">//</span> Same as above, but keep it for now for debugging.</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"pl-smi\">Toast</span><span class=\"pl-k\">.</span>makeText(fragment<span class=\"pl-k\">.</span>getContext(),</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Unreachable code executed<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-smi\">Toast</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>LENGTH_SHORT</span>)<span class=\"pl-k\">.</span>show();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"pl-k\">break</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-k\">if</span> (type <span class=\"pl-k\">==</span> <span class=\"pl-c1\">AUDIO</span>) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            <span class=\"pl-smi\">NavigationHelper</span><span class=\"pl-k\">.</span>enqueueOnBackgroundPlayer(fragment<span class=\"pl-k\">.</span>getContext(),</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                    <span class=\"pl-k\">new</span> <span class=\"pl-smi\">SinglePlayQueue</span>(item), <span class=\"pl-c1\">false</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (type <span class=\"pl-k\">==</span> <span class=\"pl-c1\">POPUP</span>) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            <span class=\"pl-smi\">NavigationHelper</span><span class=\"pl-k\">.</span>enqueueOnPopupPlayer(fragment<span class=\"pl-k\">.</span>getContext(),</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                    <span class=\"pl-k\">new</span> <span class=\"pl-smi\">SinglePlayQueue</span>(item), <span class=\"pl-c1\">false</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        } <span class=\"pl-k\">else</span> <span class=\"pl-c\"><span class=\"pl-c\">/*</span> type == VIDEO <span class=\"pl-c\">*/</span></span> {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            <span class=\"pl-smi\">NavigationHelper</span><span class=\"pl-k\">.</span>enqueueOnVideoPlayer(fragment<span class=\"pl-k\">.</span>getContext(),</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                    <span class=\"pl-k\">new</span> <span class=\"pl-smi\">SinglePlayQueue</span>(item), <span class=\"pl-c1\">false</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        }</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Stypox", "createdAt": "2020-10-06T13:43:27Z", "path": "app/src/main/java/org/schabi/newpipe/util/StreamDialogEntry.java", "diffHunk": "@@ -1,21 +1,61 @@\n package org.schabi.newpipe.util;\n \n import android.content.Context;\n+import android.widget.Toast;\n \n import androidx.fragment.app.Fragment;\n \n import org.schabi.newpipe.R;\n import org.schabi.newpipe.extractor.stream.StreamInfoItem;\n import org.schabi.newpipe.local.dialog.PlaylistAppendDialog;\n+import org.schabi.newpipe.player.MainPlayer;\n+import org.schabi.newpipe.player.helper.PlayerHolder;\n import org.schabi.newpipe.player.playqueue.SinglePlayQueue;\n \n+import java.util.ArrayList;\n import java.util.Collections;\n \n public enum StreamDialogEntry {\n     //////////////////////////////////////\n     // enum values with DEFAULT actions //\n     //////////////////////////////////////\n \n+    /**\n+     * Enqueues the stream automatically to the current PlayerType.<br>\n+     * <br>\n+     * Info: Add this entry within showStreamDialog.\n+     */\n+    enqueue_stream(R.string.enqueue_stream, (fragment, item) -> {\n+        final MainPlayer.PlayerType type = PlayerHolder.getType();\n+\n+        if (type == null) {\n+            // This code shouldn't be reached since the checks for appending this entry should be\n+            // done within the showStreamDialog calls.\n+            Toast.makeText(fragment.getContext(),\n+                    \"No player currently playing\", Toast.LENGTH_SHORT).show();\n+            return;\n+        }\n+        switch (type) {\n+            case AUDIO:\n+                NavigationHelper.enqueueOnBackgroundPlayer(fragment.getContext(),\n+                        new SinglePlayQueue(item), false);\n+                break;\n+            case POPUP:\n+                NavigationHelper.enqueueOnPopupPlayer(fragment.getContext(),\n+                        new SinglePlayQueue(item), false);\n+                break;\n+            case VIDEO:\n+                NavigationHelper.enqueueOnVideoPlayer(fragment.getContext(),\n+                        new SinglePlayQueue(item), false);\n+                break;\n+            default:\n+                // Same as above, but keep it for now for debugging.\n+                Toast.makeText(fragment.getContext(),\n+                        \"Unreachable code executed\", Toast.LENGTH_SHORT).show();\n+                break;\n+        }", "originalCommit": "ed6fc4d848ba113c1087ca453541af08752e4316", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDMwMzU0NA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4425#discussion_r500303544", "bodyText": "I kept it before reviews, when there might occur something unexpected, but yeah, I'll make it more compact.", "author": "vkay94", "createdAt": "2020-10-06T13:58:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI4OTMzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI5MDI2Mg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4425#discussion_r500290262", "body": "Remove this and the one below, since they are now unused.", "bodyText": "Remove this and the one below, since they are now unused.", "bodyHTML": "<p dir=\"auto\">Remove this and the one below, since they are now unused.</p>", "author": "Stypox", "createdAt": "2020-10-06T13:44:24Z", "path": "app/src/main/java/org/schabi/newpipe/util/StreamDialogEntry.java", "diffHunk": "@@ -1,21 +1,61 @@\n package org.schabi.newpipe.util;\n \n import android.content.Context;\n+import android.widget.Toast;\n \n import androidx.fragment.app.Fragment;\n \n import org.schabi.newpipe.R;\n import org.schabi.newpipe.extractor.stream.StreamInfoItem;\n import org.schabi.newpipe.local.dialog.PlaylistAppendDialog;\n+import org.schabi.newpipe.player.MainPlayer;\n+import org.schabi.newpipe.player.helper.PlayerHolder;\n import org.schabi.newpipe.player.playqueue.SinglePlayQueue;\n \n+import java.util.ArrayList;\n import java.util.Collections;\n \n public enum StreamDialogEntry {\n     //////////////////////////////////////\n     // enum values with DEFAULT actions //\n     //////////////////////////////////////\n \n+    /**\n+     * Enqueues the stream automatically to the current PlayerType.<br>\n+     * <br>\n+     * Info: Add this entry within showStreamDialog.\n+     */\n+    enqueue_stream(R.string.enqueue_stream, (fragment, item) -> {\n+        final MainPlayer.PlayerType type = PlayerHolder.getType();\n+\n+        if (type == null) {\n+            // This code shouldn't be reached since the checks for appending this entry should be\n+            // done within the showStreamDialog calls.\n+            Toast.makeText(fragment.getContext(),\n+                    \"No player currently playing\", Toast.LENGTH_SHORT).show();\n+            return;\n+        }\n+        switch (type) {\n+            case AUDIO:\n+                NavigationHelper.enqueueOnBackgroundPlayer(fragment.getContext(),\n+                        new SinglePlayQueue(item), false);\n+                break;\n+            case POPUP:\n+                NavigationHelper.enqueueOnPopupPlayer(fragment.getContext(),\n+                        new SinglePlayQueue(item), false);\n+                break;\n+            case VIDEO:\n+                NavigationHelper.enqueueOnVideoPlayer(fragment.getContext(),\n+                        new SinglePlayQueue(item), false);\n+                break;\n+            default:\n+                // Same as above, but keep it for now for debugging.\n+                Toast.makeText(fragment.getContext(),\n+                        \"Unreachable code executed\", Toast.LENGTH_SHORT).show();\n+                break;\n+        }\n+    }),\n+\n     enqueue_on_background(R.string.enqueue_on_background, (fragment, item) ->", "originalCommit": "ed6fc4d848ba113c1087ca453541af08752e4316", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDMwNDk5MQ==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4425#discussion_r500304991", "bodyText": "I didn't want to remove it before review. I'll remove it alongside the strings ;)", "author": "vkay94", "createdAt": "2020-10-06T13:59:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI5MDI2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDI5MTI5MA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4425#discussion_r500291290", "body": "```suggestion\r\n    public static void setEnabledEntries(final List<StreamDialogEntry> entries) {\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static void setEnabledEntries(final ArrayList<StreamDialogEntry> entries) {\n          \n          \n            \n                public static void setEnabledEntries(final List<StreamDialogEntry> entries) {", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">void</span> setEnabledEntries(<span class=\"pl-k\">final</span> <span class=\"pl-k\"><span class=\"x x-first x-last\">ArrayList</span>&lt;<span class=\"pl-smi\">StreamDialogEntry</span>&gt;</span> entries) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">void</span> setEnabledEntries(<span class=\"pl-k\">final</span> <span class=\"pl-k\"><span class=\"x x-first x-last\">List</span>&lt;<span class=\"pl-smi\">StreamDialogEntry</span>&gt;</span> entries) {</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Stypox", "createdAt": "2020-10-06T13:45:26Z", "path": "app/src/main/java/org/schabi/newpipe/util/StreamDialogEntry.java", "diffHunk": "@@ -69,6 +109,10 @@\n     // non-static methods to initialize and edit entries //\n     ///////////////////////////////////////////////////////\n \n+    public static void setEnabledEntries(final ArrayList<StreamDialogEntry> entries) {", "originalCommit": "ed6fc4d848ba113c1087ca453541af08752e4316", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "12f615c6da39b7220569c5172899dc8e1c17bbd1", "url": "https://github.com/TeamNewPipe/NewPipe/commit/12f615c6da39b7220569c5172899dc8e1c17bbd1", "message": "Enqueue: Removed unneeded dialog-entries and strings + adjustments", "committedDate": "2020-10-06T15:22:12Z", "type": "commit"}, {"oid": "cbf364f24f775122555122d2705332a086b27eba", "url": "https://github.com/TeamNewPipe/NewPipe/commit/cbf364f24f775122555122d2705332a086b27eba", "message": "Enqueue: Renamed string resource", "committedDate": "2020-10-06T19:17:52Z", "type": "commit"}]}