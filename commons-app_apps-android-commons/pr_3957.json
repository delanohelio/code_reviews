{"pr_number": 3957, "pr_title": "Fix category links in media detail", "pr_createdAt": "2020-10-09T10:52:49Z", "pr_url": "https://github.com/commons-app/apps-android-commons/pull/3957", "merge_commit": "174db88ae86686035892e5541561daf447c55f35", "timeline": [{"oid": "3d0d35585e42e516b7f6f47e7474049231e214b7", "url": "https://github.com/commons-app/apps-android-commons/commit/3d0d35585e42e516b7f6f47e7474049231e214b7", "message": "Fix category links in media detail", "committedDate": "2020-10-17T19:28:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkyNTg0Nw==", "url": "https://github.com/commons-app/apps-android-commons/pull/3957#discussion_r512925847", "body": "The `CategoryClientKt.CATEGORY_PREFIX` static import in this file is not necessary anymore. So, it can be removed.", "bodyText": "The CategoryClientKt.CATEGORY_PREFIX static import in this file is not necessary anymore. So, it can be removed.", "bodyHTML": "<p dir=\"auto\">The <code>CategoryClientKt.CATEGORY_PREFIX</code> static import in this file is not necessary anymore. So, it can be removed.</p>", "author": "sivaraam", "createdAt": "2020-10-27T18:17:44Z", "path": "app/src/main/java/fr/free/nrw/commons/media/MediaDetailFragment.java", "diffHunk": "@@ -837,9 +840,8 @@ private View buildCatLabel(final String catName, ViewGroup categoryContainer) {\n         if(!getString(R.string.detail_panel_cats_none).equals(catName)) {\n             textView.setOnClickListener(view -> {\n                 // Open Category Details page\n-                String selectedCategoryTitle = CATEGORY_PREFIX + catName;", "originalCommit": "3d0d35585e42e516b7f6f47e7474049231e214b7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkyNzc5Mw==", "url": "https://github.com/commons-app/apps-android-commons/pull/3957#discussion_r512927793", "body": "I believe it's better to use the `CATEGORY_PREFIX` variable from `CategoryClient` here rather than hard coding the prefix.", "bodyText": "I believe it's better to use the CATEGORY_PREFIX variable from CategoryClient here rather than hard coding the prefix.", "bodyHTML": "<p dir=\"auto\">I believe it's better to use the <code>CATEGORY_PREFIX</code> variable from <code>CategoryClient</code> here rather than hard coding the prefix.</p>", "author": "sivaraam", "createdAt": "2020-10-27T18:20:41Z", "path": "app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java", "diffHunk": "@@ -181,7 +182,8 @@ public boolean onOptionsItemSelected(MenuItem item) {\n         // Handle item selection\n         switch (item.getItemId()) {\n             case R.id.menu_browser_current_category:\n-                Utils.handleWebUrl(this, Uri.parse(Utils.getPageTitle(categoryName).getCanonicalUri()));\n+                PageTitle title = Utils.getPageTitle(String.format(\"Category:%s\", categoryName));", "originalCommit": "3d0d35585e42e516b7f6f47e7474049231e214b7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc5NDQzNQ==", "url": "https://github.com/commons-app/apps-android-commons/pull/3957#discussion_r515794435", "bodyText": "You're right, I have done that now.", "author": "FliegendeWurst", "createdAt": "2020-11-02T08:02:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkyNzc5Mw=="}], "type": "inlineReview", "revised_code": {"commit": "2b3eac99ba9b75def1f8113f6018b277c6ca3f46", "changed_code": [{"header": "diff --git a/app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java b/app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java\nindex 3e54914e9..5e180c50f 100644\n--- a/app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java\n+++ b/app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java\n", "chunk": "@@ -182,7 +184,7 @@ public class CategoryDetailsActivity extends NavigationBaseActivity\n         // Handle item selection\n         switch (item.getItemId()) {\n             case R.id.menu_browser_current_category:\n-                PageTitle title = Utils.getPageTitle(String.format(\"Category:%s\", categoryName));\n+                PageTitle title = Utils.getPageTitle(CATEGORY_PREFIX + categoryName);\n                 Utils.handleWebUrl(this, Uri.parse(title.getCanonicalUri()));\n                 return true;\n             default:\n", "next_change": null}]}, "revised_code_in_main": {"commit": "174db88ae86686035892e5541561daf447c55f35", "changed_code": [{"header": "diff --git a/app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java b/app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java\nindex 3e54914e9..87704bf35 100644\n--- a/app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java\n+++ b/app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java\n", "chunk": "@@ -182,7 +182,7 @@ public class CategoryDetailsActivity extends NavigationBaseActivity\n         // Handle item selection\n         switch (item.getItemId()) {\n             case R.id.menu_browser_current_category:\n-                PageTitle title = Utils.getPageTitle(String.format(\"Category:%s\", categoryName));\n+                PageTitle title = Utils.getPageTitle(CATEGORY_PREFIX + categoryName);\n                 Utils.handleWebUrl(this, Uri.parse(title.getCanonicalUri()));\n                 return true;\n             default:\n", "next_change": {"commit": "a4bdd237181a32d790b6186068ad8135587c0186", "changed_code": [{"header": "diff --git a/app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java b/app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java\nindex 87704bf35..749221547 100644\n--- a/app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java\n+++ b/app/src/main/java/fr/free/nrw/commons/category/CategoryDetailsActivity.java\n", "chunk": "@@ -185,6 +188,9 @@ public class CategoryDetailsActivity extends BaseActivity\n                 PageTitle title = Utils.getPageTitle(CATEGORY_PREFIX + categoryName);\n                 Utils.handleWebUrl(this, Uri.parse(title.getCanonicalUri()));\n                 return true;\n+            case android.R.id.home:\n+                onBackPressed();\n+                return true;\n             default:\n                 return super.onOptionsItemSelected(item);\n         }\n", "next_change": null}]}}]}, "commits_in_main": [{"oid": "174db88ae86686035892e5541561daf447c55f35", "message": "Merge commit", "committedDate": null}, {"oid": "38f80687b16ababa0c57d501f71c34853a85f069", "committedDate": "2021-02-15 21:50:30 +0900", "message": "Remove duplicate ViewPagerAdapter (#4222)"}, {"oid": "6293f909506ad96cd309c4cb55793981c966d447", "committedDate": "2021-02-17 16:37:29 +0900", "message": "fix app crash in CategoryDetailsActivity (#4233)"}, {"oid": "a4bdd237181a32d790b6186068ad8135587c0186", "committedDate": "2021-03-03 15:39:42 +0300", "message": "fix:Explore Search: No title bar for item, non-existent menu for item, wrongly-worded menu for category  (#4274)"}, {"oid": "f8a8f9207028a6fb5a35483c040821f22daf755e", "committedDate": "2021-04-19 17:19:27 +0300", "message": "Fixes #4329 \"Back button in edit categories triggers back of media details.\" (#4346)"}, {"oid": "ca18763e4f4898e9725a0d79de0690e32fe58b85", "committedDate": "2021-06-04 11:15:39 +0900", "message": "Fixes #2815 - Nominating for deletion is cancelled on leaving the media details (#4295)"}, {"oid": "11292ab514aca061bced0ff5a92401e068febaec", "committedDate": "2022-04-11 19:30:21 +0900", "message": "Fixes 4620 : Editing categories of an existing picture: Reuse categories selection UI from the Upload Wizard (#4928)"}]}, {"oid": "2b3eac99ba9b75def1f8113f6018b277c6ca3f46", "url": "https://github.com/commons-app/apps-android-commons/commit/2b3eac99ba9b75def1f8113f6018b277c6ca3f46", "message": "Fix category links in media detail", "committedDate": "2020-11-02T07:49:26Z", "type": "forcePushed"}, {"oid": "6276621b1576c5327129eecae22324c4df690c0d", "url": "https://github.com/commons-app/apps-android-commons/commit/6276621b1576c5327129eecae22324c4df690c0d", "message": "Fix category links in media detail", "committedDate": "2020-11-02T08:01:43Z", "type": "commit"}, {"oid": "6276621b1576c5327129eecae22324c4df690c0d", "url": "https://github.com/commons-app/apps-android-commons/commit/6276621b1576c5327129eecae22324c4df690c0d", "message": "Fix category links in media detail", "committedDate": "2020-11-02T08:01:43Z", "type": "forcePushed"}]}