{"pr_number": 2227, "pr_title": "Add basic AmmoStorage tests", "pr_author": "sixlettervariables", "pr_createdAt": "2020-11-13T19:56:59Z", "pr_url": "https://github.com/MegaMek/mekhq/pull/2227", "timeline": [{"oid": "a6c0045ad41b02b3e42bb4c4a8fea78107436060", "url": "https://github.com/MegaMek/mekhq/commit/a6c0045ad41b02b3e42bb4c4a8fea78107436060", "message": "Avoid NRE in AmmoStorage::isSamePartType", "committedDate": "2020-11-13T19:06:19Z", "type": "commit"}, {"oid": "1c9ab46727da3a368dd55646f5fd09947bb9899b", "url": "https://github.com/MegaMek/mekhq/commit/1c9ab46727da3a368dd55646f5fd09947bb9899b", "message": "Add basic AmmoStorage tests", "committedDate": "2020-11-13T19:54:48Z", "type": "commit"}, {"oid": "103dd774175a0338fc88cd817bcb182a7103cb46", "url": "https://github.com/MegaMek/mekhq/commit/103dd774175a0338fc88cd817bcb182a7103cb46", "message": "Add basic AmmoStorage::changeAmountAvailable tests", "committedDate": "2020-11-13T20:34:12Z", "type": "commit"}, {"oid": "33d5b0b35d51bc1db44d9920cbef2872c785e98f", "url": "https://github.com/MegaMek/mekhq/commit/33d5b0b35d51bc1db44d9920cbef2872c785e98f", "message": "Fix bug found testing BombType ammo", "committedDate": "2020-11-14T18:44:01Z", "type": "commit"}, {"oid": "2f396dd4acf25118142a3e902e50ffb575fdc7a5", "url": "https://github.com/MegaMek/mekhq/commit/2f396dd4acf25118142a3e902e50ffb575fdc7a5", "message": "Add tests confirming bomb types are respected", "committedDate": "2020-11-14T18:55:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ2NTQ3Ng==", "url": "https://github.com/MegaMek/mekhq/pull/2227#discussion_r523465476", "body": "```suggestion\r\n         return ((double) shots / getType().getShots());\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                     return ((double)shots / getType().getShots());\n          \n          \n            \n                     return ((double) shots / getType().getShots());", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">         <span class=\"pl-k\">return</span> ((<span class=\"pl-k\">double</span>)shots <span class=\"pl-k\">/</span> getType()<span class=\"pl-k\">.</span>getShots());</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">         <span class=\"pl-k\">return</span> ((<span class=\"pl-k\">double</span>)<span class=\"x x-first x-last\"> </span>shots <span class=\"pl-k\">/</span> getType()<span class=\"pl-k\">.</span>getShots());</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-11-14T21:30:09Z", "path": "MekHQ/src/mekhq/campaign/parts/AmmoStorage.java", "diffHunk": "@@ -77,10 +72,10 @@ public AmmoType getType() {\n \n     @Override\n     public double getTonnage() {\n-    \tif (getType().getKgPerShot() > 0) {\n-    \t\treturn getType().getKgPerShot() * shots/1000.0;\n-    \t}\n-     \treturn ((double)shots / getType().getShots());\n+        if (getType().getKgPerShot() > 0) {\n+            return getType().getKgPerShot() * shots/1000.0;\n+        }\n+         return ((double)shots / getType().getShots());", "originalCommit": "2f396dd4acf25118142a3e902e50ffb575fdc7a5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ2NTQ4NQ==", "url": "https://github.com/MegaMek/mekhq/pull/2227#discussion_r523465485", "body": "```suggestion\r\n            return getType().getKgPerShot() * (shots / 1000.0);\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        return getType().getKgPerShot() * shots/1000.0;\n          \n          \n            \n                        return getType().getKgPerShot() * (shots / 1000.0);", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-k\">return</span> getType()<span class=\"pl-k\">.</span>getKgPerShot() <span class=\"pl-k\">*</span> shots<span class=\"pl-k x x-first x-last\">/</span><span class=\"pl-c1\">1000.0</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            <span class=\"pl-k\">return</span> getType()<span class=\"pl-k\">.</span>getKgPerShot() <span class=\"pl-k\">*</span> <span class=\"x x-first x-last\">(</span>shots<span class=\"x x-first\"> </span><span class=\"pl-k x\">/</span><span class=\"x x-last\"> </span><span class=\"pl-c1\">1000.0</span><span class=\"x x-first x-last\">)</span>;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-11-14T21:30:24Z", "path": "MekHQ/src/mekhq/campaign/parts/AmmoStorage.java", "diffHunk": "@@ -77,10 +72,10 @@ public AmmoType getType() {\n \n     @Override\n     public double getTonnage() {\n-    \tif (getType().getKgPerShot() > 0) {\n-    \t\treturn getType().getKgPerShot() * shots/1000.0;\n-    \t}\n-     \treturn ((double)shots / getType().getShots());\n+        if (getType().getKgPerShot() > 0) {\n+            return getType().getKgPerShot() * shots/1000.0;", "originalCommit": "2f396dd4acf25118142a3e902e50ffb575fdc7a5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ2NjQ3NA==", "url": "https://github.com/MegaMek/mekhq/pull/2227#discussion_r523466474", "body": "```suggestion\r\n        // ... and the new part should be identical in ALMOST every way...\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // ...and the new part should be identical in ALMOST every way...\n          \n          \n            \n                    // ... and the new part should be identical in ALMOST every way...", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...and the new part should be identical in ALMOST every way...</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...<span class=\"x x-first x-last\"> </span>and the new part should be identical in ALMOST every way...</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-11-14T21:40:06Z", "path": "MekHQ/unittests/mekhq/campaign/parts/AmmoStorageTest.java", "diffHunk": "@@ -20,13 +20,795 @@\n package mekhq.campaign.parts;\n \n import static org.junit.Assert.*;\n+import static org.mockito.Mockito.*;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.PrintWriter;\n+import java.io.StringWriter;\n+\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.ParserConfigurationException;\n \n import org.junit.Test;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Element;\n+import org.xml.sax.SAXException;\n+\n+import megamek.common.AmmoType;\n+import megamek.common.BombType;\n+import megamek.common.EquipmentType;\n+import mekhq.MekHqXmlUtil;\n+import mekhq.Version;\n+import mekhq.campaign.Campaign;\n+import mekhq.campaign.Quartermaster;\n+import mekhq.campaign.Warehouse;\n+import mekhq.campaign.finances.Money;\n+import mekhq.campaign.parts.equipment.AmmoBin;\n+import mekhq.campaign.work.IAcquisitionWork;\n \n public class AmmoStorageTest {\n     @Test\n     public void ammoStorageDeserializationCtorTest() {\n         AmmoStorage ammoStorage = new AmmoStorage();\n         assertNotNull(ammoStorage);\n     }\n+\n+    @Test\n+    public void ammoStorageCtorTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        assertEquals(ammoType, ammoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoType, ammoStorage.getType()));\n+        assertEquals(ammoType.getShots(), ammoStorage.getShots());\n+        assertEquals(1.0, ammoStorage.getTonnage(), 0.001);\n+    }\n+\n+    @Test\n+    public void getMissingPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        // There should be no missing part.\n+        assertNull(ammoStorage.getMissingPart());\n+    }\n+\n+    @Test\n+    public void cloneTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        AmmoStorage clone = ammoStorage.clone();\n+        assertNotNull(clone);\n+\n+        assertEquals(ammoStorage.getType(), clone.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), clone.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), clone.getBuyCost());\n+        assertEquals(ammoStorage.getCurrentValue(), clone.getCurrentValue());\n+        assertEquals(ammoStorage.getShots(), clone.getShots());\n+    }\n+\n+    @Test\n+    public void getNewPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new part...\n+        AmmoStorage newAmmoStorage = ammoStorage.getNewPart();\n+        assertNotNull(newAmmoStorage);\n+\n+        // ...and the new part should be identical in ALMOST every way...", "originalCommit": "2f396dd4acf25118142a3e902e50ffb575fdc7a5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ2NjQ4NA==", "url": "https://github.com/MegaMek/mekhq/pull/2227#discussion_r523466484", "body": "```suggestion\r\n        // ... except for the number of shots, which should be instead\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // ...except for the number of shots, which should be instead\n          \n          \n            \n                    // ... except for the number of shots, which should be instead", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...except for the number of shots, which should be instead</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...<span class=\"x x-first x-last\"> </span>except for the number of shots, which should be instead</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-11-14T21:40:17Z", "path": "MekHQ/unittests/mekhq/campaign/parts/AmmoStorageTest.java", "diffHunk": "@@ -20,13 +20,795 @@\n package mekhq.campaign.parts;\n \n import static org.junit.Assert.*;\n+import static org.mockito.Mockito.*;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.PrintWriter;\n+import java.io.StringWriter;\n+\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.ParserConfigurationException;\n \n import org.junit.Test;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Element;\n+import org.xml.sax.SAXException;\n+\n+import megamek.common.AmmoType;\n+import megamek.common.BombType;\n+import megamek.common.EquipmentType;\n+import mekhq.MekHqXmlUtil;\n+import mekhq.Version;\n+import mekhq.campaign.Campaign;\n+import mekhq.campaign.Quartermaster;\n+import mekhq.campaign.Warehouse;\n+import mekhq.campaign.finances.Money;\n+import mekhq.campaign.parts.equipment.AmmoBin;\n+import mekhq.campaign.work.IAcquisitionWork;\n \n public class AmmoStorageTest {\n     @Test\n     public void ammoStorageDeserializationCtorTest() {\n         AmmoStorage ammoStorage = new AmmoStorage();\n         assertNotNull(ammoStorage);\n     }\n+\n+    @Test\n+    public void ammoStorageCtorTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        assertEquals(ammoType, ammoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoType, ammoStorage.getType()));\n+        assertEquals(ammoType.getShots(), ammoStorage.getShots());\n+        assertEquals(1.0, ammoStorage.getTonnage(), 0.001);\n+    }\n+\n+    @Test\n+    public void getMissingPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        // There should be no missing part.\n+        assertNull(ammoStorage.getMissingPart());\n+    }\n+\n+    @Test\n+    public void cloneTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        AmmoStorage clone = ammoStorage.clone();\n+        assertNotNull(clone);\n+\n+        assertEquals(ammoStorage.getType(), clone.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), clone.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), clone.getBuyCost());\n+        assertEquals(ammoStorage.getCurrentValue(), clone.getCurrentValue());\n+        assertEquals(ammoStorage.getShots(), clone.getShots());\n+    }\n+\n+    @Test\n+    public void getNewPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new part...\n+        AmmoStorage newAmmoStorage = ammoStorage.getNewPart();\n+        assertNotNull(newAmmoStorage);\n+\n+        // ...and the new part should be identical in ALMOST every way...\n+        assertEquals(ammoStorage.getType(), newAmmoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), newAmmoStorage.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), newAmmoStorage.getBuyCost());\n+\n+        // ...except for the number of shots, which should be instead", "originalCommit": "2f396dd4acf25118142a3e902e50ffb575fdc7a5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ2NjUwMw==", "url": "https://github.com/MegaMek/mekhq/pull/2227#discussion_r523466503", "body": "```suggestion\r\n        // ...except for the number of shots, which should be instead\r\n```\r\n```suggestion\r\n        // ... except for the number of shots, which should be instead\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // ...except for the number of shots, which should be instead\n          \n          \n            \n                    // ...except for the number of shots, which should be instead\n          \n      \n    \n    \n  \n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // ...except for the number of shots, which should be instead\n          \n          \n            \n                    // ... except for the number of shots, which should be instead", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...except for the number of shots, which should be instead</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...except for the number of shots, which should be instead</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...except for the number of shots, which should be instead</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...<span class=\"x x-first x-last\"> </span>except for the number of shots, which should be instead</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-11-14T21:40:25Z", "path": "MekHQ/unittests/mekhq/campaign/parts/AmmoStorageTest.java", "diffHunk": "@@ -20,13 +20,795 @@\n package mekhq.campaign.parts;\n \n import static org.junit.Assert.*;\n+import static org.mockito.Mockito.*;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.PrintWriter;\n+import java.io.StringWriter;\n+\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.ParserConfigurationException;\n \n import org.junit.Test;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Element;\n+import org.xml.sax.SAXException;\n+\n+import megamek.common.AmmoType;\n+import megamek.common.BombType;\n+import megamek.common.EquipmentType;\n+import mekhq.MekHqXmlUtil;\n+import mekhq.Version;\n+import mekhq.campaign.Campaign;\n+import mekhq.campaign.Quartermaster;\n+import mekhq.campaign.Warehouse;\n+import mekhq.campaign.finances.Money;\n+import mekhq.campaign.parts.equipment.AmmoBin;\n+import mekhq.campaign.work.IAcquisitionWork;\n \n public class AmmoStorageTest {\n     @Test\n     public void ammoStorageDeserializationCtorTest() {\n         AmmoStorage ammoStorage = new AmmoStorage();\n         assertNotNull(ammoStorage);\n     }\n+\n+    @Test\n+    public void ammoStorageCtorTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        assertEquals(ammoType, ammoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoType, ammoStorage.getType()));\n+        assertEquals(ammoType.getShots(), ammoStorage.getShots());\n+        assertEquals(1.0, ammoStorage.getTonnage(), 0.001);\n+    }\n+\n+    @Test\n+    public void getMissingPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        // There should be no missing part.\n+        assertNull(ammoStorage.getMissingPart());\n+    }\n+\n+    @Test\n+    public void cloneTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        AmmoStorage clone = ammoStorage.clone();\n+        assertNotNull(clone);\n+\n+        assertEquals(ammoStorage.getType(), clone.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), clone.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), clone.getBuyCost());\n+        assertEquals(ammoStorage.getCurrentValue(), clone.getCurrentValue());\n+        assertEquals(ammoStorage.getShots(), clone.getShots());\n+    }\n+\n+    @Test\n+    public void getNewPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new part...\n+        AmmoStorage newAmmoStorage = ammoStorage.getNewPart();\n+        assertNotNull(newAmmoStorage);\n+\n+        // ...and the new part should be identical in ALMOST every way...\n+        assertEquals(ammoStorage.getType(), newAmmoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), newAmmoStorage.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), newAmmoStorage.getBuyCost());\n+\n+        // ...except for the number of shots, which should be instead\n+        // equal to the default number of shots for the type.\n+        assertEquals(ammoType.getShots(), newAmmoStorage.getShots());\n+    }\n+\n+    @Test\n+    public void getNewEquipmentTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new part...\n+        AmmoStorage newAmmoStorage = ammoStorage.getNewEquipment();\n+        assertNotNull(newAmmoStorage);\n+\n+        // ...and the new part should be identical in ALMOST every way...\n+        assertEquals(ammoStorage.getType(), newAmmoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), newAmmoStorage.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), newAmmoStorage.getBuyCost());\n+\n+        // ...except for the number of shots, which should be instead", "originalCommit": "2f396dd4acf25118142a3e902e50ffb575fdc7a5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ2NjUxNg==", "url": "https://github.com/MegaMek/mekhq/pull/2227#discussion_r523466516", "body": "```suggestion\r\n        // ... and the new part should be identical in ALMOST every way...\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // ...and the new part should be identical in ALMOST every way...\n          \n          \n            \n                    // ... and the new part should be identical in ALMOST every way...", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...and the new part should be identical in ALMOST every way...</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...<span class=\"x x-first x-last\"> </span>and the new part should be identical in ALMOST every way...</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-11-14T21:40:28Z", "path": "MekHQ/unittests/mekhq/campaign/parts/AmmoStorageTest.java", "diffHunk": "@@ -20,13 +20,795 @@\n package mekhq.campaign.parts;\n \n import static org.junit.Assert.*;\n+import static org.mockito.Mockito.*;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.PrintWriter;\n+import java.io.StringWriter;\n+\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.ParserConfigurationException;\n \n import org.junit.Test;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Element;\n+import org.xml.sax.SAXException;\n+\n+import megamek.common.AmmoType;\n+import megamek.common.BombType;\n+import megamek.common.EquipmentType;\n+import mekhq.MekHqXmlUtil;\n+import mekhq.Version;\n+import mekhq.campaign.Campaign;\n+import mekhq.campaign.Quartermaster;\n+import mekhq.campaign.Warehouse;\n+import mekhq.campaign.finances.Money;\n+import mekhq.campaign.parts.equipment.AmmoBin;\n+import mekhq.campaign.work.IAcquisitionWork;\n \n public class AmmoStorageTest {\n     @Test\n     public void ammoStorageDeserializationCtorTest() {\n         AmmoStorage ammoStorage = new AmmoStorage();\n         assertNotNull(ammoStorage);\n     }\n+\n+    @Test\n+    public void ammoStorageCtorTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        assertEquals(ammoType, ammoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoType, ammoStorage.getType()));\n+        assertEquals(ammoType.getShots(), ammoStorage.getShots());\n+        assertEquals(1.0, ammoStorage.getTonnage(), 0.001);\n+    }\n+\n+    @Test\n+    public void getMissingPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        // There should be no missing part.\n+        assertNull(ammoStorage.getMissingPart());\n+    }\n+\n+    @Test\n+    public void cloneTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        AmmoStorage clone = ammoStorage.clone();\n+        assertNotNull(clone);\n+\n+        assertEquals(ammoStorage.getType(), clone.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), clone.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), clone.getBuyCost());\n+        assertEquals(ammoStorage.getCurrentValue(), clone.getCurrentValue());\n+        assertEquals(ammoStorage.getShots(), clone.getShots());\n+    }\n+\n+    @Test\n+    public void getNewPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new part...\n+        AmmoStorage newAmmoStorage = ammoStorage.getNewPart();\n+        assertNotNull(newAmmoStorage);\n+\n+        // ...and the new part should be identical in ALMOST every way...\n+        assertEquals(ammoStorage.getType(), newAmmoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), newAmmoStorage.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), newAmmoStorage.getBuyCost());\n+\n+        // ...except for the number of shots, which should be instead\n+        // equal to the default number of shots for the type.\n+        assertEquals(ammoType.getShots(), newAmmoStorage.getShots());\n+    }\n+\n+    @Test\n+    public void getNewEquipmentTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new part...\n+        AmmoStorage newAmmoStorage = ammoStorage.getNewEquipment();\n+        assertNotNull(newAmmoStorage);\n+\n+        // ...and the new part should be identical in ALMOST every way...", "originalCommit": "2f396dd4acf25118142a3e902e50ffb575fdc7a5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ2NjU1OA==", "url": "https://github.com/MegaMek/mekhq/pull/2227#discussion_r523466558", "body": "```suggestion\r\n        // ... and the new part should be identical in ALMOST every way...\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // ...and the new part should be identical in ALMOST every way...\n          \n          \n            \n                    // ... and the new part should be identical in ALMOST every way...", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...and the new part should be identical in ALMOST every way...</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...<span class=\"x x-first x-last\"> </span>and the new part should be identical in ALMOST every way...</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-11-14T21:41:07Z", "path": "MekHQ/unittests/mekhq/campaign/parts/AmmoStorageTest.java", "diffHunk": "@@ -20,13 +20,795 @@\n package mekhq.campaign.parts;\n \n import static org.junit.Assert.*;\n+import static org.mockito.Mockito.*;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.PrintWriter;\n+import java.io.StringWriter;\n+\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.ParserConfigurationException;\n \n import org.junit.Test;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Element;\n+import org.xml.sax.SAXException;\n+\n+import megamek.common.AmmoType;\n+import megamek.common.BombType;\n+import megamek.common.EquipmentType;\n+import mekhq.MekHqXmlUtil;\n+import mekhq.Version;\n+import mekhq.campaign.Campaign;\n+import mekhq.campaign.Quartermaster;\n+import mekhq.campaign.Warehouse;\n+import mekhq.campaign.finances.Money;\n+import mekhq.campaign.parts.equipment.AmmoBin;\n+import mekhq.campaign.work.IAcquisitionWork;\n \n public class AmmoStorageTest {\n     @Test\n     public void ammoStorageDeserializationCtorTest() {\n         AmmoStorage ammoStorage = new AmmoStorage();\n         assertNotNull(ammoStorage);\n     }\n+\n+    @Test\n+    public void ammoStorageCtorTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        assertEquals(ammoType, ammoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoType, ammoStorage.getType()));\n+        assertEquals(ammoType.getShots(), ammoStorage.getShots());\n+        assertEquals(1.0, ammoStorage.getTonnage(), 0.001);\n+    }\n+\n+    @Test\n+    public void getMissingPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        // There should be no missing part.\n+        assertNull(ammoStorage.getMissingPart());\n+    }\n+\n+    @Test\n+    public void cloneTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        AmmoStorage clone = ammoStorage.clone();\n+        assertNotNull(clone);\n+\n+        assertEquals(ammoStorage.getType(), clone.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), clone.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), clone.getBuyCost());\n+        assertEquals(ammoStorage.getCurrentValue(), clone.getCurrentValue());\n+        assertEquals(ammoStorage.getShots(), clone.getShots());\n+    }\n+\n+    @Test\n+    public void getNewPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new part...\n+        AmmoStorage newAmmoStorage = ammoStorage.getNewPart();\n+        assertNotNull(newAmmoStorage);\n+\n+        // ...and the new part should be identical in ALMOST every way...\n+        assertEquals(ammoStorage.getType(), newAmmoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), newAmmoStorage.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), newAmmoStorage.getBuyCost());\n+\n+        // ...except for the number of shots, which should be instead\n+        // equal to the default number of shots for the type.\n+        assertEquals(ammoType.getShots(), newAmmoStorage.getShots());\n+    }\n+\n+    @Test\n+    public void getNewEquipmentTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new part...\n+        AmmoStorage newAmmoStorage = ammoStorage.getNewEquipment();\n+        assertNotNull(newAmmoStorage);\n+\n+        // ...and the new part should be identical in ALMOST every way...\n+        assertEquals(ammoStorage.getType(), newAmmoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), newAmmoStorage.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), newAmmoStorage.getBuyCost());\n+\n+        // ...except for the number of shots, which should be instead\n+        // equal to the default number of shots for the type.\n+        assertEquals(ammoType.getShots(), newAmmoStorage.getShots());\n+    }\n+\n+    @Test\n+    public void getAcquisitionWorkTest() {\n+        AmmoType ammoType = getAmmoType(\"ISSRM6 Inferno Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new acquisition work...\n+        IAcquisitionWork acquisitionWork = ammoStorage.getAcquisitionWork();\n+        assertNotNull(acquisitionWork);\n+\n+        // Check getNewEquipment()...\n+        Object newEquipment = acquisitionWork.getNewEquipment();\n+        assertNotNull(newEquipment);\n+        assertTrue(newEquipment instanceof AmmoStorage);\n+\n+        AmmoStorage newAmmoStorage = (AmmoStorage) newEquipment;\n+\n+        // ...and the new part should be identical in ALMOST every way...", "originalCommit": "2f396dd4acf25118142a3e902e50ffb575fdc7a5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ2NjU2Ng==", "url": "https://github.com/MegaMek/mekhq/pull/2227#discussion_r523466566", "body": "```suggestion\r\n        // ... except for the number of shots, which should be instead\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // ...except for the number of shots, which should be instead\n          \n          \n            \n                    // ... except for the number of shots, which should be instead", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...except for the number of shots, which should be instead</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-c\"><span class=\"pl-c\">//</span> ...<span class=\"x x-first x-last\"> </span>except for the number of shots, which should be instead</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "Windchild292", "createdAt": "2020-11-14T21:41:15Z", "path": "MekHQ/unittests/mekhq/campaign/parts/AmmoStorageTest.java", "diffHunk": "@@ -20,13 +20,795 @@\n package mekhq.campaign.parts;\n \n import static org.junit.Assert.*;\n+import static org.mockito.Mockito.*;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.PrintWriter;\n+import java.io.StringWriter;\n+\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.ParserConfigurationException;\n \n import org.junit.Test;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Element;\n+import org.xml.sax.SAXException;\n+\n+import megamek.common.AmmoType;\n+import megamek.common.BombType;\n+import megamek.common.EquipmentType;\n+import mekhq.MekHqXmlUtil;\n+import mekhq.Version;\n+import mekhq.campaign.Campaign;\n+import mekhq.campaign.Quartermaster;\n+import mekhq.campaign.Warehouse;\n+import mekhq.campaign.finances.Money;\n+import mekhq.campaign.parts.equipment.AmmoBin;\n+import mekhq.campaign.work.IAcquisitionWork;\n \n public class AmmoStorageTest {\n     @Test\n     public void ammoStorageDeserializationCtorTest() {\n         AmmoStorage ammoStorage = new AmmoStorage();\n         assertNotNull(ammoStorage);\n     }\n+\n+    @Test\n+    public void ammoStorageCtorTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        assertEquals(ammoType, ammoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoType, ammoStorage.getType()));\n+        assertEquals(ammoType.getShots(), ammoStorage.getShots());\n+        assertEquals(1.0, ammoStorage.getTonnage(), 0.001);\n+    }\n+\n+    @Test\n+    public void getMissingPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        // There should be no missing part.\n+        assertNull(ammoStorage.getMissingPart());\n+    }\n+\n+    @Test\n+    public void cloneTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        AmmoStorage clone = ammoStorage.clone();\n+        assertNotNull(clone);\n+\n+        assertEquals(ammoStorage.getType(), clone.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), clone.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), clone.getBuyCost());\n+        assertEquals(ammoStorage.getCurrentValue(), clone.getCurrentValue());\n+        assertEquals(ammoStorage.getShots(), clone.getShots());\n+    }\n+\n+    @Test\n+    public void getNewPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new part...\n+        AmmoStorage newAmmoStorage = ammoStorage.getNewPart();\n+        assertNotNull(newAmmoStorage);\n+\n+        // ...and the new part should be identical in ALMOST every way...\n+        assertEquals(ammoStorage.getType(), newAmmoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), newAmmoStorage.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), newAmmoStorage.getBuyCost());\n+\n+        // ...except for the number of shots, which should be instead\n+        // equal to the default number of shots for the type.\n+        assertEquals(ammoType.getShots(), newAmmoStorage.getShots());\n+    }\n+\n+    @Test\n+    public void getNewEquipmentTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new part...\n+        AmmoStorage newAmmoStorage = ammoStorage.getNewEquipment();\n+        assertNotNull(newAmmoStorage);\n+\n+        // ...and the new part should be identical in ALMOST every way...\n+        assertEquals(ammoStorage.getType(), newAmmoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), newAmmoStorage.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), newAmmoStorage.getBuyCost());\n+\n+        // ...except for the number of shots, which should be instead\n+        // equal to the default number of shots for the type.\n+        assertEquals(ammoType.getShots(), newAmmoStorage.getShots());\n+    }\n+\n+    @Test\n+    public void getAcquisitionWorkTest() {\n+        AmmoType ammoType = getAmmoType(\"ISSRM6 Inferno Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new acquisition work...\n+        IAcquisitionWork acquisitionWork = ammoStorage.getAcquisitionWork();\n+        assertNotNull(acquisitionWork);\n+\n+        // Check getNewEquipment()...\n+        Object newEquipment = acquisitionWork.getNewEquipment();\n+        assertNotNull(newEquipment);\n+        assertTrue(newEquipment instanceof AmmoStorage);\n+\n+        AmmoStorage newAmmoStorage = (AmmoStorage) newEquipment;\n+\n+        // ...and the new part should be identical in ALMOST every way...\n+        assertEquals(ammoStorage.getType(), newAmmoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), newAmmoStorage.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), newAmmoStorage.getBuyCost());\n+\n+        // ...except for the number of shots, which should be instead", "originalCommit": "2f396dd4acf25118142a3e902e50ffb575fdc7a5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzQ2NzIzNQ==", "url": "https://github.com/MegaMek/mekhq/pull/2227#discussion_r523467235", "body": "Can you please fix the rest of these? The missing space isn't great w.r.t. accessibility.", "bodyText": "Can you please fix the rest of these? The missing space isn't great w.r.t. accessibility.", "bodyHTML": "<p dir=\"auto\">Can you please fix the rest of these? The missing space isn't great w.r.t. accessibility.</p>", "author": "Windchild292", "createdAt": "2020-11-14T21:48:34Z", "path": "MekHQ/unittests/mekhq/campaign/parts/AmmoStorageTest.java", "diffHunk": "@@ -20,13 +20,795 @@\n package mekhq.campaign.parts;\n \n import static org.junit.Assert.*;\n+import static org.mockito.Mockito.*;\n+\n+import java.io.ByteArrayInputStream;\n+import java.io.IOException;\n+import java.io.PrintWriter;\n+import java.io.StringWriter;\n+\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.ParserConfigurationException;\n \n import org.junit.Test;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Element;\n+import org.xml.sax.SAXException;\n+\n+import megamek.common.AmmoType;\n+import megamek.common.BombType;\n+import megamek.common.EquipmentType;\n+import mekhq.MekHqXmlUtil;\n+import mekhq.Version;\n+import mekhq.campaign.Campaign;\n+import mekhq.campaign.Quartermaster;\n+import mekhq.campaign.Warehouse;\n+import mekhq.campaign.finances.Money;\n+import mekhq.campaign.parts.equipment.AmmoBin;\n+import mekhq.campaign.work.IAcquisitionWork;\n \n public class AmmoStorageTest {\n     @Test\n     public void ammoStorageDeserializationCtorTest() {\n         AmmoStorage ammoStorage = new AmmoStorage();\n         assertNotNull(ammoStorage);\n     }\n+\n+    @Test\n+    public void ammoStorageCtorTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        assertEquals(ammoType, ammoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoType, ammoStorage.getType()));\n+        assertEquals(ammoType.getShots(), ammoStorage.getShots());\n+        assertEquals(1.0, ammoStorage.getTonnage(), 0.001);\n+    }\n+\n+    @Test\n+    public void getMissingPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, ammoType.getShots(), mockCampaign);\n+\n+        // There should be no missing part.\n+        assertNull(ammoStorage.getMissingPart());\n+    }\n+\n+    @Test\n+    public void cloneTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        AmmoStorage clone = ammoStorage.clone();\n+        assertNotNull(clone);\n+\n+        assertEquals(ammoStorage.getType(), clone.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), clone.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), clone.getBuyCost());\n+        assertEquals(ammoStorage.getCurrentValue(), clone.getCurrentValue());\n+        assertEquals(ammoStorage.getShots(), clone.getShots());\n+    }\n+\n+    @Test\n+    public void getNewPartTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new part...\n+        AmmoStorage newAmmoStorage = ammoStorage.getNewPart();\n+        assertNotNull(newAmmoStorage);\n+\n+        // ...and the new part should be identical in ALMOST every way...\n+        assertEquals(ammoStorage.getType(), newAmmoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), newAmmoStorage.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), newAmmoStorage.getBuyCost());\n+\n+        // ...except for the number of shots, which should be instead\n+        // equal to the default number of shots for the type.\n+        assertEquals(ammoType.getShots(), newAmmoStorage.getShots());\n+    }\n+\n+    @Test\n+    public void getNewEquipmentTest() {\n+        AmmoType ammoType = getAmmoType(\"ISAC5 Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new part...\n+        AmmoStorage newAmmoStorage = ammoStorage.getNewEquipment();\n+        assertNotNull(newAmmoStorage);\n+\n+        // ...and the new part should be identical in ALMOST every way...\n+        assertEquals(ammoStorage.getType(), newAmmoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), newAmmoStorage.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), newAmmoStorage.getBuyCost());\n+\n+        // ...except for the number of shots, which should be instead\n+        // equal to the default number of shots for the type.\n+        assertEquals(ammoType.getShots(), newAmmoStorage.getShots());\n+    }\n+\n+    @Test\n+    public void getAcquisitionWorkTest() {\n+        AmmoType ammoType = getAmmoType(\"ISSRM6 Inferno Ammo\");\n+        Campaign mockCampaign = mock(Campaign.class);\n+\n+        AmmoStorage ammoStorage = new AmmoStorage(0, ammoType, 2 * ammoType.getShots(), mockCampaign);\n+\n+        // Create a new acquisition work...\n+        IAcquisitionWork acquisitionWork = ammoStorage.getAcquisitionWork();\n+        assertNotNull(acquisitionWork);\n+\n+        // Check getNewEquipment()...\n+        Object newEquipment = acquisitionWork.getNewEquipment();\n+        assertNotNull(newEquipment);\n+        assertTrue(newEquipment instanceof AmmoStorage);\n+\n+        AmmoStorage newAmmoStorage = (AmmoStorage) newEquipment;\n+\n+        // ...and the new part should be identical in ALMOST every way...\n+        assertEquals(ammoStorage.getType(), newAmmoStorage.getType());\n+        assertTrue(AmmoStorage.isSameAmmoType(ammoStorage.getType(), newAmmoStorage.getType()));\n+        assertEquals(ammoStorage.getBuyCost(), newAmmoStorage.getBuyCost());\n+\n+        // ...except for the number of shots, which should be instead\n+        // equal to the default number of shots for the type.\n+        assertEquals(ammoType.getShots(), newAmmoStorage.getShots());\n+\n+        // Check getAcquisitionPart()\n+        Part acquisitionPart = acquisitionWork.getAcquisitionPart();\n+        assertNotNull(acquisitionPart);\n+        assertTrue(acquisitionPart instanceof AmmoStorage);\n+\n+        newAmmoStorage = (AmmoStorage) acquisitionPart;\n+\n+        // ...and the new part should be identical in ALMOST every way...", "originalCommit": "2f396dd4acf25118142a3e902e50ffb575fdc7a5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "62b54c342044c18c7f38a56a58ff32a4f3532b21", "url": "https://github.com/MegaMek/mekhq/commit/62b54c342044c18c7f38a56a58ff32a4f3532b21", "message": "Apply suggestions from code review\n\nCo-authored-by: Justin Bowen <39067288+Windchild292@users.noreply.github.com>", "committedDate": "2020-11-15T21:09:50Z", "type": "commit"}, {"oid": "b609bc7d985b4d0e7b4289a8f045daa5e7b4cd57", "url": "https://github.com/MegaMek/mekhq/commit/b609bc7d985b4d0e7b4289a8f045daa5e7b4cd57", "message": "Address review comments", "committedDate": "2020-11-15T21:20:27Z", "type": "commit"}]}