{"pr_number": 3695, "pr_title": "Issue/3685 form translations", "pr_author": "valllllll2000", "pr_createdAt": "2020-11-30T15:30:55Z", "pr_url": "https://github.com/akvo/akvo-flow/pull/3695", "timeline": [{"oid": "3651493b9a47f515c3cdfa9cc36101cf4ba0c5b2", "url": "https://github.com/akvo/akvo-flow/commit/3651493b9a47f515c3cdfa9cc36101cf4ba0c5b2", "message": "[#3685] added translations to question group", "committedDate": "2020-11-30T11:00:14Z", "type": "commit"}, {"oid": "2b0c37d0f3a338312a52fc33444d7de5448efe39", "url": "https://github.com/akvo/akvo-flow/commit/2b0c37d0f3a338312a52fc33444d7de5448efe39", "message": "[#3685] added test for group when no translations", "committedDate": "2020-11-30T11:56:33Z", "type": "commit"}, {"oid": "5beffd0004655ac096f63cf93c326f0ad8295ad7", "url": "https://github.com/akvo/akvo-flow/commit/5beffd0004655ac096f63cf93c326f0ad8295ad7", "message": "[#3685] use only \tquestion group name translation type", "committedDate": "2020-11-30T12:14:01Z", "type": "commit"}, {"oid": "bf6118be2bb310978ac782620bf565b4f60e7ab4", "url": "https://github.com/akvo/akvo-flow/commit/bf6118be2bb310978ac782620bf565b4f60e7ab4", "message": "[#3685] add translations to dto + add getters and setters", "committedDate": "2020-11-30T13:02:10Z", "type": "commit"}, {"oid": "7f2747f7cfd216f07442d5d2383dfe932933117e", "url": "https://github.com/akvo/akvo-flow/commit/7f2747f7cfd216f07442d5d2383dfe932933117e", "message": "[#3685] added form title translation to xml + added tests", "committedDate": "2020-11-30T14:54:22Z", "type": "commit"}, {"oid": "f9f6ee34766448f4a1a495a45deeeb87dcc2e562", "url": "https://github.com/akvo/akvo-flow/commit/f9f6ee34766448f4a1a495a45deeeb87dcc2e562", "message": "[#3685] remove commented out code", "committedDate": "2020-11-30T15:36:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg5Mzc5OQ==", "url": "https://github.com/akvo/akvo-flow/pull/3695#discussion_r532893799", "body": "```suggestion\r\n                form1.getObjectId(), Translation.ParentType.SURVEY_NAME;\r\n```\r\n\r\nPerhaps it should be the name instead?", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            form1.getObjectId(), Translation.ParentType.SURVEY_DESC);\n          \n          \n            \n                            form1.getObjectId(), Translation.ParentType.SURVEY_NAME;\n          \n      \n    \n    \n  \n\nPerhaps it should be the name instead?", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                form1<span class=\"pl-k\">.</span>getObjectId(), <span class=\"pl-smi\">Translation</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">ParentType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span><span class=\"x x-first\">SURVEY_DESC</span></span><span class=\"x x-last\">)</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                form1<span class=\"pl-k\">.</span>getObjectId(), <span class=\"pl-smi\">Translation</span><span class=\"pl-k\">.</span><span class=\"pl-smi\">ParentType</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span><span class=\"x x-first x-last\">SURVEY_NAME</span></span>;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n\n<p dir=\"auto\">Perhaps it should be the name instead?</p>", "author": "muloem", "createdAt": "2020-11-30T20:48:32Z", "path": "GAE/test/org/akvo/flow/xml/FlowXmlObjectWriterTests.java", "diffHunk": "@@ -513,4 +515,76 @@ void testSerialiseFormWithBarcode() throws IOException {\n         //And finally parse it to a DTO\n         SurveyDto dto = PublishedForm.parse(xml, true).toDto(); //be strict\n     }\n+\n+    @Test\n+    void testSerialiseQuestionLessFormWithTranslations() throws IOException {\n+\n+        //Mock up a form tree\n+        Survey form1 = new Survey();\n+        form1.setKey(KeyFactory.createKey(\"Survey\", 17L));\n+        form1.setName(\"This is a form\");\n+        form1.setVersion(11.0);\n+        form1.setSurveyGroupId(123L);\n+\n+        HashMap<String, Translation> translationHashMap = createTranslationMap(\"Formulario\", \"es\", form1.getObjectId(),\n+                form1.getObjectId(), Translation.ParentType.SURVEY_DESC);", "originalCommit": "f9f6ee34766448f4a1a495a45deeeb87dcc2e562", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b2b9399867fc42c8fc6715711ea9f9cc0b89c38e", "url": "https://github.com/akvo/akvo-flow/commit/b2b9399867fc42c8fc6715711ea9f9cc0b89c38e", "message": "Update GAE/test/org/akvo/flow/xml/FlowXmlObjectWriterTests.java\n\nCo-authored-by: Emmanuel Mulo <emmanuel@akvo.org>", "committedDate": "2020-11-30T20:52:54Z", "type": "commit"}, {"oid": "d30dc3f8acdc883a0cbca1e6697d8808587a289c", "url": "https://github.com/akvo/akvo-flow/commit/d30dc3f8acdc883a0cbca1e6697d8808587a289c", "message": "[#3685] fix compilation error", "committedDate": "2020-11-30T21:19:46Z", "type": "commit"}, {"oid": "61d3791ebdc1cf305d461c1fca56255d400d5083", "url": "https://github.com/akvo/akvo-flow/commit/61d3791ebdc1cf305d461c1fca56255d400d5083", "message": "[#3685] Merge branch 'master' into issue/3685-form-translations", "committedDate": "2020-11-30T21:29:36Z", "type": "commit"}, {"oid": "6729330fd704433951d48433d44b9021c0a4f6fe", "url": "https://github.com/akvo/akvo-flow/commit/6729330fd704433951d48433d44b9021c0a4f6fe", "message": "Merge branch 'master' into issue/3685-form-translations", "committedDate": "2020-11-30T21:35:18Z", "type": "commit"}, {"oid": "b5dde39e5dfe6c84a48edfbb94f3919c1aadb5df", "url": "https://github.com/akvo/akvo-flow/commit/b5dde39e5dfe6c84a48edfbb94f3919c1aadb5df", "message": "Merge branch 'issue/3685-form-translations' of github.com:akvo/akvo-flow into issue/3685-form-translations", "committedDate": "2020-11-30T21:35:36Z", "type": "commit"}]}