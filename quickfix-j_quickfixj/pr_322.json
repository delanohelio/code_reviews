{"pr_number": 322, "pr_title": "Fixed FIX message XML conversion", "pr_author": "the-thing", "pr_createdAt": "2020-10-19T16:31:45Z", "pr_url": "https://github.com/quickfix-j/quickfixj/pull/322", "merge_commit": "9df0fe1334b56449a448a985b80df77acae3813b", "timeline": [{"oid": "4702a84a79faf260856e8b352fc589d615ef0176", "url": "https://github.com/quickfix-j/quickfixj/commit/4702a84a79faf260856e8b352fc589d615ef0176", "message": "added indent-amount xml transformer property", "committedDate": "2020-10-20T11:33:45Z", "type": "forcePushed"}, {"oid": "274ab5c3732bceb0668e308346fb764e5c0192f4", "url": "https://github.com/quickfix-j/quickfixj/commit/274ab5c3732bceb0668e308346fb764e5c0192f4", "message": "FIX message XML indent can be chosen by flag", "committedDate": "2020-10-22T10:02:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDEzODE0Ng==", "url": "https://github.com/quickfix-j/quickfixj/pull/322#discussion_r510138146", "body": "I know it does not make any sense, but to be backward compatible we need to set `OutputKeys.INDENT, \"yes\"` without setting the `indent-amount`, right?", "bodyText": "I know it does not make any sense, but to be backward compatible we need to set OutputKeys.INDENT, \"yes\" without setting the indent-amount, right?", "bodyHTML": "<p dir=\"auto\">I know it does not make any sense, but to be backward compatible we need to set <code>OutputKeys.INDENT, \"yes\"</code> without setting the <code>indent-amount</code>, right?</p>", "author": "chrjohn", "createdAt": "2020-10-22T12:56:35Z", "path": "quickfixj-core/src/main/java/quickfix/Message.java", "diffHunk": "@@ -377,6 +377,8 @@ public String toXML(DataDictionary dataDictionary, boolean indent) {\n             if (indent) {\n                 serializer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n                 serializer.setOutputProperty(\"{http://xml.apache.org/xslt}indent-amount\", \"4\");\n+            } else {\n+                serializer.setOutputProperty(OutputKeys.INDENT, \"no\");", "originalCommit": "99a955b40a7545cf3ade2fe836b8e4e060ebfe4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDE0MDcyNA==", "url": "https://github.com/quickfix-j/quickfixj/pull/322#discussion_r510140724", "bodyText": "In theory. If we do that then we are backwards compatible, but we get different behaviour in Java 11. If we set to \"no\" we are backwards compatible and consistent across Java versions. (if we want to be fully backwards compatible with formatting we can go via option 1)\nBTW. Fixing another problem. Seems that there was a bug in Java 9/10/11 https://bugs.openjdk.java.net/browse/JDK-8215543 that also puts additional new line characters before and after CDATA elements when indent is enabled.", "author": "the-thing", "createdAt": "2020-10-22T13:00:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDEzODE0Ng=="}], "type": "inlineReview", "revised_code": null}, {"oid": "da3a0638ebc1e8bd2cf1a34745ef9b4031374ef4", "url": "https://github.com/quickfix-j/quickfixj/commit/da3a0638ebc1e8bd2cf1a34745ef9b4031374ef4", "message": "- added indent-amount xml transformer property\n\n- FIX message XML indent can be chosen by flag", "committedDate": "2020-10-28T15:09:10Z", "type": "forcePushed"}, {"oid": "5c345fbaf7626cc9c8d302583933c010abe6417d", "url": "https://github.com/quickfix-j/quickfixj/commit/5c345fbaf7626cc9c8d302583933c010abe6417d", "message": "- added indent-amount xml transformer property\n\n- FIX message XML indent can be chosen by flag", "committedDate": "2020-12-09T11:03:47Z", "type": "forcePushed"}, {"oid": "9c089126834a8177baeec0150f71b73bcbe4264e", "url": "https://github.com/quickfix-j/quickfixj/commit/9c089126834a8177baeec0150f71b73bcbe4264e", "message": "- added indent-amount xml transformer property\n\n- FIX message XML indent can be chosen by flag", "committedDate": "2020-12-23T09:08:04Z", "type": "commit"}, {"oid": "9c089126834a8177baeec0150f71b73bcbe4264e", "url": "https://github.com/quickfix-j/quickfixj/commit/9c089126834a8177baeec0150f71b73bcbe4264e", "message": "- added indent-amount xml transformer property\n\n- FIX message XML indent can be chosen by flag", "committedDate": "2020-12-23T09:08:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNzU2MTkwMg==", "url": "https://github.com/quickfix-j/quickfixj/pull/322#discussion_r627561902", "body": "```suggestion\r\n     * probably not sufficient for production use, but is more intended\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * probably not sufficient for production use, but it more intended\n          \n          \n            \n                 * probably not sufficient for production use, but is more intended", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">     <span class=\"pl-k\">*</span> probably not sufficient <span class=\"pl-k\">for</span> production use, but <span class=\"x x-first x-last\">it</span> more intended</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> probably not sufficient <span class=\"pl-k\">for</span> production use, but <span class=\"x x-first x-last\">is</span> more intended</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "chrjohn", "createdAt": "2021-05-06T16:07:02Z", "path": "quickfixj-core/src/main/java/quickfix/Message.java", "diffHunk": "@@ -316,7 +316,24 @@ public boolean trailerHasGroup(Group group) {\n      * @see #toXML(DataDictionary)\n      */\n     public String toXML() {\n-        return toXML(null);\n+        return toXML(false);\n+    }\n+\n+    /**\n+     * Converts the message into a simple XML format. This format is\n+     * probably not sufficient for production use, but it more intended", "originalCommit": "9c089126834a8177baeec0150f71b73bcbe4264e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "9e10b1d054dfc2b338baef4701cf12a3430ddd4b", "changed_code": [{"header": "diff --git a/quickfixj-core/src/main/java/quickfix/Message.java b/quickfixj-core/src/main/java/quickfix/Message.java\nindex deeba2bb..97b463bb 100644\n--- a/quickfixj-core/src/main/java/quickfix/Message.java\n+++ b/quickfixj-core/src/main/java/quickfix/Message.java\n", "chunk": "@@ -321,7 +321,7 @@ public class Message extends FieldMap {\n \n     /**\n      * Converts the message into a simple XML format. This format is\n-     * probably not sufficient for production use, but it more intended\n+     * probably not sufficient for production use, but is more intended\n      * for diagnostics and debugging. THIS IS NOT FIXML.\n      *\n      * To get names instead of tag number, use toXML(DataDictionary, boolean)\n", "next_change": null}]}}, {"oid": "9e10b1d054dfc2b338baef4701cf12a3430ddd4b", "url": "https://github.com/quickfix-j/quickfixj/commit/9e10b1d054dfc2b338baef4701cf12a3430ddd4b", "message": "Update quickfixj-core/src/main/java/quickfix/Message.java\r\n\r\nfixed small typo", "committedDate": "2021-05-06T16:07:50Z", "type": "commit"}, {"oid": "a20ad413c43475aa98a2901fed47c653bce937c1", "url": "https://github.com/quickfix-j/quickfixj/commit/a20ad413c43475aa98a2901fed47c653bce937c1", "message": "fixed typos", "committedDate": "2021-08-06T09:32:49Z", "type": "commit"}, {"oid": "d498d777b1e6e14d85b0282637fb05fca1a9d214", "url": "https://github.com/quickfix-j/quickfixj/commit/d498d777b1e6e14d85b0282637fb05fca1a9d214", "message": "Merge branch 'master' into test_whitespace_replacement", "committedDate": "2021-08-06T09:35:07Z", "type": "commit"}]}