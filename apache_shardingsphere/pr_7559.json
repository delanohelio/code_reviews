{"pr_number": 7559, "pr_title": "Refactor change unconfiguredSchemaMetaDataMap type to Map<String, Collection<String>>", "pr_author": "xbkaishui", "pr_createdAt": "2020-09-22T09:25:41Z", "pr_url": "https://github.com/apache/shardingsphere/pull/7559", "timeline": [{"oid": "bd1c888c7c0b72869d1746cd0b5a8312b9ee921f", "url": "https://github.com/apache/shardingsphere/commit/bd1c888c7c0b72869d1746cd0b5a8312b9ee921f", "message": "Refactor RuleSchemaMetaData.unconfiguredSchemaMetaDataMap to Map<String,Collection<String>>,  due to unconfigured table only need table name", "committedDate": "2020-09-22T09:20:49Z", "type": "commit"}, {"oid": "ec374dd2e7bef257ac7498d171bbe1ae3138baca", "url": "https://github.com/apache/shardingsphere/commit/ec374dd2e7bef257ac7498d171bbe1ae3138baca", "message": "fix checkstyle", "committedDate": "2020-09-22T09:31:01Z", "type": "commit"}, {"oid": "1a863d6c50b6ce1d58ede0e4201cd1ad0bdf4f6a", "url": "https://github.com/apache/shardingsphere/commit/1a863d6c50b6ce1d58ede0e4201cd1ad0bdf4f6a", "message": "fix checkstyle issue", "committedDate": "2020-09-22T10:18:25Z", "type": "commit"}, {"oid": "3d5a730dce5758c42d0f054c2c0066f2bec013af", "url": "https://github.com/apache/shardingsphere/commit/3d5a730dce5758c42d0f054c2c0066f2bec013af", "message": "fix test", "committedDate": "2020-09-22T11:51:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE4MzQzNg==", "url": "https://github.com/apache/shardingsphere/pull/7559#discussion_r493183436", "body": "Do you think the following change is possible?\r\n\r\n```java\r\n//  YamlRuleSchemaMetaData\r\n\r\nprivate Map<String, YamlSchemaMetaData> unconfiguredSchemaMetaDataMap;\r\n\r\nto\r\n\r\nprivate Map<String, Collection<String>> unconfiguredSchemaMetaDataMap;\r\n```\r\n\r\nSince a similar change is made in `RuleSchemaMetaData`, I suppose it will be better to keep `YamlRuleSchemaMetaData `  and `RuleSchemaMetaData` same. \r\n\r\nWhat do you think? FYI, please note this change will also alter the content for the registry center (`SchemaChangedListener` will be involved)", "bodyText": "Do you think the following change is possible?\n//  YamlRuleSchemaMetaData\n\nprivate Map<String, YamlSchemaMetaData> unconfiguredSchemaMetaDataMap;\n\nto\n\nprivate Map<String, Collection<String>> unconfiguredSchemaMetaDataMap;\nSince a similar change is made in RuleSchemaMetaData, I suppose it will be better to keep YamlRuleSchemaMetaData   and RuleSchemaMetaData same.\nWhat do you think? FYI, please note this change will also alter the content for the registry center (SchemaChangedListener will be involved)", "bodyHTML": "<p dir=\"auto\">Do you think the following change is possible?</p>\n<div class=\"highlight highlight-source-java position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"//  YamlRuleSchemaMetaData\n\nprivate Map&lt;String, YamlSchemaMetaData&gt; unconfiguredSchemaMetaDataMap;\n\nto\n\nprivate Map&lt;String, Collection&lt;String&gt;&gt; unconfiguredSchemaMetaDataMap;\n\"><pre><span class=\"pl-c\"><span class=\"pl-c\">//</span>  YamlRuleSchemaMetaData</span>\n\n<span class=\"pl-k\">private</span> <span class=\"pl-k\">Map&lt;<span class=\"pl-smi\">String</span>, <span class=\"pl-smi\">YamlSchemaMetaData</span>&gt;</span> unconfiguredSchemaMetaDataMap;\n\nto\n\n<span class=\"pl-k\">private</span> <span class=\"pl-k\">Map&lt;<span class=\"pl-smi\">String</span>, <span class=\"pl-k\">Collection&lt;<span class=\"pl-smi\">String</span>&gt;</span>&gt;</span> unconfiguredSchemaMetaDataMap;</pre></div>\n<p dir=\"auto\">Since a similar change is made in <code>RuleSchemaMetaData</code>, I suppose it will be better to keep <code>YamlRuleSchemaMetaData </code>  and <code>RuleSchemaMetaData</code> same.</p>\n<p dir=\"auto\">What do you think? FYI, please note this change will also alter the content for the registry center (<code>SchemaChangedListener</code> will be involved)</p>", "author": "tristaZero", "createdAt": "2020-09-23T04:02:01Z", "path": "shardingsphere-governance/shardingsphere-governance-core/shardingsphere-governance-core-common/src/main/java/org/apache/shardingsphere/governance/core/yaml/swapper/RuleSchemaMetaDataYamlSwapper.java", "diffHunk": "@@ -47,22 +47,26 @@ public YamlRuleSchemaMetaData swapToYamlConfiguration(final RuleSchemaMetaData m\n         YamlRuleSchemaMetaData result = new YamlRuleSchemaMetaData();\n         result.setConfiguredSchemaMetaData(convertYamlSchema(metaData.getConfiguredSchemaMetaData()));\n         Map<String, YamlSchemaMetaData> unconfigured = metaData.getUnconfiguredSchemaMetaDataMap().entrySet().stream()\n-                .collect(Collectors.toMap(Entry::getKey, entry -> convertYamlSchema(entry.getValue())));", "originalCommit": "3d5a730dce5758c42d0f054c2c0066f2bec013af", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE4Nzc1NA==", "url": "https://github.com/apache/shardingsphere/pull/7559#discussion_r493187754", "bodyText": "Ok, will make YamlRuleSchemaMetaData and RuleSchemaMetaData the same", "author": "xbkaishui", "createdAt": "2020-09-23T04:20:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE4MzQzNg=="}], "type": "inlineReview"}]}