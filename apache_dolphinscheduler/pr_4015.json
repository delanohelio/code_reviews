{"pr_number": 4015, "pr_title": "[Fix][api] Fix build parameter error of sqlserver when create.", "pr_author": "yh2388", "pr_createdAt": "2020-11-02T08:07:06Z", "pr_url": "https://github.com/apache/dolphinscheduler/pull/4015", "timeline": [{"oid": "a99bf4288797ed3465cc7ac362757477d02938a1", "url": "https://github.com/apache/dolphinscheduler/commit/a99bf4288797ed3465cc7ac362757477d02938a1", "message": "Merge branch 'dev-1.3.0' of https://github.com/apache/incubator-dolphinscheduler into dev-1.3.0", "committedDate": "2020-06-05T09:43:05Z", "type": "commit"}, {"oid": "e446af58863d2cc3a462eb318c82c3ff374367eb", "url": "https://github.com/apache/dolphinscheduler/commit/e446af58863d2cc3a462eb318c82c3ff374367eb", "message": "Merge remote-tracking branch 'upstream/dev' into fix-3962", "committedDate": "2020-10-21T07:08:20Z", "type": "commit"}, {"oid": "c4af9d53a8b963218212d5b491b814625a2f6b4d", "url": "https://github.com/apache/dolphinscheduler/commit/c4af9d53a8b963218212d5b491b814625a2f6b4d", "message": "[fix-#3962][api] Avoid ClassCastException for LoggerService.queryLog().", "committedDate": "2020-10-21T07:26:26Z", "type": "commit"}, {"oid": "176ef58d2f7d7b6806bc0a06d201bde3dab7ed7e", "url": "https://github.com/apache/dolphinscheduler/commit/176ef58d2f7d7b6806bc0a06d201bde3dab7ed7e", "message": "Merge remote-tracking branch 'upstream/dev' into fix-sqlserver-params", "committedDate": "2020-11-02T08:01:05Z", "type": "commit"}, {"oid": "7efd84aefb4a5426de56f4b5c3e03dd87167d555", "url": "https://github.com/apache/dolphinscheduler/commit/7efd84aefb4a5426de56f4b5c3e03dd87167d555", "message": "[Fix][api] Fix build parameter error of sqlserver when create.", "committedDate": "2020-11-02T08:03:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzg0NzU3OQ==", "url": "https://github.com/apache/dolphinscheduler/pull/4015#discussion_r517847579", "body": "Do you mind removing the following constants? I think using '==' is better, after all, the 'type' variable is Enum\r\n\r\n    public static final String MYSQL = \"MYSQL\";\r\n    public static final String POSTGRESQL = \"POSTGRESQL\";\r\n    public static final String HIVE = \"HIVE\";\r\n    public static final String SPARK = \"SPARK\";\r\n    public static final String CLICKHOUSE = \"CLICKHOUSE\";\r\n    public static final String ORACLE = \"ORACLE\";\r\n    public static final String SQLSERVER = \"SQLSERVER\";\r\n    public static final String DB2 = \"DB2\";\r\n    public static final String PRESTO = \"PRESTO\";", "bodyText": "Do you mind removing the following constants? I think using '==' is better, after all, the 'type' variable is Enum\npublic static final String MYSQL = \"MYSQL\";\npublic static final String POSTGRESQL = \"POSTGRESQL\";\npublic static final String HIVE = \"HIVE\";\npublic static final String SPARK = \"SPARK\";\npublic static final String CLICKHOUSE = \"CLICKHOUSE\";\npublic static final String ORACLE = \"ORACLE\";\npublic static final String SQLSERVER = \"SQLSERVER\";\npublic static final String DB2 = \"DB2\";\npublic static final String PRESTO = \"PRESTO\";", "bodyHTML": "<p dir=\"auto\">Do you mind removing the following constants? I think using '==' is better, after all, the 'type' variable is Enum</p>\n<div class=\"snippet-clipboard-content position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"public static final String MYSQL = &quot;MYSQL&quot;;\npublic static final String POSTGRESQL = &quot;POSTGRESQL&quot;;\npublic static final String HIVE = &quot;HIVE&quot;;\npublic static final String SPARK = &quot;SPARK&quot;;\npublic static final String CLICKHOUSE = &quot;CLICKHOUSE&quot;;\npublic static final String ORACLE = &quot;ORACLE&quot;;\npublic static final String SQLSERVER = &quot;SQLSERVER&quot;;\npublic static final String DB2 = &quot;DB2&quot;;\npublic static final String PRESTO = &quot;PRESTO&quot;;\n\"><pre><code>public static final String MYSQL = \"MYSQL\";\npublic static final String POSTGRESQL = \"POSTGRESQL\";\npublic static final String HIVE = \"HIVE\";\npublic static final String SPARK = \"SPARK\";\npublic static final String CLICKHOUSE = \"CLICKHOUSE\";\npublic static final String ORACLE = \"ORACLE\";\npublic static final String SQLSERVER = \"SQLSERVER\";\npublic static final String DB2 = \"DB2\";\npublic static final String PRESTO = \"PRESTO\";\n</code></pre></div>", "author": "gabrywu", "createdAt": "2020-11-05T07:46:39Z", "path": "dolphinscheduler-api/src/main/java/org/apache/dolphinscheduler/api/service/DataSourceService.java", "diffHunk": "@@ -499,7 +499,13 @@ public String buildParameter(DbType type, String host,\n \n         String address = buildAddress(type, host, port, connectType);\n         Map<String, Object> parameterMap = new LinkedHashMap<String, Object>(6);\n-        String jdbcUrl = address + \"/\" + database;\n+        String jdbcUrl;\n+        if (DbType.SQLSERVER == type) {\n+            jdbcUrl = address + \";databaseName=\" + database;\n+        } else {\n+            jdbcUrl = address + \"/\" + database;\n+        }\n+\n         if (Constants.ORACLE.equals(type.name())) {", "originalCommit": "7efd84aefb4a5426de56f4b5c3e03dd87167d555", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTc4MTY3Nw==", "url": "https://github.com/apache/dolphinscheduler/pull/4015#discussion_r521781677", "bodyText": "agree with @gabrywu idea . but this modify maybe involved not only DbType . suggest again submit a new PR", "author": "qiaozhanwei", "createdAt": "2020-11-12T02:41:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzg0NzU3OQ=="}], "type": "inlineReview"}]}