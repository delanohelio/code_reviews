{"pr_number": 23754, "pr_title": "Add cause to the BError constructor", "pr_author": "chamil321", "pr_createdAt": "2020-06-05T16:55:18Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/23754", "timeline": [{"oid": "a1a13e810dc22b7a17589b13130bf99fabcb91bd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a1a13e810dc22b7a17589b13130bf99fabcb91bd", "message": "Add cause to the BError constructor", "committedDate": "2020-06-06T06:17:34Z", "type": "commit"}, {"oid": "a1a13e810dc22b7a17589b13130bf99fabcb91bd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a1a13e810dc22b7a17589b13130bf99fabcb91bd", "message": "Add cause to the BError constructor", "committedDate": "2020-06-06T06:17:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI3MzkyMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23754#discussion_r436273921", "body": "Shall we override the equals method. Without it an unit test case is failing.\r\nFollowing worked in my local machine.\r\n```java\r\n    @Override\r\n    public boolean equals(Object obj) {\r\n        if (this == obj) {\r\n            return true;\r\n        }\r\n\r\n        if (obj instanceof  BError) {\r\n            BError that = (BError) obj;\r\n\r\n            boolean isCauseSame = false;\r\n            if (this.cause != null) {\r\n                isCauseSame = this.cause.equals(that.cause);\r\n            } else if (this.cause == null && that.cause == null) {\r\n                isCauseSame = true;\r\n            }\r\n            return this.message.equals(that.message) && this.details.equals(that.details) && isCauseSame;\r\n        }\r\n        return false;\r\n    }\r\n```", "bodyText": "Shall we override the equals method. Without it an unit test case is failing.\nFollowing worked in my local machine.\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj) {\n            return true;\n        }\n\n        if (obj instanceof  BError) {\n            BError that = (BError) obj;\n\n            boolean isCauseSame = false;\n            if (this.cause != null) {\n                isCauseSame = this.cause.equals(that.cause);\n            } else if (this.cause == null && that.cause == null) {\n                isCauseSame = true;\n            }\n            return this.message.equals(that.message) && this.details.equals(that.details) && isCauseSame;\n        }\n        return false;\n    }", "bodyHTML": "<p dir=\"auto\">Shall we override the equals method. Without it an unit test case is failing.<br>\nFollowing worked in my local machine.</p>\n<div class=\"highlight highlight-source-java position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"    @Override\n    public boolean equals(Object obj) {\n        if (this == obj) {\n            return true;\n        }\n\n        if (obj instanceof  BError) {\n            BError that = (BError) obj;\n\n            boolean isCauseSame = false;\n            if (this.cause != null) {\n                isCauseSame = this.cause.equals(that.cause);\n            } else if (this.cause == null &amp;&amp; that.cause == null) {\n                isCauseSame = true;\n            }\n            return this.message.equals(that.message) &amp;&amp; this.details.equals(that.details) &amp;&amp; isCauseSame;\n        }\n        return false;\n    }\"><pre>    <span class=\"pl-k\">@Override</span>\n    <span class=\"pl-k\">public</span> <span class=\"pl-k\">boolean</span> equals(<span class=\"pl-smi\">Object</span> obj) {\n        <span class=\"pl-k\">if</span> (<span class=\"pl-c1\">this</span> <span class=\"pl-k\">==</span> obj) {\n            <span class=\"pl-k\">return</span> <span class=\"pl-c1\">true</span>;\n        }\n\n        <span class=\"pl-k\">if</span> (obj <span class=\"pl-k\">instanceof</span>  <span class=\"pl-smi\">BError</span>) {\n            <span class=\"pl-smi\">BError</span> that <span class=\"pl-k\">=</span> (<span class=\"pl-smi\">BError</span>) obj;\n\n            <span class=\"pl-k\">boolean</span> isCauseSame <span class=\"pl-k\">=</span> <span class=\"pl-c1\">false</span>;\n            <span class=\"pl-k\">if</span> (<span class=\"pl-c1\">this</span><span class=\"pl-k\">.</span>cause <span class=\"pl-k\">!=</span> <span class=\"pl-c1\">null</span>) {\n                isCauseSame <span class=\"pl-k\">=</span> <span class=\"pl-c1\">this</span><span class=\"pl-k\">.</span>cause<span class=\"pl-k\">.</span>equals(that<span class=\"pl-k\">.</span>cause);\n            } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (<span class=\"pl-c1\">this</span><span class=\"pl-k\">.</span>cause <span class=\"pl-k\">==</span> <span class=\"pl-c1\">null</span> <span class=\"pl-k\">&amp;&amp;</span> that<span class=\"pl-k\">.</span>cause <span class=\"pl-k\">==</span> <span class=\"pl-c1\">null</span>) {\n                isCauseSame <span class=\"pl-k\">=</span> <span class=\"pl-c1\">true</span>;\n            }\n            <span class=\"pl-k\">return</span> <span class=\"pl-c1\">this</span><span class=\"pl-k\">.</span>message<span class=\"pl-k\">.</span>equals(that<span class=\"pl-k\">.</span>message) <span class=\"pl-k\">&amp;&amp;</span> <span class=\"pl-c1\">this</span><span class=\"pl-k\">.</span>details<span class=\"pl-k\">.</span>equals(that<span class=\"pl-k\">.</span>details) <span class=\"pl-k\">&amp;&amp;</span> isCauseSame;\n        }\n        <span class=\"pl-k\">return</span> <span class=\"pl-c1\">false</span>;\n    }</pre></div>", "author": "rdhananjaya", "createdAt": "2020-06-06T14:40:26Z", "path": "bvm/ballerina-core/src/main/java/org/ballerinalang/model/values/BError.java", "diffHunk": "@@ -84,4 +85,8 @@ public Object value() {\n     public boolean isFrozen() {\n         return true;\n     }\n+\n+    public BError getCause() {\n+        return cause;\n+    }", "originalCommit": "a1a13e810dc22b7a17589b13130bf99fabcb91bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMyMzk1Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23754#discussion_r436323952", "bodyText": "Thanks, Fixed via edc2257", "author": "chamil321", "createdAt": "2020-06-07T04:38:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI3MzkyMQ=="}], "type": "inlineReview"}, {"oid": "edc2257a72440de5a34243906a648875a446eef5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/edc2257a72440de5a34243906a648875a446eef5", "message": "Override equals method", "committedDate": "2020-06-07T04:37:49Z", "type": "commit"}]}