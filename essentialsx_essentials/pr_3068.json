{"pr_number": 3068, "pr_title": "Improve MuteStatusChangeEvent", "pr_author": "JRoy", "pr_createdAt": "2020-03-13T14:30:48Z", "pr_url": "https://github.com/EssentialsX/Essentials/pull/3068", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ2NDIwMA==", "url": "https://github.com/EssentialsX/Essentials/pull/3068#discussion_r392464200", "body": "The event is Cancellable, so I don't think you should be doing this before knowing the outcome. I had a similar issue while implementing #2807 (which perhaps we should merge before handling this issue, since it seems a lot of the code refactoring is already done there).", "bodyText": "The event is Cancellable, so I don't think you should be doing this before knowing the outcome. I had a similar issue while implementing #2807 (which perhaps we should merge before handling this issue, since it seems a lot of the code refactoring is already done there).", "bodyHTML": "<p dir=\"auto\">The event is Cancellable, so I don't think you should be doing this before knowing the outcome. I had a similar issue while implementing <a class=\"issue-link js-issue-link\" data-error-text=\"Failed to load title\" data-id=\"501772603\" data-permission-text=\"Title is private\" data-url=\"https://github.com/EssentialsX/Essentials/issues/2807\" data-hovercard-type=\"pull_request\" data-hovercard-url=\"/EssentialsX/Essentials/pull/2807/hovercard\" href=\"https://github.com/EssentialsX/Essentials/pull/2807\">#2807</a> (which perhaps we should merge before handling this issue, since it seems a lot of the code refactoring is already done there).</p>", "author": "pop4959", "createdAt": "2020-03-13T20:44:47Z", "path": "Essentials/src/com/earth2me/essentials/commands/Commandmute.java", "diffHunk": "@@ -40,25 +40,32 @@ public void run(final Server server, final CommandSource sender, final String co\n                 throw new Exception(tl(\"muteExempt\"));\n             }\n         }\n+\n+        long muteTimestamp = 0;\n+        String muteReason = null;\n+\n+        if (args.length > 1) {\n+            final String time = args[1];\n+            try {\n+                muteTimestamp = DateUtil.parseDateDiff(time, true);\n+                muteReason = getFinalArg(args, 2);\n+            } catch (Exception e) {\n+                muteReason = getFinalArg(args, 1);\n+            }\n+        } else {\n+            user.setMuted(!user.getMuted());", "originalCommit": "b6a1f23eeb2821bbb9882f84cea6067f010d1b0f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ3MjY4MA==", "url": "https://github.com/EssentialsX/Essentials/pull/3068#discussion_r392472680", "bodyText": "Whoops, that code shouldn't be up there. As for #2807, yeah that should be merged first", "author": "JRoy", "createdAt": "2020-03-13T20:57:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ2NDIwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ2NjM0Mw==", "url": "https://github.com/EssentialsX/Essentials/pull/3068#discussion_r392466343", "body": "The second portion of this description reads poorly in my opinion. `Otherwise, the timestamp with 0` should probably be `Otherwise, the timestamp, or 0` to make sure it's clear.", "bodyText": "The second portion of this description reads poorly in my opinion. Otherwise, the timestamp with 0 should probably be Otherwise, the timestamp, or 0 to make sure it's clear.", "bodyHTML": "<p dir=\"auto\">The second portion of this description reads poorly in my opinion. <code>Otherwise, the timestamp with 0</code> should probably be <code>Otherwise, the timestamp, or 0</code> to make sure it's clear.</p>", "author": "pop4959", "createdAt": "2020-03-13T20:48:04Z", "path": "Essentials/src/net/ess3/api/events/MuteStatusChangeEvent.java", "diffHunk": "@@ -4,7 +4,35 @@\n \n \n public class MuteStatusChangeEvent extends StatusChangeEvent {\n+    private Long timestamp;\n+    private String reason;\n+\n+    @Deprecated\n     public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value) {\n+        this(affected, controller, value, null, null);\n+    }\n+\n+    public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value, Long timestamp, String reason) {\n         super(affected, controller, value);\n+        this.timestamp = timestamp;\n+        if (reason == null) {\n+            this.reason = null;\n+        } else {\n+            this.reason = reason.isEmpty() ? null : reason;\n+        }\n+    }\n+\n+    /**\n+     * @return Returns null if the timestamp is unknown due to usage of deprecated api; Otherwise, the timestamp with 0 indicating permanent.", "originalCommit": "b6a1f23eeb2821bbb9882f84cea6067f010d1b0f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ3MjgyMA==", "url": "https://github.com/EssentialsX/Essentials/pull/3068#discussion_r392472820", "bodyText": "\ud83d\udc4d", "author": "JRoy", "createdAt": "2020-03-13T20:58:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjQ2NjM0Mw=="}], "type": "inlineReview"}, {"oid": "3e69b402d02fa1a11d710c24919b4e5a6b46b73a", "url": "https://github.com/EssentialsX/Essentials/commit/3e69b402d02fa1a11d710c24919b4e5a6b46b73a", "message": "Improve MuteStatusChangeEvent", "committedDate": "2020-03-23T02:20:18Z", "type": "commit"}, {"oid": "3e69b402d02fa1a11d710c24919b4e5a6b46b73a", "url": "https://github.com/EssentialsX/Essentials/commit/3e69b402d02fa1a11d710c24919b4e5a6b46b73a", "message": "Improve MuteStatusChangeEvent", "committedDate": "2020-03-23T02:20:18Z", "type": "forcePushed"}, {"oid": "73b2da5653e035a938f85d88665e50e4e7586cd5", "url": "https://github.com/EssentialsX/Essentials/commit/73b2da5653e035a938f85d88665e50e4e7586cd5", "message": "Rebase", "committedDate": "2020-03-23T02:31:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY3MTYwMQ==", "url": "https://github.com/EssentialsX/Essentials/pull/3068#discussion_r400671601", "body": "When will reason ever be 'empty'? Maybe if a stupid plugin makes it empty but then we should be witchhunting them, not adding this weird oneoff check here.", "bodyText": "When will reason ever be 'empty'? Maybe if a stupid plugin makes it empty but then we should be witchhunting them, not adding this weird oneoff check here.", "bodyHTML": "<p dir=\"auto\">When will reason ever be 'empty'? Maybe if a stupid plugin makes it empty but then we should be witchhunting them, not adding this weird oneoff check here.</p>", "author": "Ichbinjoe", "createdAt": "2020-03-31T06:29:53Z", "path": "Essentials/src/net/ess3/api/events/MuteStatusChangeEvent.java", "diffHunk": "@@ -4,7 +4,35 @@\n \n \n public class MuteStatusChangeEvent extends StatusChangeEvent {\n+    private Long timestamp;\n+    private String reason;\n+\n+    @Deprecated\n     public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value) {\n+        this(affected, controller, value, null, null);\n+    }\n+\n+    public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value, Long timestamp, String reason) {\n         super(affected, controller, value);\n+        this.timestamp = timestamp;\n+        if (reason == null) {\n+            this.reason = null;\n+        } else {\n+            this.reason = reason.isEmpty() ? null : reason;", "originalCommit": "73b2da5653e035a938f85d88665e50e4e7586cd5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTAzOTA0MA==", "url": "https://github.com/EssentialsX/Essentials/pull/3068#discussion_r401039040", "bodyText": "It's a prevention measure to assure that the API is consistent; nothing wrong with this. Nonetheless, I changed this to a one-liner.", "author": "JRoy", "createdAt": "2020-03-31T16:12:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY3MTYwMQ=="}], "type": "inlineReview"}, {"oid": "f7c11fd8f2aa19fa22383769a3367f81a49671fe", "url": "https://github.com/EssentialsX/Essentials/commit/f7c11fd8f2aa19fa22383769a3367f81a49671fe", "message": "Review changes", "committedDate": "2020-03-31T16:12:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjcxMDc0OA==", "url": "https://github.com/EssentialsX/Essentials/pull/3068#discussion_r406710748", "body": "```suggestion\r\n     * @return Returns the reason if provided, otherwise null.\r\n```\r\n\r\nOther plugins shouldn't be firing this event on our behalf, so we probably shouldn't assume they are.", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @return Returns null if no reason is provided or due to the usage of a deprecated api; Otherwise, the reason.\n          \n          \n            \n                 * @return Returns the reason if provided, otherwise null.\n          \n      \n    \n    \n  \n\nOther plugins shouldn't be firing this event on our behalf, so we probably shouldn't assume they are.", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">     <span class=\"pl-k\">*</span> <span class=\"pl-k\">@return</span> <span class=\"pl-smi\">Returns</span> <span class=\"pl-c1 x x-first\">null</span><span class=\"x\"> </span><span class=\"pl-k x\">if</span><span class=\"x x-last\"> no </span>reason <span class=\"x x-first x-last\">is</span> provided<span class=\"x x-first\"> or due to the usage of a deprecated api; </span><span class=\"pl-smi x\">Otherwise</span><span class=\"x x-last\">, the reason</span>.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-k\">@return</span> <span class=\"pl-smi\">Returns</span> <span class=\"x x-first x-last\">the </span>reason <span class=\"pl-k x x-first x-last\">if</span> provided<span class=\"x x-first\">, otherwise </span><span class=\"pl-c1 x x-last\">null</span>.</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n\n<p dir=\"auto\">Other plugins shouldn't be firing this event on our behalf, so we probably shouldn't assume they are.</p>", "author": "mdcfe", "createdAt": "2020-04-10T11:03:50Z", "path": "Essentials/src/net/ess3/api/events/MuteStatusChangeEvent.java", "diffHunk": "@@ -4,7 +4,31 @@\n \n \n public class MuteStatusChangeEvent extends StatusChangeEvent {\n+    private Long timestamp;\n+    private String reason;\n+\n+    @Deprecated\n     public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value) {\n+        this(affected, controller, value, null, null);\n+    }\n+\n+    public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value, Long timestamp, String reason) {\n         super(affected, controller, value);\n+        this.timestamp = timestamp;\n+        this.reason = reason == null ? null : (reason.isEmpty() ? null : reason);\n+    }\n+\n+    /**\n+     * @return Returns null if the timestamp is unknown due to usage of deprecated api; Otherwise, the timestamp with 0 indicating permanent.\n+     */\n+    public Long getTimestamp() {\n+        return timestamp;\n+    }\n+\n+    /**\n+     * @return Returns null if no reason is provided or due to the usage of a deprecated api; Otherwise, the reason.", "originalCommit": "f7c11fd8f2aa19fa22383769a3367f81a49671fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjcxMTQwOA==", "url": "https://github.com/EssentialsX/Essentials/pull/3068#discussion_r406711408", "body": "```suggestion\r\n     * @return If the mute is temporary, returns the timestamp; if permanent, returns 0, and if unknown, returns -1.\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @return Returns null if the timestamp is unknown due to usage of deprecated api; Otherwise, the timestamp with 0 indicating permanent.\n          \n          \n            \n                 * @return If the mute is temporary, returns the timestamp; if permanent, returns 0, and if unknown, returns -1.", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">     <span class=\"pl-k\">*</span> <span class=\"pl-k\">@return</span> <span class=\"pl-smi x x-first\">Returns</span><span class=\"x\"> </span><span class=\"pl-c1 x\">null</span><span class=\"x\"> </span><span class=\"pl-k x\">if</span><span class=\"x x-last\"> </span>the <span class=\"x x-first x-last\">timestamp</span> is <span class=\"x x-first\">unknown due to usage of deprecated api; </span><span class=\"pl-smi x\">Otherwise</span><span class=\"x\">, the timestamp with </span><span class=\"pl-c1 x\">0</span><span class=\"x x-last\"> indicating permanent</span>.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">     <span class=\"pl-k\">*</span> <span class=\"pl-k\">@return</span> <span class=\"pl-smi x x-first\">If</span><span class=\"x x-last\"> </span>the <span class=\"x x-first x-last\">mute</span> is <span class=\"x x-first\">temporary, returns the timestamp; </span><span class=\"pl-k x\">if</span><span class=\"x\"> permanent, returns </span><span class=\"pl-c1 x\">0</span><span class=\"x\">, and </span><span class=\"pl-k x\">if</span><span class=\"x\"> unknown, returns </span><span class=\"pl-k x\">-</span><span class=\"pl-c1\"><span class=\"x x-last\">1</span>.</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "mdcfe", "createdAt": "2020-04-10T11:06:21Z", "path": "Essentials/src/net/ess3/api/events/MuteStatusChangeEvent.java", "diffHunk": "@@ -4,7 +4,31 @@\n \n \n public class MuteStatusChangeEvent extends StatusChangeEvent {\n+    private Long timestamp;\n+    private String reason;\n+\n+    @Deprecated\n     public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value) {\n+        this(affected, controller, value, null, null);\n+    }\n+\n+    public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value, Long timestamp, String reason) {\n         super(affected, controller, value);\n+        this.timestamp = timestamp;\n+        this.reason = reason == null ? null : (reason.isEmpty() ? null : reason);\n+    }\n+\n+    /**\n+     * @return Returns null if the timestamp is unknown due to usage of deprecated api; Otherwise, the timestamp with 0 indicating permanent.", "originalCommit": "f7c11fd8f2aa19fa22383769a3367f81a49671fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjcxMjAxNw==", "url": "https://github.com/EssentialsX/Essentials/pull/3068#discussion_r406712017", "body": "```suggestion\r\n        this(affected, controller, value, -1, null);\r\n    }\r\n\r\n    public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value, long timestamp, String reason) {\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    this(affected, controller, value, null, null);\n          \n          \n            \n                }\n          \n          \n            \n            \n          \n          \n            \n                public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value, Long timestamp, String reason) {\n          \n          \n            \n                    this(affected, controller, value, -1, null);\n          \n          \n            \n                }\n          \n          \n            \n            \n          \n          \n            \n                public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value, long timestamp, String reason) {", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"12\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">        <span class=\"pl-c1\">this</span>(affected, controller, value, <span class=\"pl-c1 x x-first x-last\">null</span>, <span class=\"pl-c1\">null</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"13\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"14\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"15\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">public</span> MuteStatusChangeEvent(<span class=\"pl-smi\">IUser</span> affected, <span class=\"pl-smi\">IUser</span> controller, <span class=\"pl-k\">boolean</span> value, <span class=\"pl-smi x x-first x-last\">Long</span> timestamp, <span class=\"pl-smi\">String</span> reason) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"12\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">        <span class=\"pl-c1\">this</span>(affected, controller, value, <span class=\"pl-k x x-first\">-</span><span class=\"pl-c1 x x-last\">1</span>, <span class=\"pl-c1\">null</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"13\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    }</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"14\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"15\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">public</span> MuteStatusChangeEvent(<span class=\"pl-smi\">IUser</span> affected, <span class=\"pl-smi\">IUser</span> controller, <span class=\"pl-k\">boolean</span> value, <span class=\"pl-k x x-first x-last\">long</span> timestamp, <span class=\"pl-smi\">String</span> reason) {</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "mdcfe", "createdAt": "2020-04-10T11:08:46Z", "path": "Essentials/src/net/ess3/api/events/MuteStatusChangeEvent.java", "diffHunk": "@@ -4,7 +4,31 @@\n \n \n public class MuteStatusChangeEvent extends StatusChangeEvent {\n+    private Long timestamp;\n+    private String reason;\n+\n+    @Deprecated\n     public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value) {\n+        this(affected, controller, value, null, null);\n+    }\n+\n+    public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value, Long timestamp, String reason) {", "originalCommit": "f7c11fd8f2aa19fa22383769a3367f81a49671fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "abcba62a19e5f2ab4a693cd06f8dd6be6bef863b", "url": "https://github.com/EssentialsX/Essentials/commit/abcba62a19e5f2ab4a693cd06f8dd6be6bef863b", "message": "Apply suggestions from code review\n\nCo-Authored-By: md678685 <1917406+md678685@users.noreply.github.com>", "committedDate": "2020-04-10T18:46:04Z", "type": "commit"}, {"oid": "228c33ca11d86ea12dd2ba11eb24d293c4775d6e", "url": "https://github.com/EssentialsX/Essentials/commit/228c33ca11d86ea12dd2ba11eb24d293c4775d6e", "message": "Remove deprecated constructor", "committedDate": "2020-04-10T18:47:15Z", "type": "commit"}, {"oid": "d49b85d097a313fb2dcafa106287e11c74745c61", "url": "https://github.com/EssentialsX/Essentials/commit/d49b85d097a313fb2dcafa106287e11c74745c61", "message": "Merge branch '2.x' into feature/better-mute-event", "committedDate": "2020-04-10T18:48:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ2NjM5Ng==", "url": "https://github.com/EssentialsX/Essentials/pull/3068#discussion_r407466396", "body": "I'm not sure whether we should return 0 or null if the mute is permanent. `null` better describes that there isn't a timestamp for the mute to be lifted on. @Ichbinjoe any thoughts?\r\n\r\n(I'm aware I've changed my mind on this since my last look over this PR - apologies about the changes.)", "bodyText": "I'm not sure whether we should return 0 or null if the mute is permanent. null better describes that there isn't a timestamp for the mute to be lifted on. @Ichbinjoe any thoughts?\n(I'm aware I've changed my mind on this since my last look over this PR - apologies about the changes.)", "bodyHTML": "<p dir=\"auto\">I'm not sure whether we should return 0 or null if the mute is permanent. <code>null</code> better describes that there isn't a timestamp for the mute to be lifted on. <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/Ichbinjoe/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Ichbinjoe\">@Ichbinjoe</a> any thoughts?</p>\n<p dir=\"auto\">(I'm aware I've changed my mind on this since my last look over this PR - apologies about the changes.)</p>", "author": "mdcfe", "createdAt": "2020-04-13T13:00:31Z", "path": "Essentials/src/net/ess3/api/events/MuteStatusChangeEvent.java", "diffHunk": "@@ -4,7 +4,26 @@\n \n \n public class MuteStatusChangeEvent extends StatusChangeEvent {\n-    public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value) {\n+    private Long timestamp;\n+    private String reason;\n+\n+    public MuteStatusChangeEvent(IUser affected, IUser controller, boolean value, long timestamp, String reason) {\n         super(affected, controller, value);\n+        this.timestamp = timestamp;\n+        this.reason = reason == null ? null : (reason.isEmpty() ? null : reason);\n+    }\n+\n+    /**\n+     * @return If the mute is temporary, returns the timestamp; if permanent, returns 0, and if unknown, returns -1.\n+     */\n+    public Long getTimestamp() {", "originalCommit": "d49b85d097a313fb2dcafa106287e11c74745c61", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTA5Mjg0Mg==", "url": "https://github.com/EssentialsX/Essentials/pull/3068#discussion_r411092842", "bodyText": "Sorry for delay (disappeared for some time).\nI think the optimal solution is to potentially wrap this Long in an Optional. It beats readers over the head with the intent of the field.\nWould opt against 0 - easy to mess up. Null would at least cause things to blow up in the case where there is no timestamp.", "author": "Ichbinjoe", "createdAt": "2020-04-20T04:56:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ2NjM5Ng=="}], "type": "inlineReview"}, {"oid": "890d0d953506de3d89432d1866c82df88e31324a", "url": "https://github.com/EssentialsX/Essentials/commit/890d0d953506de3d89432d1866c82df88e31324a", "message": "Review changes", "committedDate": "2020-04-20T21:18:17Z", "type": "commit"}]}