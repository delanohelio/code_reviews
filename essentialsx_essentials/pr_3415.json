{"pr_number": 3415, "pr_title": "EditSign Command", "pr_author": "JRoy", "pr_createdAt": "2020-06-26T16:15:14Z", "pr_url": "https://github.com/EssentialsX/Essentials/pull/3415", "timeline": [{"oid": "3cd99e75b6a970cd32a45bb674fbce05c971412b", "url": "https://github.com/EssentialsX/Essentials/commit/3cd99e75b6a970cd32a45bb674fbce05c971412b", "message": "editsign Command", "committedDate": "2020-06-26T16:14:17Z", "type": "commit"}, {"oid": "146f128fb583578b0a0c30b9fcdd673d2bf6b01d", "url": "https://github.com/EssentialsX/Essentials/commit/146f128fb583578b0a0c30b9fcdd673d2bf6b01d", "message": "Permissions", "committedDate": "2020-06-26T16:19:30Z", "type": "commit"}, {"oid": "5b49cc195cc5268ddbd30f77ea5d1e938cc3cef7", "url": "https://github.com/EssentialsX/Essentials/commit/5b49cc195cc5268ddbd30f77ea5d1e938cc3cef7", "message": "Permissions", "committedDate": "2020-06-26T16:19:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI4MzQ4MQ==", "url": "https://github.com/EssentialsX/Essentials/pull/3415#discussion_r446283481", "body": "You can do here a new argument to clear all lines for lazy peoples.\r\n\r\nEDIT: reset -> clear", "bodyText": "You can do here a new argument to clear all lines for lazy peoples.\nEDIT: reset -> clear", "bodyHTML": "<p dir=\"auto\">You can do here a new argument to clear all lines for lazy peoples.</p>\n<p dir=\"auto\">EDIT: reset -&gt; clear</p>", "author": "montlikadani", "createdAt": "2020-06-26T16:23:01Z", "path": "Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package com.earth2me.essentials.commands;\n+\n+import com.earth2me.essentials.User;\n+import com.earth2me.essentials.utils.FormatUtil;\n+import com.earth2me.essentials.utils.NumberUtil;\n+import com.google.common.collect.Lists;\n+import org.bukkit.ChatColor;\n+import org.bukkit.Server;\n+import org.bukkit.block.Block;\n+import org.bukkit.block.Sign;\n+\n+import java.util.Collections;\n+import java.util.List;\n+\n+import static com.earth2me.essentials.I18n.tl;\n+\n+public class Commandeditsign extends EssentialsCommand {\n+    public Commandeditsign() {\n+        super(\"editsign\");\n+    }\n+\n+    @Override\n+    protected void run(Server server, User user, String commandLabel, String[] args) throws Exception {\n+        if (args.length < 2 || !NumberUtil.isInt(args[1])) {\n+            throw new NotEnoughArgumentsException();\n+        }\n+\n+        Block target = user.getBase().getTargetBlock(null, 5); //5 is a good number\n+        if (!(target.getState() instanceof Sign)) {\n+            throw new Exception(tl(\"editsignCommandTarget\"));\n+        }\n+        Sign sign = (Sign) target.getState();\n+        int line = Integer.parseInt(args[1]) - 1;\n+        try {\n+            if (args[0].equalsIgnoreCase(\"set\") && args.length > 2) {\n+                String text = FormatUtil.formatString(user, \"essentials.editsign\", getFinalArg(args, 2)).trim();\n+                if (ChatColor.stripColor(text).length() > 15 && !user.isAuthorized(\"essentials.editsign.unlimited\")) {\n+                    throw new Exception(tl(\"editsignCommandLimit\"));\n+                }\n+                sign.setLine(line, text);\n+                sign.update();\n+                user.sendMessage(tl(\"editsignCommandSetSuccess\", line + 1, text));\n+            } else if (args[0].equalsIgnoreCase(\"reset\")) {\n+                sign.setLine(line, \"\");\n+                sign.update();\n+                user.sendMessage(tl(\"editsignCommandResetLine\", line + 1));\n+            } else {", "originalCommit": "5b49cc195cc5268ddbd30f77ea5d1e938cc3cef7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4cce9bc5177f532d7b26e1b04d054ed24c04bbcb", "changed_code": [{"header": "diff --git a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\nindex e9c8a1a3a..440db3f4e 100644\n--- a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n+++ b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n", "chunk": "@@ -40,7 +40,15 @@ public class Commandeditsign extends EssentialsCommand {\n                 sign.setLine(line, text);\n                 sign.update();\n                 user.sendMessage(tl(\"editsignCommandSetSuccess\", line + 1, text));\n-            } else if (args[0].equalsIgnoreCase(\"reset\")) {\n+            } else if (args[0].equalsIgnoreCase(\"clear\")) {\n+                if (args.length == 1) {\n+                    for (int i = 0; i < 4; i++) { // A whole one line of line savings!\n+                        sign.setLine(i, \"\");\n+                    }\n+                    sign.update();\n+                    return;\n+                }\n+                int line = Integer.parseInt(args[1]) - 1;\n                 sign.setLine(line, \"\");\n                 sign.update();\n                 user.sendMessage(tl(\"editsignCommandResetLine\", line + 1));\n", "next_change": {"commit": "34336657c51d4f95df73869af93ddea19a3ee523", "changed_code": [{"header": "diff --git a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\nindex 440db3f4e..0670112ee 100644\n--- a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n+++ b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n", "chunk": "@@ -46,12 +46,13 @@ public class Commandeditsign extends EssentialsCommand {\n                         sign.setLine(i, \"\");\n                     }\n                     sign.update();\n-                    return;\n+                    user.sendMessage(tl(\"editsignCommandClear\"));\n+                } else {\n+                    int line = Integer.parseInt(args[1]) - 1;\n+                    sign.setLine(line, \"\");\n+                    sign.update();\n+                    user.sendMessage(tl(\"editsignCommandClearLine\", line + 1));\n                 }\n-                int line = Integer.parseInt(args[1]) - 1;\n-                sign.setLine(line, \"\");\n-                sign.update();\n-                user.sendMessage(tl(\"editsignCommandResetLine\", line + 1));\n             } else {\n                 throw new NotEnoughArgumentsException();\n             }\n", "next_change": null}]}}]}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI4MzM0OQ==", "url": "https://github.com/EssentialsX/Essentials/pull/3415#discussion_r446283349", "body": "```suggestion\r\n            } else if (args[0].equalsIgnoreCase(\"clear\")) {\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        } else if (args[0].equalsIgnoreCase(\"reset\")) {\n          \n          \n            \n                        } else if (args[0].equalsIgnoreCase(\"clear\")) {", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (args[<span class=\"pl-c1\">0</span>]<span class=\"pl-k\">.</span>equalsIgnoreCase(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">reset</span><span class=\"pl-pds\">\"</span></span>)) {</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            } <span class=\"pl-k\">else</span> <span class=\"pl-k\">if</span> (args[<span class=\"pl-c1\">0</span>]<span class=\"pl-k\">.</span>equalsIgnoreCase(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">clear</span><span class=\"pl-pds\">\"</span></span>)) {</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "mdcfe", "createdAt": "2020-06-26T16:22:45Z", "path": "Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package com.earth2me.essentials.commands;\n+\n+import com.earth2me.essentials.User;\n+import com.earth2me.essentials.utils.FormatUtil;\n+import com.earth2me.essentials.utils.NumberUtil;\n+import com.google.common.collect.Lists;\n+import org.bukkit.ChatColor;\n+import org.bukkit.Server;\n+import org.bukkit.block.Block;\n+import org.bukkit.block.Sign;\n+\n+import java.util.Collections;\n+import java.util.List;\n+\n+import static com.earth2me.essentials.I18n.tl;\n+\n+public class Commandeditsign extends EssentialsCommand {\n+    public Commandeditsign() {\n+        super(\"editsign\");\n+    }\n+\n+    @Override\n+    protected void run(Server server, User user, String commandLabel, String[] args) throws Exception {\n+        if (args.length < 2 || !NumberUtil.isInt(args[1])) {\n+            throw new NotEnoughArgumentsException();\n+        }\n+\n+        Block target = user.getBase().getTargetBlock(null, 5); //5 is a good number\n+        if (!(target.getState() instanceof Sign)) {\n+            throw new Exception(tl(\"editsignCommandTarget\"));\n+        }\n+        Sign sign = (Sign) target.getState();\n+        int line = Integer.parseInt(args[1]) - 1;\n+        try {\n+            if (args[0].equalsIgnoreCase(\"set\") && args.length > 2) {\n+                String text = FormatUtil.formatString(user, \"essentials.editsign\", getFinalArg(args, 2)).trim();\n+                if (ChatColor.stripColor(text).length() > 15 && !user.isAuthorized(\"essentials.editsign.unlimited\")) {\n+                    throw new Exception(tl(\"editsignCommandLimit\"));\n+                }\n+                sign.setLine(line, text);\n+                sign.update();\n+                user.sendMessage(tl(\"editsignCommandSetSuccess\", line + 1, text));\n+            } else if (args[0].equalsIgnoreCase(\"reset\")) {", "originalCommit": "5b49cc195cc5268ddbd30f77ea5d1e938cc3cef7", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "4cce9bc5177f532d7b26e1b04d054ed24c04bbcb", "changed_code": [{"header": "diff --git a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\nindex e9c8a1a3a..440db3f4e 100644\n--- a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n+++ b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n", "chunk": "@@ -30,9 +30,9 @@ public class Commandeditsign extends EssentialsCommand {\n             throw new Exception(tl(\"editsignCommandTarget\"));\n         }\n         Sign sign = (Sign) target.getState();\n-        int line = Integer.parseInt(args[1]) - 1;\n         try {\n             if (args[0].equalsIgnoreCase(\"set\") && args.length > 2) {\n+                int line = Integer.parseInt(args[1]) - 1;\n                 String text = FormatUtil.formatString(user, \"essentials.editsign\", getFinalArg(args, 2)).trim();\n                 if (ChatColor.stripColor(text).length() > 15 && !user.isAuthorized(\"essentials.editsign.unlimited\")) {\n                     throw new Exception(tl(\"editsignCommandLimit\"));\n", "next_change": null}, {"header": "diff --git a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\nindex e9c8a1a3a..440db3f4e 100644\n--- a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n+++ b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n", "chunk": "@@ -40,7 +40,15 @@ public class Commandeditsign extends EssentialsCommand {\n                 sign.setLine(line, text);\n                 sign.update();\n                 user.sendMessage(tl(\"editsignCommandSetSuccess\", line + 1, text));\n-            } else if (args[0].equalsIgnoreCase(\"reset\")) {\n+            } else if (args[0].equalsIgnoreCase(\"clear\")) {\n+                if (args.length == 1) {\n+                    for (int i = 0; i < 4; i++) { // A whole one line of line savings!\n+                        sign.setLine(i, \"\");\n+                    }\n+                    sign.update();\n+                    return;\n+                }\n+                int line = Integer.parseInt(args[1]) - 1;\n                 sign.setLine(line, \"\");\n                 sign.update();\n                 user.sendMessage(tl(\"editsignCommandResetLine\", line + 1));\n", "next_change": {"commit": "34336657c51d4f95df73869af93ddea19a3ee523", "changed_code": [{"header": "diff --git a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\nindex 440db3f4e..0670112ee 100644\n--- a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n+++ b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n", "chunk": "@@ -46,12 +46,13 @@ public class Commandeditsign extends EssentialsCommand {\n                         sign.setLine(i, \"\");\n                     }\n                     sign.update();\n-                    return;\n+                    user.sendMessage(tl(\"editsignCommandClear\"));\n+                } else {\n+                    int line = Integer.parseInt(args[1]) - 1;\n+                    sign.setLine(line, \"\");\n+                    sign.update();\n+                    user.sendMessage(tl(\"editsignCommandClearLine\", line + 1));\n                 }\n-                int line = Integer.parseInt(args[1]) - 1;\n-                sign.setLine(line, \"\");\n-                sign.update();\n-                user.sendMessage(tl(\"editsignCommandResetLine\", line + 1));\n             } else {\n                 throw new NotEnoughArgumentsException();\n             }\n", "next_change": null}]}}]}}, {"oid": "4cce9bc5177f532d7b26e1b04d054ed24c04bbcb", "url": "https://github.com/EssentialsX/Essentials/commit/4cce9bc5177f532d7b26e1b04d054ed24c04bbcb", "message": "Make everyone happy smile", "committedDate": "2020-06-27T03:29:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ4MDExMA==", "url": "https://github.com/EssentialsX/Essentials/pull/3415#discussion_r446480110", "body": "Maybe something more like this to show flow better. Also, resetting the whole sign is missing a feedback message.\r\n\r\n```suggestion\r\n                } else {\r\n                    int line = Integer.parseInt(args[1]) - 1;\r\n                    sign.setLine(line, \"\");\r\n                    sign.update();\r\n                    user.sendMessage(tl(\"editsignCommandResetLine\", line + 1));\r\n                }\r\n```", "bodyText": "Maybe something more like this to show flow better. Also, resetting the whole sign is missing a feedback message.\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                return;\n          \n          \n            \n                            }\n          \n          \n            \n                            int line = Integer.parseInt(args[1]) - 1;\n          \n          \n            \n                            sign.setLine(line, \"\");\n          \n          \n            \n                            sign.update();\n          \n          \n            \n                            user.sendMessage(tl(\"editsignCommandResetLine\", line + 1));\n          \n          \n            \n                            } else {\n          \n          \n            \n                                int line = Integer.parseInt(args[1]) - 1;\n          \n          \n            \n                                sign.setLine(line, \"\");\n          \n          \n            \n                                sign.update();\n          \n          \n            \n                                user.sendMessage(tl(\"editsignCommandResetLine\", line + 1));\n          \n          \n            \n                            }", "bodyHTML": "<p dir=\"auto\">Maybe something more like this to show flow better. Also, resetting the whole sign is missing a feedback message.</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"x x-first\">    </span><span class=\"pl-k x\">return</span><span class=\"x x-last\">;</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"x x-first x-last\">}</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"pl-k x x-first\">int</span><span class=\"x\"> line </span><span class=\"pl-k x\">=</span><span class=\"x\"> </span><span class=\"pl-smi x\">Integer</span><span class=\"pl-k x\">.</span><span class=\"x\">parseInt(args[</span><span class=\"pl-c1 x\">1</span><span class=\"x\">]) </span><span class=\"pl-k x\">-</span><span class=\"x\"> </span><span class=\"pl-c1 x x-last\">1</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                sign<span class=\"pl-k\">.</span><span class=\"x x-first\">setLine(line, </span><span class=\"pl-s\"><span class=\"pl-pds x\">\"</span><span class=\"pl-pds x x-last\">\"</span></span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"x x-first\">sign</span><span class=\"pl-k x\">.</span><span class=\"x x-last\">update(</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                <span class=\"x x-first\">user</span><span class=\"pl-k x\">.</span><span class=\"x\">sendMessage(tl(</span><span class=\"pl-s\"><span class=\"pl-pds x\">\"</span><span class=\"x\">editsignCommandResetLine</span><span class=\"pl-pds x\">\"</span></span><span class=\"x\">, line </span><span class=\"pl-k x\">+</span><span class=\"x\"> </span><span class=\"pl-c1 x\">1</span><span class=\"x x-last\">));</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                <span class=\"x x-first\">} </span><span class=\"pl-k x\">else</span><span class=\"x x-last\"> {</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                <span class=\"x x-first\">    </span><span class=\"pl-k x\">int</span><span class=\"x\"> line </span><span class=\"pl-k x\">=</span><span class=\"x\"> </span><span class=\"pl-smi x\">Integer</span><span class=\"pl-k x\">.</span><span class=\"x\">parseInt(args[</span><span class=\"pl-c1 x\">1</span><span class=\"x\">]) </span><span class=\"pl-k x\">-</span><span class=\"x\"> </span><span class=\"pl-c1 x\">1</span><span class=\"x x-last\">;</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                <span class=\"x x-first\">    sign</span><span class=\"pl-k x\">.</span><span class=\"x\">setLine(line, </span><span class=\"pl-s\"><span class=\"pl-pds x\">\"</span><span class=\"pl-pds x\">\"</span></span><span class=\"x x-last\">)</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                <span class=\"x x-first x-last\">    </span>sign<span class=\"pl-k\">.</span><span class=\"x x-first x-last\">update(</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                <span class=\"x x-first\">    user</span><span class=\"pl-k x\">.</span><span class=\"x\">sendMessage(tl(</span><span class=\"pl-s\"><span class=\"pl-pds x\">\"</span><span class=\"x\">editsignCommandResetLine</span><span class=\"pl-pds x\">\"</span></span><span class=\"x\">, line </span><span class=\"pl-k x\">+</span><span class=\"x\"> </span><span class=\"pl-c1 x\">1</span><span class=\"x x-last\">)</span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                <span class=\"x x-first x-last\">}</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "pop4959", "createdAt": "2020-06-27T03:48:47Z", "path": "Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java", "diffHunk": "@@ -0,0 +1,73 @@\n+package com.earth2me.essentials.commands;\n+\n+import com.earth2me.essentials.User;\n+import com.earth2me.essentials.utils.FormatUtil;\n+import com.earth2me.essentials.utils.NumberUtil;\n+import com.google.common.collect.Lists;\n+import org.bukkit.ChatColor;\n+import org.bukkit.Server;\n+import org.bukkit.block.Block;\n+import org.bukkit.block.Sign;\n+\n+import java.util.Collections;\n+import java.util.List;\n+\n+import static com.earth2me.essentials.I18n.tl;\n+\n+public class Commandeditsign extends EssentialsCommand {\n+    public Commandeditsign() {\n+        super(\"editsign\");\n+    }\n+\n+    @Override\n+    protected void run(Server server, User user, String commandLabel, String[] args) throws Exception {\n+        if (args.length == 0 || (args.length > 1 && !NumberUtil.isInt(args[1]))) {\n+            throw new NotEnoughArgumentsException();\n+        }\n+\n+        Block target = user.getBase().getTargetBlock(null, 5); //5 is a good number\n+        if (!(target.getState() instanceof Sign)) {\n+            throw new Exception(tl(\"editsignCommandTarget\"));\n+        }\n+        Sign sign = (Sign) target.getState();\n+        try {\n+            if (args[0].equalsIgnoreCase(\"set\") && args.length > 2) {\n+                int line = Integer.parseInt(args[1]) - 1;\n+                String text = FormatUtil.formatString(user, \"essentials.editsign\", getFinalArg(args, 2)).trim();\n+                if (ChatColor.stripColor(text).length() > 15 && !user.isAuthorized(\"essentials.editsign.unlimited\")) {\n+                    throw new Exception(tl(\"editsignCommandLimit\"));\n+                }\n+                sign.setLine(line, text);\n+                sign.update();\n+                user.sendMessage(tl(\"editsignCommandSetSuccess\", line + 1, text));\n+            } else if (args[0].equalsIgnoreCase(\"clear\")) {\n+                if (args.length == 1) {\n+                    for (int i = 0; i < 4; i++) { // A whole one line of line savings!\n+                        sign.setLine(i, \"\");\n+                    }\n+                    sign.update();\n+                    return;\n+                }\n+                int line = Integer.parseInt(args[1]) - 1;\n+                sign.setLine(line, \"\");\n+                sign.update();\n+                user.sendMessage(tl(\"editsignCommandResetLine\", line + 1));", "originalCommit": "4cce9bc5177f532d7b26e1b04d054ed24c04bbcb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "34336657c51d4f95df73869af93ddea19a3ee523", "changed_code": [{"header": "diff --git a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\nindex 440db3f4e..0670112ee 100644\n--- a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n+++ b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n", "chunk": "@@ -46,12 +46,13 @@ public class Commandeditsign extends EssentialsCommand {\n                         sign.setLine(i, \"\");\n                     }\n                     sign.update();\n-                    return;\n+                    user.sendMessage(tl(\"editsignCommandClear\"));\n+                } else {\n+                    int line = Integer.parseInt(args[1]) - 1;\n+                    sign.setLine(line, \"\");\n+                    sign.update();\n+                    user.sendMessage(tl(\"editsignCommandClearLine\", line + 1));\n                 }\n-                int line = Integer.parseInt(args[1]) - 1;\n-                sign.setLine(line, \"\");\n-                sign.update();\n-                user.sendMessage(tl(\"editsignCommandResetLine\", line + 1));\n             } else {\n                 throw new NotEnoughArgumentsException();\n             }\n", "next_change": null}]}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQ4MDI5Mw==", "url": "https://github.com/EssentialsX/Essentials/pull/3415#discussion_r446480293", "body": "```suggestion\r\n            return Lists.newArrayList(\"set\", \"clear\");\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        return Lists.newArrayList(\"set\", \"reset\");\n          \n          \n            \n                        return Lists.newArrayList(\"set\", \"clear\");", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">            <span class=\"pl-k\">return</span> <span class=\"pl-smi\">Lists</span><span class=\"pl-k\">.</span>newArrayList(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>set<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">reset</span><span class=\"pl-pds\">\"</span></span>);</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">            <span class=\"pl-k\">return</span> <span class=\"pl-smi\">Lists</span><span class=\"pl-k\">.</span>newArrayList(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>set<span class=\"pl-pds\">\"</span></span>, <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">clear</span><span class=\"pl-pds\">\"</span></span>);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "pop4959", "createdAt": "2020-06-27T03:50:50Z", "path": "Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java", "diffHunk": "@@ -0,0 +1,73 @@\n+package com.earth2me.essentials.commands;\n+\n+import com.earth2me.essentials.User;\n+import com.earth2me.essentials.utils.FormatUtil;\n+import com.earth2me.essentials.utils.NumberUtil;\n+import com.google.common.collect.Lists;\n+import org.bukkit.ChatColor;\n+import org.bukkit.Server;\n+import org.bukkit.block.Block;\n+import org.bukkit.block.Sign;\n+\n+import java.util.Collections;\n+import java.util.List;\n+\n+import static com.earth2me.essentials.I18n.tl;\n+\n+public class Commandeditsign extends EssentialsCommand {\n+    public Commandeditsign() {\n+        super(\"editsign\");\n+    }\n+\n+    @Override\n+    protected void run(Server server, User user, String commandLabel, String[] args) throws Exception {\n+        if (args.length == 0 || (args.length > 1 && !NumberUtil.isInt(args[1]))) {\n+            throw new NotEnoughArgumentsException();\n+        }\n+\n+        Block target = user.getBase().getTargetBlock(null, 5); //5 is a good number\n+        if (!(target.getState() instanceof Sign)) {\n+            throw new Exception(tl(\"editsignCommandTarget\"));\n+        }\n+        Sign sign = (Sign) target.getState();\n+        try {\n+            if (args[0].equalsIgnoreCase(\"set\") && args.length > 2) {\n+                int line = Integer.parseInt(args[1]) - 1;\n+                String text = FormatUtil.formatString(user, \"essentials.editsign\", getFinalArg(args, 2)).trim();\n+                if (ChatColor.stripColor(text).length() > 15 && !user.isAuthorized(\"essentials.editsign.unlimited\")) {\n+                    throw new Exception(tl(\"editsignCommandLimit\"));\n+                }\n+                sign.setLine(line, text);\n+                sign.update();\n+                user.sendMessage(tl(\"editsignCommandSetSuccess\", line + 1, text));\n+            } else if (args[0].equalsIgnoreCase(\"clear\")) {\n+                if (args.length == 1) {\n+                    for (int i = 0; i < 4; i++) { // A whole one line of line savings!\n+                        sign.setLine(i, \"\");\n+                    }\n+                    sign.update();\n+                    return;\n+                }\n+                int line = Integer.parseInt(args[1]) - 1;\n+                sign.setLine(line, \"\");\n+                sign.update();\n+                user.sendMessage(tl(\"editsignCommandResetLine\", line + 1));\n+            } else {\n+                throw new NotEnoughArgumentsException();\n+            }\n+        } catch (IndexOutOfBoundsException e) {\n+            throw new Exception(tl(\"editsignCommandNoLine\"));\n+        }\n+    }\n+\n+    @Override\n+    protected List<String> getTabCompleteOptions(Server server, User user, String commandLabel, String[] args) {\n+        if (args.length == 1) {\n+            return Lists.newArrayList(\"set\", \"reset\");", "originalCommit": "4cce9bc5177f532d7b26e1b04d054ed24c04bbcb", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "34336657c51d4f95df73869af93ddea19a3ee523", "changed_code": [{"header": "diff --git a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\nindex 440db3f4e..0670112ee 100644\n--- a/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n+++ b/Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java\n", "chunk": "@@ -63,7 +64,7 @@ public class Commandeditsign extends EssentialsCommand {\n     @Override\n     protected List<String> getTabCompleteOptions(Server server, User user, String commandLabel, String[] args) {\n         if (args.length == 1) {\n-            return Lists.newArrayList(\"set\", \"reset\");\n+            return Lists.newArrayList(\"set\", \"clear\");\n         } else if (args.length == 2) {\n             return Lists.newArrayList(\"1\", \"2\", \"3\", \"4\");\n         } else {\n", "next_change": null}]}}, {"oid": "34336657c51d4f95df73869af93ddea19a3ee523", "url": "https://github.com/EssentialsX/Essentials/commit/34336657c51d4f95df73869af93ddea19a3ee523", "message": "Review changes", "committedDate": "2020-06-27T03:59:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYwMjQxOA==", "url": "https://github.com/EssentialsX/Essentials/pull/3415#discussion_r448602418", "body": "I don't know whether we should just use `essentials.sign.<format>`? People accustomed to EssentialsX's existing sign formatting permissions might be confused about the separate permission. Alternatively we could keep this as-is, and recommend the LP shorthand format if people want to use a single entry (`essentials.{sign,editsign}.{color,format}`).", "bodyText": "I don't know whether we should just use essentials.sign.<format>? People accustomed to EssentialsX's existing sign formatting permissions might be confused about the separate permission. Alternatively we could keep this as-is, and recommend the LP shorthand format if people want to use a single entry (essentials.{sign,editsign}.{color,format}).", "bodyHTML": "<p dir=\"auto\">I don't know whether we should just use <code>essentials.sign.&lt;format&gt;</code>? People accustomed to EssentialsX's existing sign formatting permissions might be confused about the separate permission. Alternatively we could keep this as-is, and recommend the LP shorthand format if people want to use a single entry (<code>essentials.{sign,editsign}.{color,format}</code>).</p>", "author": "mdcfe", "createdAt": "2020-07-01T20:35:46Z", "path": "Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java", "diffHunk": "@@ -0,0 +1,74 @@\n+package com.earth2me.essentials.commands;\n+\n+import com.earth2me.essentials.User;\n+import com.earth2me.essentials.utils.FormatUtil;\n+import com.earth2me.essentials.utils.NumberUtil;\n+import com.google.common.collect.Lists;\n+import org.bukkit.ChatColor;\n+import org.bukkit.Server;\n+import org.bukkit.block.Block;\n+import org.bukkit.block.Sign;\n+\n+import java.util.Collections;\n+import java.util.List;\n+\n+import static com.earth2me.essentials.I18n.tl;\n+\n+public class Commandeditsign extends EssentialsCommand {\n+    public Commandeditsign() {\n+        super(\"editsign\");\n+    }\n+\n+    @Override\n+    protected void run(Server server, User user, String commandLabel, String[] args) throws Exception {\n+        if (args.length == 0 || (args.length > 1 && !NumberUtil.isInt(args[1]))) {\n+            throw new NotEnoughArgumentsException();\n+        }\n+\n+        Block target = user.getBase().getTargetBlock(null, 5); //5 is a good number\n+        if (!(target.getState() instanceof Sign)) {\n+            throw new Exception(tl(\"editsignCommandTarget\"));\n+        }\n+        Sign sign = (Sign) target.getState();\n+        try {\n+            if (args[0].equalsIgnoreCase(\"set\") && args.length > 2) {\n+                int line = Integer.parseInt(args[1]) - 1;\n+                String text = FormatUtil.formatString(user, \"essentials.editsign\", getFinalArg(args, 2)).trim();", "originalCommit": "34336657c51d4f95df73869af93ddea19a3ee523", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODYwMjY3Ng==", "url": "https://github.com/EssentialsX/Essentials/pull/3415#discussion_r448602676", "body": "`o p t i m i s a t i o n`", "bodyText": "o p t i m i s a t i o n", "bodyHTML": "<p dir=\"auto\"><code>o p t i m i s a t i o n</code></p>", "author": "mdcfe", "createdAt": "2020-07-01T20:36:16Z", "path": "Essentials/src/com/earth2me/essentials/commands/Commandeditsign.java", "diffHunk": "@@ -0,0 +1,74 @@\n+package com.earth2me.essentials.commands;\n+\n+import com.earth2me.essentials.User;\n+import com.earth2me.essentials.utils.FormatUtil;\n+import com.earth2me.essentials.utils.NumberUtil;\n+import com.google.common.collect.Lists;\n+import org.bukkit.ChatColor;\n+import org.bukkit.Server;\n+import org.bukkit.block.Block;\n+import org.bukkit.block.Sign;\n+\n+import java.util.Collections;\n+import java.util.List;\n+\n+import static com.earth2me.essentials.I18n.tl;\n+\n+public class Commandeditsign extends EssentialsCommand {\n+    public Commandeditsign() {\n+        super(\"editsign\");\n+    }\n+\n+    @Override\n+    protected void run(Server server, User user, String commandLabel, String[] args) throws Exception {\n+        if (args.length == 0 || (args.length > 1 && !NumberUtil.isInt(args[1]))) {\n+            throw new NotEnoughArgumentsException();\n+        }\n+\n+        Block target = user.getBase().getTargetBlock(null, 5); //5 is a good number\n+        if (!(target.getState() instanceof Sign)) {\n+            throw new Exception(tl(\"editsignCommandTarget\"));\n+        }\n+        Sign sign = (Sign) target.getState();\n+        try {\n+            if (args[0].equalsIgnoreCase(\"set\") && args.length > 2) {\n+                int line = Integer.parseInt(args[1]) - 1;\n+                String text = FormatUtil.formatString(user, \"essentials.editsign\", getFinalArg(args, 2)).trim();\n+                if (ChatColor.stripColor(text).length() > 15 && !user.isAuthorized(\"essentials.editsign.unlimited\")) {\n+                    throw new Exception(tl(\"editsignCommandLimit\"));\n+                }\n+                sign.setLine(line, text);\n+                sign.update();\n+                user.sendMessage(tl(\"editsignCommandSetSuccess\", line + 1, text));\n+            } else if (args[0].equalsIgnoreCase(\"clear\")) {\n+                if (args.length == 1) {\n+                    for (int i = 0; i < 4; i++) { // A whole one line of line savings!", "originalCommit": "34336657c51d4f95df73869af93ddea19a3ee523", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": null}, {"oid": "e7a1a0739fa2ce72c463c4706320d965c8fa50ca", "url": "https://github.com/EssentialsX/Essentials/commit/e7a1a0739fa2ce72c463c4706320d965c8fa50ca", "message": "Apply suggestions from code review\n\nCo-authored-by: MD <1917406+md678685@users.noreply.github.com>", "committedDate": "2020-07-01T20:48:25Z", "type": "commit"}]}