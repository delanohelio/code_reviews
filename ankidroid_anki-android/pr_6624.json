{"pr_number": 6624, "pr_title": "AnkiDroidJS: display blank if button unavailable", "pr_author": "david-allison-1", "pr_createdAt": "2020-07-05T13:58:32Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6624", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg4MjIxMQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6624#discussion_r449882211", "body": "The idea seems correct but rather than shoo the horses back in the barn after they escape, should all the button text be cleared on hideEaseButtons? \r\n\r\nhttps://github.com/ankidroid/Anki-Android/blob/7dd8301088b9afb80f9fb7fd9f2350cd25e80c11/AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java#L1614-L1621\r\n\r\nYou may have already considered that, but it seems like when if we need to empty strings because in JS vs Java we don't control visibility, we should do that in the same place we control visibility in java\r\n\r\nOtherwise, does seem like it would work here", "bodyText": "The idea seems correct but rather than shoo the horses back in the barn after they escape, should all the button text be cleared on hideEaseButtons?\n\n  \n    \n      Anki-Android/AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java\n    \n    \n        Lines 1614 to 1621\n      in\n      7dd8301\n    \n    \n    \n    \n\n        \n          \n           protected void hideEaseButtons() { \n        \n\n        \n          \n               mEase1Layout.setVisibility(View.GONE); \n        \n\n        \n          \n               mEase2Layout.setVisibility(View.GONE); \n        \n\n        \n          \n               mEase3Layout.setVisibility(View.GONE); \n        \n\n        \n          \n               mEase4Layout.setVisibility(View.GONE); \n        \n\n        \n          \n               mFlipCardLayout.setVisibility(View.VISIBLE); \n        \n\n        \n          \n               focusAnswerCompletionField(); \n        \n\n        \n          \n           } \n        \n    \n  \n\n\nYou may have already considered that, but it seems like when if we need to empty strings because in JS vs Java we don't control visibility, we should do that in the same place we control visibility in java\nOtherwise, does seem like it would work here", "bodyHTML": "<p dir=\"auto\">The idea seems correct but rather than shoo the horses back in the barn after they escape, should all the button text be cleared on hideEaseButtons?</p>\n<p dir=\"auto\"><div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom color-bg-subtle\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/ankidroid/Anki-Android/blob/7dd8301088b9afb80f9fb7fd9f2350cd25e80c11/AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java#L1614-L1621\">Anki-Android/AnkiDroid/src/main/java/com/ichi2/anki/AbstractFlashcardViewer.java</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 1614 to 1621\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/ankidroid/Anki-Android/commit/7dd8301088b9afb80f9fb7fd9f2350cd25e80c11\">7dd8301</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L1614\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"1614\"></td>\n          <td id=\"LC1614\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">protected</span> <span class=\"pl-k\">void</span> <span class=\"pl-en\">hideEaseButtons</span>() { </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L1615\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"1615\"></td>\n          <td id=\"LC1615\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     mEase1Layout<span class=\"pl-k\">.</span>setVisibility(<span class=\"pl-smi\">View</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>GONE</span>); </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L1616\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"1616\"></td>\n          <td id=\"LC1616\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     mEase2Layout<span class=\"pl-k\">.</span>setVisibility(<span class=\"pl-smi\">View</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>GONE</span>); </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L1617\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"1617\"></td>\n          <td id=\"LC1617\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     mEase3Layout<span class=\"pl-k\">.</span>setVisibility(<span class=\"pl-smi\">View</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>GONE</span>); </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L1618\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"1618\"></td>\n          <td id=\"LC1618\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     mEase4Layout<span class=\"pl-k\">.</span>setVisibility(<span class=\"pl-smi\">View</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>GONE</span>); </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L1619\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"1619\"></td>\n          <td id=\"LC1619\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     mFlipCardLayout<span class=\"pl-k\">.</span>setVisibility(<span class=\"pl-smi\">View</span><span class=\"pl-c1\"><span class=\"pl-k\">.</span>VISIBLE</span>); </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L1620\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"1620\"></td>\n          <td id=\"LC1620\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     focusAnswerCompletionField(); </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L1621\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"1621\"></td>\n          <td id=\"LC1621\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> } </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>\n<p dir=\"auto\">You may have already considered that, but it seems like when if we need to empty strings because in JS vs Java we don't control visibility, we should do that in the same place we control visibility in java</p>\n<p dir=\"auto\">Otherwise, does seem like it would work here</p>", "author": "mikehardy", "createdAt": "2020-07-05T14:15:06Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/Reviewer.java", "diffHunk": "@@ -693,12 +693,8 @@ protected void displayAnswerBottomBar() {\n         if (shouldShowNextReviewTime()) {\n             mNext1.setText(mSched.nextIvlStr(this, mCurrentCard, Consts.BUTTON_ONE));\n             mNext2.setText(mSched.nextIvlStr(this, mCurrentCard, Consts.BUTTON_TWO));\n-            if (buttonCount > 2) {\n-                mNext3.setText(mSched.nextIvlStr(this, mCurrentCard, Consts.BUTTON_THREE));\n-            }\n-            if (buttonCount > 3) {\n-                mNext4.setText(mSched.nextIvlStr(this, mCurrentCard, Consts.BUTTON_FOUR));\n-            }\n+            mNext3.setText(buttonCount > 2 ? mSched.nextIvlStr(this, mCurrentCard, Consts.BUTTON_THREE) : \"\");", "originalCommit": "7dd8301088b9afb80f9fb7fd9f2350cd25e80c11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg4NzM5OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6624#discussion_r449887399", "bodyText": "No real preference between the two - I'll re-push", "author": "david-allison-1", "createdAt": "2020-07-05T15:02:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg4MjIxMQ=="}], "type": "inlineReview"}, {"oid": "4e3aa9de1013284f2769b26e92157bdf815b1d41", "url": "https://github.com/ankidroid/Anki-Android/commit/4e3aa9de1013284f2769b26e92157bdf815b1d41", "message": "AnkiDroidJS: display blank if button unavailable\n\nFixes 6623", "committedDate": "2020-07-05T15:10:55Z", "type": "forcePushed"}, {"oid": "81e62a9ae2f6e13ce86e52ca27206b850d2743fc", "url": "https://github.com/ankidroid/Anki-Android/commit/81e62a9ae2f6e13ce86e52ca27206b850d2743fc", "message": "AnkiDroidJS: display blank if button unavailable\n\nFixes 6623", "committedDate": "2020-07-06T15:38:33Z", "type": "forcePushed"}, {"oid": "67ea79451272b4d220be41805865349a2a5859d3", "url": "https://github.com/ankidroid/Anki-Android/commit/67ea79451272b4d220be41805865349a2a5859d3", "message": "AnkiDroidJS: display blank if button unavailable\n\nFixes 6623", "committedDate": "2020-07-06T15:58:35Z", "type": "forcePushed"}, {"oid": "583b14841ae94274aadb4b849ddb614b1197a7ed", "url": "https://github.com/ankidroid/Anki-Android/commit/583b14841ae94274aadb4b849ddb614b1197a7ed", "message": "AnkiDroidJS: display blank if button unavailable\n\nFixes 6623", "committedDate": "2020-07-06T16:34:10Z", "type": "forcePushed"}, {"oid": "f82d915c901883ea208592326bd5dd9653ba7715", "url": "https://github.com/ankidroid/Anki-Android/commit/f82d915c901883ea208592326bd5dd9653ba7715", "message": "AnkiDroidJS: display blank if button unavailable\n\nFixes 6623", "committedDate": "2020-07-06T18:27:39Z", "type": "commit"}, {"oid": "f82d915c901883ea208592326bd5dd9653ba7715", "url": "https://github.com/ankidroid/Anki-Android/commit/f82d915c901883ea208592326bd5dd9653ba7715", "message": "AnkiDroidJS: display blank if button unavailable\n\nFixes 6623", "committedDate": "2020-07-06T18:27:39Z", "type": "forcePushed"}]}