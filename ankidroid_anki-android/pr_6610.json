{"pr_number": 6610, "pr_title": "Optimize model count (performance)", "pr_author": "Arthur-Milchior", "pr_createdAt": "2020-07-04T15:49:14Z", "pr_url": "https://github.com/ankidroid/Anki-Android/pull/6610", "timeline": [{"oid": "48fdfe435b015fb0dd8bfb5721149e82b0ebf78d", "url": "https://github.com/ankidroid/Anki-Android/commit/48fdfe435b015fb0dd8bfb5721149e82b0ebf78d", "message": "NF: kill Task_Type_Count_Models when ModelBrowser close", "committedDate": "2020-07-04T17:10:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgwMDE2OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449800169", "body": "When would this be called on restore?", "bodyText": "When would this be called on restore?", "bodyHTML": "<p dir=\"auto\">When would this be called on restore?</p>", "author": "david-allison-1", "createdAt": "2020-07-04T19:43:51Z", "path": "AnkiDroid/src/main/java/com/ichi2/anki/ModelBrowser.java", "diffHunk": "@@ -207,6 +207,7 @@ public boolean onOptionsItemSelected(MenuItem item) {\n \n     @Override\n     public void onStop() {\n+        CollectionTask.cancelTask(COUNT_MODELS);", "originalCommit": "48fdfe435b015fb0dd8bfb5721149e82b0ebf78d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgwMDcwMQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449800701", "bodyText": "Right. Should have been onDestroy", "author": "Arthur-Milchior", "createdAt": "2020-07-04T19:51:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgwMDE2OQ=="}], "type": "inlineReview"}, {"oid": "fabb154f2563c54c6743d039429c8d5d7c00cc0b", "url": "https://github.com/ankidroid/Anki-Android/commit/fabb154f2563c54c6743d039429c8d5d7c00cc0b", "message": "NF: kill Task_Type_Count_Models when ModelBrowser close", "committedDate": "2020-07-04T19:52:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgxMzk4Ng==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449813986", "body": "Have you tested this?\r\n\r\nhttps://github.com/ankidroid/Anki-Android/blob/e4543a40de9b69a8533bddb0346ee3c3e0c34b91/AnkiDroid/src/main/java/com/ichi2/anki/ModelBrowser.java#L108-L113", "bodyText": "Have you tested this?\n\n  \n    \n      Anki-Android/AnkiDroid/src/main/java/com/ichi2/anki/ModelBrowser.java\n    \n    \n        Lines 108 to 113\n      in\n      e4543a4\n    \n    \n    \n    \n\n        \n          \n           @Override \n        \n\n        \n          \n           public void onPostExecute(TaskData result) { \n        \n\n        \n          \n            \n        \n\n        \n          \n               if (!result.getBoolean()) { \n        \n\n        \n          \n                   throw new RuntimeException(); \n        \n\n        \n          \n               }", "bodyHTML": "<p dir=\"auto\">Have you tested this?</p>\n<p dir=\"auto\"><div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom color-bg-subtle\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/ankidroid/Anki-Android/blob/e4543a40de9b69a8533bddb0346ee3c3e0c34b91/AnkiDroid/src/main/java/com/ichi2/anki/ModelBrowser.java#L108-L113\">Anki-Android/AnkiDroid/src/main/java/com/ichi2/anki/ModelBrowser.java</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 108 to 113\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/ankidroid/Anki-Android/commit/e4543a40de9b69a8533bddb0346ee3c3e0c34b91\">e4543a4</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L108\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"108\"></td>\n          <td id=\"LC108\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">@Override</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L109\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"109\"></td>\n          <td id=\"LC109\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-k\">public</span> <span class=\"pl-k\">void</span> <span class=\"pl-en\">onPostExecute</span>(<span class=\"pl-smi\">TaskData</span> <span class=\"pl-v\">result</span>) { </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L110\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"110\"></td>\n          <td id=\"LC110\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">  </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L111\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"111\"></td>\n          <td id=\"LC111\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     <span class=\"pl-k\">if</span> (<span class=\"pl-k\">!</span>result<span class=\"pl-k\">.</span>getBoolean()) { </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L112\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"112\"></td>\n          <td id=\"LC112\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">         <span class=\"pl-k\">throw</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">RuntimeException</span>(); </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L113\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"113\"></td>\n          <td id=\"LC113\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\">     } </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>", "author": "david-allison-1", "createdAt": "2020-07-04T23:35:42Z", "path": "AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java", "diffHunk": "@@ -1505,8 +1505,11 @@ public int compare(JSONObject a, JSONObject b) {\n \n         try{\n             for (JSONObject n : models) {\n-                long modID = n.getLong(\"id\");\n-                cardCount.add(col.getModels().nids(col.getModels().get(modID)).size());\n+                if (isCancelled()) {\n+                    Timber.e(\"doInBackgroundLoadModels :: Cancelled\");\n+                    return new TaskData(false);", "originalCommit": "fabb154f2563c54c6743d039429c8d5d7c00cc0b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgxNTQ4Ng==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449815486", "bodyText": "Quite hard to say, because even if I can still open and close the list of note type, I can't be sure that the request was actually cancelled.\nI've not check cat to ensure that cancellation was done.\nAccording to https://developer.android.com/reference/android/os/AsyncTask#cancel(boolean)\nonPostExecute is not run when the task is cancelled. I guess that I could as well have returned null", "author": "Arthur-Milchior", "createdAt": "2020-07-05T00:03:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgxMzk4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg2MDExMg==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449860112", "bodyText": "Okay - let's add a comment that the choice is explicit, then we're good to go", "author": "david-allison-1", "createdAt": "2020-07-05T10:18:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTgxMzk4Ng=="}], "type": "inlineReview"}, {"oid": "6a3f4c4e9d6a56a6bdc560729131865c567bc04e", "url": "https://github.com/ankidroid/Anki-Android/commit/6a3f4c4e9d6a56a6bdc560729131865c567bc04e", "message": "NF: kill Task_Type_Count_Models when ModelBrowser close", "committedDate": "2020-07-05T15:21:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5MjA2OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449892069", "body": "@Arthur-Milchior I think this just needs a comment here and it can merge \r\n```suggestion\r\n                    // onPostExecute should not be called if canceled, return should not matter. Using false.\r\n                    return new TaskData(false);\r\n```", "bodyText": "@Arthur-Milchior I think this just needs a comment here and it can merge\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                return new TaskData(false);\n          \n          \n            \n                                // onPostExecute should not be called if canceled, return should not matter. Using false.\n          \n          \n            \n                                return new TaskData(false);", "bodyHTML": "<p dir=\"auto\"><a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/Arthur-Milchior/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/Arthur-Milchior\">@Arthur-Milchior</a> I think this just needs a comment here and it can merge</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                    <span class=\"pl-k\">return</span> <span class=\"pl-k x x-first\">new</span><span class=\"x\"> </span><span class=\"pl-smi x\">TaskData</span><span class=\"x x-last\">(</span><span class=\"pl-c1\">false</span><span class=\"x x-first x-last\">);</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                    <span class=\"pl-c\"><span class=\"pl-c x x-first\">//</span><span class=\"x x-last\"> onPostExecute should not be called if canceled, </span>return <span class=\"x x-first x-last\">should not matter. Using </span>false<span class=\"x x-first x-last\">.</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                    <span class=\"pl-k\">return</span> <span class=\"pl-k\">new</span> <span class=\"pl-smi\">TaskData</span>(<span class=\"pl-c1\">false</span>);</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "mikehardy", "createdAt": "2020-07-05T15:55:04Z", "path": "AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java", "diffHunk": "@@ -1546,8 +1546,11 @@ public int compare(JSONObject a, JSONObject b) {\n \n         try{\n             for (JSONObject n : models) {\n-                long modID = n.getLong(\"id\");\n-                cardCount.add(col.getModels().nids(col.getModels().get(modID)).size());\n+                if (isCancelled()) {\n+                    Timber.e(\"doInBackgroundLoadModels :: Cancelled\");\n+                    return new TaskData(false);", "originalCommit": "6a3f4c4e9d6a56a6bdc560729131865c567bc04e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5MjMxMQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449892311", "bodyText": "Comment added. Returning null since we do not actually care about the value", "author": "Arthur-Milchior", "createdAt": "2020-07-05T15:57:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5MjA2OQ=="}], "type": "inlineReview"}, {"oid": "9010e5b5c2eb70c7d938108076e14d3ab569f860", "url": "https://github.com/ankidroid/Anki-Android/commit/9010e5b5c2eb70c7d938108076e14d3ab569f860", "message": "NF: kill Task_Type_Count_Models when ModelBrowser close", "committedDate": "2020-07-05T15:57:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NTY2Ng==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449895666", "body": "`onPostExecute` also crashes on null, could we handle this case if we're going to imply it's fine. ", "bodyText": "onPostExecute also crashes on null, could we handle this case if we're going to imply it's fine.", "bodyHTML": "<p dir=\"auto\"><code>onPostExecute</code> also crashes on null, could we handle this case if we're going to imply it's fine.</p>", "author": "david-allison-1", "createdAt": "2020-07-05T16:35:19Z", "path": "AnkiDroid/src/main/java/com/ichi2/async/CollectionTask.java", "diffHunk": "@@ -1546,8 +1546,12 @@ public int compare(JSONObject a, JSONObject b) {\n \n         try{\n             for (JSONObject n : models) {\n-                long modID = n.getLong(\"id\");\n-                cardCount.add(col.getModels().nids(col.getModels().get(modID)).size());\n+                if (isCancelled()) {\n+                    Timber.e(\"doInBackgroundLoadModels :: Cancelled\");\n+                    // onPostExecute not executed if cancelled. Return value not used.\n+                    return null;", "originalCommit": "9010e5b5c2eb70c7d938108076e14d3ab569f860", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NTk3Ng==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449895976", "bodyText": "I do not understand your request. Do you want onPostExecute to check for non-null value ?\nI guess we could, and behave the same way as when it gets a False value, i.e. throw an exception.\nI fail to see the point, since this method return null only if task is cancelled, and in this case onPostExecute is not executed. So there should be no way for onPostExecute to obtain the null", "author": "Arthur-Milchior", "createdAt": "2020-07-05T16:38:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NTY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NzA2MA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449897060", "bodyText": "perhaps even stronger is a change to BaseAsyncTask::onPostExecute that strongly verifies BaseAsyncTask::isCancelled == false, and otherwise does a Timber.w / sendExceptionReport and returns\nBasically we have a fear that there will be unpredictable onPostExecute behavior and the risk is the system does not follow it's guidance that onPostExecute won't happen if cancelled, so let's manage the risk directly instead of in client code?\nI verified BaseAyncTask::onPostExecute is called first in the delegate objects.", "author": "mikehardy", "createdAt": "2020-07-05T16:50:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NTY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NzQwMA==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449897400", "bodyText": "I guess to be fully safe until that proposed change to BaseAsyncTask::onPostExecute proves to our satisfaction we are safe, then the client code would also need to null check and say via Timber effectively \"this is never supposed to happen, we were called after a cancel\"", "author": "mikehardy", "createdAt": "2020-07-05T16:54:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NTY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5ODE2Nw==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449898167", "bodyText": "This is just from a maintenance point of view - people are likely to copy/paste and return null in the future on an edge case, as it looks safe, and we should protect against this.", "author": "david-allison-1", "createdAt": "2020-07-05T17:02:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NTY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5ODM5Mw==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449898393", "bodyText": "#6629", "author": "Arthur-Milchior", "createdAt": "2020-07-05T17:05:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NTY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5ODg4NQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449898885", "bodyText": "To restate. I'm happy that onPostExecute won't run.\nI'm concerned that we've introduced the logic: \"It's OK to return null, as long as we're in an isCanceled() block\", as that breaks the principle of least astonishment", "author": "david-allison-1", "createdAt": "2020-07-05T17:12:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NTY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5OTA0OQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449899049", "bodyText": "Then stated most explicitly: to approve you require either null handling, or the return false again? And to be least-surprising returning false might be most consistent?", "author": "mikehardy", "createdAt": "2020-07-05T17:14:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NTY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5OTUwMQ==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449899501", "bodyText": "I added back \"False\" then. I have no strong opinion here. My weak opinion is that the least astonishing thing would be to return \"null\" in both cases, since there is nothing \"false\" here.\nActually, I believe there is little reason to catch the potential exception only to throw a new one (with less details) in onPostExecute, so I believe the try/catch should be removed", "author": "Arthur-Milchior", "createdAt": "2020-07-05T17:19:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NTY2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5OTg4Mg==", "url": "https://github.com/ankidroid/Anki-Android/pull/6610#discussion_r449899882", "bodyText": "Returning null and handling it seems like the best option, but yes, would be happy with both options", "author": "david-allison-1", "createdAt": "2020-07-05T17:23:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg5NTY2Ng=="}], "type": "inlineReview"}, {"oid": "a380613fb92a4857cfd793b843a59140d1419a34", "url": "https://github.com/ankidroid/Anki-Android/commit/a380613fb92a4857cfd793b843a59140d1419a34", "message": "NF: kill Task_Type_Count_Models when ModelBrowser close", "committedDate": "2020-07-05T17:14:32Z", "type": "forcePushed"}, {"oid": "af086f186b7549ae45ba72c743b838701ccacbd1", "url": "https://github.com/ankidroid/Anki-Android/commit/af086f186b7549ae45ba72c743b838701ccacbd1", "message": "NF: kill Task_Type_Count_Models when ModelBrowser close", "committedDate": "2020-07-05T19:48:09Z", "type": "forcePushed"}, {"oid": "ef3fa794effc954886762f6029342cb4be7e5466", "url": "https://github.com/ankidroid/Anki-Android/commit/ef3fa794effc954886762f6029342cb4be7e5466", "message": "NF: avoid going from id to count model to id", "committedDate": "2020-07-05T23:44:49Z", "type": "commit"}, {"oid": "e912163508b19aa0d542fc38bba95536e3d3c875", "url": "https://github.com/ankidroid/Anki-Android/commit/e912163508b19aa0d542fc38bba95536e3d3c875", "message": "NF: uses sql's count instead of list size", "committedDate": "2020-07-05T23:44:49Z", "type": "commit"}, {"oid": "7ce359195c7ae2e200487cc1a95b918fe1922823", "url": "https://github.com/ankidroid/Anki-Android/commit/7ce359195c7ae2e200487cc1a95b918fe1922823", "message": "NF: doInBackgroundLoadModels cancellable", "committedDate": "2020-07-05T23:44:49Z", "type": "commit"}, {"oid": "729e173142aadbb20d2c05637e316b961182cb80", "url": "https://github.com/ankidroid/Anki-Android/commit/729e173142aadbb20d2c05637e316b961182cb80", "message": "NF: kill Task_Type_Count_Models when ModelBrowser close", "committedDate": "2020-07-05T23:44:49Z", "type": "commit"}, {"oid": "729e173142aadbb20d2c05637e316b961182cb80", "url": "https://github.com/ankidroid/Anki-Android/commit/729e173142aadbb20d2c05637e316b961182cb80", "message": "NF: kill Task_Type_Count_Models when ModelBrowser close", "committedDate": "2020-07-05T23:44:49Z", "type": "forcePushed"}]}