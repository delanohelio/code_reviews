{"pr_number": 1180, "pr_title": "Improvement to support multiple token issuers with Claim Mappings #1179", "pr_author": "tharmini", "pr_createdAt": "2020-04-01T10:12:07Z", "pr_url": "https://github.com/wso2/product-microgateway/pull/1180", "timeline": [{"oid": "9b1b5cfc8913074d31d946a8f4f6423f8f26e8ea", "url": "https://github.com/wso2/product-microgateway/commit/9b1b5cfc8913074d31d946a8f4f6423f8f26e8ea", "message": "Add new feature for mapping JWT transformation", "committedDate": "2020-04-01T06:47:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU1MjAyOQ==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r401552029", "body": "Remove all unwanted new lines", "bodyText": "Remove all unwanted new lines", "bodyHTML": "<p dir=\"auto\">Remove all unwanted new lines</p>", "author": "praminda", "createdAt": "2020-04-01T11:42:44Z", "path": "components/micro-gateway-jwt-transformer/src/main/java/org/wso2/micro/gateway/jwttransformer/JWTTransformer.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.jwttransformer;\n+\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+\n+/**\n+ * Defines the interface for writing the  jwt tranformation.\n+ */\n+public interface JWTTransformer {", "originalCommit": "c606e67a321b26094d797e20f9c0b589f5bea35b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU1MjEyMA==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r401552120", "body": "```suggestion\r\n```", "bodyText": "Suggested change", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "praminda", "createdAt": "2020-04-01T11:42:52Z", "path": "components/micro-gateway-jwt-transformer/src/main/java/org/wso2/micro/gateway/jwttransformer/DefaultJWTTransformer.java", "diffHunk": "@@ -0,0 +1,45 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+package org.wso2.micro.gateway.jwttransformer;\n+\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+\n+/**\n+ * This file is for default Jwt transformer\n+ */\n+public class DefaultJWTTransformer implements JWTTransformer {\n+\n+    @Override\n+    public MapValue transformJWT(MapValue scopes) {\n+        String scope = \"\";\n+        MapValue scopesValue = scopes;\n+        int sizeOfScope = scopesValue.size();\n+        String name = scopesValue.get(\"scope\").getClass().getName();\n+        if (scopesValue.containsKey(\"scope\")) {\n+         if (scopesValue.get(\"scope\") instanceof ArrayValueImpl) {\n+             for (int i = 0; i < ((ArrayValueImpl) scopesValue.get(\"scope\")).size(); i++) {\n+                 scope +=  ((ArrayValueImpl) scopesValue.get(\"scope\")).getString(i) + \" \";\n+", "originalCommit": "c606e67a321b26094d797e20f9c0b589f5bea35b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU1MjU3Mw==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r401552573", "body": "Javadoc must have a `.` at the end of first sentence. This is a checked by checkstyles\r\n```suggestion\r\n * This file is for default Jwt transformer.\r\n```", "bodyText": "Javadoc must have a . at the end of first sentence. This is a checked by checkstyles\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * This file is for default Jwt transformer\n          \n          \n            \n             * This file is for default Jwt transformer.", "bodyHTML": "<p dir=\"auto\">Javadoc must have a <code>.</code> at the end of first sentence. This is a checked by checkstyles</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">This</span> file is <span class=\"pl-k\">for</span> <span class=\"pl-k\">default</span> <span class=\"pl-smi\">Jwt</span> transformer</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">This</span> file is <span class=\"pl-k\">for</span> <span class=\"pl-k\">default</span> <span class=\"pl-smi\">Jwt</span> transformer<span class=\"x x-first x-last\">.</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "praminda", "createdAt": "2020-04-01T11:43:50Z", "path": "components/micro-gateway-jwt-transformer/src/main/java/org/wso2/micro/gateway/jwttransformer/DefaultJWTTransformer.java", "diffHunk": "@@ -0,0 +1,45 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+package org.wso2.micro.gateway.jwttransformer;\n+\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+\n+/**\n+ * This file is for default Jwt transformer", "originalCommit": "c606e67a321b26094d797e20f9c0b589f5bea35b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU1MjgwNQ==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r401552805", "body": "```suggestion\r\n```", "bodyText": "Suggested change", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"42\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "praminda", "createdAt": "2020-04-01T11:44:16Z", "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/mapping/MappingInvoker.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.core.mapping;\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.wso2.micro.gateway.jwttransformer.JWTTransformer;\n+\n+\n+/**\n+ * This class Class to dynamically invoke the transformer\n+ */\n+public class MappingInvoker {\n+\n+    private static final Logger log = LoggerFactory.getLogger(\"ballerina\");\n+    private  static JWTTransformer jwtTransformer;\n+\n+    public static String loadMappingClass(String className) {\n+        try {\n+", "originalCommit": "c606e67a321b26094d797e20f9c0b589f5bea35b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU1MzExNg==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r401553116", "body": "Try block is not formatted properly. Check indentation.", "bodyText": "Try block is not formatted properly. Check indentation.", "bodyHTML": "<p dir=\"auto\">Try block is not formatted properly. Check indentation.</p>", "author": "praminda", "createdAt": "2020-04-01T11:44:57Z", "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/mapping/MappingInvoker.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.core.mapping;\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.wso2.micro.gateway.jwttransformer.JWTTransformer;\n+\n+\n+/**\n+ * This class Class to dynamically invoke the transformer\n+ */\n+public class MappingInvoker {\n+\n+    private static final Logger log = LoggerFactory.getLogger(\"ballerina\");\n+    private  static JWTTransformer jwtTransformer;\n+\n+    public static String loadMappingClass(String className) {\n+        try {", "originalCommit": "c606e67a321b26094d797e20f9c0b589f5bea35b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU1MzE3MQ==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r401553171", "body": "```suggestion\r\n * This class Class to dynamically invoke the transformer.\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * This class Class to dynamically invoke the transformer\n          \n          \n            \n             * This class Class to dynamically invoke the transformer.", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"> <span class=\"pl-k\">*</span> This <span class=\"pl-k\">class</span> <span class=\"pl-en\">Class</span> to dynamically invoke the transformer</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> This <span class=\"pl-k\">class</span> <span class=\"pl-en\">Class</span> to dynamically invoke the transformer<span class=\"x x-first x-last\">.</span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "praminda", "createdAt": "2020-04-01T11:45:05Z", "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/mapping/MappingInvoker.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.core.mapping;\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.wso2.micro.gateway.jwttransformer.JWTTransformer;\n+\n+\n+/**\n+ * This class Class to dynamically invoke the transformer", "originalCommit": "c606e67a321b26094d797e20f9c0b589f5bea35b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "35f038e53744b3562b0b8e0e9c227b24fc823941", "url": "https://github.com/wso2/product-microgateway/commit/35f038e53744b3562b0b8e0e9c227b24fc823941", "message": "Resolve reviewd comments and read custom claims and class name in JWT handler creation", "committedDate": "2020-04-02T11:14:13Z", "type": "forcePushed"}, {"oid": "7b3c4c4d0a2df3ab288572f46c774f12e3973801", "url": "https://github.com/wso2/product-microgateway/commit/7b3c4c4d0a2df3ab288572f46c774f12e3973801", "message": "Resolve reviewd comments", "committedDate": "2020-04-15T10:19:22Z", "type": "commit"}, {"oid": "7b3c4c4d0a2df3ab288572f46c774f12e3973801", "url": "https://github.com/wso2/product-microgateway/commit/7b3c4c4d0a2df3ab288572f46c774f12e3973801", "message": "Resolve reviewd comments", "committedDate": "2020-04-15T10:19:22Z", "type": "forcePushed"}, {"oid": "72b4abe0e4341dc4c2349abf5407222bdb281139", "url": "https://github.com/wso2/product-microgateway/commit/72b4abe0e4341dc4c2349abf5407222bdb281139", "message": "resolved comments and resolved conflict", "committedDate": "2020-04-16T13:42:59Z", "type": "forcePushed"}, {"oid": "7b3c4c4d0a2df3ab288572f46c774f12e3973801", "url": "https://github.com/wso2/product-microgateway/commit/7b3c4c4d0a2df3ab288572f46c774f12e3973801", "message": "Resolve reviewd comments", "committedDate": "2020-04-15T10:19:22Z", "type": "forcePushed"}, {"oid": "daa5a352a50ec1a229dccc0805582c6bd253ecff", "url": "https://github.com/wso2/product-microgateway/commit/daa5a352a50ec1a229dccc0805582c6bd253ecff", "message": "resolved comments and conflict", "committedDate": "2020-04-16T16:14:04Z", "type": "commit"}, {"oid": "9d957047d1d987d102d13656d83a5ea7761b7b63", "url": "https://github.com/wso2/product-microgateway/commit/9d957047d1d987d102d13656d83a5ea7761b7b63", "message": "Add integration test case", "committedDate": "2020-04-24T08:51:06Z", "type": "commit"}, {"oid": "9d957047d1d987d102d13656d83a5ea7761b7b63", "url": "https://github.com/wso2/product-microgateway/commit/9d957047d1d987d102d13656d83a5ea7761b7b63", "message": "Add integration test case", "committedDate": "2020-04-24T08:51:06Z", "type": "forcePushed"}, {"oid": "49be77d90f771dc763c3aaa209f890bf741705ca", "url": "https://github.com/wso2/product-microgateway/commit/49be77d90f771dc763c3aaa209f890bf741705ca", "message": "Move Error handle to ballerina side", "committedDate": "2020-04-24T15:55:02Z", "type": "commit"}, {"oid": "49be77d90f771dc763c3aaa209f890bf741705ca", "url": "https://github.com/wso2/product-microgateway/commit/49be77d90f771dc763c3aaa209f890bf741705ca", "message": "Move Error handle to ballerina side", "committedDate": "2020-04-24T15:55:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA2MzY4NQ==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r429063685", "body": "Comment seems to have class word twice", "bodyText": "Comment seems to have class word twice", "bodyHTML": "<p dir=\"auto\">Comment seems to have class word twice</p>", "author": "Rajith90", "createdAt": "2020-05-22T06:23:27Z", "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/mapping/MappingInvoker.java", "diffHunk": "@@ -0,0 +1,95 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.core.mapping;\n+\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.MapValueImpl;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.wso2.micro.gateway.jwttransformer.JWTValueTransformer;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ * This class Class to dynamically invoke the transformer.", "originalCommit": "49be77d90f771dc763c3aaa209f890bf741705ca", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTA3NDMxNA==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r429074314", "body": "Use a proper name for the map", "bodyText": "Use a proper name for the map", "bodyHTML": "<p dir=\"auto\">Use a proper name for the map</p>", "author": "Rajith90", "createdAt": "2020-05-22T06:55:26Z", "path": "components/micro-gateway-core/src/main/java/org/wso2/micro/gateway/core/mapping/MappingInvoker.java", "diffHunk": "@@ -0,0 +1,95 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.core.mapping;\n+\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.MapValueImpl;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.wso2.micro.gateway.jwttransformer.JWTValueTransformer;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ * This class Class to dynamically invoke the transformer.\n+ */\n+public class MappingInvoker {\n+    private static Map map;", "originalCommit": "49be77d90f771dc763c3aaa209f890bf741705ca", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f43ac87c2513219c3237d5003e5fc82eb6464522", "url": "https://github.com/wso2/product-microgateway/commit/f43ac87c2513219c3237d5003e5fc82eb6464522", "message": "resolve comments", "committedDate": "2020-05-22T14:35:06Z", "type": "commit"}, {"oid": "1c286051e8eb599adf78d105b01abe58d3460b86", "url": "https://github.com/wso2/product-microgateway/commit/1c286051e8eb599adf78d105b01abe58d3460b86", "message": "add jwt claim mapping in default micro gateway template.", "committedDate": "2020-05-29T06:46:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAzOTc4NQ==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r433039785", "body": "I think package name should be jwt.transformer", "bodyText": "I think package name should be jwt.transformer", "bodyHTML": "<p dir=\"auto\">I think package name should be jwt.transformer</p>", "author": "Rajith90", "createdAt": "2020-06-01T04:49:05Z", "path": "tests/src/main/java/org/wso2/micro/gateway/tests/jwtvaluetransformer/DefaultJwtTransformer.java", "diffHunk": "@@ -0,0 +1,26 @@\n+package org.wso2.micro.gateway.tests.jwtvaluetransformer;\n+\n+import org.wso2.micro.gateway.jwttransformer.JWTValueTransformer;", "originalCommit": "1c286051e8eb599adf78d105b01abe58d3460b86", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAzOTgyNw==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r433039827", "body": "I think package name should be jwt.transformer", "bodyText": "I think package name should be jwt.transformer", "bodyHTML": "<p dir=\"auto\">I think package name should be jwt.transformer</p>", "author": "Rajith90", "createdAt": "2020-06-01T04:49:20Z", "path": "components/micro-gateway-jwt-transformer/src/main/java/org/wso2/micro/gateway/jwttransformer/JWTValueTransformer.java", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ */\n+\n+package org.wso2.micro.gateway.jwttransformer;", "originalCommit": "1c286051e8eb599adf78d105b01abe58d3460b86", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a4a675eef13666e4cd86925e234f8df83099069c", "url": "https://github.com/wso2/product-microgateway/commit/a4a675eef13666e4cd86925e234f8df83099069c", "message": "change package name", "committedDate": "2020-06-01T05:40:48Z", "type": "commit"}, {"oid": "02bf9527a02cb3f6694f8575e978e9c1b9c2d022", "url": "https://github.com/wso2/product-microgateway/commit/02bf9527a02cb3f6694f8575e978e9c1b9c2d022", "message": "edit default template", "committedDate": "2020-06-02T09:05:51Z", "type": "commit"}, {"oid": "5f59752dbe7e675db21fd42ffdb368be6f38d734", "url": "https://github.com/wso2/product-microgateway/commit/5f59752dbe7e675db21fd42ffdb368be6f38d734", "message": "Merge branch 'master' of https://github.com/wso2/product-microgateway into master1\n\n# Conflicts:\n#\tcomponents/micro-gateway-core/pom.xml\n#\tcomponents/micro-gateway-core/src/main/ballerina/src/gateway/api_gateway_cache.bal\n#\ttests/src/test/java/org/wso2/micro/gateway/tests/common/MockBackEndServer.java\n#\ttests/src/test/java/org/wso2/micro/gateway/tests/common/ResponseConstants.java\n#\ttests/src/test/resources/testng.xml", "committedDate": "2020-06-03T04:43:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwOTM3Ng==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r434309376", "body": "```suggestion\r\n/*\r\n * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\r\n *\r\n * WSO2 Inc. licenses this file to you under the Apache License,\r\n * Version 2.0 (the \"License\"); you may not use this file except\r\n * in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\npackage org.wso2.micro.gateway.tests.jwtvaluetransformer;\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            package org.wso2.micro.gateway.tests.jwtvaluetransformer;\n          \n          \n            \n            /*\n          \n          \n            \n             * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n          \n          \n            \n             *\n          \n          \n            \n             * WSO2 Inc. licenses this file to you under the Apache License,\n          \n          \n            \n             * Version 2.0 (the \"License\"); you may not use this file except\n          \n          \n            \n             * in compliance with the License.\n          \n          \n            \n             * You may obtain a copy of the License at\n          \n          \n            \n             *\n          \n          \n            \n             *    http://www.apache.org/licenses/LICENSE-2.0\n          \n          \n            \n             *\n          \n          \n            \n             * Unless required by applicable law or agreed to in writing,\n          \n          \n            \n             * software distributed under the License is distributed on an\n          \n          \n            \n             * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n          \n          \n            \n             * KIND, either express or implied.  See the License for the\n          \n          \n            \n             * specific language governing permissions and limitations\n          \n          \n            \n             * under the License.\n          \n          \n            \n             */\n          \n          \n            \n            \n          \n          \n            \n            package org.wso2.micro.gateway.tests.jwtvaluetransformer;", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"19\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"><span class=\"pl-k x x-first\">package</span><span class=\"x\"> </span><span class=\"pl-smi x\">org.wso2.micro.gateway.tests.jwtvaluetransformer</span><span class=\"x x-last\">;</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"19\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"><span class=\"pl-c\"><span class=\"pl-c x x-first x-last\">/*</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"20\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Copyright</span> (c) <span class=\"pl-c1\">2020</span>, <span class=\"pl-c1\">WSO2</span> <span class=\"pl-smi\">Inc</span>. (http<span class=\"pl-k\">:</span><span class=\"pl-c\"><span class=\"pl-c\">//</span>www.wso2.org) All Rights Reserved.</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"21\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"22\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-c1\">WSO2</span> <span class=\"pl-smi\">Inc</span>. licenses <span class=\"pl-c1\">this</span> file to you under the <span class=\"pl-smi\">Apache</span> <span class=\"pl-smi\">License</span>,</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"23\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Version</span> <span class=\"pl-c1\">2.0</span> (the <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>License<span class=\"pl-pds\">\"</span></span>); you may not use <span class=\"pl-c1\">this</span> file except</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"24\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> in compliance with the <span class=\"pl-smi\">License</span>.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"25\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">You</span> may obtain a copy of the <span class=\"pl-smi\">License</span> at</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"26\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"27\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span>    http<span class=\"pl-k\">:</span><span class=\"pl-c\"><span class=\"pl-c\">//</span>www.apache.org/licenses/LICENSE-2.0</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"28\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"29\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Unless</span> required by applicable law or agreed to in writing,</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"30\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> software distributed under the <span class=\"pl-smi\">License</span> is distributed on an</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"31\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>AS IS<span class=\"pl-pds\">\"</span></span> <span class=\"pl-c1\">BASIS</span>, <span class=\"pl-c1\">WITHOUT</span> <span class=\"pl-c1\">WARRANTIES</span> <span class=\"pl-c1\">OR</span> <span class=\"pl-c1\">CONDITIONS</span> <span class=\"pl-c1\">OF</span> <span class=\"pl-c1\">ANY</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"32\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-c1\">KIND</span>, either express or implied.  <span class=\"pl-smi\">See</span> the <span class=\"pl-smi\">License</span> <span class=\"pl-k\">for</span> the</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"33\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> specific language governing permissions and limitations</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"34\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> under the <span class=\"pl-smi\">License</span>.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"35\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*/</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"36\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"37\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"><span class=\"pl-k\">package</span> <span class=\"pl-smi\">org.wso2.micro.gateway.tests.jwtvaluetransformer</span>;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "praminda", "createdAt": "2020-06-03T05:03:50Z", "path": "tests/src/main/java/org/wso2/micro/gateway/tests/jwtvaluetransformer/DefaultJwtTransformer.java", "diffHunk": "@@ -0,0 +1,26 @@\n+package org.wso2.micro.gateway.tests.jwtvaluetransformer;", "originalCommit": "5f59752dbe7e675db21fd42ffdb368be6f38d734", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMwOTQ5Nw==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r434309497", "body": "```suggestion\r\n/*\r\n * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\r\n *\r\n * WSO2 Inc. licenses this file to you under the Apache License,\r\n * Version 2.0 (the \"License\"); you may not use this file except\r\n * in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *    http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\r\n\r\npackage org.wso2.micro.gateway.tests.jwtTransformer;\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            package org.wso2.micro.gateway.tests.jwtTransformer;\n          \n          \n            \n            /*\n          \n          \n            \n             * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n          \n          \n            \n             *\n          \n          \n            \n             * WSO2 Inc. licenses this file to you under the Apache License,\n          \n          \n            \n             * Version 2.0 (the \"License\"); you may not use this file except\n          \n          \n            \n             * in compliance with the License.\n          \n          \n            \n             * You may obtain a copy of the License at\n          \n          \n            \n             *\n          \n          \n            \n             *    http://www.apache.org/licenses/LICENSE-2.0\n          \n          \n            \n             *\n          \n          \n            \n             * Unless required by applicable law or agreed to in writing,\n          \n          \n            \n             * software distributed under the License is distributed on an\n          \n          \n            \n             * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n          \n          \n            \n             * KIND, either express or implied.  See the License for the\n          \n          \n            \n             * specific language governing permissions and limitations\n          \n          \n            \n             * under the License.\n          \n          \n            \n             */\n          \n          \n            \n            \n          \n          \n            \n            package org.wso2.micro.gateway.tests.jwtTransformer;", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"19\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\"><span class=\"pl-k x x-first\">package</span><span class=\"x\"> </span><span class=\"pl-smi x\">org.wso2.micro.gateway.tests.jwtTransformer</span><span class=\"x x-last\">;</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"19\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"><span class=\"pl-c\"><span class=\"pl-c x x-first x-last\">/*</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"20\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Copyright</span> (c) <span class=\"pl-c1\">2020</span>, <span class=\"pl-c1\">WSO2</span> <span class=\"pl-smi\">Inc</span>. (http<span class=\"pl-k\">:</span><span class=\"pl-c\"><span class=\"pl-c\">//</span>www.wso2.org) All Rights Reserved.</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"21\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"22\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-c1\">WSO2</span> <span class=\"pl-smi\">Inc</span>. licenses <span class=\"pl-c1\">this</span> file to you under the <span class=\"pl-smi\">Apache</span> <span class=\"pl-smi\">License</span>,</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"23\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Version</span> <span class=\"pl-c1\">2.0</span> (the <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>License<span class=\"pl-pds\">\"</span></span>); you may not use <span class=\"pl-c1\">this</span> file except</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"24\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> in compliance with the <span class=\"pl-smi\">License</span>.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"25\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">You</span> may obtain a copy of the <span class=\"pl-smi\">License</span> at</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"26\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"27\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span>    http<span class=\"pl-k\">:</span><span class=\"pl-c\"><span class=\"pl-c\">//</span>www.apache.org/licenses/LICENSE-2.0</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"28\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"29\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-smi\">Unless</span> required by applicable law or agreed to in writing,</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"30\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> software distributed under the <span class=\"pl-smi\">License</span> is distributed on an</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"31\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>AS IS<span class=\"pl-pds\">\"</span></span> <span class=\"pl-c1\">BASIS</span>, <span class=\"pl-c1\">WITHOUT</span> <span class=\"pl-c1\">WARRANTIES</span> <span class=\"pl-c1\">OR</span> <span class=\"pl-c1\">CONDITIONS</span> <span class=\"pl-c1\">OF</span> <span class=\"pl-c1\">ANY</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"32\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> <span class=\"pl-c1\">KIND</span>, either express or implied.  <span class=\"pl-smi\">See</span> the <span class=\"pl-smi\">License</span> <span class=\"pl-k\">for</span> the</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"33\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> specific language governing permissions and limitations</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"34\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*</span> under the <span class=\"pl-smi\">License</span>.</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"35\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"> <span class=\"pl-k\">*/</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"36\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"37\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\"><span class=\"pl-k\">package</span> <span class=\"pl-smi\">org.wso2.micro.gateway.tests.jwtTransformer</span>;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "praminda", "createdAt": "2020-06-03T05:04:23Z", "path": "tests/src/test/java/org/wso2/micro/gateway/tests/jwtTransformer/JwtTransformerTestCase.java", "diffHunk": "@@ -0,0 +1,67 @@\n+package org.wso2.micro.gateway.tests.jwtTransformer;", "originalCommit": "5f59752dbe7e675db21fd42ffdb368be6f38d734", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5e324f7b3a0fc400b62ef0408976aaea688026f9", "url": "https://github.com/wso2/product-microgateway/commit/5e324f7b3a0fc400b62ef0408976aaea688026f9", "message": "Apply suggestions from code review\n\nCo-authored-by: Praminda <pramindabj@gmail.com>", "committedDate": "2020-06-03T05:15:01Z", "type": "commit"}, {"oid": "cf929c7a1e9aacac932ca1663fc1cdcee572a3a0", "url": "https://github.com/wso2/product-microgateway/commit/cf929c7a1e9aacac932ca1663fc1cdcee572a3a0", "message": "update license version", "committedDate": "2020-06-03T05:21:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI5NjU2MA==", "url": "https://github.com/wso2/product-microgateway/pull/1180#discussion_r432296560", "body": "```suggestion\r\n    public static final String SYSTEM_PROP_JWT_TRANSFORMER_JAR = \"jwt_transformer_jar\";\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static final String SYSTEM_PROP_JWTTRANSFORMER_JAR = \"jwt_transformer_jar\";\n          \n          \n            \n                public static final String SYSTEM_PROP_JWT_TRANSFORMER_JAR = \"jwt_transformer_jar\";", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"33\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">final</span> <span class=\"pl-smi\">String</span> <span class=\"pl-c1 x x-first x-last\">SYSTEM_PROP_JWTTRANSFORMER_JAR</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>jwt_transformer_jar<span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"33\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">final</span> <span class=\"pl-smi\">String</span> <span class=\"pl-c1 x x-first x-last\">SYSTEM_PROP_JWT_TRANSFORMER_JAR</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>jwt_transformer_jar<span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "AmaliMatharaarachchi", "createdAt": "2020-05-29T07:12:33Z", "path": "tests/src/test/java/org/wso2/micro/gateway/tests/context/Constants.java", "diffHunk": "@@ -29,6 +29,8 @@\n     public static final String SYSTEM_PROP_WINDOWS_RUNTIME = \"runtime_windows\";\n     //Name of the system property define the location of the linux runtime distribution\n     public static final String SYSTEM_PROP_LINUX_RUNTIME = \"runtime_linux\";\n+    // Name of the system property define the custom value  transformer jar file location\n+    public static final String SYSTEM_PROP_JWTTRANSFORMER_JAR = \"jwt_transformer_jar\";", "originalCommit": "1c286051e8eb599adf78d105b01abe58d3460b86", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}