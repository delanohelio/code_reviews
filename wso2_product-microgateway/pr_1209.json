{"pr_number": 1209, "pr_title": "Fix #1207 - Issue when endpoint url contain special characters", "pr_author": "Rajith90", "pr_createdAt": "2020-04-22T13:33:37Z", "pr_url": "https://github.com/wso2/product-microgateway/pull/1209", "timeline": [{"oid": "161810d51862fd21b67547850d00bc7a43633844", "url": "https://github.com/wso2/product-microgateway/commit/161810d51862fd21b67547850d00bc7a43633844", "message": "Fix #1207 - Issue when endpoint url contain special characters\n\nWhen production endpoints containing special characters are specified in the open API definition, microgateway route the\nrequest to a wrong endpoint. This issue happens for production endpoints like \"http://test.com?value1=foo&valu2=bar\"\nwhere it contains query parameters.", "committedDate": "2020-04-22T13:27:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ2OTk5MQ==", "url": "https://github.com/wso2/product-microgateway/pull/1209#discussion_r413469991", "body": "```suggestion\r\n    @Test(description = \"Test Invoking the resource which endpoint defined at resource level \"\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @Test(description = \"Test Invoking the resource which  endpoint defined at resource level \"\n          \n          \n            \n                @Test(description = \"Test Invoking the resource which endpoint defined at resource level \"", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">@Test</span>(<span class=\"pl-c1\">description</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Test Invoking the resource which <span class=\"x x-first x-last\"> </span>endpoint defined at resource level <span class=\"pl-pds\">\"</span></span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">@Test</span>(<span class=\"pl-c1\">description</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Test Invoking the resource which endpoint defined at resource level <span class=\"pl-pds\">\"</span></span></td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "praminda", "createdAt": "2020-04-23T02:51:23Z", "path": "tests/src/test/java/org/wso2/micro/gateway/tests/endpoints/ResourceLevelEndpointsTestCase.java", "diffHunk": "@@ -67,6 +67,19 @@ public void testPerResourceEndpoint() throws Exception {\n         Assert.assertEquals(response.getResponseCode(), 200, \"Response code mismatched\");\n     }\n \n+    @Test(description = \"Test Invoking the resource which  endpoint defined at resource level \"", "originalCommit": "161810d51862fd21b67547850d00bc7a43633844", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ3NTMyMw==", "url": "https://github.com/wso2/product-microgateway/pull/1209#discussion_r413475323", "body": "Any reason to change the port? If there is an specific reason, better if you can put that in the PR description. It might be useful later.", "bodyText": "Any reason to change the port? If there is an specific reason, better if you can put that in the PR description. It might be useful later.", "bodyHTML": "<p dir=\"auto\">Any reason to change the port? If there is an specific reason, better if you can put that in the PR description. It might be useful later.</p>", "author": "praminda", "createdAt": "2020-04-23T03:07:17Z", "path": "tests/src/test/java/org/wso2/micro/gateway/tests/grpc/GrpcServer.java", "diffHunk": "@@ -31,7 +31,7 @@\n \n     public void start() throws IOException {\n         /* The port on which the server should run */\n-        int port = 50051;\n+        int port = 50075;", "originalCommit": "161810d51862fd21b67547850d00bc7a43633844", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzgzODg2MQ==", "url": "https://github.com/wso2/product-microgateway/pull/1209#discussion_r413838861", "bodyText": "There seems to be port conflict with mac. Its better to use a different port", "author": "Rajith90", "createdAt": "2020-04-23T14:22:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQ3NTMyMw=="}], "type": "inlineReview"}, {"oid": "550cbe3de9a4ab29b57f0e6666d445b731bd9e4c", "url": "https://github.com/wso2/product-microgateway/commit/550cbe3de9a4ab29b57f0e6666d445b731bd9e4c", "message": "Fix #1210 - Improve interceptors to get path parameter related details\n\nWith this commit request.getPathParams() method is intorduced to java interceptors to get path parameter details.\nAnd for ballerina interceptors users can get it as invocationContext.attributes[\"pathParams\"] and cast it to a map.\nWith this commit users can details api_name, api_version, matching_resource , using this properties from the invocation context as well.", "committedDate": "2020-04-23T14:19:39Z", "type": "commit"}, {"oid": "550cbe3de9a4ab29b57f0e6666d445b731bd9e4c", "url": "https://github.com/wso2/product-microgateway/commit/550cbe3de9a4ab29b57f0e6666d445b731bd9e4c", "message": "Fix #1210 - Improve interceptors to get path parameter related details\n\nWith this commit request.getPathParams() method is intorduced to java interceptors to get path parameter details.\nAnd for ballerina interceptors users can get it as invocationContext.attributes[\"pathParams\"] and cast it to a map.\nWith this commit users can details api_name, api_version, matching_resource , using this properties from the invocation context as well.", "committedDate": "2020-04-23T14:19:39Z", "type": "forcePushed"}]}