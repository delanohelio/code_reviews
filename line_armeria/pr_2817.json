{"pr_number": 2817, "pr_title": "Update dependencies / Fix warnings", "pr_author": "trustin", "pr_createdAt": "2020-06-19T06:55:21Z", "pr_url": "https://github.com/line/armeria/pull/2817", "timeline": [{"oid": "67078fe420166cd2ec1679d7be284aa7df284d42", "url": "https://github.com/line/armeria/commit/67078fe420166cd2ec1679d7be284aa7df284d42", "message": "Update dependencies / Fix warnings\n\n- Bouncy Castle 1.65 -> 1.65.01\n- Dropwizard 2.0.9 -> 2.0.10\n- Jetty 9.4.29 -> 9.4.30\n- Reactor 3.3.5 -> 3.3.6\n- Spring Boot 2.3.0 -> 2.3.1, 2.1.14 -> 2.1.15\n- Tomcat 9.0.35 -> 9.0.36, 8.5.55 -> 8.5.56\n- Examples:\n  - Dagger 2.27 -> 2.28\n  - grpc-kotlin-stub 0.1.2 -> 0.1.3\n- Build:\n  - Gradle 6.4.1 -> 6.5\n  - Checkstyle 8.32 -> 8.33\n  - eureka-client 1.9.22 -> 1.9.23\n  - gax-grpc 1.56.0 -> 1.57.0\n  - json-unit 2.17.0 -> 2.18.0\n  - Shadow 5.2.0 -> 6.0.0\n- Fix warnings\n  - Add `SupportedSourceVersion` annotation to `DocumentationProcessor`\n  - Fix various deprecated API usages", "committedDate": "2020-06-19T06:38:45Z", "type": "commit"}, {"oid": "2e58de6153ce434798b3709c70c466e6f2909497", "url": "https://github.com/line/armeria/commit/2e58de6153ce434798b3709c70c466e6f2909497", "message": "Fix test failures", "committedDate": "2020-06-19T08:54:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY2NjI0MA==", "url": "https://github.com/line/armeria/pull/2817#discussion_r442666240", "body": "\ud83d\udc4d", "bodyText": "\ud83d\udc4d", "bodyHTML": "<p dir=\"auto\"><g-emoji class=\"g-emoji\" alias=\"+1\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f44d.png\">\ud83d\udc4d</g-emoji></p>", "author": "ikhoon", "createdAt": "2020-06-19T07:00:25Z", "path": "annotation-processor/src/main/java/com/linecorp/armeria/server/annotation/processor/DocumentationProcessor.java", "diffHunk": "@@ -61,6 +63,7 @@\n         \"com.linecorp.armeria.server.annotation.Options\",\n         \"com.linecorp.armeria.server.annotation.Patch\",\n })\n+@SupportedSourceVersion(SourceVersion.RELEASE_8)", "originalCommit": "67078fe420166cd2ec1679d7be284aa7df284d42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY2NzY4Nw==", "url": "https://github.com/line/armeria/pull/2817#discussion_r442667687", "body": "Could remove `lower-cased`?", "bodyText": "Could remove lower-cased?", "bodyHTML": "<p dir=\"auto\">Could remove <code>lower-cased</code>?</p>", "author": "ikhoon", "createdAt": "2020-06-19T07:04:12Z", "path": "brave/src/test/java/com/linecorp/armeria/client/brave/BraveClientTest.java", "diffHunk": "@@ -147,12 +147,12 @@ void shouldSubmitSpanWithCustomRemoteName() throws Exception {\n         assertThat(span.localServiceName()).isEqualTo(TEST_SERVICE);\n \n         // check remote service name, lower-cased", "originalCommit": "67078fe420166cd2ec1679d7be284aa7df284d42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3MjM3OA==", "url": "https://github.com/line/armeria/pull/2817#discussion_r442672378", "body": "nit: Rename to `SpanHandlerImpl`?", "bodyText": "nit: Rename to SpanHandlerImpl?", "bodyHTML": "<p dir=\"auto\">nit: Rename to <code>SpanHandlerImpl</code>?</p>", "author": "ikhoon", "createdAt": "2020-06-19T07:15:59Z", "path": "brave/src/test/java/com/linecorp/armeria/it/brave/BraveIntegrationTest.java", "diffHunk": "@@ -548,23 +551,23 @@ public void onError(Exception exception) {\n         }\n     }\n \n-    private static class ReporterImpl implements Reporter<Span> {\n-        private final BlockingQueue<Span> spans = new LinkedBlockingQueue<>();\n+    private static class ReporterImpl extends SpanHandler {", "originalCommit": "67078fe420166cd2ec1679d7be284aa7df284d42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3Mjk2OA==", "url": "https://github.com/line/armeria/pull/2817#discussion_r442672968", "body": "Oops... \ud83d\ude05", "bodyText": "Oops... \ud83d\ude05", "bodyHTML": "<p dir=\"auto\">Oops... <g-emoji class=\"g-emoji\" alias=\"sweat_smile\" fallback-src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f605.png\">\ud83d\ude05</g-emoji></p>", "author": "ikhoon", "createdAt": "2020-06-19T07:17:21Z", "path": "core/src/main/java/com/linecorp/armeria/client/Client.java", "diffHunk": "@@ -76,4 +76,13 @@\n         requireNonNull(type, \"type\");\n         return Unwrappable.super.as(type);\n     }\n+\n+    /**\n+     * Unwraps this {@link Client} and returns the object being decorated.\n+     * If this {@link Client} is the innermost object, this method returns itself.\n+     */\n+    @Override\n+    default Client<? extends Request, ? extends Response> unwrap() {", "originalCommit": "67078fe420166cd2ec1679d7be284aa7df284d42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3NDcwMA==", "url": "https://github.com/line/armeria/pull/2817#discussion_r442674700", "body": "`unwrap`?\r\n```suggestion\r\n                          .add(\"unwrap\", unwrap())\r\n```", "bodyText": "unwrap?\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                      .add(\"delegate\", unwrap())\n          \n          \n            \n                                      .add(\"unwrap\", unwrap())", "bodyHTML": "<p dir=\"auto\"><code>unwrap</code>?</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"44\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                          .add(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">delegate</span><span class=\"pl-pds\">\"</span></span>, unwrap())</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"44\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                          .add(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">unwrap</span><span class=\"pl-pds\">\"</span></span>, unwrap())</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "ikhoon", "createdAt": "2020-06-19T07:21:18Z", "path": "core/src/main/java/com/linecorp/armeria/client/retry/AttemptLimitingBackoff.java", "diffHunk": "@@ -41,7 +41,7 @@ public long nextDelayMillis(int numAttemptsSoFar) {\n     @Override\n     public String toString() {\n         return MoreObjects.toStringHelper(this)\n-                          .add(\"delegate\", delegate())\n+                          .add(\"delegate\", unwrap())", "originalCommit": "67078fe420166cd2ec1679d7be284aa7df284d42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjc0NDAzNg==", "url": "https://github.com/line/armeria/pull/2817#discussion_r442744036", "bodyText": "I think delegate is better here because unwrap is a verb.", "author": "trustin", "createdAt": "2020-06-19T09:51:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3NDcwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3NDk3Ng==", "url": "https://github.com/line/armeria/pull/2817#discussion_r442674976", "body": "Ditto\r\n```suggestion\r\n                          .add(\"unwrap\", unwrap())\r\n```", "bodyText": "Ditto\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                      .add(\"delegate\", unwrap())\n          \n          \n            \n                                      .add(\"unwrap\", unwrap())", "bodyHTML": "<p dir=\"auto\">Ditto</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"68\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                          .add(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">delegate</span><span class=\"pl-pds\">\"</span></span>, unwrap())</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"68\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                          .add(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">unwrap</span><span class=\"pl-pds\">\"</span></span>, unwrap())</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "ikhoon", "createdAt": "2020-06-19T07:21:57Z", "path": "core/src/main/java/com/linecorp/armeria/client/retry/JitterAddingBackoff.java", "diffHunk": "@@ -65,7 +65,7 @@ public long nextDelayMillis(int numAttemptsSoFar) {\n     @Override\n     public String toString() {\n         return MoreObjects.toStringHelper(this)\n-                          .add(\"delegate\", delegate())\n+                          .add(\"delegate\", unwrap())", "originalCommit": "67078fe420166cd2ec1679d7be284aa7df284d42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3OTI3MQ==", "url": "https://github.com/line/armeria/pull/2817#discussion_r442679271", "body": "unwrap?\r\n```suggestion\r\n                              .add(\"unwrap\", unwrap()).toString();\r\n```", "bodyText": "unwrap?\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                          .add(\"delegate\", unwrap()).toString();\n          \n          \n            \n                                          .add(\"unwrap\", unwrap()).toString();", "bodyHTML": "<p dir=\"auto\">unwrap?</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"142\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">                              .add(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">delegate</span><span class=\"pl-pds\">\"</span></span>, unwrap())<span class=\"pl-k\">.</span>toString();</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"142\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">                              .add(<span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\">unwrap</span><span class=\"pl-pds\">\"</span></span>, unwrap())<span class=\"pl-k\">.</span>toString();</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "ikhoon", "createdAt": "2020-06-19T07:31:15Z", "path": "core/src/main/java/com/linecorp/armeria/server/RouteDecoratingService.java", "diffHunk": "@@ -139,7 +139,7 @@ public HttpResponse serve(ServiceRequestContext ctx, HttpRequest req) throws Exc\n         public String toString() {\n             return MoreObjects.toStringHelper(this)\n                               .add(\"router\", router)\n-                              .add(\"delegate\", delegate()).toString();\n+                              .add(\"delegate\", unwrap()).toString();", "originalCommit": "67078fe420166cd2ec1679d7be284aa7df284d42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fac6db9d8a6517afbb71f5334009e746518e66ba", "url": "https://github.com/line/armeria/commit/fac6db9d8a6517afbb71f5334009e746518e66ba", "message": "Make virtual hostname pattern follow Netty's", "committedDate": "2020-06-19T09:48:57Z", "type": "commit"}, {"oid": "72b8cfde5c385fe812277d544cd3a30bee6dd36c", "url": "https://github.com/line/armeria/commit/72b8cfde5c385fe812277d544cd3a30bee6dd36c", "message": "Address the comments from @ikhoon", "committedDate": "2020-06-19T09:51:27Z", "type": "commit"}]}