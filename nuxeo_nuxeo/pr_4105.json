{"pr_number": 4105, "pr_title": "NXP-27786: rename DocumentMultivaluedProperty.addItem to make it easi\u2026", "pr_author": "michaelva", "pr_createdAt": "2020-06-03T07:21:51Z", "pr_url": "https://github.com/nuxeo/nuxeo/pull/4105", "timeline": [{"oid": "024819154846cc699d339ddc554bf5ceb68482a4", "url": "https://github.com/nuxeo/nuxeo/commit/024819154846cc699d339ddc554bf5ceb68482a4", "message": "NXP-27786: rename DocumentMultivaluedProperty.addItem to make it easier to find in studio and make it consistant with the name of the opposite remove operation", "committedDate": "2020-06-03T05:57:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3NjIxNA==", "url": "https://github.com/nuxeo/nuxeo/pull/4105#discussion_r434376214", "body": "You must keep the old alias as well.", "bodyText": "You must keep the old alias as well.", "bodyHTML": "<p dir=\"auto\">You must keep the old alias as well.</p>", "author": "efge", "createdAt": "2020-06-03T07:52:50Z", "path": "modules/platform/nuxeo-automation/nuxeo-automation-core/src/main/java/org/nuxeo/ecm/automation/core/operations/document/AddEntryToMultiValuedProperty.java", "diffHunk": "@@ -41,10 +41,10 @@\n  * @author <a href=\"mailto:bjalon@nuxeo.com\">Benjamin JALON</a>\n  * @since 5.7\n  */\n-@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"AddEntryToMultivaluedProperty\" })\n+@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"DocumentMultivaluedProperty.addItem\" })", "originalCommit": "024819154846cc699d339ddc554bf5ceb68482a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM3Njg2OQ==", "url": "https://github.com/nuxeo/nuxeo/pull/4105#discussion_r434376869", "body": "Our convention for operation names is to have an uppercase after the period.", "bodyText": "Our convention for operation names is to have an uppercase after the period.", "bodyHTML": "<p dir=\"auto\">Our convention for operation names is to have an uppercase after the period.</p>", "author": "efge", "createdAt": "2020-06-03T07:54:00Z", "path": "modules/platform/nuxeo-automation/nuxeo-automation-core/src/main/java/org/nuxeo/ecm/automation/core/operations/document/AddEntryToMultiValuedProperty.java", "diffHunk": "@@ -41,10 +41,10 @@\n  * @author <a href=\"mailto:bjalon@nuxeo.com\">Benjamin JALON</a>\n  * @since 5.7\n  */\n-@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"AddEntryToMultivaluedProperty\" })\n+@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"DocumentMultivaluedProperty.addItem\" })\n public class AddEntryToMultiValuedProperty extends AbstractOperationMultiValuedProperty {\n \n-    public static final String ID = \"DocumentMultivaluedProperty.addItem\";\n+    public static final String ID = \"Document.addEntrytoMultivaluedProperty\";", "originalCommit": "024819154846cc699d339ddc554bf5ceb68482a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM4OTA5NQ==", "url": "https://github.com/nuxeo/nuxeo/pull/4105#discussion_r434389095", "body": "Are we confident to remove `AddEntryToMultivaluedProperty` alias?", "bodyText": "Are we confident to remove AddEntryToMultivaluedProperty alias?", "bodyHTML": "<p dir=\"auto\">Are we confident to remove <code>AddEntryToMultivaluedProperty</code> alias?</p>", "author": "kevinleturc", "createdAt": "2020-06-03T08:15:31Z", "path": "modules/platform/nuxeo-automation/nuxeo-automation-core/src/main/java/org/nuxeo/ecm/automation/core/operations/document/AddEntryToMultiValuedProperty.java", "diffHunk": "@@ -41,10 +41,10 @@\n  * @author <a href=\"mailto:bjalon@nuxeo.com\">Benjamin JALON</a>\n  * @since 5.7\n  */\n-@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"AddEntryToMultivaluedProperty\" })\n+@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"DocumentMultivaluedProperty.addItem\" })", "originalCommit": "024819154846cc699d339ddc554bf5ceb68482a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDM4OTYxNQ==", "url": "https://github.com/nuxeo/nuxeo/pull/4105#discussion_r434389615", "body": "The other operation is first letter capitalized, we may want to have the same thing:\r\n```suggestion\r\n    public static final String ID = \"Document.AddEntrytoMultivaluedProperty\";\r\n```", "bodyText": "The other operation is first letter capitalized, we may want to have the same thing:\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static final String ID = \"Document.addEntrytoMultivaluedProperty\";\n          \n          \n            \n                public static final String ID = \"Document.AddEntrytoMultivaluedProperty\";", "bodyHTML": "<p dir=\"auto\">The other operation is first letter capitalized, we may want to have the same thing:</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">final</span> <span class=\"pl-smi\">String</span> <span class=\"pl-c1\">ID</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Document.<span class=\"x x-first x-last\">addEntrytoMultivaluedProperty</span><span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">    <span class=\"pl-k\">public</span> <span class=\"pl-k\">static</span> <span class=\"pl-k\">final</span> <span class=\"pl-smi\">String</span> <span class=\"pl-c1\">ID</span> <span class=\"pl-k\">=</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Document.<span class=\"x x-first x-last\">AddEntrytoMultivaluedProperty</span><span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "kevinleturc", "createdAt": "2020-06-03T08:16:29Z", "path": "modules/platform/nuxeo-automation/nuxeo-automation-core/src/main/java/org/nuxeo/ecm/automation/core/operations/document/AddEntryToMultiValuedProperty.java", "diffHunk": "@@ -41,10 +41,10 @@\n  * @author <a href=\"mailto:bjalon@nuxeo.com\">Benjamin JALON</a>\n  * @since 5.7\n  */\n-@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"AddEntryToMultivaluedProperty\" })\n+@Operation(id = AddEntryToMultiValuedProperty.ID, category = Constants.CAT_DOCUMENT, label = \"Add entry into multi-valued metadata\", description = \"Add value into the field expressed by the xpath parameter. This field must be a multivalued metadata.<p> 'checkExists' parameter enables to add value only if doesn't already exists in the field: <ul><li> if checked, the value will not be added if it exists already in the list</li><li>if not checked the value will be always added</li</ul>.<p> Remark: <b>only works for a field that stores a list of scalars (string, boolean, date, int, long) and not list of complex types.</b></p><p>Save parameter automatically saves the document in the database. It has to be turned off when this operation is used in the context of the empty document created, about to create, before document modification, document modified events.</p>\", aliases = { \"DocumentMultivaluedProperty.addItem\" })\n public class AddEntryToMultiValuedProperty extends AbstractOperationMultiValuedProperty {\n \n-    public static final String ID = \"DocumentMultivaluedProperty.addItem\";\n+    public static final String ID = \"Document.addEntrytoMultivaluedProperty\";", "originalCommit": "024819154846cc699d339ddc554bf5ceb68482a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "05f43e3423db72b3d98a698d5ea2b2ac1a21d13a", "url": "https://github.com/nuxeo/nuxeo/commit/05f43e3423db72b3d98a698d5ea2b2ac1a21d13a", "message": "NXP-27786: fix operation ID and keep old alias", "committedDate": "2020-06-03T08:35:47Z", "type": "commit"}]}