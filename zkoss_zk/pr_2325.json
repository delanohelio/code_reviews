{"pr_number": 2325, "pr_title": "refine ZK-3317: Listbox with hflex=\"min\" produces a horizontal scrollbar", "pr_author": "b952426", "pr_createdAt": "2020-12-23T03:36:51Z", "pr_url": "https://github.com/zkoss/zk/pull/2325", "merge_commit": "56e84282316755e37f17af05031bfe0244c04f62", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg2OTg4MQ==", "url": "https://github.com/zkoss/zk/pull/2325#discussion_r547869881", "body": "just $grid1, $grid2", "bodyText": "just $grid1, $grid2", "bodyHTML": "<p dir=\"auto\">just $grid1, $grid2</p>", "author": "scribetw", "createdAt": "2020-12-23T09:47:19Z", "path": "zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java", "diffHunk": "@@ -25,6 +25,9 @@ public void test() {\n \t\tJQuery jqBar = jq(\".z-columns-bar\");\n \t\tJQuery grid = jq(\".z-grid\");", "originalCommit": "dcbad95dc5ece49a7f8b3c8c55f9b489c07ffe3b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "60e9fed239403705437c1e404914450d06826238", "changed_code": [{"header": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\nindex feb25a6111..7fb01f9e3f 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\n", "chunk": "@@ -23,11 +23,12 @@ public class B95_ZK_3316Test extends WebDriverTestCase {\n \t\tconnect();\n \t\twaitResponse();\n \t\tJQuery jqBar = jq(\".z-columns-bar\");\n-\t\tJQuery grid = jq(\".z-grid\");\n-\t\tassertEquals(grid.eq(0).find(\".z-row-content\").eq(0).outerWidth() + jqBar.eq(0).outerWidth(), grid.eq(0).width());\n+\t\tJQuery grid1 = jq(\"$grid1\");\n+\t\tJQuery grid2 = jq(\"$grid2\");\n+\t\tassertEquals(grid1.find(\".z-row-content:eq(0)\").outerWidth() + jqBar.outerWidth(), grid1.width());\n \t\tjq(\"$grid1\").scrollTop(100);\n \t\twaitResponse();\n-\t\tassertEquals(grid.eq(0).find(\".z-row-content\").eq(0).outerWidth() + jqBar.eq(0).outerWidth(), grid.eq(0).width());\n-\t\tassertEquals(grid.eq(1).find(\".z-row-content\").eq(0).outerWidth(), jq(\".z-grid\").eq(1).width());\n+\t\tassertEquals(grid1.find(\".z-row-content:eq(0)\").outerWidth() + jqBar.outerWidth(), grid1.width());\n+\t\tassertEquals(grid2.find(\".z-row-content:eq(0)\").outerWidth(), grid2.width());\n \t}\n }\n", "next_change": {"commit": "d0eb36fc5444a087ba3f2c2568b96bde2993fa09", "changed_code": [{"header": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\nindex 7fb01f9e3f..de581bff19 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\n", "chunk": "@@ -26,7 +26,7 @@ public class B95_ZK_3316Test extends WebDriverTestCase {\n \t\tJQuery grid1 = jq(\"$grid1\");\n \t\tJQuery grid2 = jq(\"$grid2\");\n \t\tassertEquals(grid1.find(\".z-row-content:eq(0)\").outerWidth() + jqBar.outerWidth(), grid1.width());\n-\t\tjq(\"$grid1\").scrollTop(100);\n+\t\tgrid1.scrollTop(100);\n \t\twaitResponse();\n \t\tassertEquals(grid1.find(\".z-row-content:eq(0)\").outerWidth() + jqBar.outerWidth(), grid1.width());\n \t\tassertEquals(grid2.find(\".z-row-content:eq(0)\").outerWidth(), grid2.width());\n", "next_change": null}]}}]}, "revised_code_in_main": {"commit": "56e84282316755e37f17af05031bfe0244c04f62", "changed_code": [{"header": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\nindex feb25a6111..de581bff19 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\n", "chunk": "@@ -23,11 +23,12 @@ public class B95_ZK_3316Test extends WebDriverTestCase {\n \t\tconnect();\n \t\twaitResponse();\n \t\tJQuery jqBar = jq(\".z-columns-bar\");\n-\t\tJQuery grid = jq(\".z-grid\");\n-\t\tassertEquals(grid.eq(0).find(\".z-row-content\").eq(0).outerWidth() + jqBar.eq(0).outerWidth(), grid.eq(0).width());\n-\t\tjq(\"$grid1\").scrollTop(100);\n+\t\tJQuery grid1 = jq(\"$grid1\");\n+\t\tJQuery grid2 = jq(\"$grid2\");\n+\t\tassertEquals(grid1.find(\".z-row-content:eq(0)\").outerWidth() + jqBar.outerWidth(), grid1.width());\n+\t\tgrid1.scrollTop(100);\n \t\twaitResponse();\n-\t\tassertEquals(grid.eq(0).find(\".z-row-content\").eq(0).outerWidth() + jqBar.eq(0).outerWidth(), grid.eq(0).width());\n-\t\tassertEquals(grid.eq(1).find(\".z-row-content\").eq(0).outerWidth(), jq(\".z-grid\").eq(1).width());\n+\t\tassertEquals(grid1.find(\".z-row-content:eq(0)\").outerWidth() + jqBar.outerWidth(), grid1.width());\n+\t\tassertEquals(grid2.find(\".z-row-content:eq(0)\").outerWidth(), grid2.width());\n \t}\n }\n", "next_change": {"commit": "07f56d34761164fb1cbba975f0ea744a3fda7561", "changed_code": [{"header": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\nindex de581bff19..00898a4411 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\n", "chunk": "@@ -25,10 +25,10 @@ public class B95_ZK_3316Test extends WebDriverTestCase {\n \t\tJQuery jqBar = jq(\".z-columns-bar\");\n \t\tJQuery grid1 = jq(\"$grid1\");\n \t\tJQuery grid2 = jq(\"$grid2\");\n-\t\tassertEquals(grid1.find(\".z-row-content:eq(0)\").outerWidth() + jqBar.outerWidth(), grid1.width());\n+\t\tassertEquals(grid1.find(\".z-row-content:eq(0)\").outerWidth() + jqBar.outerWidth(), grid1.width(), 1);\n \t\tgrid1.scrollTop(100);\n \t\twaitResponse();\n-\t\tassertEquals(grid1.find(\".z-row-content:eq(0)\").outerWidth() + jqBar.outerWidth(), grid1.width());\n-\t\tassertEquals(grid2.find(\".z-row-content:eq(0)\").outerWidth(), grid2.width());\n+\t\tassertEquals(grid1.find(\".z-row-content:eq(0)\").outerWidth() + jqBar.outerWidth(), grid1.width(), 1);\n+\t\tassertEquals(grid2.find(\".z-row-content:eq(0)\").outerWidth(), grid2.width(), 1);\n \t}\n }\n", "next_change": {"commit": "b679d9d9315153910b546bdb0bd0da77ab1a5781", "changed_code": [{"header": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\nindex 00898a4411..33628c0cf4 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3316Test.java\n", "chunk": "@@ -25,10 +26,12 @@ public class B95_ZK_3316Test extends WebDriverTestCase {\n \t\tJQuery jqBar = jq(\".z-columns-bar\");\n \t\tJQuery grid1 = jq(\"$grid1\");\n \t\tJQuery grid2 = jq(\"$grid2\");\n+\t\tJQuery grid3 = jq(\"$grid3\");\n \t\tassertEquals(grid1.find(\".z-row-content:eq(0)\").outerWidth() + jqBar.outerWidth(), grid1.width(), 1);\n \t\tgrid1.scrollTop(100);\n \t\twaitResponse();\n \t\tassertEquals(grid1.find(\".z-row-content:eq(0)\").outerWidth() + jqBar.outerWidth(), grid1.width(), 1);\n \t\tassertEquals(grid2.find(\".z-row-content:eq(0)\").outerWidth(), grid2.width(), 1);\n+\t\tassertNotEquals(grid3.find(\".z-rows\").height(), grid3.find(\".z-grid-body\").height(), 1);\n \t}\n }\n", "next_change": null}]}}]}}]}, "commits_in_main": [{"oid": "56e84282316755e37f17af05031bfe0244c04f62", "message": "Merge commit", "committedDate": null}, {"oid": "07f56d34761164fb1cbba975f0ea744a3fda7561", "committedDate": "2020-12-25 13:08:29 +0800", "message": "refine ZK-3317: Listbox with hflex=\"min\" produces a horizontal scrollbar"}, {"oid": "b679d9d9315153910b546bdb0bd0da77ab1a5781", "committedDate": "2021-01-08 18:26:18 +0800", "message": "refine ZK-3317: Listbox with hflex=\"min\" produces a horizontal scrollbar"}]}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Nzg3MDU0Ng==", "url": "https://github.com/zkoss/zk/pull/2325#discussion_r547870546", "body": "find(\".z-listcell-content:eq(0)\")", "bodyText": "find(\".z-listcell-content:eq(0)\")", "bodyHTML": "<p dir=\"auto\">find(\".z-listcell-content:eq(0)\")</p>", "author": "scribetw", "createdAt": "2020-12-23T09:48:39Z", "path": "zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java", "diffHunk": "@@ -24,6 +24,10 @@ public void test() {\n \t\twaitResponse();\n \t\tJQuery listbox = jq(\".z-listbox\");\n \t\tJQuery jqBar = jq(\".z-listhead-bar\");\n+\t\tassertEquals(listbox.eq(0).find(\".z-listcell-content\").eq(0).outerWidth() + jqBar.eq(0).outerWidth(),", "originalCommit": "dcbad95dc5ece49a7f8b3c8c55f9b489c07ffe3b", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "60e9fed239403705437c1e404914450d06826238", "changed_code": [{"header": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\nindex 23e0a9c9ac..1f39c2e1ea 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\n", "chunk": "@@ -22,14 +22,15 @@ public class B95_ZK_3317Test extends WebDriverTestCase {\n \tpublic void test() {\n \t\tconnect();\n \t\twaitResponse();\n-\t\tJQuery listbox = jq(\".z-listbox\");\n+\t\tJQuery listbox1 = jq(\"$box\");\n+\t\tJQuery listbox2 = jq(\"$box2\");\n \t\tJQuery jqBar = jq(\".z-listhead-bar\");\n-\t\tassertEquals(listbox.eq(0).find(\".z-listcell-content\").eq(0).outerWidth() + jqBar.eq(0).outerWidth(),\n-\t\t\tlistbox.eq(0).width());\n+\t\tassertEquals(listbox1.find(\".z-listcell-content:eq(0)\").outerWidth() + jqBar.eq(0).outerWidth(),\n+\t\t\t\tlistbox1.width());\n \t\tjq(\"$box1\").scrollTop(100);\n \t\twaitResponse();\n-\t\tassertEquals(listbox.eq(0).find(\".z-listcell-content\").eq(0).outerWidth() + jqBar.eq(0).outerWidth(),\n-\t\t\tlistbox.eq(0).width());\n-\t\tassertEquals(listbox.eq(1).find(\".z-listcell-content\").eq(0).outerWidth(), listbox.eq(1).width());\n+\t\tassertEquals(listbox1.find(\".z-listcell-content:eq(0)\").outerWidth() + jqBar.eq(0).outerWidth(),\n+\t\t\tlistbox1.width());\n+\t\tassertEquals(listbox2.find(\".z-listcell-content:eq(0)\").outerWidth(), listbox2.width());\n \t}\n }\n", "next_change": {"commit": "d0eb36fc5444a087ba3f2c2568b96bde2993fa09", "changed_code": [{"header": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\nindex 1f39c2e1ea..6856e61146 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\n", "chunk": "@@ -27,7 +27,7 @@ public class B95_ZK_3317Test extends WebDriverTestCase {\n \t\tJQuery jqBar = jq(\".z-listhead-bar\");\n \t\tassertEquals(listbox1.find(\".z-listcell-content:eq(0)\").outerWidth() + jqBar.eq(0).outerWidth(),\n \t\t\t\tlistbox1.width());\n-\t\tjq(\"$box1\").scrollTop(100);\n+\t\tlistbox1.scrollTop(100);\n \t\twaitResponse();\n \t\tassertEquals(listbox1.find(\".z-listcell-content:eq(0)\").outerWidth() + jqBar.eq(0).outerWidth(),\n \t\t\tlistbox1.width());\n", "next_change": null}]}}]}, "revised_code_in_main": {"commit": "56e84282316755e37f17af05031bfe0244c04f62", "changed_code": [{"header": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\nindex 23e0a9c9ac..6856e61146 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\n", "chunk": "@@ -22,14 +22,15 @@ public class B95_ZK_3317Test extends WebDriverTestCase {\n \tpublic void test() {\n \t\tconnect();\n \t\twaitResponse();\n-\t\tJQuery listbox = jq(\".z-listbox\");\n+\t\tJQuery listbox1 = jq(\"$box\");\n+\t\tJQuery listbox2 = jq(\"$box2\");\n \t\tJQuery jqBar = jq(\".z-listhead-bar\");\n-\t\tassertEquals(listbox.eq(0).find(\".z-listcell-content\").eq(0).outerWidth() + jqBar.eq(0).outerWidth(),\n-\t\t\tlistbox.eq(0).width());\n-\t\tjq(\"$box1\").scrollTop(100);\n+\t\tassertEquals(listbox1.find(\".z-listcell-content:eq(0)\").outerWidth() + jqBar.eq(0).outerWidth(),\n+\t\t\t\tlistbox1.width());\n+\t\tlistbox1.scrollTop(100);\n \t\twaitResponse();\n-\t\tassertEquals(listbox.eq(0).find(\".z-listcell-content\").eq(0).outerWidth() + jqBar.eq(0).outerWidth(),\n-\t\t\tlistbox.eq(0).width());\n-\t\tassertEquals(listbox.eq(1).find(\".z-listcell-content\").eq(0).outerWidth(), listbox.eq(1).width());\n+\t\tassertEquals(listbox1.find(\".z-listcell-content:eq(0)\").outerWidth() + jqBar.eq(0).outerWidth(),\n+\t\t\tlistbox1.width());\n+\t\tassertEquals(listbox2.find(\".z-listcell-content:eq(0)\").outerWidth(), listbox2.width());\n \t}\n }\n", "next_change": {"commit": "07f56d34761164fb1cbba975f0ea744a3fda7561", "changed_code": [{"header": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\nindex 6856e61146..546fb62e33 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\n", "chunk": "@@ -26,11 +26,11 @@ public class B95_ZK_3317Test extends WebDriverTestCase {\n \t\tJQuery listbox2 = jq(\"$box2\");\n \t\tJQuery jqBar = jq(\".z-listhead-bar\");\n \t\tassertEquals(listbox1.find(\".z-listcell-content:eq(0)\").outerWidth() + jqBar.eq(0).outerWidth(),\n-\t\t\t\tlistbox1.width());\n+\t\t\t\tlistbox1.width(), 1);\n \t\tlistbox1.scrollTop(100);\n \t\twaitResponse();\n \t\tassertEquals(listbox1.find(\".z-listcell-content:eq(0)\").outerWidth() + jqBar.eq(0).outerWidth(),\n-\t\t\tlistbox1.width());\n-\t\tassertEquals(listbox2.find(\".z-listcell-content:eq(0)\").outerWidth(), listbox2.width());\n+\t\t\tlistbox1.width(), 1);\n+\t\tassertEquals(listbox2.find(\".z-listcell-content:eq(0)\").outerWidth(), listbox2.width(), 1);\n \t}\n }\n", "next_change": {"commit": "b679d9d9315153910b546bdb0bd0da77ab1a5781", "changed_code": [{"header": "diff --git a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\nindex 546fb62e33..0568011132 100644\n--- a/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\n+++ b/zktest/test/java/org/zkoss/zktest/zats/test2/B95_ZK_3317Test.java\n", "chunk": "@@ -32,5 +34,6 @@ public class B95_ZK_3317Test extends WebDriverTestCase {\n \t\tassertEquals(listbox1.find(\".z-listcell-content:eq(0)\").outerWidth() + jqBar.eq(0).outerWidth(),\n \t\t\tlistbox1.width(), 1);\n \t\tassertEquals(listbox2.find(\".z-listcell-content:eq(0)\").outerWidth(), listbox2.width(), 1);\n+\t\tassertNotEquals(listbox3.find(\".z-rows\").height(), listbox3.find(\".z-listbox-body\").height(), 1);\n \t}\n }\n", "next_change": null}]}}]}}]}, "commits_in_main": [{"oid": "56e84282316755e37f17af05031bfe0244c04f62", "message": "Merge commit", "committedDate": null}, {"oid": "07f56d34761164fb1cbba975f0ea744a3fda7561", "committedDate": "2020-12-25 13:08:29 +0800", "message": "refine ZK-3317: Listbox with hflex=\"min\" produces a horizontal scrollbar"}, {"oid": "b679d9d9315153910b546bdb0bd0da77ab1a5781", "committedDate": "2021-01-08 18:26:18 +0800", "message": "refine ZK-3317: Listbox with hflex=\"min\" produces a horizontal scrollbar"}]}, {"oid": "60e9fed239403705437c1e404914450d06826238", "url": "https://github.com/zkoss/zk/commit/60e9fed239403705437c1e404914450d06826238", "message": "refine ZK-3317: Listbox with hflex=\"min\" produces a horizontal scrollbar", "committedDate": "2020-12-23T10:27:48Z", "type": "forcePushed"}, {"oid": "d0eb36fc5444a087ba3f2c2568b96bde2993fa09", "url": "https://github.com/zkoss/zk/commit/d0eb36fc5444a087ba3f2c2568b96bde2993fa09", "message": "refine ZK-3317: Listbox with hflex=\"min\" produces a horizontal scrollbar", "committedDate": "2020-12-23T10:33:40Z", "type": "commit"}, {"oid": "d0eb36fc5444a087ba3f2c2568b96bde2993fa09", "url": "https://github.com/zkoss/zk/commit/d0eb36fc5444a087ba3f2c2568b96bde2993fa09", "message": "refine ZK-3317: Listbox with hflex=\"min\" produces a horizontal scrollbar", "committedDate": "2020-12-23T10:33:40Z", "type": "forcePushed"}]}