{"pr_number": 2580, "pr_title": "HBASE-25210 RegionInfo.isOffline is now a duplication with RegionInfo.isSplit", "pr_author": "nyl3532016", "pr_createdAt": "2020-10-22T08:39:38Z", "pr_url": "https://github.com/apache/hbase/pull/2580", "timeline": [{"oid": "b643d00ac0506f1c5b0b3fa6923c76578524969f", "url": "https://github.com/apache/hbase/commit/b643d00ac0506f1c5b0b3fa6923c76578524969f", "message": "HBASE-25210 RegionInfo.isOffline is now a duplication with RegionInfo.isSplit", "committedDate": "2020-10-22T09:30:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjcxMTAwNg==", "url": "https://github.com/apache/hbase/pull/2580#discussion_r512711006", "body": "Please add comments to say why and also let users to use isSplit instead.", "bodyText": "Please add comments to say why and also let users to use isSplit instead.", "bodyHTML": "<p dir=\"auto\">Please add comments to say why and also let users to use isSplit instead.</p>", "author": "Apache9", "createdAt": "2020-10-27T13:54:21Z", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java", "diffHunk": "@@ -273,8 +275,10 @@ public MutableRegionInfo setOffline(boolean offLine) {\n \n   /**\n    * @return True if this is a split parent region.\n+   * @deprecated since 3.0.0 and will be removed in 4.0.0", "originalCommit": "b643d00ac0506f1c5b0b3fa6923c76578524969f", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1eceab69b5d5e6977861b482fdd300d47e2807fc", "changed_code": [{"header": "diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java\nindex b140354c54..028608db61 100644\n--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java\n+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java\n", "chunk": "@@ -275,7 +276,8 @@ class MutableRegionInfo implements RegionInfo {\n \n   /**\n    * @return True if this is a split parent region.\n-   * @deprecated since 3.0.0 and will be removed in 4.0.0\n+   * @deprecated since 3.0.0 and will be removed in 4.0.0, Use {@link #isSplit()} instead.\n+   * @see <a href=\"https://issues.apache.org/jira/browse/HBASE-25210\">HBASE-25210</a>\n    */\n   @Override\n   @Deprecated\n", "next_change": null}]}}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjcxMTIwOQ==", "url": "https://github.com/apache/hbase/pull/2580#discussion_r512711209", "body": "Please add comments to explain the reason.", "bodyText": "Please add comments to explain the reason.", "bodyHTML": "<p dir=\"auto\">Please add comments to explain the reason.</p>", "author": "Apache9", "createdAt": "2020-10-27T13:54:35Z", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java", "diffHunk": "@@ -254,8 +254,10 @@ public MutableRegionInfo setSplit(boolean split) {\n \n   /**\n    * @return True if this region is offline.\n+   * @deprecated since 3.0.0 and will be removed in 4.0.0", "originalCommit": "b643d00ac0506f1c5b0b3fa6923c76578524969f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE2MzI2Mg==", "url": "https://github.com/apache/hbase/pull/2580#discussion_r513163262", "bodyText": "What @Apache9 said..... say, is only used when we split a region so split == offline.", "author": "saintstack", "createdAt": "2020-10-28T03:46:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjcxMTIwOQ=="}], "type": "inlineReview", "revised_code": {"commit": "1eceab69b5d5e6977861b482fdd300d47e2807fc", "changed_code": [{"header": "diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java\nindex b140354c54..028608db61 100644\n--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java\n+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java\n", "chunk": "@@ -255,6 +255,7 @@ class MutableRegionInfo implements RegionInfo {\n   /**\n    * @return True if this region is offline.\n    * @deprecated since 3.0.0 and will be removed in 4.0.0\n+   * @see <a href=\"https://issues.apache.org/jira/browse/HBASE-25210\">HBASE-25210</a>\n    */\n   @Override\n   @Deprecated\n", "next_change": {"commit": "9c8c9e7fbf8005ea89fa9b13d6d063b9f0240443", "changed_code": [{"header": "diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java\nindex 028608db61..22114f8f62 100644\n--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java\n+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java\n", "chunk": "@@ -264,10 +253,9 @@ class MutableRegionInfo implements RegionInfo {\n   }\n \n   /**\n-   * The parent of a region split is offline while split daughters hold\n-   * references to the parent. Offlined regions are closed.\n-   * @param offLine Set online/offline status.\n-   * @return MutableRegionInfo\n+   * The parent of a region split is offline while split daughters hold references to the parent.\n+   * Offlined regions are closed.\n+   * @param offLine Set online/offline status. n\n    */\n   public MutableRegionInfo setOffline(boolean offLine) {\n     this.offLine = offLine;\n", "next_change": {"commit": "63cdd026f08cdde6ac0fde1342ffd050e8e02441", "changed_code": [{"header": "diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java\nindex 22114f8f62..a9382f3a9b 100644\n--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java\n+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MutableRegionInfo.java\n", "chunk": "@@ -255,7 +252,7 @@ class MutableRegionInfo implements RegionInfo {\n   /**\n    * The parent of a region split is offline while split daughters hold references to the parent.\n    * Offlined regions are closed.\n-   * @param offLine Set online/offline status. n\n+   * @param offLine Set online/offline status.\n    */\n   public MutableRegionInfo setOffline(boolean offLine) {\n     this.offLine = offLine;\n", "next_change": null}]}}]}}]}}, {"oid": "ef5fed2cbe8ce4faf6e83c5d10f41132ccb9d6f0", "url": "https://github.com/apache/hbase/commit/ef5fed2cbe8ce4faf6e83c5d10f41132ccb9d6f0", "message": "HBASE-25210 RegionInfo.isOffline is now a duplication with RegionInfo.isSplit", "committedDate": "2020-10-28T02:58:50Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE2Mzc1NQ==", "url": "https://github.com/apache/hbase/pull/2580#discussion_r513163755", "body": "Should folks use isSplit instead? If so say so in the @deprecated ?", "bodyText": "Should folks use isSplit instead? If so say so in the @deprecated ?", "bodyHTML": "<p dir=\"auto\">Should folks use isSplit instead? If so say so in the <a class=\"user-mention\" data-hovercard-type=\"user\" data-hovercard-url=\"/users/deprecated/hovercard\" data-octo-click=\"hovercard-link-click\" data-octo-dimensions=\"link_type:self\" href=\"https://github.com/deprecated\">@deprecated</a> ?</p>", "author": "saintstack", "createdAt": "2020-10-28T03:48:46Z", "path": "hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionInfo.java", "diffHunk": "@@ -218,12 +218,16 @@\n \n   /**\n    * @return True if this region is offline.\n+   * @deprecated since 3.0.0 and will be removed in 4.0.0\n    */\n+  @Deprecated\n   boolean isOffline();\n \n   /**\n    * @return True if this is a split parent region.\n+   * @deprecated since 3.0.0 and will be removed in 4.0.0", "originalCommit": "ef5fed2cbe8ce4faf6e83c5d10f41132ccb9d6f0", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "1eceab69b5d5e6977861b482fdd300d47e2807fc", "changed_code": [{"header": "diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionInfo.java b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionInfo.java\nindex ad80e0aae9..d7460e9d15 100644\n--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionInfo.java\n+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionInfo.java\n", "chunk": "@@ -219,13 +219,15 @@ public interface RegionInfo extends Comparable<RegionInfo> {\n   /**\n    * @return True if this region is offline.\n    * @deprecated since 3.0.0 and will be removed in 4.0.0\n+   * @see <a href=\"https://issues.apache.org/jira/browse/HBASE-25210\">HBASE-25210</a>\n    */\n   @Deprecated\n   boolean isOffline();\n \n   /**\n    * @return True if this is a split parent region.\n-   * @deprecated since 3.0.0 and will be removed in 4.0.0\n+   * @deprecated since 3.0.0 and will be removed in 4.0.0, Use {@link #isSplit()} instead.\n+   * @see <a href=\"https://issues.apache.org/jira/browse/HBASE-25210\">HBASE-25210</a>\n    */\n   @Deprecated\n   boolean isSplitParent();\n", "next_change": {"commit": "acf144717bd85d2486cc33fbb0e3622b06c66717", "changed_code": [{"header": "diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionInfo.java b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionInfo.java\nindex d7460e9d15..32c7da0588 100644\n--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionInfo.java\n+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/RegionInfo.java\n", "chunk": "@@ -232,50 +205,41 @@ public interface RegionInfo extends Comparable<RegionInfo> {\n   @Deprecated\n   boolean isSplitParent();\n \n-  /**\n-   * @return true if this region is a meta region.\n-   */\n+  /** Returns true if this region is a meta region. */\n   boolean isMetaRegion();\n \n   /**\n-   * @return true if the given inclusive range of rows is fully contained\n-   * by this region. For example, if the region is foo,a,g and this is\n-   * passed [\"b\",\"c\"] or [\"a\",\"c\"] it will return true, but if this is passed\n-   * [\"b\",\"z\"] it will return false.\n+   * @return true if the given inclusive range of rows is fully contained by this region. For\n+   *         example, if the region is foo,a,g and this is passed [\"b\",\"c\"] or [\"a\",\"c\"] it will\n+   *         return true, but if this is passed [\"b\",\"z\"] it will return false.\n    * @throws IllegalArgumentException if the range passed is invalid (ie. end &lt; start)\n    */\n   boolean containsRange(byte[] rangeStartKey, byte[] rangeEndKey);\n \n-  /**\n-   * @return true if the given row falls in this region.\n-   */\n+  /** Returns true if the given row falls in this region. */\n   boolean containsRow(byte[] row);\n \n   /**\n    * Does region name contain its encoded name?\n    * @param regionName region name\n-   * @return boolean indicating if this a new format region\n-   *         name which contains its encoded name.\n+   * @return boolean indicating if this a new format region name which contains its encoded name.\n    */\n   @InterfaceAudience.Private\n   static boolean hasEncodedName(final byte[] regionName) {\n     // check if region name ends in ENC_SEPARATOR\n-    return (regionName.length >= 1) &&\n-      (regionName[regionName.length - 1] == RegionInfo.ENC_SEPARATOR);\n+    return (regionName.length >= 1)\n+      && (regionName[regionName.length - 1] == RegionInfo.ENC_SEPARATOR);\n   }\n \n-  /**\n-   * @return the encodedName\n-   */\n+  /** Returns the encodedName */\n   @InterfaceAudience.Private\n-  static String encodeRegionName(final byte [] regionName) {\n+  static String encodeRegionName(final byte[] regionName) {\n     String encodedName;\n     if (hasEncodedName(regionName)) {\n       // region is in new format:\n       // <tableName>,<startKey>,<regionIdTimeStamp>/encodedName/\n-      encodedName = Bytes.toString(regionName,\n-      regionName.length - MD5_HEX_LENGTH - 1,\n-      MD5_HEX_LENGTH);\n+      encodedName =\n+        Bytes.toString(regionName, regionName.length - MD5_HEX_LENGTH - 1, MD5_HEX_LENGTH);\n     } else {\n       // old format region name. First hbase:meta region also\n       // use this format.EncodedName is the JenkinsHash value.\n", "next_change": null}]}}]}}, {"oid": "ae2146db8d69e0399756cc8a9d03e0fcdd14eacc", "url": "https://github.com/apache/hbase/commit/ae2146db8d69e0399756cc8a9d03e0fcdd14eacc", "message": "HBASE-25210 RegionInfo.isOffline is now a duplication with RegionInfo.isSplit", "committedDate": "2020-10-28T09:07:09Z", "type": "commit"}, {"oid": "ae2146db8d69e0399756cc8a9d03e0fcdd14eacc", "url": "https://github.com/apache/hbase/commit/ae2146db8d69e0399756cc8a9d03e0fcdd14eacc", "message": "HBASE-25210 RegionInfo.isOffline is now a duplication with RegionInfo.isSplit", "committedDate": "2020-10-28T09:07:09Z", "type": "forcePushed"}]}