{"pr_number": 906, "pr_title": "Improves handling of archives in file based import jobs and especially reworks the archive extraction job.", "pr_author": "andyHa", "pr_createdAt": "2020-11-11T21:17:20Z", "pr_url": "https://github.com/scireum/sirius-biz/pull/906", "timeline": [{"oid": "98a764cb70a8b202395544b1f6c87527854c1be3", "url": "https://github.com/scireum/sirius-biz/commit/98a764cb70a8b202395544b1f6c87527854c1be3", "message": "Merge branch 'aha/make-parameters-great-again' into aha/archive-jobs", "committedDate": "2020-11-11T20:42:49Z", "type": "commit"}, {"oid": "ee4bea40e7ef6ffbb852b3f6ff11191b2d8d8fb5", "url": "https://github.com/scireum/sirius-biz/commit/ee4bea40e7ef6ffbb852b3f6ff11191b2d8d8fb5", "message": "Uses the new constants as provided by sirius-db.", "committedDate": "2020-11-11T21:02:09Z", "type": "commit"}, {"oid": "8016e7777932d2451ef8321f22af211dfe817ac9", "url": "https://github.com/scireum/sirius-biz/commit/8016e7777932d2451ef8321f22af211dfe817ac9", "message": "Makes the FileImportJob use the ArchiveExtractor and adds support for handling auxiliary files.", "committedDate": "2020-11-11T21:04:10Z", "type": "commit"}, {"oid": "774c048126fcc9d7b404b35daaafac5257d32652", "url": "https://github.com/scireum/sirius-biz/commit/774c048126fcc9d7b404b35daaafac5257d32652", "message": "Uses the new API as defined by the FileImportJob.", "committedDate": "2020-11-11T21:05:02Z", "type": "commit"}, {"oid": "8396fa50c19c57e074fe9c36094077649da33a09", "url": "https://github.com/scireum/sirius-biz/commit/8396fa50c19c57e074fe9c36094077649da33a09", "message": "Uses the new API as defined by FileImportJob.\n\nThis greatly simplifies the internal workings as it eliminates a whole\nbunch of duplicate code.", "committedDate": "2020-11-11T21:06:01Z", "type": "commit"}, {"oid": "fc230b5dc579281ba1d8feb62c5d9d4d6db496e1", "url": "https://github.com/scireum/sirius-biz/commit/fc230b5dc579281ba1d8feb62c5d9d4d6db496e1", "message": "Supports the new API as defined by FileImportJob and adds support to import all sheets of an excel file.", "committedDate": "2020-11-11T21:07:21Z", "type": "commit"}, {"oid": "e8d46aa792eba500cc06f0b6b9b23b5fd1bd2a9b", "url": "https://github.com/scireum/sirius-biz/commit/e8d46aa792eba500cc06f0b6b9b23b5fd1bd2a9b", "message": "Provides updated translations for the refactored jobs.", "committedDate": "2020-11-11T21:08:19Z", "type": "commit"}, {"oid": "6ac8f4a984357e4f952ee8b8ca326da207c8cdd4", "url": "https://github.com/scireum/sirius-biz/commit/6ac8f4a984357e4f952ee8b8ca326da207c8cdd4", "message": "Provides some cleanup for the ArchiveImportJob.", "committedDate": "2020-11-11T21:08:40Z", "type": "commit"}, {"oid": "e7b86eafd6eb0de75af377f1160013d81bf7038e", "url": "https://github.com/scireum/sirius-biz/commit/e7b86eafd6eb0de75af377f1160013d81bf7038e", "message": "Refactors the extract archive job.\n\nBy default we now overwrite files if a change is detected (SIRI-279) and also permit to delete\nthe archive once all files are extracted (SIRI-276).\n\nWe also reduced the logging quite a bit (which is still available in debug mode). Also we now\nrequire a destination to be given and no longer use the parent directory of the archive\nas fallback (as this provides quite a potential for trouble).", "committedDate": "2020-11-11T21:15:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTkzNjAzOQ==", "url": "https://github.com/scireum/sirius-biz/pull/906#discussion_r521936039", "body": "sourceParameter", "bodyText": "sourceParameter", "bodyHTML": "<p dir=\"auto\">sourceParameter</p>", "author": "mkeckmkeck", "createdAt": "2020-11-12T08:50:49Z", "path": "src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java", "diffHunk": "@@ -0,0 +1,200 @@\n+/*\n+ * Made with all the love in the world\n+ * by scireum in Remshalden, Germany\n+ *\n+ * Copyright by scireum GmbH\n+ * http://www.scireum.de - info@scireum.de\n+ */\n+\n+package sirius.biz.storage.layer3;\n+\n+import sirius.biz.jobs.batch.SimpleBatchProcessJobFactory;\n+import sirius.biz.jobs.params.BooleanParameter;\n+import sirius.biz.jobs.params.EnumParameter;\n+import sirius.biz.jobs.params.Parameter;\n+import sirius.biz.process.PersistencePeriod;\n+import sirius.biz.process.ProcessContext;\n+import sirius.biz.process.logs.ProcessLog;\n+import sirius.biz.storage.layer1.FileHandle;\n+import sirius.biz.util.ArchiveExtractor;\n+import sirius.biz.util.ExtractedFile;\n+import sirius.kernel.async.TaskContext;\n+import sirius.kernel.commons.Files;\n+import sirius.kernel.commons.Strings;\n+import sirius.kernel.commons.Watch;\n+import sirius.kernel.di.std.Part;\n+import sirius.kernel.di.std.Register;\n+import sirius.kernel.nls.NLS;\n+import sirius.web.http.QueryString;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.util.ArrayList;\n+import java.util.Map;\n+import java.util.function.Consumer;\n+\n+/**\n+ * Provides a job able to extract archives from the {@link VirtualFileSystem}.\n+ * <p>\n+ * This uses the {@link ArchiveExtractor} so depending if 7-ZIP is enabled this supports either a whole bunch\n+ * of formats (rar, 7z, tar etc.) or \"just\" ZIP files using the Java API.\n+ */\n+@Register\n+public class ExtractArchiveJob extends SimpleBatchProcessJobFactory {\n+\n+    @Part\n+    private VirtualFileSystem vfs;\n+\n+    @Part\n+    private ArchiveExtractor extractor;\n+\n+    private final Parameter<VirtualFile> sourceParamter;", "originalCommit": "e7b86eafd6eb0de75af377f1160013d81bf7038e", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "f838bd1258a19e04e28060ea8ba7364a6739fde5", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\nindex 84b2a2f01..4248f0b0a 100644\n--- a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n+++ b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n", "chunk": "@@ -48,7 +48,7 @@ public class ExtractArchiveJob extends SimpleBatchProcessJobFactory {\n     @Part\n     private ArchiveExtractor extractor;\n \n-    private final Parameter<VirtualFile> sourceParamter;\n+    private final Parameter<VirtualFile> sourceParameter;\n     private final Parameter<VirtualFile> destinationParameter;\n     private final Parameter<ArchiveExtractor.OverrideMode> overwriteExistingFilesParameter;\n     private final Parameter<Boolean> deleteArchiveParameter;\n", "next_change": {"commit": "0209cbe88b7c894baba3962d279344aacba1d5e6", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\nindex 4248f0b0a..2a841e07f 100644\n--- a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n+++ b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n", "chunk": "@@ -48,7 +48,7 @@ public class ExtractArchiveJob extends SimpleBatchProcessJobFactory {\n     @Part\n     private ArchiveExtractor extractor;\n \n-    private final Parameter<VirtualFile> sourceParameter;\n+    private Parameter<VirtualFile> sourceParameter;\n     private final Parameter<VirtualFile> destinationParameter;\n     private final Parameter<ArchiveExtractor.OverrideMode> overwriteExistingFilesParameter;\n     private final Parameter<Boolean> deleteArchiveParameter;\n", "next_change": {"commit": "46acca8f98f7fdc72a704fd9e956e6d66c3c06b8", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\nindex 2a841e07f..09e2f09f0 100644\n--- a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n+++ b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n", "chunk": "@@ -51,6 +51,7 @@ public class ExtractArchiveJob extends SimpleBatchProcessJobFactory {\n     private Parameter<VirtualFile> sourceParameter;\n     private final Parameter<VirtualFile> destinationParameter;\n     private final Parameter<ArchiveExtractor.OverrideMode> overwriteExistingFilesParameter;\n+    private final Parameter<Boolean> flattenDirectoriesParameter;\n     private final Parameter<Boolean> deleteArchiveParameter;\n \n     /**\n", "next_change": {"commit": "f19e7ccd748e7657b8b0d5ddfb27644b195062f8", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\nindex 09e2f09f0..d7a2585e6 100644\n--- a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n+++ b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n", "chunk": "@@ -60,11 +81,11 @@ public class ExtractArchiveJob extends SimpleBatchProcessJobFactory {\n      * This constructor is primarily used to make the parameter instantiation more readable.\n      */\n     public ExtractArchiveJob() {\n-        this.destinationParameter =\n-                new DirectoryParameter(\"destination\", \"$ExtractArchiveJob.destinationParameter\").withDescription(\n-                        \"$ExtractArchiveJob.destinationParameter.help\").markRequired().build();\n+        this.destinationParameter = new DirectoryParameter(DESTINATION_PARAMETER_NAME,\n+                                                           \"$ExtractArchiveJob.destinationParameter\").withDescription(\n+                \"$ExtractArchiveJob.destinationParameter.help\").markRequired().build();\n \n-        this.overwriteExistingFilesParameter = new EnumParameter<>(\"overwriteExistingFiles\",\n+        this.overwriteExistingFilesParameter = new EnumParameter<>(OVERWRITE_EXISTING_FILES_PARAMETER_NAME,\n                                                                    \"$ExtractArchiveJob.overwriteExistingFilesParameter\",\n                                                                    ArchiveExtractor.OverrideMode.class).withDescription(\n                 \"$ExtractArchiveJob.overwriteExistingFilesParameter.help\")\n", "next_change": {"commit": "4c4b94ecfa8db1db661895d9852725b8c8d1c4b0", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\nindex d7a2585e6..b0c71e701 100644\n--- a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n+++ b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n", "chunk": "@@ -88,7 +88,7 @@ public class ExtractArchiveJob extends SimpleBatchProcessJobFactory {\n         this.overwriteExistingFilesParameter = new EnumParameter<>(OVERWRITE_EXISTING_FILES_PARAMETER_NAME,\n                                                                    \"$ExtractArchiveJob.overwriteExistingFilesParameter\",\n                                                                    ArchiveExtractor.OverrideMode.class).withDescription(\n-                \"$ExtractArchiveJob.overwriteExistingFilesParameter.help\")\n+                                                                                                               \"$ExtractArchiveJob.overwriteExistingFilesParameter.help\")\n                                                                                                        .withDefault(\n                                                                                                                ArchiveExtractor.OverrideMode.ON_CHANGE)\n                                                                                                        .build();\n", "next_change": {"commit": "57bd759fbf14fbee3c4cee3b0a500fc65039fc9a", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\nindex b0c71e701..f48d803bf 100644\n--- a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n+++ b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n", "chunk": "@@ -88,7 +91,7 @@ public class ExtractArchiveJob extends SimpleBatchProcessJobFactory {\n         this.overwriteExistingFilesParameter = new EnumParameter<>(OVERWRITE_EXISTING_FILES_PARAMETER_NAME,\n                                                                    \"$ExtractArchiveJob.overwriteExistingFilesParameter\",\n                                                                    ArchiveExtractor.OverrideMode.class).withDescription(\n-                                                                                                               \"$ExtractArchiveJob.overwriteExistingFilesParameter.help\")\n+                \"$ExtractArchiveJob.overwriteExistingFilesParameter.help\")\n                                                                                                        .withDefault(\n                                                                                                                ArchiveExtractor.OverrideMode.ON_CHANGE)\n                                                                                                        .build();\n", "next_change": {"commit": "0493c181eff5d29ae1c9821e26f2c4ba30526b34", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\nindex f48d803bf..8c7c69f89 100644\n--- a/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n+++ b/src/main/java/sirius/biz/storage/layer3/ExtractArchiveJob.java\n", "chunk": "@@ -91,7 +91,7 @@ public class ExtractArchiveJob extends SimpleBatchProcessJobFactory {\n         this.overwriteExistingFilesParameter = new EnumParameter<>(OVERWRITE_EXISTING_FILES_PARAMETER_NAME,\n                                                                    \"$ExtractArchiveJob.overwriteExistingFilesParameter\",\n                                                                    ArchiveExtractor.OverrideMode.class).withDescription(\n-                \"$ExtractArchiveJob.overwriteExistingFilesParameter.help\")\n+                                                                                                               \"$ExtractArchiveJob.overwriteExistingFilesParameter.help\")\n                                                                                                        .withDefault(\n                                                                                                                ArchiveExtractor.OverrideMode.ON_CHANGE)\n                                                                                                        .build();\n", "next_change": null}]}}]}}]}}]}}]}}]}}]}}, {"oid": "26781b29a991845de401bcc27510d029f047a174", "url": "https://github.com/scireum/sirius-biz/commit/26781b29a991845de401bcc27510d029f047a174", "message": "Merge remote-tracking branch 'origin/master' into aha/archive-jobs\n\n# Conflicts:\n#\tsrc/main/java/sirius/biz/jobs/batch/file/VirtualFileExtractionJob.java", "committedDate": "2020-11-12T14:52:57Z", "type": "commit"}, {"oid": "f838bd1258a19e04e28060ea8ba7364a6739fde5", "url": "https://github.com/scireum/sirius-biz/commit/f838bd1258a19e04e28060ea8ba7364a6739fde5", "message": "Fixes a typo.", "committedDate": "2020-11-12T14:54:11Z", "type": "commit"}, {"oid": "f693066045e7c968fcabca60d5df6ace8e683d7a", "url": "https://github.com/scireum/sirius-biz/commit/f693066045e7c968fcabca60d5df6ace8e683d7a", "message": "Improves JavaDocs.", "committedDate": "2020-11-12T14:56:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE4NTc3Ng==", "url": "https://github.com/scireum/sirius-biz/pull/906#discussion_r522185776", "body": "vfs -> fileSystem?", "bodyText": "vfs -> fileSystem?", "bodyHTML": "<p dir=\"auto\">vfs -&gt; fileSystem?</p>", "author": "sabieber", "createdAt": "2020-11-12T15:19:09Z", "path": "src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java", "diffHunk": "@@ -42,7 +50,48 @@\n      */\n     public static final Parameter<VirtualFile> FILE_PARAMETER = createFileParameter(null);\n \n+    /**\n+     * Determines the mode in which auxiliary files are handled (if this job supports it).\n+     */\n+    public static final Parameter<AuxiliaryFileMode> AUX_FILE_MODE_PARAMETER = new EnumParameter<>(\"auxFileMode\",\n+                                                                                                   \"$FileImportJobFactory.auxFileMode\",\n+                                                                                                   AuxiliaryFileMode.class)\n+            .withDefault(AuxiliaryFileMode.UPDATE_ON_CHANGE)\n+            .markRequired()\n+            .build();\n+\n+    @Part\n+    private static VirtualFileSystem vfs;", "originalCommit": "8016e7777932d2451ef8321f22af211dfe817ac9", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "98ae7ce3d33d9850e5b10e05d3f485466c5ec0ec", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\nindex 02bfac384..d8901a275 100644\n--- a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n+++ b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n", "chunk": "@@ -61,7 +61,7 @@ public abstract class FileImportJob extends ImportJob {\n             .build();\n \n     @Part\n-    private static VirtualFileSystem vfs;\n+    private static VirtualFileSystem virtualFileSystem;\n \n     @Part\n     private static ArchiveExtractor extractor;\n", "next_change": {"commit": "dfc7ecac33c3d5de8262aa036d3cedad48708de6", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\nindex d8901a275..29ed38d08 100644\n--- a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n+++ b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n", "chunk": "@@ -60,6 +61,14 @@ public abstract class FileImportJob extends ImportJob {\n             .markRequired()\n             .build();\n \n+    /**\n+     * Determines if auxiliary files are extracted including directories (if this job supports it).\n+     */\n+    public static final Parameter<Boolean> AUX_FILE_FLATTEN_DIRS_PARAMETER = new BooleanParameter(\"auxFileFlattenDirs\",\n+                                                                                                  \"$FileImportJobFactory.auxFileFlattenDirectoriesParameter\")\n+            .withDescription(\"$FileImportJobFactory.auxFileFlattenDirectoriesParameter.help\")\n+            .build();\n+\n     @Part\n     private static VirtualFileSystem virtualFileSystem;\n \n", "next_change": {"commit": "b681057d1799b3b8767912f7e1f3d441c856d86f", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\nindex 29ed38d08..ce88cb1fa 100644\n--- a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n+++ b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n", "chunk": "@@ -56,18 +59,23 @@ public abstract class FileImportJob extends ImportJob {\n      */\n     public static final Parameter<AuxiliaryFileMode> AUX_FILE_MODE_PARAMETER = new EnumParameter<>(\"auxFileMode\",\n                                                                                                    \"$FileImportJobFactory.auxFileMode\",\n-                                                                                                   AuxiliaryFileMode.class)\n-            .withDefault(AuxiliaryFileMode.UPDATE_ON_CHANGE)\n-            .markRequired()\n-            .build();\n+                                                                                                   AuxiliaryFileMode.class).withDefault(\n+            AuxiliaryFileMode.UPDATE_ON_CHANGE).markRequired().build();\n \n     /**\n      * Determines if auxiliary files are extracted including directories (if this job supports it).\n      */\n     public static final Parameter<Boolean> AUX_FILE_FLATTEN_DIRS_PARAMETER = new BooleanParameter(\"auxFileFlattenDirs\",\n-                                                                                                  \"$FileImportJobFactory.auxFileFlattenDirectoriesParameter\")\n-            .withDescription(\"$FileImportJobFactory.auxFileFlattenDirectoriesParameter.help\")\n-            .build();\n+                                                                                                  \"$FileImportJobFactory.auxFileFlattenDirectoriesParameter\").withDescription(\n+            \"$FileImportJobFactory.auxFileFlattenDirectoriesParameter.help\").build();\n+\n+    /**\n+     * Defines a parent directory path where auxiliary files will be uploaded (if this job supports it).\n+     */\n+    public static final Parameter<String> AUX_FILE_PARENT_DIRECTORY_PARAMETER = new StringParameter(\n+            \"auxFileParentDirectory\",\n+            \"$FileImportJobFactory.auxFileParentDirectory\").withDescription(\n+            \"$FileImportJobFactory.auxFileParentDirectory.help\").build();\n \n     @Part\n     private static VirtualFileSystem virtualFileSystem;\n", "next_change": {"commit": "d539bf6c3ddf9fa183904bda45afc04cd4cc4f0a", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\nindex ce88cb1fa..fccff47bb 100644\n--- a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n+++ b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n", "chunk": "@@ -80,6 +81,9 @@ public abstract class FileImportJob extends ImportJob {\n     @Part\n     private static VirtualFileSystem virtualFileSystem;\n \n+    @Part\n+    private static StorageUtils storageUtils;\n+\n     @Part\n     private static ArchiveExtractor extractor;\n \n", "next_change": null}]}}]}}, {"header": "diff --git a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\nindex d8901a275..29ed38d08 100644\n--- a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n+++ b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n", "chunk": "@@ -69,6 +78,7 @@ public abstract class FileImportJob extends ImportJob {\n     protected FileParameter fileParameter;\n     protected ValueHolder<VirtualFile> auxFilesDestination;\n     protected AuxiliaryFileMode auxiliaryFileMode;\n+    protected boolean flattenAuxiliaryFileDirs;\n \n     /**\n      * Defines the modes in which an auxiliary file in an archive can be handled.\n", "next_change": {"commit": "f0f87a35bac4560a0ee7822cd629ad6e0c1026fd", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\nindex 29ed38d08..aedf84016 100644\n--- a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n+++ b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n", "chunk": "@@ -79,6 +81,7 @@ public abstract class FileImportJob extends ImportJob {\n     protected ValueHolder<VirtualFile> auxFilesDestination;\n     protected AuxiliaryFileMode auxiliaryFileMode;\n     protected boolean flattenAuxiliaryFileDirs;\n+    protected boolean suppressFileNameInContext;\n \n     /**\n      * Defines the modes in which an auxiliary file in an archive can be handled.\n", "next_change": {"commit": "d539bf6c3ddf9fa183904bda45afc04cd4cc4f0a", "changed_code": [{"header": "diff --git a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\nindex aedf84016..fccff47bb 100644\n--- a/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n+++ b/src/main/java/sirius/biz/jobs/batch/file/FileImportJob.java\n", "chunk": "@@ -82,6 +92,7 @@ public abstract class FileImportJob extends ImportJob {\n     protected AuxiliaryFileMode auxiliaryFileMode;\n     protected boolean flattenAuxiliaryFileDirs;\n     protected boolean suppressFileNameInContext;\n+    protected String auxFilesParentDirectory;\n \n     /**\n      * Defines the modes in which an auxiliary file in an archive can be handled.\n", "next_change": null}]}}]}}]}}]}}, {"oid": "98ae7ce3d33d9850e5b10e05d3f485466c5ec0ec", "url": "https://github.com/scireum/sirius-biz/commit/98ae7ce3d33d9850e5b10e05d3f485466c5ec0ec", "message": "Code style.", "committedDate": "2020-11-12T15:35:04Z", "type": "commit"}]}