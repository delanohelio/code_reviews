{"pr_number": 10890, "pr_title": "Change to align UI to Health UI", "pr_author": "phillip-kruger", "pr_createdAt": "2020-07-21T18:50:56Z", "pr_url": "https://github.com/quarkusio/quarkus/pull/10890", "merge_commit": "89b900f2d0998e35b5ac909eb9e57facaa7423c1", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMyMDY1OA==", "url": "https://github.com/quarkusio/quarkus/pull/10890#discussion_r458320658", "body": "This javadoc will be the title of the section so maybe just \"User interface\" or \"UI configuration\" would be better.", "bodyText": "This javadoc will be the title of the section so maybe just \"User interface\" or \"UI configuration\" would be better.", "bodyHTML": "<p dir=\"auto\">This javadoc will be the title of the section so maybe just \"User interface\" or \"UI configuration\" would be better.</p>", "author": "gsmet", "createdAt": "2020-07-21T18:58:43Z", "path": "extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java", "diffHunk": "@@ -13,29 +14,17 @@\n     String rootPath;\n \n     /**\n-     * The path where GraphQL UI is available.\n-     * The value `/` is not allowed as it blocks the application from serving anything else.\n-     */\n-    @ConfigItem(defaultValue = \"/graphql-ui\")\n-    String rootPathUi;\n-\n-    /**\n-     * Always include the UI. By default this will only be included in dev and test.\n-     * Setting this to true will also include the UI in Prod\n-     */\n-    @ConfigItem(defaultValue = \"false\")\n-    boolean alwaysIncludeUi;\n-\n-    /**\n-     * If GraphQL UI should be enabled. By default, GraphQL UI is enabled.\n+     * Enable metrics\n      */\n-    @ConfigItem(defaultValue = \"true\")\n-    boolean enableUi;\n+    @ConfigItem(name = \"metrics.enabled\", defaultValue = \"false\")\n+    boolean metricsEnabled;\n \n     /**\n-     * Enable metrics\n+     * Config group for all UI related options.\n+     * Configuration properties for UI", "originalCommit": "b5aa45cc17cef11956c942b7af29fcd1b1ce357a", "replyToReviewId": null, "replies": null, "type": "inlineReview", "revised_code": {"commit": "b3d1cf6b4bf8e147c2e17dde6e3329174bbc82da", "changed_code": [{"header": "diff --git a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java b/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\nindex dc45f752961..ab5e72ade0e 100644\n--- a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n+++ b/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n", "chunk": "@@ -20,8 +20,7 @@ public class SmallRyeGraphQLConfig {\n     boolean metricsEnabled;\n \n     /**\n-     * Config group for all UI related options.\n-     * Configuration properties for UI\n+     * UI configuration\n      */\n     @ConfigItem\n     @ConfigDocSection\n", "next_change": null}]}, "revised_code_in_main": {"commit": "89b900f2d0998e35b5ac909eb9e57facaa7423c1", "changed_code": [{"header": "diff --git a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java b/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\nindex dc45f752961..ab5e72ade0e 100644\n--- a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n+++ b/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n", "chunk": "@@ -20,8 +20,7 @@ public class SmallRyeGraphQLConfig {\n     boolean metricsEnabled;\n \n     /**\n-     * Config group for all UI related options.\n-     * Configuration properties for UI\n+     * UI configuration\n      */\n     @ConfigItem\n     @ConfigDocSection\n", "next_change": {"commit": "97da7077d31e0a8585c91f594ebc765406999d6b", "changed_code": [{"header": "diff --git a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java b/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\nindex ab5e72ade0e..53814c891a5 100644\n--- a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n+++ b/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n", "chunk": "@@ -19,6 +20,12 @@ public class SmallRyeGraphQLConfig {\n     @ConfigItem(name = \"metrics.enabled\", defaultValue = \"false\")\n     boolean metricsEnabled;\n \n+    /**\n+     * Change the type naming strategy.\n+     */\n+    @ConfigItem(defaultValue = \"Default\")\n+    TypeAutoNameStrategy autoNameStrategy;\n+\n     /**\n      * UI configuration\n      */\n", "next_change": {"commit": "0bae70a47ec008b307271da6720f7eb72025bbb5", "changed_code": [{"header": "diff --git a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java b/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\nindex 53814c891a5..ec2612bc1e3 100644\n--- a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n+++ b/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n", "chunk": "@@ -27,7 +47,7 @@ public class SmallRyeGraphQLConfig {\n     TypeAutoNameStrategy autoNameStrategy;\n \n     /**\n-     * UI configuration\n+     * SmallRye GraphQL UI configuration\n      */\n     @ConfigItem\n     @ConfigDocSection\n", "next_change": {"commit": "950334aa139a3d99eaa6e1d7627b4f1cf711ed4d", "changed_code": [{"header": "diff --git a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java b/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\nindex ec2612bc1e3..8585a2b3387 100644\n--- a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n+++ b/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n", "chunk": "@@ -40,12 +42,53 @@ public class SmallRyeGraphQLConfig {\n     @ConfigItem(name = \"events.enabled\", defaultValue = \"false\")\n     boolean eventsEnabled;\n \n+    /**\n+     * Enable GET Requests. Allow queries via HTTP GET.\n+     */\n+    @ConfigItem(name = \"http.get.enabled\")\n+    Optional<Boolean> httpGetEnabled;\n+\n+    /**\n+     * Enable Query parameter on POST Requests. Allow POST request to override or supply values in a query parameter.\n+     */\n+    @ConfigItem(name = \"http.post.queryparameters.enabled\")\n+    Optional<Boolean> httpPostQueryParametersEnabled;\n+\n     /**\n      * Change the type naming strategy.\n      */\n     @ConfigItem(defaultValue = \"Default\")\n     TypeAutoNameStrategy autoNameStrategy;\n \n+    /**\n+     * List of extension fields that should be included in the error response.\n+     * By default none will be included. Examples of valid values include\n+     * [exception,classification,code,description,validationErrorType,queryPath]\n+     */\n+    @ConfigItem\n+    Optional<List<String>> errorExtensionFields;\n+\n+    /**\n+     * List of Runtime Exceptions class names that should show the error message.\n+     * By default Runtime Exception messages will be hidden and a generic `Server Error` message will be returned.\n+     */\n+    @ConfigItem\n+    Optional<List<String>> showRuntimeExceptionMessage;\n+\n+    /**\n+     * List of Checked Exceptions class names that should hide the error message.\n+     * By default Checked Exception messages will show the exception message.\n+     */\n+    @ConfigItem\n+    Optional<List<String>> hideCheckedExceptionMessage;\n+\n+    /**\n+     * The default error message that will be used for hidden exception messages.\n+     * Defaults to \"Server Error\"\n+     */\n+    @ConfigItem\n+    Optional<String> defaultErrorMessage;\n+\n     /**\n      * SmallRye GraphQL UI configuration\n      */\n", "next_change": {"commit": "c7f0b18ef9c8a8d1d1c2f67e0585fb4ec8f56681", "changed_code": [{"header": "diff --git a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java b/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\nindex 8585a2b3387..b0ea61a69c6 100644\n--- a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n+++ b/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n", "chunk": "@@ -89,6 +90,54 @@ public class SmallRyeGraphQLConfig {\n     @ConfigItem\n     Optional<String> defaultErrorMessage;\n \n+    /**\n+     * Print the data fetcher exception to the log file.\n+     */\n+    @ConfigItem(defaultValue = \"false\")\n+    boolean printDataFetcherException;\n+\n+    /**\n+     * Include the Scalar definitions in the schema.\n+     */\n+    @ConfigItem(defaultValue = \"false\")\n+    boolean schemaIncludeScalars;\n+\n+    /**\n+     * Include the schema internal definition in the schema.\n+     */\n+    @ConfigItem(defaultValue = \"false\")\n+    boolean schemaIncludeSchemaDefinition;\n+\n+    /**\n+     * Include Directives in the schema.\n+     */\n+    @ConfigItem(defaultValue = \"false\")\n+    boolean schemaIncludeDirectives;\n+\n+    /**\n+     * Include Introspection Types in the schema.\n+     */\n+    @ConfigItem(defaultValue = \"false\")\n+    boolean schemaIncludeIntrospectionTypes;\n+\n+    /**\n+     * Log the payload (and optionally variables) to System out.\n+     */\n+    @ConfigItem(defaultValue = \"off\")\n+    LogPayloadOption logPayload;\n+\n+    /**\n+     * Set the Field visibility.\n+     */\n+    @ConfigItem(defaultValue = \"default\")\n+    String fieldVisibility;\n+\n+    /**\n+     * Exceptions that should be unwrapped (class names).\n+     */\n+    @ConfigItem\n+    Optional<List<String>> unwrapExceptions;\n+\n     /**\n      * SmallRye GraphQL UI configuration\n      */\n", "next_change": {"commit": "2efb1d81e1b9b0c0e6f07d8c3512f8522d148118", "changed_code": [{"header": "diff --git a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java b/extensions/smallrye-graphql/runtime/src/main/java/io/quarkus/smallrye/graphql/runtime/SmallRyeGraphQLConfig.java\nsimilarity index 69%\nrename from extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\nrename to extensions/smallrye-graphql/runtime/src/main/java/io/quarkus/smallrye/graphql/runtime/SmallRyeGraphQLConfig.java\nindex b0ea61a69c6..279262d62d5 100644\n--- a/extensions/smallrye-graphql/deployment/src/main/java/io/quarkus/smallrye/graphql/deployment/SmallRyeGraphQLConfig.java\n+++ b/extensions/smallrye-graphql/runtime/src/main/java/io/quarkus/smallrye/graphql/runtime/SmallRyeGraphQLConfig.java\n", "chunk": "@@ -67,82 +68,87 @@ public class SmallRyeGraphQLConfig {\n      * [exception,classification,code,description,validationErrorType,queryPath]\n      */\n     @ConfigItem\n-    Optional<List<String>> errorExtensionFields;\n+    public Optional<List<String>> errorExtensionFields;\n \n     /**\n      * List of Runtime Exceptions class names that should show the error message.\n      * By default Runtime Exception messages will be hidden and a generic `Server Error` message will be returned.\n      */\n     @ConfigItem\n-    Optional<List<String>> showRuntimeExceptionMessage;\n+    public Optional<List<String>> showRuntimeExceptionMessage;\n \n     /**\n      * List of Checked Exceptions class names that should hide the error message.\n      * By default Checked Exception messages will show the exception message.\n      */\n     @ConfigItem\n-    Optional<List<String>> hideCheckedExceptionMessage;\n+    public Optional<List<String>> hideCheckedExceptionMessage;\n \n     /**\n      * The default error message that will be used for hidden exception messages.\n      * Defaults to \"Server Error\"\n      */\n     @ConfigItem\n-    Optional<String> defaultErrorMessage;\n+    public Optional<String> defaultErrorMessage;\n \n     /**\n-     * Print the data fetcher exception to the log file.\n+     * Print the data fetcher exception to the log file. Default `true` in dev and test mode, default `false` in prod.\n      */\n-    @ConfigItem(defaultValue = \"false\")\n-    boolean printDataFetcherException;\n+    @ConfigItem\n+    public Optional<Boolean> printDataFetcherException;\n+\n+    /**\n+     * Make the schema available over HTTP.\n+     */\n+    @ConfigItem(defaultValue = \"true\")\n+    public boolean schemaAvailable;\n \n     /**\n      * Include the Scalar definitions in the schema.\n      */\n     @ConfigItem(defaultValue = \"false\")\n-    boolean schemaIncludeScalars;\n+    public boolean schemaIncludeScalars;\n \n     /**\n      * Include the schema internal definition in the schema.\n      */\n     @ConfigItem(defaultValue = \"false\")\n-    boolean schemaIncludeSchemaDefinition;\n+    public boolean schemaIncludeSchemaDefinition;\n \n     /**\n      * Include Directives in the schema.\n      */\n     @ConfigItem(defaultValue = \"false\")\n-    boolean schemaIncludeDirectives;\n+    public boolean schemaIncludeDirectives;\n \n     /**\n      * Include Introspection Types in the schema.\n      */\n     @ConfigItem(defaultValue = \"false\")\n-    boolean schemaIncludeIntrospectionTypes;\n+    public boolean schemaIncludeIntrospectionTypes;\n \n     /**\n      * Log the payload (and optionally variables) to System out.\n      */\n     @ConfigItem(defaultValue = \"off\")\n-    LogPayloadOption logPayload;\n+    public LogPayloadOption logPayload;\n \n     /**\n      * Set the Field visibility.\n      */\n     @ConfigItem(defaultValue = \"default\")\n-    String fieldVisibility;\n+    public String fieldVisibility;\n \n     /**\n      * Exceptions that should be unwrapped (class names).\n      */\n     @ConfigItem\n-    Optional<List<String>> unwrapExceptions;\n+    public Optional<List<String>> unwrapExceptions;\n \n     /**\n      * SmallRye GraphQL UI configuration\n      */\n     @ConfigItem\n     @ConfigDocSection\n-    SmallRyeGraphQLUIConfig ui;\n-\n+    public SmallRyeGraphQLUIConfig ui;\n }\n", "next_change": null}]}}]}}]}}]}}]}}]}, "commits_in_main": [{"oid": "89b900f2d0998e35b5ac909eb9e57facaa7423c1", "message": "Merge commit", "committedDate": null}, {"oid": "97da7077d31e0a8585c91f594ebc765406999d6b", "committedDate": "2020-10-06 10:47:31 +0200", "message": "Update SmallRye GraphQL to 1.0.12"}, {"oid": "df99b6e09304acc3e45a9de446c02e24a478ad7e", "committedDate": "2020-10-21 13:02:23 +0200", "message": "Clean up the config of service integration"}, {"oid": "0bae70a47ec008b307271da6720f7eb72025bbb5", "committedDate": "2020-11-11 13:15:07 +0100", "message": "SmallRye Health and GraphQL UI configuration name update"}, {"oid": "307696aadb2661e411cd67797c987f2b73800483", "committedDate": "2021-03-09 18:35:41 -0500", "message": "Fix DevConsole paths;HttpRootPathBuildItem.Builder"}, {"oid": "e9b71f2f495a5d5d175651da170ad4f786d2431d", "committedDate": "2021-05-25 22:01:18 +0200", "message": "Upgrade to SmallRye GraphQL 1.2.2 (Implement the \"GraphQL over HTTP\" spec properly) Signed-off-by:Phillip Kruger <phillip.kruger@gmail.com>"}, {"oid": "950334aa139a3d99eaa6e1d7627b4f1cf711ed4d", "committedDate": "2021-05-31 20:39:16 +0200", "message": "Updated SmallRye GraphQL to 1.2.3"}, {"oid": "2df73cf4bfd9519b4956e320a1b38fefe75caa5a", "committedDate": "2021-06-03 11:42:44 +0200", "message": "Disable GraphQL metrics by default"}, {"oid": "c7f0b18ef9c8a8d1d1c2f67e0585fb4ec8f56681", "committedDate": "2021-07-26 15:01:24 +0200", "message": "Upgrade SmallRye GraphQL to 1.3.0 Signed-off-by:Phillip Kruger <phillip.kruger@gmail.com>"}, {"oid": "468a463b6b331372dd1ea55f0466303addccbb7f", "committedDate": "2021-08-02 15:04:56 +0200", "message": "GraphQL: New config option to make the schema unavailable Signed-off-by:Phillip Kruger <phillip.kruger@gmail.com>"}, {"oid": "b0892d500066858a0ef1f376a2baa3b019fc508b", "committedDate": "2021-09-13 11:48:09 +0200", "message": "Change the default for `printDatafetcherException` to true in Dev Mode"}, {"oid": "2efb1d81e1b9b0c0e6f07d8c3512f8522d148118", "committedDate": "2021-10-08 17:41:08 +0100", "message": "Moved SmallRyeGraphQLConfigMapping to the runtime dependency"}]}, {"oid": "b3d1cf6b4bf8e147c2e17dde6e3329174bbc82da", "url": "https://github.com/quarkusio/quarkus/commit/b3d1cf6b4bf8e147c2e17dde6e3329174bbc82da", "message": "Change to align UI to Health UI\n\nSigned-off-by: Phillip Kruger <phillip.kruger@gmail.com>", "committedDate": "2020-07-22T06:55:17Z", "type": "commit"}]}