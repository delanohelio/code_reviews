{"pr_number": 3439, "pr_title": "Fix/slot compare", "pr_author": "ShaneBeee", "pr_createdAt": "2020-10-04T23:48:13Z", "pr_url": "https://github.com/SkriptLang/Skript/pull/3439", "timeline": [{"oid": "822efcf2c4d8e476bfac643a184f99dc6f7be6f4", "url": "https://github.com/SkriptLang/Skript/commit/822efcf2c4d8e476bfac643a184f99dc6f7be6f4", "message": "plugin.yml - update line endings\n- This was missed in the major update, and is causing issues for some", "committedDate": "2020-10-04T21:42:19Z", "type": "commit"}, {"oid": "f817c305e70f91803d14824160edeade346813f8", "url": "https://github.com/SkriptLang/Skript/commit/f817c305e70f91803d14824160edeade346813f8", "message": "Merge branch 'dev-2.5' of https://github.com/SkriptLang/Skript into dev-2.5", "committedDate": "2020-10-04T23:42:06Z", "type": "commit"}, {"oid": "ae42c173939cb1157833d9f64ff68d3e21f7d86f", "url": "https://github.com/SkriptLang/Skript/commit/ae42c173939cb1157833d9f64ff68d3e21f7d86f", "message": "DefaultComparators - fix slot comparisons between inventory slot and equiptment slot", "committedDate": "2020-10-04T23:45:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY2MTM0Mw==", "url": "https://github.com/SkriptLang/Skript/pull/3439#discussion_r499661343", "body": "Maybe this would be better of as:\r\n```suggestion\r\n\t\t\t\tboolean equipment1 = o1 instanceof EquipmentSlot;\r\n\t\t\t\tboolean equipment2 = o2 instanceof EquipmentSlot;\r\n\t\t\t\tif (equipment != equipment2)\r\n```\r\nNot sure about those variable names though.\r\n\r\nThis might not *really* matter though", "bodyText": "Maybe this would be better of as:\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\tif ((o1 instanceof EquipmentSlot && !(o2 instanceof EquipmentSlot)) || !(o1 instanceof EquipmentSlot) && o2 instanceof EquipmentSlot)\n          \n          \n            \n            \t\t\t\tboolean equipment1 = o1 instanceof EquipmentSlot;\n          \n          \n            \n            \t\t\t\tboolean equipment2 = o2 instanceof EquipmentSlot;\n          \n          \n            \n            \t\t\t\tif (equipment != equipment2)\n          \n      \n    \n    \n  \n\nNot sure about those variable names though.\nThis might not really matter though", "bodyHTML": "<p dir=\"auto\">Maybe this would be better of as:</p>\n  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">\t\t\t\t<span class=\"pl-k x x-first\">if</span><span class=\"x\"> ((o1 </span><span class=\"pl-k x\">instanceof</span><span class=\"x\"> </span><span class=\"pl-smi x\">EquipmentSlot</span><span class=\"x\"> </span><span class=\"pl-k x\">&amp;&amp;</span><span class=\"x\"> </span><span class=\"pl-k x\">!</span><span class=\"x\">(o2 </span><span class=\"pl-k x\">instanceof</span><span class=\"x\"> </span><span class=\"pl-smi x\">EquipmentSlot</span><span class=\"x\">)) </span><span class=\"pl-k x\">||</span><span class=\"x\"> </span><span class=\"pl-k x\">!</span><span class=\"x x-last\">(</span>o1 <span class=\"pl-k\">instanceof</span> <span class=\"pl-smi\">EquipmentSlot</span><span class=\"x x-first\">) </span><span class=\"pl-k x\">&amp;&amp;</span><span class=\"x\"> o2 </span><span class=\"pl-k x\">instanceof</span><span class=\"x\"> </span><span class=\"pl-smi x\">EquipmentSlot</span><span class=\"x x-last\">)</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\t\t<span class=\"pl-k x x-first\">boolean</span><span class=\"x\"> equipment1 </span><span class=\"pl-k x\">=</span><span class=\"x x-last\"> </span>o1 <span class=\"pl-k\">instanceof</span> <span class=\"pl-smi\">EquipmentSlot</span><span class=\"x x-first x-last\">;</span></td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\t\t<span class=\"pl-k\">boolean</span> equipment2 <span class=\"pl-k\">=</span> o2 <span class=\"pl-k\">instanceof</span> <span class=\"pl-smi\">EquipmentSlot</span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">\t\t\t\t<span class=\"pl-k\">if</span> (equipment <span class=\"pl-k\">!=</span> equipment2)</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n\n<p dir=\"auto\">Not sure about those variable names though.</p>\n<p dir=\"auto\">This might not <em>really</em> matter though</p>", "author": "APickledWalrus", "createdAt": "2020-10-05T14:55:26Z", "path": "src/main/java/ch/njol/skript/classes/data/DefaultComparators.java", "diffHunk": "@@ -103,6 +104,8 @@ public boolean supportsOrdering() {\n \n \t\t\t@Override\n \t\t\tpublic Relation compare(Slot o1, Slot o2) {\n+\t\t\t\tif ((o1 instanceof EquipmentSlot && !(o2 instanceof EquipmentSlot)) || !(o1 instanceof EquipmentSlot) && o2 instanceof EquipmentSlot)", "originalCommit": "ae42c173939cb1157833d9f64ff68d3e21f7d86f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg1MTc0MA==", "url": "https://github.com/SkriptLang/Skript/pull/3439#discussion_r499851740", "bodyText": "kinda just does the same thing with more lines.", "author": "ShaneBeee", "createdAt": "2020-10-05T20:25:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY2MTM0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg1MzkwOQ==", "url": "https://github.com/SkriptLang/Skript/pull/3439#discussion_r499853909", "bodyText": "Maybe - I mainly suggested this just to avoid the double instanceof checks. Not that it really has that much of an impact though", "author": "APickledWalrus", "createdAt": "2020-10-05T20:29:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY2MTM0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg1NTA4NA==", "url": "https://github.com/SkriptLang/Skript/pull/3439#discussion_r499855084", "bodyText": "in all fairness your suggestion is a double instance check anyways", "author": "ShaneBeee", "createdAt": "2020-10-05T20:31:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY2MTM0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTg3MjA2NQ==", "url": "https://github.com/SkriptLang/Skript/pull/3439#discussion_r499872065", "bodyText": "updated \ud83d\udc4d", "author": "ShaneBeee", "createdAt": "2020-10-05T21:05:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY2MTM0Mw=="}], "type": "inlineReview"}, {"oid": "addbf25ec59d740163c5cb0621f4f2701d3a1b30", "url": "https://github.com/SkriptLang/Skript/commit/addbf25ec59d740163c5cb0621f4f2701d3a1b30", "message": "Update src/main/java/ch/njol/skript/classes/data/DefaultComparators.java\n\nCo-authored-by: APickledWalrus <apickledwalrus@gmail.com>", "committedDate": "2020-10-05T21:00:26Z", "type": "commit"}, {"oid": "59243557310629df6f6d29aee1a66a38d9b57ffa", "url": "https://github.com/SkriptLang/Skript/commit/59243557310629df6f6d29aee1a66a38d9b57ffa", "message": "shorten comparison", "committedDate": "2020-10-05T21:03:58Z", "type": "commit"}, {"oid": "602dca01bb66ce4e8c4affc3835df324df399bba", "url": "https://github.com/SkriptLang/Skript/commit/602dca01bb66ce4e8c4affc3835df324df399bba", "message": "Merge branch 'dev-2.5' into fix/slot-compare", "committedDate": "2020-10-05T21:05:20Z", "type": "commit"}]}