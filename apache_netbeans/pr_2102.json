{"pr_number": 2102, "pr_title": "[NETBEANS-4203] for InputOutput.reset() do NbWriter.reset() as needed", "pr_author": "errael", "pr_createdAt": "2020-04-23T17:32:16Z", "pr_url": "https://github.com/apache/netbeans/pull/2102", "timeline": [{"oid": "e61cbfbdb216032bf9def804345eea1df5c77676", "url": "https://github.com/apache/netbeans/commit/e61cbfbdb216032bf9def804345eea1df5c77676", "message": "[NETBEANS-4203] for InputOutput.reset() do NbWriter.reset() as needed", "committedDate": "2020-04-23T15:38:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc2MzQ0OQ==", "url": "https://github.com/apache/netbeans/pull/2102#discussion_r418763449", "body": "The comment seems correct. At first I thought maybe io.getIn().reset() would also need to be called, but as the comment says, we the implementation of NbWriter will call NbIO.reset() in turn..", "bodyText": "The comment seems correct. At first I thought maybe io.getIn().reset() would also need to be called, but as the comment says, we the implementation of NbWriter will call NbIO.reset() in turn..", "bodyHTML": "<p dir=\"auto\">The comment seems correct. At first I thought maybe io.getIn().reset() would also need to be called, but as the comment says, we the implementation of NbWriter will call NbIO.reset() in turn..</p>", "author": "eirikbakke", "createdAt": "2020-05-01T22:26:38Z", "path": "platform/core.output2/src/org/netbeans/core/output2/NbIOProvider.java", "diffHunk": "@@ -214,7 +214,17 @@ public Lookup getIOLookup(InputOutput io) {\n     @Override\n     public void resetIO(InputOutput io) {\n         if (io instanceof NbIO) {\n-            ((NbIO) io).reset();\n+            if(io.getOut() instanceof NbWriter) {\n+                try {\n+                    // NbWriter does OutWriter fixup,\n+                    // then NbWriter invokes ((NbIO) io).reset()\n+                    io.getOut().reset();", "originalCommit": "4f7ceae1f038839939f5f66c7c9ed8ce4b5f3601", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc2MzQ5Mg==", "url": "https://github.com/apache/netbeans/pull/2102#discussion_r418763492", "body": "space after if", "bodyText": "space after if", "bodyHTML": "<p dir=\"auto\">space after if</p>", "author": "eirikbakke", "createdAt": "2020-05-01T22:26:48Z", "path": "platform/core.output2/src/org/netbeans/core/output2/NbIOProvider.java", "diffHunk": "@@ -214,7 +214,17 @@ public Lookup getIOLookup(InputOutput io) {\n     @Override\n     public void resetIO(InputOutput io) {\n         if (io instanceof NbIO) {\n-            ((NbIO) io).reset();\n+            if(io.getOut() instanceof NbWriter) {", "originalCommit": "4f7ceae1f038839939f5f66c7c9ed8ce4b5f3601", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc2NjAyOA==", "url": "https://github.com/apache/netbeans/pull/2102#discussion_r418766028", "body": "This seems to be the way errors are handled in this class, I guess.", "bodyText": "This seems to be the way errors are handled in this class, I guess.", "bodyHTML": "<p dir=\"auto\">This seems to be the way errors are handled in this class, I guess.</p>", "author": "eirikbakke", "createdAt": "2020-05-01T22:36:49Z", "path": "platform/core.output2/src/org/netbeans/core/output2/NbIOProvider.java", "diffHunk": "@@ -214,7 +214,17 @@ public Lookup getIOLookup(InputOutput io) {\n     @Override\n     public void resetIO(InputOutput io) {\n         if (io instanceof NbIO) {\n-            ((NbIO) io).reset();\n+            if(io.getOut() instanceof NbWriter) {\n+                try {\n+                    // NbWriter does OutWriter fixup,\n+                    // then NbWriter invokes ((NbIO) io).reset()\n+                    io.getOut().reset();\n+                } catch(IOException ex) {\n+                    Exceptions.printStackTrace(ex);", "originalCommit": "4f7ceae1f038839939f5f66c7c9ed8ce4b5f3601", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTIxMzI5MQ==", "url": "https://github.com/apache/netbeans/pull/2102#discussion_r419213291", "bodyText": "This will probably show a dialog to the user. If you just want to print errors to console, consider Exceptions.attachSeverity first.", "author": "JaroslavTulach", "createdAt": "2020-05-04T04:54:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc2NjAyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc2NjA0Mw==", "url": "https://github.com/apache/netbeans/pull/2102#discussion_r418766043", "body": "space before (", "bodyText": "space before (", "bodyHTML": "<p dir=\"auto\">space before (</p>", "author": "eirikbakke", "createdAt": "2020-05-01T22:36:52Z", "path": "platform/core.output2/src/org/netbeans/core/output2/NbIOProvider.java", "diffHunk": "@@ -214,7 +214,17 @@ public Lookup getIOLookup(InputOutput io) {\n     @Override\n     public void resetIO(InputOutput io) {\n         if (io instanceof NbIO) {\n-            ((NbIO) io).reset();\n+            if(io.getOut() instanceof NbWriter) {\n+                try {\n+                    // NbWriter does OutWriter fixup,\n+                    // then NbWriter invokes ((NbIO) io).reset()\n+                    io.getOut().reset();\n+                } catch(IOException ex) {", "originalCommit": "4f7ceae1f038839939f5f66c7c9ed8ce4b5f3601", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}