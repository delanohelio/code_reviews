{"pr_number": 4943, "pr_title": "Allow GeoNetwork datadir from tomcat context Parameter", "pr_author": "davidblasby", "pr_createdAt": "2020-08-18T22:25:13Z", "pr_url": "https://github.com/geonetwork/core-geonetwork/pull/4943", "timeline": [{"oid": "47f06c70e0b64bf6d1184fa4e420ecbca4b9edca", "url": "https://github.com/geonetwork/core-geonetwork/commit/47f06c70e0b64bf6d1184fa4e420ecbca4b9edca", "message": "allow geoserver datadir from tomcat context Parameter", "committedDate": "2020-08-18T22:22:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjUzMjI2NA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4943#discussion_r472532264", "body": "If you look at line 162  it is suggesting that jeevesServlet could be null.\r\n`if (jeevesServlet != null) {`\r\n\r\nSo maybe this should be \r\n`if ( value == null && jeevesServlet != null && jeevesServlet.getServletContext() != null ){`\r\n\r\notherwise there could be a nullpointer error if jeevesServlet is null", "bodyText": "If you look at line 162  it is suggesting that jeevesServlet could be null.\nif (jeevesServlet != null) {\nSo maybe this should be\nif ( value == null && jeevesServlet != null && jeevesServlet.getServletContext() != null ){\notherwise there could be a nullpointer error if jeevesServlet is null", "bodyHTML": "<p dir=\"auto\">If you look at line 162  it is suggesting that jeevesServlet could be null.<br>\n<code>if (jeevesServlet != null) {</code></p>\n<p dir=\"auto\">So maybe this should be<br>\n<code>if ( value == null &amp;&amp; jeevesServlet != null &amp;&amp; jeevesServlet.getServletContext() != null ){</code></p>\n<p dir=\"auto\">otherwise there could be a nullpointer error if jeevesServlet is null</p>", "author": "ianwallen", "createdAt": "2020-08-18T22:38:49Z", "path": "core/src/main/java/org/fao/geonet/kernel/GeonetworkDataDirectory.java", "diffHunk": "@@ -162,6 +162,9 @@ private Path lookupProperty(JeevesServlet jeevesServlet, ServiceConfig handlerCo\n                     if (jeevesServlet != null) {\n                         value = jeevesServlet.getInitParameter(keyToUse);\n                     }\n+                    if ( (value == null) && (jeevesServlet.getServletContext() != null) ){", "originalCommit": "47f06c70e0b64bf6d1184fa4e420ecbca4b9edca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU0MDc3MQ==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4943#discussion_r472540771", "bodyText": "fixed - that should only happen in test cases...", "author": "davidblasby", "createdAt": "2020-08-18T23:04:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjUzMjI2NA=="}], "type": "inlineReview"}, {"oid": "c52b10fe2b14c9a4f46fb2cff890a384434fe03f", "url": "https://github.com/geonetwork/core-geonetwork/commit/c52b10fe2b14c9a4f46fb2cff890a384434fe03f", "message": "null check", "committedDate": "2020-08-18T23:03:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjc1NTg5MQ==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4943#discussion_r472755891", "body": "Just small refactor, to move the code inside the if from line 162, as already checks the condition`jeevesServlet != null`:\r\n\r\n```\r\nif (jeevesServlet != null) {\r\n  value = jeevesServlet.getInitParameter(keyToUse);\r\n  if ( (value == null) && (jeevesServlet.getServletContext() != null) ) {\r\n    ...\r\n  }\r\n}\r\n\r\n```", "bodyText": "Just small refactor, to move the code inside the if from line 162, as already checks the conditionjeevesServlet != null:\nif (jeevesServlet != null) {\n  value = jeevesServlet.getInitParameter(keyToUse);\n  if ( (value == null) && (jeevesServlet.getServletContext() != null) ) {\n    ...\n  }\n}", "bodyHTML": "<p dir=\"auto\">Just small refactor, to move the code inside the if from line 162, as already checks the condition<code>jeevesServlet != null</code>:</p>\n<div class=\"snippet-clipboard-content position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"if (jeevesServlet != null) {\n  value = jeevesServlet.getInitParameter(keyToUse);\n  if ( (value == null) &amp;&amp; (jeevesServlet.getServletContext() != null) ) {\n    ...\n  }\n}\n\"><pre><code>if (jeevesServlet != null) {\n  value = jeevesServlet.getInitParameter(keyToUse);\n  if ( (value == null) &amp;&amp; (jeevesServlet.getServletContext() != null) ) {\n    ...\n  }\n}\n\n</code></pre></div>", "author": "josegar74", "createdAt": "2020-08-19T06:28:38Z", "path": "core/src/main/java/org/fao/geonet/kernel/GeonetworkDataDirectory.java", "diffHunk": "@@ -162,6 +162,9 @@ private Path lookupProperty(JeevesServlet jeevesServlet, ServiceConfig handlerCo\n                     if (jeevesServlet != null) {\n                         value = jeevesServlet.getInitParameter(keyToUse);\n                     }\n+                    if ( (value == null) && (jeevesServlet != null) && (jeevesServlet.getServletContext() != null) ){", "originalCommit": "c52b10fe2b14c9a4f46fb2cff890a384434fe03f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzI4NDcwMA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4943#discussion_r473284700", "bodyText": "moved", "author": "davidblasby", "createdAt": "2020-08-19T19:59:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjc1NTg5MQ=="}], "type": "inlineReview"}, {"oid": "75bfe1fbd19b688d9ed1e7b0b1321f04929432f0", "url": "https://github.com/geonetwork/core-geonetwork/commit/75bfe1fbd19b688d9ed1e7b0b1321f04929432f0", "message": "move if inside if", "committedDate": "2020-08-19T19:58:04Z", "type": "commit"}]}