{"pr_number": 3852, "pr_title": "unwraps the InvocationTargetException to report the real error", "pr_author": "juergen-albert", "pr_createdAt": "2020-03-24T23:24:12Z", "pr_url": "https://github.com/bndtools/bnd/pull/3852", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzY3NTkyMw==", "url": "https://github.com/bndtools/bnd/pull/3852#discussion_r397675923", "body": "See the methods for this in Exceptions, they provide solid support to get the original cause", "bodyText": "See the methods for this in Exceptions, they provide solid support to get the original cause", "bodyHTML": "<p dir=\"auto\">See the methods for this in Exceptions, they provide solid support to get the original cause</p>", "author": "pkriens", "createdAt": "2020-03-25T08:23:35Z", "path": "biz.aQute.repository/src/aQute/bnd/repository/maven/pom/provider/Traverser.java", "diffHunk": "@@ -206,8 +207,14 @@ private void parseResource(Archive archive, String parent) throws Exception {\n \t\t\t}\n \t\t\taddInformationCapability(rb, archive.toString(), parent);\n \t\t} catch (Exception e) {\n+\t\t\tThrowable theException = e;", "originalCommit": "5a351494424dfab4b06df79d8c156b81d915ad5a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzczOTQ5MA==", "url": "https://github.com/bndtools/bnd/pull/3852#discussion_r397739490", "bodyText": "Makes sense. I will use the Exceptions.unrollCause method. I guess we can use this in any case.", "author": "juergen-albert", "createdAt": "2020-03-25T10:11:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzY3NTkyMw=="}], "type": "inlineReview"}, {"oid": "71e27a9eeb038adb29aa4d084ed071c59541d37d", "url": "https://github.com/bndtools/bnd/commit/71e27a9eeb038adb29aa4d084ed071c59541d37d", "message": "unwraps the Exception to report the real error\n\nfixes #3851\n\nSigned-off-by: Juergen Albert <j.albert@data-in-motion.biz>", "committedDate": "2020-03-25T10:14:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzgwODcwOQ==", "url": "https://github.com/bndtools/bnd/pull/3852#discussion_r397808709", "body": "This will unroll all the way back to the root cause. If you only want to unroll off any InvocactionTargetExceptions, then you want to do:\r\n\r\n```java\r\nThrowable theException = Exceptions.unrollCause(e, InvocationTargetException.class);\r\n```\r\n\r\nSee for example: \r\n\r\nhttps://github.com/bndtools/bnd/blob/a6d93a4af6b9c388044f632887f682b30d5e8fe6/biz.aQute.bndlib/src/aQute/bnd/osgi/Processor.java#L419-L420", "bodyText": "This will unroll all the way back to the root cause. If you only want to unroll off any InvocactionTargetExceptions, then you want to do:\nThrowable theException = Exceptions.unrollCause(e, InvocationTargetException.class);\nSee for example:\n\n  \n    \n      bnd/biz.aQute.bndlib/src/aQute/bnd/osgi/Processor.java\n    \n    \n        Lines 419 to 420\n      in\n      a6d93a4\n    \n    \n    \n    \n\n        \n          \n           // unroll InvocationTargetException \n        \n\n        \n          \n           t = Exceptions.unrollCause(t, InvocationTargetException.class);", "bodyHTML": "<p dir=\"auto\">This will unroll all the way back to the root cause. If you only want to unroll off any InvocactionTargetExceptions, then you want to do:</p>\n<div class=\"highlight highlight-source-java position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Throwable theException = Exceptions.unrollCause(e, InvocationTargetException.class);\"><pre><span class=\"pl-smi\">Throwable</span> theException <span class=\"pl-k\">=</span> <span class=\"pl-smi\">Exceptions</span><span class=\"pl-k\">.</span>unrollCause(e, <span class=\"pl-smi\">InvocationTargetException</span><span class=\"pl-k\">.</span>class);</pre></div>\n<p dir=\"auto\">See for example:</p>\n<p dir=\"auto\"><div class=\"border rounded-1 my-2\">\n  <div class=\"f6 px-3 py-2 lh-condensed border-bottom color-bg-subtle\">\n    <p class=\"mb-0 text-bold\">\n      <a href=\"https://github.com/bndtools/bnd/blob/a6d93a4af6b9c388044f632887f682b30d5e8fe6/biz.aQute.bndlib/src/aQute/bnd/osgi/Processor.java#L419-L420\">bnd/biz.aQute.bndlib/src/aQute/bnd/osgi/Processor.java</a>\n    </p>\n    <p class=\"mb-0 color-fg-muted\">\n        Lines 419 to 420\n      in\n      <a data-pjax=\"true\" class=\"commit-tease-sha\" href=\"/bndtools/bnd/commit/a6d93a4af6b9c388044f632887f682b30d5e8fe6\">a6d93a4</a>\n    </p>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper blob-wrapper-embedded data\">\n    <table class=\"highlight tab-size mb-0 js-file-line-container\" data-tab-size=\"8\" data-paste-markdown-skip=\"\">\n\n        <tbody><tr class=\"border-0\">\n          <td id=\"L419\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"419\"></td>\n          <td id=\"LC419\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> <span class=\"pl-c\"><span class=\"pl-c\">//</span> unroll InvocationTargetException</span> </td>\n        </tr>\n\n        <tr class=\"border-0\">\n          <td id=\"L420\" class=\"blob-num border-0 px-3 py-0 color-bg-default js-line-number\" data-line-number=\"420\"></td>\n          <td id=\"LC420\" class=\"blob-code border-0 px-3 py-0 color-bg-default blob-code-inner js-file-line\"> t <span class=\"pl-k\">=</span> <span class=\"pl-smi\">Exceptions</span><span class=\"pl-k\">.</span>unrollCause(t, <span class=\"pl-smi\">InvocationTargetException</span><span class=\"pl-k\">.</span>class); </td>\n        </tr>\n    </tbody></table>\n  </div>\n</div>\n</p>", "author": "bjhargrave", "createdAt": "2020-03-25T12:15:38Z", "path": "biz.aQute.repository/src/aQute/bnd/repository/maven/pom/provider/Traverser.java", "diffHunk": "@@ -206,8 +207,9 @@ private void parseResource(Archive archive, String parent) throws Exception {\n \t\t\t}\n \t\t\taddInformationCapability(rb, archive.toString(), parent);\n \t\t} catch (Exception e) {\n+\t\t\tThrowable theException = Exceptions.unrollCause(e);", "originalCommit": "71e27a9eeb038adb29aa4d084ed071c59541d37d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg2OTA1NQ==", "url": "https://github.com/bndtools/bnd/pull/3852#discussion_r397869055", "bodyText": "Maybe one day I will manage to create PR that does not need at least 3 iterations :-)", "author": "juergen-albert", "createdAt": "2020-03-25T13:51:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzgwODcwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzk4NDI1OA==", "url": "https://github.com/bndtools/bnd/pull/3852#discussion_r397984258", "bodyText": "I think there is a rumour that Chuck Norris could once bypass BJ with only 2 iterations ...", "author": "pkriens", "createdAt": "2020-03-25T16:16:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzgwODcwOQ=="}], "type": "inlineReview"}, {"oid": "33375adece4b84b0b7ca1f9267a66e42992aaf07", "url": "https://github.com/bndtools/bnd/commit/33375adece4b84b0b7ca1f9267a66e42992aaf07", "message": "unwraps the Exception to report the real error\n\nfixes #3851\n\nSigned-off-by: Juergen Albert <j.albert@data-in-motion.biz>", "committedDate": "2020-03-25T13:50:12Z", "type": "commit"}, {"oid": "33375adece4b84b0b7ca1f9267a66e42992aaf07", "url": "https://github.com/bndtools/bnd/commit/33375adece4b84b0b7ca1f9267a66e42992aaf07", "message": "unwraps the Exception to report the real error\n\nfixes #3851\n\nSigned-off-by: Juergen Albert <j.albert@data-in-motion.biz>", "committedDate": "2020-03-25T13:50:12Z", "type": "forcePushed"}]}