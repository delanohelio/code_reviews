{"pr_number": 587, "pr_title": "add qpslimiter when verifyTransferData", "pr_author": "cyjseagull", "pr_createdAt": "2020-05-15T10:40:08Z", "pr_url": "https://github.com/FISCO-BCOS/web3sdk/pull/587", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTcxNzM0Mg==", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/587#discussion_r425717342", "body": "__[PMD]__ Found 'DU'-anomaly for variable 'limiter' (lines '97'-'154'). ([view](https://sider.review/gh/repos/113938008/pulls/587#issue-5561310))\n\n<details>\n\n| Rule | Ruleset | Priority |\n| - | - | - |\n| `DataflowAnomalyAnalysis` | Error Prone | 5 |\n\nReferences:\n- <https://pmd.github.io/pmd-6.23.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis>\n\nYou can [close this issue](https://sider.review/gh/repos/113938008/pulls/587#issue-5561310) if no need to fix it. [Learn more](https://help.sider.review/getting-started/working-with-issues).\n\n</details>", "bodyText": "[PMD] Found 'DU'-anomaly for variable 'limiter' (lines '97'-'154'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.23.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can close this issue if no need to fix it. Learn more.", "bodyHTML": "<p dir=\"auto\"><strong>[PMD]</strong> Found 'DU'-anomaly for variable 'limiter' (lines '97'-'154'). (<a href=\"https://sider.review/gh/repos/113938008/pulls/587#issue-5561310\" rel=\"nofollow\">view</a>)</p>\n<details>\n<table role=\"table\">\n<thead>\n<tr>\n<th>Rule</th>\n<th>Ruleset</th>\n<th>Priority</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>DataflowAnomalyAnalysis</code></td>\n<td>Error Prone</td>\n<td>5</td>\n</tr>\n</tbody>\n</table>\n<p dir=\"auto\">References:</p>\n<ul dir=\"auto\">\n<li><a href=\"https://pmd.github.io/pmd-6.23.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\" rel=\"nofollow\">https://pmd.github.io/pmd-6.23.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis</a></li>\n</ul>\n<p dir=\"auto\">You can <a href=\"https://sider.review/gh/repos/113938008/pulls/587#issue-5561310\" rel=\"nofollow\">close this issue</a> if no need to fix it. <a href=\"https://help.sider.review/getting-started/working-with-issues\" rel=\"nofollow\">Learn more</a>.</p>\n</details>", "author": "sider", "createdAt": "2020-05-15T10:41:05Z", "path": "src/test/java/org/fisco/bcos/channel/test/parallel/parallelok/PerformanceDTTest.java", "diffHunk": "@@ -94,7 +94,7 @@ public void veryTransferData(ThreadPoolTaskExecutor threadPool) {\n         AtomicInteger verify_failed = new AtomicInteger(0);\n \n         allUser = dagUserMgr.getUserList();\n-\n+        RateLimiter limiter = RateLimiter.create(qps.intValue());", "originalCommit": "1fb217f5adc966a173462ac66f1999aecdbb7643", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTcxNzM0OA==", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/587#discussion_r425717348", "body": "__[PMD]__ Found 'DU'-anomaly for variable 'limiter' (lines '106'-'175'). ([view](https://sider.review/gh/repos/113938008/pulls/587#issue-5561309))\n\n<details>\n\n| Rule | Ruleset | Priority |\n| - | - | - |\n| `DataflowAnomalyAnalysis` | Error Prone | 5 |\n\nReferences:\n- <https://pmd.github.io/pmd-6.23.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis>\n\nYou can [close this issue](https://sider.review/gh/repos/113938008/pulls/587#issue-5561309) if no need to fix it. [Learn more](https://help.sider.review/getting-started/working-with-issues).\n\n</details>", "bodyText": "[PMD] Found 'DU'-anomaly for variable 'limiter' (lines '106'-'175'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.23.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can close this issue if no need to fix it. Learn more.", "bodyHTML": "<p dir=\"auto\"><strong>[PMD]</strong> Found 'DU'-anomaly for variable 'limiter' (lines '106'-'175'). (<a href=\"https://sider.review/gh/repos/113938008/pulls/587#issue-5561309\" rel=\"nofollow\">view</a>)</p>\n<details>\n<table role=\"table\">\n<thead>\n<tr>\n<th>Rule</th>\n<th>Ruleset</th>\n<th>Priority</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>DataflowAnomalyAnalysis</code></td>\n<td>Error Prone</td>\n<td>5</td>\n</tr>\n</tbody>\n</table>\n<p dir=\"auto\">References:</p>\n<ul dir=\"auto\">\n<li><a href=\"https://pmd.github.io/pmd-6.23.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\" rel=\"nofollow\">https://pmd.github.io/pmd-6.23.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis</a></li>\n</ul>\n<p dir=\"auto\">You can <a href=\"https://sider.review/gh/repos/113938008/pulls/587#issue-5561309\" rel=\"nofollow\">close this issue</a> if no need to fix it. <a href=\"https://help.sider.review/getting-started/working-with-issues\" rel=\"nofollow\">Learn more</a>.</p>\n</details>", "author": "sider", "createdAt": "2020-05-15T10:41:06Z", "path": "src/test/java/org/fisco/bcos/channel/test/parallel/precompile/PerformanceDTTest.java", "diffHunk": "@@ -95,15 +95,15 @@ public void setCollector(PerformanceDTCollector collector) {\n         this.collector = collector;\n     }\n \n-    public void veryTransferData(ThreadPoolTaskExecutor threadPool) {\n+    public void veryTransferData(ThreadPoolTaskExecutor threadPool, BigInteger qps) {\n         List<DagTransferUser> allUser = dagUserMgr.getUserList();\n         Integer total_user = allUser.size();\n \n         AtomicInteger verify_success = new AtomicInteger(0);\n         AtomicInteger verify_failed = new AtomicInteger(0);\n \n         allUser = dagUserMgr.getUserList();\n-\n+        RateLimiter limiter = RateLimiter.create(qps.intValue());", "originalCommit": "1fb217f5adc966a173462ac66f1999aecdbb7643", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "07341c7741d6daaab726c1c0fcf99b4353add6bc", "url": "https://github.com/FISCO-BCOS/web3sdk/commit/07341c7741d6daaab726c1c0fcf99b4353add6bc", "message": "add qpslimiter when verifyTransferData", "committedDate": "2020-05-15T11:18:38Z", "type": "forcePushed"}, {"oid": "9eb213ac40e3f70e6548b117d7c1637e0a333029", "url": "https://github.com/FISCO-BCOS/web3sdk/commit/9eb213ac40e3f70e6548b117d7c1637e0a333029", "message": "add qpslimiter when verifyTransferData", "committedDate": "2020-05-15T11:34:19Z", "type": "commit"}, {"oid": "9eb213ac40e3f70e6548b117d7c1637e0a333029", "url": "https://github.com/FISCO-BCOS/web3sdk/commit/9eb213ac40e3f70e6548b117d7c1637e0a333029", "message": "add qpslimiter when verifyTransferData", "committedDate": "2020-05-15T11:34:19Z", "type": "forcePushed"}]}