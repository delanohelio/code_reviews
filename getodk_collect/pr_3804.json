{"pr_number": 3804, "pr_title": "Fixed maps offline", "pr_author": "grzesiek2010", "pr_createdAt": "2020-04-28T11:21:29Z", "pr_url": "https://github.com/getodk/collect/pull/3804", "timeline": [{"oid": "71e8ba5dcc05f54052635460c444b5d0da22a429", "url": "https://github.com/getodk/collect/commit/71e8ba5dcc05f54052635460c444b5d0da22a429", "message": "Fixed Mapbox to work offline", "committedDate": "2020-04-27T21:41:42Z", "type": "commit"}, {"oid": "647dc72d81aeeefc1a7f483490714950d403b31f", "url": "https://github.com/getodk/collect/commit/647dc72d81aeeefc1a7f483490714950d403b31f", "message": "Try to initialize GoogleMaps when the app is installed", "committedDate": "2020-04-28T09:27:04Z", "type": "commit"}, {"oid": "7507d08f4b73faeae6824253a4fe4123fb783170", "url": "https://github.com/getodk/collect/commit/7507d08f4b73faeae6824253a4fe4123fb783170", "message": "Try to initialize MapBox when the app is installed", "committedDate": "2020-04-28T11:02:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjUzNzkwOQ==", "url": "https://github.com/getodk/collect/pull/3804#discussion_r416537909", "body": "I know the fix for Mapbox doesn't look good you would probably ask: can't we do the same what works for Google: https://github.com/getodk/collect/pull/3804/commits/647dc72d81aeeefc1a7f483490714950d403b31f?\r\nUnfortunately we can't we need to display that map even if it's not visible like in this case to make sure `getMapAsync` and then `setStyle` is called. Only then MapBox is initialized properly and we can use it offline.", "bodyText": "I know the fix for Mapbox doesn't look good you would probably ask: can't we do the same what works for Google: 647dc72?\nUnfortunately we can't we need to display that map even if it's not visible like in this case to make sure getMapAsync and then setStyle is called. Only then MapBox is initialized properly and we can use it offline.", "bodyHTML": "<p dir=\"auto\">I know the fix for Mapbox doesn't look good you would probably ask: can't we do the same what works for Google: <a class=\"commit-link\" data-hovercard-type=\"commit\" data-hovercard-url=\"https://github.com/getodk/collect/commit/647dc72d81aeeefc1a7f483490714950d403b31f/hovercard\" href=\"https://github.com/getodk/collect/commit/647dc72d81aeeefc1a7f483490714950d403b31f\"><tt>647dc72</tt></a>?<br>\nUnfortunately we can't we need to display that map even if it's not visible like in this case to make sure <code>getMapAsync</code> and then <code>setStyle</code> is called. Only then MapBox is initialized properly and we can use it offline.</p>", "author": "grzesiek2010", "createdAt": "2020-04-28T11:28:25Z", "path": "collect_app/src/main/java/org/odk/collect/android/activities/SplashScreenActivity.java", "diffHunk": "@@ -225,4 +229,9 @@ public void run() {\n         };\n         t.start();\n     }\n+\n+    private void initMapBox() {", "originalCommit": "7507d08f4b73faeae6824253a4fe4123fb783170", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}