{"pr_number": 124, "pr_title": "feat: new sample - Get Model", "pr_author": "stephaniewang526", "pr_createdAt": "2020-01-23T23:23:00Z", "pr_url": "https://github.com/googleapis/java-bigquery/pull/124", "timeline": [{"oid": "c0af159ef5d888b954c9626b371387e59ac19acb", "url": "https://github.com/googleapis/java-bigquery/commit/c0af159ef5d888b954c9626b371387e59ac19acb", "message": "feat: add new sample - Tables: Relax column query append", "committedDate": "2020-01-17T16:48:02Z", "type": "commit"}, {"oid": "4ff1f36e7a152edf949cd4b729b03349558558b2", "url": "https://github.com/googleapis/java-bigquery/commit/4ff1f36e7a152edf949cd4b729b03349558558b2", "message": "nit", "committedDate": "2020-01-17T17:01:00Z", "type": "commit"}, {"oid": "1797825105c9e7db0fd9d479e6956bfae04d83a7", "url": "https://github.com/googleapis/java-bigquery/commit/1797825105c9e7db0fd9d479e6956bfae04d83a7", "message": "update based on comments", "committedDate": "2020-01-21T18:17:53Z", "type": "commit"}, {"oid": "c49b78b50527918dcdb64fbf11feb5d0af91a7e7", "url": "https://github.com/googleapis/java-bigquery/commit/c49b78b50527918dcdb64fbf11feb5d0af91a7e7", "message": "update exception handling", "committedDate": "2020-01-22T16:50:45Z", "type": "commit"}, {"oid": "a1393e4b3244a3c5db9e6a361909ae6368e6be48", "url": "https://github.com/googleapis/java-bigquery/commit/a1393e4b3244a3c5db9e6a361909ae6368e6be48", "message": "refactor", "committedDate": "2020-01-23T17:18:30Z", "type": "commit"}, {"oid": "3d35c13d828c1c4b7d396b78df8bc5f37742ef1c", "url": "https://github.com/googleapis/java-bigquery/commit/3d35c13d828c1c4b7d396b78df8bc5f37742ef1c", "message": "update base on comments", "committedDate": "2020-01-23T19:26:16Z", "type": "commit"}, {"oid": "d5c035ecb4a9bce4c64b7cbc8ce405edd7d45fce", "url": "https://github.com/googleapis/java-bigquery/commit/d5c035ecb4a9bce4c64b7cbc8ce405edd7d45fce", "message": "code refactoring", "committedDate": "2020-01-23T19:52:02Z", "type": "commit"}, {"oid": "0c13ae926fc8793621d15fa52da5037c01d1aa4a", "url": "https://github.com/googleapis/java-bigquery/commit/0c13ae926fc8793621d15fa52da5037c01d1aa4a", "message": "fix build errors", "committedDate": "2020-01-23T20:41:09Z", "type": "commit"}, {"oid": "b022684f2ad77ecb5db81a0371f72fe7926911d2", "url": "https://github.com/googleapis/java-bigquery/commit/b022684f2ad77ecb5db81a0371f72fe7926911d2", "message": "add debugging statements", "committedDate": "2020-01-23T21:36:18Z", "type": "commit"}, {"oid": "7d9118990f10af553733c209fd0855c898c91065", "url": "https://github.com/googleapis/java-bigquery/commit/7d9118990f10af553733c209fd0855c898c91065", "message": "remove unused exception", "committedDate": "2020-01-23T21:43:54Z", "type": "commit"}, {"oid": "3c0aab0f824fb9b73903dbac5ddd5108c45eeca8", "url": "https://github.com/googleapis/java-bigquery/commit/3c0aab0f824fb9b73903dbac5ddd5108c45eeca8", "message": "feat: new sample - Models: Get a model resource", "committedDate": "2020-01-23T23:21:56Z", "type": "commit"}, {"oid": "8fcb76dbf657633288ae0725d2320d5dfedb7276", "url": "https://github.com/googleapis/java-bigquery/commit/8fcb76dbf657633288ae0725d2320d5dfedb7276", "message": "feat: new sample - Models: Get a model resource", "committedDate": "2020-01-23T23:22:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTM2NjcwMA==", "url": "https://github.com/googleapis/java-bigquery/pull/124#discussion_r371366700", "body": "```suggestion\r\n          \"SELECT word FROM \" + sourceTable + \" WHERE word like '%is%' \";\r\n```", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      \"SELECT \" + \"word\\n\" + \"FROM \" + sourceTable + \"\\n\" + \"WHERE word like '%is%' \";\n          \n          \n            \n                      \"SELECT word FROM \" + sourceTable + \" WHERE word like '%is%' \";", "bodyHTML": "  <div class=\"my-2 border rounded-1 js-suggested-changes-blob diff-view js-check-bidi\" id=\"\">\n    <div class=\"f6 p-2 lh-condensed border-bottom d-flex\">\n      <div class=\"flex-auto flex-items-center color-fg-muted\">\n        Suggested change\n        <span class=\"tooltipped tooltipped-multiline tooltipped-s\" aria-label=\"This code change can be committed by users with write permissions.\">\n          <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-info hide-sm\">\n    <path fill-rule=\"evenodd\" d=\"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z\"></path>\n</svg>\n        </span>\n      </div>\n    </div>\n    <div itemprop=\"text\" class=\"blob-wrapper data file\" style=\"margin: 0; border: none; overflow-y: visible; overflow-x: auto;\">\n      <table class=\"d-table tab-size mb-0 width-full\" data-paste-markdown-skip=\"\">\n          <tbody><tr class=\"border-0\">\n            <td class=\"blob-num blob-num-deletion text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-deletion js-blob-code-deletion blob-code-marker-deletion\">          <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>SELECT <span class=\"pl-pds x x-first\">\"</span></span><span class=\"x\"> </span><span class=\"pl-k x\">+</span><span class=\"x\"> </span><span class=\"pl-s\"><span class=\"pl-pds x x-last\">\"</span>word<span class=\"pl-cce x x-first\">\\n</span><span class=\"pl-pds x\">\"</span></span><span class=\"x\"> </span><span class=\"pl-k x\">+</span><span class=\"x\"> </span><span class=\"pl-s\"><span class=\"pl-pds x x-last\">\"</span>FROM <span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">+</span> sourceTable <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"pl-cce x x-first\">\\n</span><span class=\"pl-pds x\">\"</span></span><span class=\"x\"> </span><span class=\"pl-k x\">+</span><span class=\"x\"> </span><span class=\"pl-s\"><span class=\"pl-pds x x-last\">\"</span>WHERE word like '%is%' <span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n          <tr class=\"border-0\">\n            <td class=\"blob-num blob-num-addition text-right border-0 px-2 py-1 lh-default\" data-line-number=\"\"></td>\n            <td class=\"border-0 px-2 py-1 blob-code-inner blob-code-addition js-blob-code-addition blob-code-marker-addition\">          <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>SELECT word<span class=\"x x-first x-last\"> </span>FROM <span class=\"pl-pds\">\"</span></span> <span class=\"pl-k\">+</span> sourceTable <span class=\"pl-k\">+</span> <span class=\"pl-s\"><span class=\"pl-pds\">\"</span><span class=\"x x-first x-last\"> </span>WHERE word like '%is%' <span class=\"pl-pds\">\"</span></span>;</td>\n          </tr>\n      </tbody></table>\n    </div>\n    <div class=\"js-apply-changes\"></div>\n  </div>\n", "author": "kurtisvg", "createdAt": "2020-01-27T17:06:34Z", "path": "samples/src/main/java/com/example/bigquery/RelaxTableQuery.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.bigquery;\n+\n+// [START bigquery_relax_column_query_append]\n+import com.google.cloud.bigquery.BigQuery;\n+import com.google.cloud.bigquery.BigQueryException;\n+import com.google.cloud.bigquery.BigQueryOptions;\n+import com.google.cloud.bigquery.Job;\n+import com.google.cloud.bigquery.JobId;\n+import com.google.cloud.bigquery.JobInfo;\n+import com.google.cloud.bigquery.JobInfo.SchemaUpdateOption;\n+import com.google.cloud.bigquery.JobInfo.WriteDisposition;\n+import com.google.cloud.bigquery.QueryJobConfiguration;\n+import com.google.cloud.bigquery.TableId;\n+import com.google.cloud.bigquery.TableResult;\n+import com.google.common.collect.ImmutableList;\n+import java.util.UUID;\n+\n+public class RelaxTableQuery {\n+\n+  public static void runRelaxTableQuery() throws Exception {\n+    // TODO(developer): Replace these variables before running the sample.\n+    String projectId = \"MY_PROJECT_ID\";\n+    String datasetName = \"MY_DATASET_NAME\";\n+    String tableName = \"MY_TABLE_NAME\";\n+    relaxTableQuery(projectId, datasetName, tableName);\n+  }\n+\n+  // To relax all columns in a destination table when you append data to it during a query job\n+  public static void relaxTableQuery(String projectId, String datasetName, String tableName)\n+      throws Exception {\n+    try {\n+      // Initialize client that will be used to send requests. This client only needs to be created\n+      // once, and can be reused for multiple requests.\n+      BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\n+\n+      TableId tableId = TableId.of(datasetName, tableName);\n+\n+      String sourceTable = \"`\" + projectId + \".\" + datasetName + \".\" + tableName + \"`\";\n+      String query =\n+          \"SELECT \" + \"word\\n\" + \"FROM \" + sourceTable + \"\\n\" + \"WHERE word like '%is%' \";", "originalCommit": "8fcb76dbf657633288ae0725d2320d5dfedb7276", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTM2ODU4Ng==", "url": "https://github.com/googleapis/java-bigquery/pull/124#discussion_r371368586", "body": "This looks out of place - What does this mean?  Where is the retry happening? Is the jobId required - if so, would it be better to set a specific one? ", "bodyText": "This looks out of place - What does this mean?  Where is the retry happening? Is the jobId required - if so, would it be better to set a specific one?", "bodyHTML": "<p dir=\"auto\">This looks out of place - What does this mean?  Where is the retry happening? Is the jobId required - if so, would it be better to set a specific one?</p>", "author": "kurtisvg", "createdAt": "2020-01-27T17:10:18Z", "path": "samples/src/main/java/com/example/bigquery/RelaxTableQuery.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.example.bigquery;\n+\n+// [START bigquery_relax_column_query_append]\n+import com.google.cloud.bigquery.BigQuery;\n+import com.google.cloud.bigquery.BigQueryException;\n+import com.google.cloud.bigquery.BigQueryOptions;\n+import com.google.cloud.bigquery.Job;\n+import com.google.cloud.bigquery.JobId;\n+import com.google.cloud.bigquery.JobInfo;\n+import com.google.cloud.bigquery.JobInfo.SchemaUpdateOption;\n+import com.google.cloud.bigquery.JobInfo.WriteDisposition;\n+import com.google.cloud.bigquery.QueryJobConfiguration;\n+import com.google.cloud.bigquery.TableId;\n+import com.google.cloud.bigquery.TableResult;\n+import com.google.common.collect.ImmutableList;\n+import java.util.UUID;\n+\n+public class RelaxTableQuery {\n+\n+  public static void runRelaxTableQuery() throws Exception {\n+    // TODO(developer): Replace these variables before running the sample.\n+    String projectId = \"MY_PROJECT_ID\";\n+    String datasetName = \"MY_DATASET_NAME\";\n+    String tableName = \"MY_TABLE_NAME\";\n+    relaxTableQuery(projectId, datasetName, tableName);\n+  }\n+\n+  // To relax all columns in a destination table when you append data to it during a query job\n+  public static void relaxTableQuery(String projectId, String datasetName, String tableName)\n+      throws Exception {\n+    try {\n+      // Initialize client that will be used to send requests. This client only needs to be created\n+      // once, and can be reused for multiple requests.\n+      BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\n+\n+      TableId tableId = TableId.of(datasetName, tableName);\n+\n+      String sourceTable = \"`\" + projectId + \".\" + datasetName + \".\" + tableName + \"`\";\n+      String query =\n+          \"SELECT \" + \"word\\n\" + \"FROM \" + sourceTable + \"\\n\" + \"WHERE word like '%is%' \";\n+\n+      QueryJobConfiguration queryConfig =\n+          QueryJobConfiguration.newBuilder(query)\n+              // Use standard SQL syntax for queries.\n+              // See: https://cloud.google.com/bigquery/sql-reference/\n+              .setUseLegacySql(false)\n+              .setSchemaUpdateOptions(ImmutableList.of(SchemaUpdateOption.ALLOW_FIELD_RELAXATION))\n+              .setWriteDisposition(WriteDisposition.WRITE_APPEND)\n+              .setDestinationTable(tableId)\n+              .build();\n+\n+      // Create a job ID so that we can safely retry.\n+      JobId jobId = JobId.of(UUID.randomUUID().toString());", "originalCommit": "8fcb76dbf657633288ae0725d2320d5dfedb7276", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "27eec9e17771c45146a40f010b00348abf805b24", "url": "https://github.com/googleapis/java-bigquery/commit/27eec9e17771c45146a40f010b00348abf805b24", "message": "Merge branch 'master' into get-model\n\n# Conflicts:\n#\tsamples/src/main/java/com/example/bigquery/RelaxTableQuery.java\n#\tsamples/src/test/java/com/example/bigquery/RelaxTableQueryIT.java", "committedDate": "2020-01-27T19:55:47Z", "type": "commit"}, {"oid": "181635c72743ab9dc503b9e65b5c79d91e8309a7", "url": "https://github.com/googleapis/java-bigquery/commit/181635c72743ab9dc503b9e65b5c79d91e8309a7", "message": "fix build error", "committedDate": "2020-01-27T20:08:39Z", "type": "commit"}]}