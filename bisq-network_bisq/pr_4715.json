{"pr_number": 4715, "pr_title": "Cleaner formatting for trading charts date axes", "pr_author": "deusmax", "pr_createdAt": "2020-10-27T19:26:55Z", "pr_url": "https://github.com/bisq-network/bisq/pull/4715", "timeline": [{"oid": "c0af9f96375cdc9b44c9de65ac5a8ef9fb024816", "url": "https://github.com/bisq-network/bisq/commit/c0af9f96375cdc9b44c9de65ac5a8ef9fb024816", "message": "Cleaner formatting for trading charts date axes\n\nClean up date axes style for easy reading. Made date labels shorter,\nwith clear visual correspondance to relevant axes tick mark.\nTick marks with labels are now larger than those without.\n\nSigned-off-by: Deus Max <deusmax@gmx.com>", "committedDate": "2020-10-28T12:23:05Z", "type": "commit"}, {"oid": "162c119285012122b574fd52dd73895342c011da", "url": "https://github.com/bisq-network/bisq/commit/162c119285012122b574fd52dd73895342c011da", "message": "Added date format for each chart interval period.\n\nProvide specific formats for each trade chart interval period, for added\nprecision and flexibility in formatting the X-axis. Covers suggestion in\nBisq PR#4715 for more compact date formats.", "committedDate": "2020-10-29T23:17:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE4NTQyNw==", "url": "https://github.com/bisq-network/bisq/pull/4715#discussion_r515185427", "body": "You might want to reformat the style of the switch statement so `fmt = \"...\"` are on separate lines.  Not sure codacy will complain about this, but other devs might want the switch style to be consistent with the rest of the code base.\r\n(This is the 1st time I've seen this style in Bisq;  I'm not saying there may be other examples in the code base.)\r\n\r\n```\r\nswitch (model.tickUnit) {\r\n                    case YEAR:\r\n                        fmt = \"yyyy\";\r\n                        break;\r\n                    case MONTH:\r\n                        fmt = \"MMMyy\";\r\n                        break;\r\n                    case WEEK:\r\n                    case DAY:\r\n                        fmt = \"dd/MMM\\nyyyy\";\r\n                        break;\r\n                    case HOUR:\r\n                    case MINUTE_10:\r\n                        fmt = \"HH:mm\\ndd/MMM\";\r\n                        break;\r\n                    default:        // nothing here\r\n                }\r\n\r\n```", "bodyText": "You might want to reformat the style of the switch statement so fmt = \"...\" are on separate lines.  Not sure codacy will complain about this, but other devs might want the switch style to be consistent with the rest of the code base.\n(This is the 1st time I've seen this style in Bisq;  I'm not saying there may be other examples in the code base.)\nswitch (model.tickUnit) {\n                    case YEAR:\n                        fmt = \"yyyy\";\n                        break;\n                    case MONTH:\n                        fmt = \"MMMyy\";\n                        break;\n                    case WEEK:\n                    case DAY:\n                        fmt = \"dd/MMM\\nyyyy\";\n                        break;\n                    case HOUR:\n                    case MINUTE_10:\n                        fmt = \"HH:mm\\ndd/MMM\";\n                        break;\n                    default:        // nothing here\n                }", "bodyHTML": "<p dir=\"auto\">You might want to reformat the style of the switch statement so <code>fmt = \"...\"</code> are on separate lines.  Not sure codacy will complain about this, but other devs might want the switch style to be consistent with the rest of the code base.<br>\n(This is the 1st time I've seen this style in Bisq;  I'm not saying there may be other examples in the code base.)</p>\n<div class=\"snippet-clipboard-content position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"switch (model.tickUnit) {\n                    case YEAR:\n                        fmt = &quot;yyyy&quot;;\n                        break;\n                    case MONTH:\n                        fmt = &quot;MMMyy&quot;;\n                        break;\n                    case WEEK:\n                    case DAY:\n                        fmt = &quot;dd/MMM\\nyyyy&quot;;\n                        break;\n                    case HOUR:\n                    case MINUTE_10:\n                        fmt = &quot;HH:mm\\ndd/MMM&quot;;\n                        break;\n                    default:        // nothing here\n                }\n\"><pre><code>switch (model.tickUnit) {\n                    case YEAR:\n                        fmt = \"yyyy\";\n                        break;\n                    case MONTH:\n                        fmt = \"MMMyy\";\n                        break;\n                    case WEEK:\n                    case DAY:\n                        fmt = \"dd/MMM\\nyyyy\";\n                        break;\n                    case HOUR:\n                    case MINUTE_10:\n                        fmt = \"HH:mm\\ndd/MMM\";\n                        break;\n                    default:        // nothing here\n                }\n\n</code></pre></div>", "author": "ghubstan", "createdAt": "2020-10-30T15:32:23Z", "path": "desktop/src/main/java/bisq/desktop/main/market/trades/TradesChartsView.java", "diffHunk": "@@ -479,11 +479,27 @@ private void layoutChart() {\n             @Override\n             public String toString(Number object) {\n                 long index = MathUtils.doubleToLong((double) object);\n+                // The last tick is on the chart edge, it is not well spaced with\n+                // the previous tick and interferes with its label.\n+                if (model.maxTicks + 1 == index) return \"\";\n+\n                 long time = model.getTimeFromTickIndex(index);\n-                if (model.tickUnit.ordinal() <= TradesChartsViewModel.TickUnit.DAY.ordinal())\n-                    return index % 4 == 0 ? DisplayUtils.formatDateAxis(new Date(time)) : \"\";\n-                else\n-                    return index % 3 == 0 ? DisplayUtils.formatTimeAxis(new Date(time)) : \"\";\n+                String fmt = \"\";\n+                switch (model.tickUnit) {\n+                case YEAR  : fmt = \"yyyy\";\n+                    break;\n+                case MONTH : fmt = \"MMMyy\";\n+                    break;\n+                case WEEK  :\n+                case DAY   : fmt = \"dd/MMM\\nyyyy\";\n+                    break;\n+                case HOUR  :\n+                case MINUTE_10: fmt = \"HH:mm\\ndd/MMM\";\n+                    break;\n+                default:        // nothing here", "originalCommit": "162c119285012122b574fd52dd73895342c011da", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "24784cb22da25f6e9c47b321d382012ba0d50234", "url": "https://github.com/bisq-network/bisq/commit/24784cb22da25f6e9c47b321d382012ba0d50234", "message": "Minor style formatting.\n\nFixed a switch statement formatting to conform with Bisq code style.", "committedDate": "2020-10-31T12:48:18Z", "type": "commit"}]}