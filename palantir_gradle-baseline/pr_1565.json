{"pr_number": 1565, "pr_title": "Fix unit tests on java 15", "pr_author": "fawind", "pr_createdAt": "2020-11-25T11:36:06Z", "pr_url": "https://github.com/palantir/gradle-baseline/pull/1565", "timeline": [{"oid": "61b3009d0b0278ce1803a354462317eb329c3415", "url": "https://github.com/palantir/gradle-baseline/commit/61b3009d0b0278ce1803a354462317eb329c3415", "message": "Increase release version in tests", "committedDate": "2020-11-25T11:01:12Z", "type": "commit"}, {"oid": "3b234d37aa83cb4135ed9614b9f82c83cf1a5716", "url": "https://github.com/palantir/gradle-baseline/commit/3b234d37aa83cb4135ed9614b9f82c83cf1a5716", "message": "Fix enable preview test", "committedDate": "2020-11-25T11:29:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDMxMDQ3OA==", "url": "https://github.com/palantir/gradle-baseline/pull/1565#discussion_r530310478", "body": "This is to fix this error ([ref](https://app.circleci.com/pipelines/github/palantir/gradle-baseline/1492/workflows/f8aaf40f-f7fb-4a28-8860-80f00df4532d/jobs/21807)):\r\n```\r\ninvalid source release 14 with --enable-preview\r\n    (preview language features are only supported for release 15)\r\n```\r\n\r\nI think that's a restriction by the java-compiler that enable-preview has to be used with the latest release but could not find good documentation on this.", "bodyText": "This is to fix this error (ref):\ninvalid source release 14 with --enable-preview\n    (preview language features are only supported for release 15)\n\nI think that's a restriction by the java-compiler that enable-preview has to be used with the latest release but could not find good documentation on this.", "bodyHTML": "<p dir=\"auto\">This is to fix this error (<a href=\"https://app.circleci.com/pipelines/github/palantir/gradle-baseline/1492/workflows/f8aaf40f-f7fb-4a28-8860-80f00df4532d/jobs/21807\" rel=\"nofollow\">ref</a>):</p>\n<div class=\"snippet-clipboard-content position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"invalid source release 14 with --enable-preview\n    (preview language features are only supported for release 15)\"><pre><code>invalid source release 14 with --enable-preview\n    (preview language features are only supported for release 15)\n</code></pre></div>\n<p dir=\"auto\">I think that's a restriction by the java-compiler that enable-preview has to be used with the latest release but could not find good documentation on this.</p>", "author": "fawind", "createdAt": "2020-11-25T11:40:59Z", "path": "baseline-error-prone/src/test/java/com/palantir/baseline/errorprone/UnnecessaryParenthesesTest.java", "diffHunk": "@@ -29,7 +29,7 @@\n     public void testSwitchExpression() {\n         CompilationTestHelper compilationHelper = CompilationTestHelper.newInstance(\n                         UnnecessaryParentheses.class, getClass())\n-                .setArgs(ImmutableList.of(\"--enable-preview\", \"--release\", \"14\"));\n+                .setArgs(ImmutableList.of(\"--enable-preview\", \"--release\", \"15\"));", "originalCommit": "3b234d37aa83cb4135ed9614b9f82c83cf1a5716", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDM2MjM1Mw==", "url": "https://github.com/palantir/gradle-baseline/pull/1565#discussion_r530362353", "bodyText": "Yep I stumbled across this restriction too when writing #1549\n\njavac in JDK $N accepts the --enable-preview flag only in combination with --release $N or -source $N. (For brevity, only --release is mentioned in the rest of this JEP.)\n\nhttps://openjdk.java.net/jeps/12", "author": "iamdanfox", "createdAt": "2020-11-25T13:10:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDMxMDQ3OA=="}], "type": "inlineReview"}]}